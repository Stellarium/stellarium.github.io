<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 3.13.0-92-generic #139-Ubuntu SMP Tue Jun 28 20:42:26 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelCore.cpp - StelCore.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelCore.cpp&nbsp;</th><th> </th><th>&nbsp;StelCore.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 40</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 40</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocationMgr.hpp"</td><td> </td><td class="right">#include "StelLocationMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObserver.hpp"</td><td> </td><td class="right">#include "StelObserver.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "SolarSystem.hpp"</td><td> </td><td class="right">#include "SolarSystem.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "LandscapeMgr.hpp"</td><td> </td><td class="right">#include "LandscapeMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelActionMgr.hpp"</td><td> </td><td class="right">#include "StelActionMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelPropertyMgr.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelFileMgr.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "EphemWrapper.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "precession.h"</td><td> </td><td class="right">#include "precession.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMetaEnum&gt;</td><td> </td><td class="right">#include &lt;QMetaEnum&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;iostream&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;fstream&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Init statics transfo matrices</td><td> </td><td class="right">// Init statics transfo matrices</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// See vsop87.doc:</td><td> </td><td class="right">// See vsop87.doc:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matJ2000ToVsop87(Mat4d::xrotation(-23.439280305555555
5556*(M_PI/180)) * Mat4d::zrotation(0.0000275*(M_PI/180)));</td><td> </td><td class="right">const Mat4d StelCore::matJ2000ToVsop87(Mat4d::xrotation(-23.439280305555555
5556*(M_PI/180)) * Mat4d::zrotation(0.0000275*(M_PI/180)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matVsop87ToJ2000(matJ2000ToVsop87.transpose());</td><td> </td><td class="right">const Mat4d StelCore::matVsop87ToJ2000(matJ2000ToVsop87.transpose());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matJ2000ToGalactic(-0.054875539726, 0.494109453312, -
0.867666135858, 0, -0.873437108010, -0.444829589425, -0.198076386122, 0, -0
.483834985808, 0.746982251810, 0.455983795705, 0, 0, 0, 0, 1);</td><td> </td><td class="right">const Mat4d StelCore::matJ2000ToGalactic(-0.054875539726, 0.494109453312, -
0.867666135858, 0, -0.873437108010, -0.444829589425, -0.198076386122, 0, -0
.483834985808, 0.746982251810, 0.455983795705, 0, 0, 0, 0, 1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matGalacticToJ2000(matJ2000ToGalactic.transpose());</td><td> </td><td class="right">const Mat4d StelCore::matGalacticToJ2000(matJ2000ToGalactic.transpose());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const double StelCore::JD_SECOND=0.000011574074074074074074; // 1/(24*60*60
)=1/86400</td><td> </td><td class="right">const double StelCore::JD_SECOND=0.000011574074074074074074; // 1/(24*60*60
)=1/86400</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const double StelCore::JD_MINUTE=0.00069444444444444444444;  // 1/(24*60)  
 =1/1440</td><td> </td><td class="right">const double StelCore::JD_MINUTE=0.00069444444444444444444;  // 1/(24*60)  
 =1/1440</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const double StelCore::JD_HOUR  =0.041666666666666666666;    // 1/24</td><td> </td><td class="right">const double StelCore::JD_HOUR  =0.041666666666666666666;    // 1/24</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 71</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 77</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , movementMgr(NULL)</td><td> </td><td class="right">       , movementMgr(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , geodesicGrid(NULL)</td><td> </td><td class="right">       , geodesicGrid(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , currentProjectionType(ProjectionStereographic)</td><td> </td><td class="right">       , currentProjectionType(ProjectionStereographic)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , currentDeltaTAlgorithm(EspenakMeeus)</td><td> </td><td class="right">       , currentDeltaTAlgorithm(EspenakMeeus)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , position(NULL)</td><td> </td><td class="right">       , position(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagUseNutation(true)</td><td> </td><td class="right">       , flagUseNutation(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagUseTopocentricCoordinates(true)</td><td> </td><td class="right">       , flagUseTopocentricCoordinates(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , timeSpeed(JD_SECOND)</td><td> </td><td class="right">       , timeSpeed(JD_SECOND)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , JD(0.,0.)</td><td> </td><td class="right">       , JD(0.,0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , presetSkyTime(0.)</td><td> </td><td class="right">       , presetSkyTime(0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       , <span class="delete">s</span>econdsOfLastJDUpdate(0.)</td><td> </td><td class="rblock">       , <span class="insert">milliS</span>econdsOfLastJDUpdate(0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , jdOfLastJDUpdate(0.)</td><td> </td><td class="right">       , jdOfLastJDUpdate(0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , deltaTCustomNDot(-26.0)</td><td> </td><td class="right">       , deltaTCustomNDot(-26.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , deltaTCustomYear(1820.0)</td><td> </td><td class="right">       , deltaTCustomYear(1820.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">, de430Available(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , de431Available(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , de430Active(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , de431Active(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">toneConverter</span> = new StelToneReproducer();</td><td> </td><td class="rblock">       <span class="insert">setObjectName("StelCore");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       registerMathMetaTypes();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       toneReproducer</span> = new StelToneReproducer();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">milliSecondsOfLastJDUpdate = QDateTime::currentMSecsSinceEpoch();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Create and initialize the default projector params</td><td> </td><td class="right">       // Create and initialize the default projector params</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString tmpstr = conf-&gt;value("projection/viewport").toString();</td><td> </td><td class="right">       QString tmpstr = conf-&gt;value("projection/viewport").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.maskType = StelProjector::stringToMaskType(tm
pstr);</td><td> </td><td class="right">       currentProjectorParams.maskType = StelProjector::stringToMaskType(tm
pstr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int viewport_width = conf-&gt;value("projection/viewport_width", 
currentProjectorParams.viewportXywh[2]).toInt();</td><td> </td><td class="right">       const int viewport_width = conf-&gt;value("projection/viewport_width", 
currentProjectorParams.viewportXywh[2]).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int viewport_height = conf-&gt;value("projection/viewport_height"
, currentProjectorParams.viewportXywh[3]).toInt();</td><td> </td><td class="right">       const int viewport_height = conf-&gt;value("projection/viewport_height"
, currentProjectorParams.viewportXywh[3]).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int viewport_x = conf-&gt;value("projection/viewport_x", 0).toInt
();</td><td> </td><td class="right">       const int viewport_x = conf-&gt;value("projection/viewport_x", 0).toInt
();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int viewport_y = conf-&gt;value("projection/viewport_y", 0).toInt
();</td><td> </td><td class="right">       const int viewport_y = conf-&gt;value("projection/viewport_y", 0).toInt
();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.viewportXywh.set(viewport_x,viewport_y,viewpo
rt_width,viewport_height);</td><td> </td><td class="right">       currentProjectorParams.viewportXywh.set(viewport_x,viewport_y,viewpo
rt_width,viewport_height);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 109</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 123</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.gravityLabels = conf-&gt;value("viewing/flag_gra
vity_labels").toBool();</td><td> </td><td class="right">       currentProjectorParams.gravityLabels = conf-&gt;value("viewing/flag_gra
vity_labels").toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.devicePixelsPerPixel = StelApp::getInstance()
.getDevicePixelsPerPixel();</td><td> </td><td class="right">       currentProjectorParams.devicePixelsPerPixel = StelApp::getInstance()
.getDevicePixelsPerPixel();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagUseNutation=conf-&gt;value("astro/flag_nutation", true).toBool();</td><td> </td><td class="right">       flagUseNutation=conf-&gt;value("astro/flag_nutation", true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagUseTopocentricCoordinates=conf-&gt;value("astro/flag_topocentric_co
ordinates", true).toBool();</td><td> </td><td class="right">       flagUseTopocentricCoordinates=conf-&gt;value("astro/flag_topocentric_co
ordinates", true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelCore::~StelCore()</td><td> </td><td class="right">StelCore::~StelCore()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       delete tone<span class="delete">Converter; toneConvert</span>er=NULL;</td><td> </td><td class="rblock">       delete tone<span class="insert">Reproducer; toneReproduc</span>er=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete geodesicGrid; geodesicGrid=NULL;</td><td> </td><td class="right">       delete geodesicGrid; geodesicGrid=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete skyDrawer; skyDrawer=NULL;</td><td> </td><td class="right">       delete skyDrawer; skyDrawer=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete position; position=NULL;</td><td> </td><td class="right">       delete position; position=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> Load core data and initialize with default values</td><td> </td><td class="right"> Load core data and initialize with default values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::init()</td><td> </td><td class="right">void StelCore::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 191</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 205</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setTodayTime(getInitTodayTime());</td><td> </td><td class="right">               setTodayTime(getInitTodayTime());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute transform matrices between coordinates systems</td><td> </td><td class="right">       // Compute transform matrices between coordinates systems</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       updateTransformMatrices();</td><td> </td><td class="right">       updateTransformMatrices();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementMgr = new StelMovementMgr(this);</td><td> </td><td class="right">       movementMgr = new StelMovementMgr(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementMgr-&gt;init();</td><td> </td><td class="right">       movementMgr-&gt;init();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.fov = movementMgr-&gt;getInitFov();</td><td> </td><td class="right">       currentProjectorParams.fov = movementMgr-&gt;getInitFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getModuleMgr().registerModule(movementMgr);</td><td> </td><td class="right">       StelApp::getInstance().getModuleMgr().registerModule(movementMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">StelPropertyMgr* propMgr = StelApp::getInstance().getStelPropertyMan</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ager();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyDrawer = new StelSkyDrawer(this);</td><td> </td><td class="right">       skyDrawer = new StelSkyDrawer(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyDrawer-&gt;init();</td><td> </td><td class="right">       skyDrawer-&gt;init();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">propMgr-&gt;registerObject(skyDrawer);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       propMgr-&gt;registerObject(this);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCurrentProjectionTypeKey(getDefaultProjectionTypeKey());</td><td> </td><td class="right">       setCurrentProjectionTypeKey(getDefaultProjectionTypeKey());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       updateMaximumFov();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Register all the core actions.</td><td> </td><td class="right">       // Register all the core actions.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString timeGroup = N_("Date and Time");</td><td> </td><td class="right">       QString timeGroup = N_("Date and Time");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString movementGroup = N_("Movement and Selection");</td><td> </td><td class="right">       QString movementGroup = N_("Movement and Selection");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString displayGroup = N_("Display Options");</td><td> </td><td class="right">       QString displayGroup = N_("Display Options");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelActionMgr* actionsMgr = StelApp::getInstance().getStelActionMana
ger();</td><td> </td><td class="right">       StelActionMgr* actionsMgr = StelApp::getInstance().getStelActionMana
ger();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed", timeGroup, N_("In
crease time speed"), this, "increaseTimeSpeed()", "L");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed", timeGroup, N_("In
crease time speed"), this, "increaseTimeSpeed()", "L");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed", timeGroup, N_("De
crease time speed"), this, "decreaseTimeSpeed()", "J");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed", timeGroup, N_("De
crease time speed"), this, "decreaseTimeSpeed()", "J");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed_Less", timeGroup, N
_("Increase time speed (a little)"), this, "increaseTimeSpeedLess()", "Shif
t+L");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed_Less", timeGroup, N
_("Increase time speed (a little)"), this, "increaseTimeSpeedLess()", "Shif
t+L");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed_Less", timeGroup, N
_("Decrease time speed (a little)"), this, "decreaseTimeSpeedLess()", "Shif
t+J");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed_Less", timeGroup, N
_("Decrease time speed (a little)"), this, "decreaseTimeSpeedLess()", "Shif
t+J");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 249</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 269</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Mean_Tropical_Month", timeGrou
p, N_("Subtract 1 mean tropical month"), this, "subtractMeanTropicalMonth()
");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Mean_Tropical_Month", timeGrou
p, N_("Subtract 1 mean tropical month"), this, "subtractMeanTropicalMonth()
");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Mean_Tropical_Year", timeGroup
, N_("Subtract 1 mean tropical year"), this, "subtractMeanTropicalYear()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Mean_Tropical_Year", timeGroup
, N_("Subtract 1 mean tropical year"), this, "subtractMeanTropicalYear()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Mean_Tropical_Century", timeGr
oup, N_("Subtract 100 mean tropical years"), this, "subtractMeanTropicalYea
rs()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Mean_Tropical_Century", timeGr
oup, N_("Subtract 100 mean tropical years"), this, "subtractMeanTropicalYea
rs()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Tropical_Year", timeGroup, N_(
"Subtract 1 tropical year"), this, "subtractTropicalYear()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Tropical_Year", timeGroup, N_(
"Subtract 1 tropical year"), this, "subtractTropicalYear()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Julian_Year", timeGroup, N_("S
ubtract 1 Julian year"), this, "subtractJulianYear()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Julian_Year", timeGroup, N_("S
ubtract 1 Julian year"), this, "subtractJulianYear()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Julian_Century", timeGroup, N_
("Subtract 1 Julian century"), this, "subtractJulianYears()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Julian_Century", timeGroup, N_
("Subtract 1 Julian century"), this, "subtractJulianYears()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Gaussian_Year", timeGroup, N_(
"Subtract 1 Gaussian year"), this, "subtractGaussianYear()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Gaussian_Year", timeGroup, N_(
"Subtract 1 Gaussian year"), this, "subtractGaussianYear()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSet_Home_Planet_To_Selected", movementG
roup, N_("Set home planet to selected planet"), this, "moveObserverToSelect
ed()", "Ctrl+G");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSet_Home_Planet_To_Selected", movementG
roup, N_("Set home planet to selected planet"), this, "moveObserverToSelect
ed()", "Ctrl+G");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionGo_Home_Global", movementGroup, N_("Go 
to home"), this, "returnToHome()", "Ctrl+H");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionGo_Home_Global", movementGroup, N_("Go 
to home"), this, "returnToHome()", "Ctrl+H");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionHorizontal_Flip", displayGroup, N_("Fli
p scene horizontally"), this, "flipHorz", "Ctrl+Shift+H", "", true);</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionHorizontal_Flip", displayGroup, N_("Fli
p scene horizontally"), this, "flipHorz", "Ctrl+Shift+H", "", true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionVertical_Flip", displayGroup, N_("Flip 
scene vertically"), this, "flipVert", "Ctrl+Shift+V", "", true);</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionVertical_Flip", displayGroup, N_("Flip 
scene vertically"), this, "flipVert", "Ctrl+Shift+V", "", true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString StelCore::getDefaultProjectionTypeKey() const</td><td> </td><td class="right">QString StelCore::getDefaultProjectionTypeKey() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return conf-&gt;value("projection/type", "ProjectionStereographic").toS
tring();</td><td> </td><td class="right">       return conf-&gt;value("projection/type", "ProjectionStereographic").toS
tring();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the shared instance of StelGeodesicGrid.</td><td> </td><td class="right">// Get the shared instance of StelGeodesicGrid.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// The returned instance is garanteed to allow for at least maxLevel levels</td><td> </td><td class="right">// The returned instance is garanteed to allow for at least maxLevel levels</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 318</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 338</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ProjectionMercator:</td><td> </td><td class="right">               case ProjectionMercator:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       prj = StelProjectorP(new StelProjectorMercator(model
ViewTransform));</td><td> </td><td class="right">                       prj = StelProjectorP(new StelProjectorMercator(model
ViewTransform));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ProjectionOrthographic:</td><td> </td><td class="right">               case ProjectionOrthographic:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       prj = StelProjectorP(new StelProjectorOrthographic(m
odelViewTransform));</td><td> </td><td class="right">                       prj = StelProjectorP(new StelProjectorOrthographic(m
odelViewTransform));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ProjectionSinusoidal:</td><td> </td><td class="right">               case ProjectionSinusoidal:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       prj = StelProjectorP(new StelProjectorSinusoidal(mod
elViewTransform));</td><td> </td><td class="right">                       prj = StelProjectorP(new StelProjectorSinusoidal(mod
elViewTransform));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">case ProjectionMiller:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       prj = StelProjectorP(new StelProjectorMiller(modelVi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ewTransform));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default:</td><td> </td><td class="right">               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Unknown projection type: " &lt;&lt; (int)(p
rojType) &lt;&lt; "using ProjectionStereographic instead";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Unknown projection type: " &lt;&lt; (int)(p
rojType) &lt;&lt; "using ProjectionStereographic instead";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       prj = StelProjectorP(new StelProjectorStereographic(
modelViewTransform));</td><td> </td><td class="right">                       prj = StelProjectorP(new StelProjectorStereographic(
modelViewTransform));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Q_ASSERT(0);</td><td> </td><td class="right">                       Q_ASSERT(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       prj-&gt;init(currentProjectorParams);</td><td> </td><td class="right">       prj-&gt;init(currentProjectorParams);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return prj;</td><td> </td><td class="right">       return prj;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get an instance of projector using the current display parameters from N
avigation, StelMovementMgr</td><td> </td><td class="right">// Get an instance of projector using the current display parameters from N
avigation, StelMovementMgr</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 355</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 378</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        return getProjection(getGalacticModelViewTransform(
refractionMode));</td><td> </td><td class="right">                        return getProjection(getGalacticModelViewTransform(
refractionMode));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default:</td><td> </td><td class="right">               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qDebug() &lt;&lt; "Unknown reference frame type: " &lt;&lt; (int
)frameType &lt;&lt; ".";</td><td> </td><td class="right">                       qDebug() &lt;&lt; "Unknown reference frame type: " &lt;&lt; (int
)frameType &lt;&lt; ".";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(0);</td><td> </td><td class="right">       Q_ASSERT(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return getProjection2d();</td><td> </td><td class="right">       return getProjection2d();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelToneReproducer* StelCore::getToneReproducer()</td><td> </td><td class="right">StelToneReproducer* StelCore::getToneReproducer()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return tone<span class="delete">Convert</span>er;</td><td> </td><td class="rblock">       return tone<span class="insert">Reproduc</span>er;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const StelToneReproducer* StelCore::getToneReproducer() const</td><td> </td><td class="right">const StelToneReproducer* StelCore::getToneReproducer() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return tone<span class="delete">Convert</span>er;</td><td> </td><td class="rblock">       return tone<span class="insert">Reproduc</span>er;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelSkyDrawer* StelCore::getSkyDrawer()</td><td> </td><td class="right">StelSkyDrawer* StelCore::getSkyDrawer()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return skyDrawer;</td><td> </td><td class="right">       return skyDrawer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const StelSkyDrawer* StelCore::getSkyDrawer() const</td><td> </td><td class="right">const StelSkyDrawer* StelCore::getSkyDrawer() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return skyDrawer;</td><td> </td><td class="right">       return skyDrawer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 461</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 484</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> Update core state after drawing modules</td><td> </td><td class="right"> Update core state after drawing modules</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::postDraw()</td><td> </td><td class="right">void StelCore::postDraw()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(getProjection(StelCore::FrameJ2000));</td><td> </td><td class="right">       StelPainter sPainter(getProjection(StelCore::FrameJ2000));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.drawViewportShape();</td><td> </td><td class="right">       sPainter.drawViewportShape();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void StelCore::<span class="delete">setCurrentProjectionType(ProjectionType type</span>)</td><td> </td><td class="rblock">void StelCore::<span class="insert">updateMaximumFov(</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       currentProjectionType=type;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double savedFov = currentProjectorParams.fov;</td><td> </td><td class="right">       const double savedFov = currentProjectorParams.fov;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.fov = 0.0001;    // Avoid crash</td><td> </td><td class="right">       currentProjectorParams.fov = 0.0001;    // Avoid crash</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double newMaxFov = getProjection(StelProjector::ModelViewTranformP(n
ew StelProjector::Mat4dTransform(Mat4d::identity())))-&gt;getMaxFov();</td><td> </td><td class="right">       double newMaxFov = getProjection(StelProjector::ModelViewTranformP(n
ew StelProjector::Mat4dTransform(Mat4d::identity())))-&gt;getMaxFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementMgr-&gt;setMaxFov(newMaxFov);</td><td> </td><td class="right">       movementMgr-&gt;setMaxFov(newMaxFov);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.fov = qMin(newMaxFov, savedFov);</td><td> </td><td class="right">       currentProjectorParams.fov = qMin(newMaxFov, savedFov);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setCurrentProjectionType(ProjectionType type)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(type!=currentProjectionType)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               currentProjectionType=type;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               updateMaximumFov();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit currentProjectionTypeChanged(type);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit currentProjectionTypeKeyChanged(getCurrentProjectionTyp</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eKey());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelCore::ProjectionType StelCore::getCurrentProjectionType() const</td><td> </td><td class="right">StelCore::ProjectionType StelCore::getCurrentProjectionType() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return currentProjectionType;</td><td> </td><td class="right">       return currentProjectionType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set the current projection type to use</td><td> </td><td class="right">//! Set the current projection type to use</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setCurrentProjectionTypeKey(QString key)</td><td> </td><td class="right">void StelCore::setCurrentProjectionTypeKey(QString key)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("ProjectionType"));</td><td> </td><td class="right">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("ProjectionType"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ProjectionType newType = (ProjectionType)en.keyToValue(key.toLatin1(
).data());</td><td> </td><td class="right">       ProjectionType newType = (ProjectionType)en.keyToValue(key.toLatin1(
).data());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 522</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 556</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.gravityLabels = gravity;</td><td> </td><td class="right">       currentProjectorParams.gravityLabels = gravity;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setDefaultAngleForGravityText(float a)</td><td> </td><td class="right">void StelCore::setDefaultAngleForGravityText(float a)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.defaultAngleForGravityText = a;</td><td> </td><td class="right">       currentProjectorParams.defaultAngleForGravityText = a;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setFlipHorz(bool flip)</td><td> </td><td class="right">void StelCore::setFlipHorz(bool flip)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       currentProjectorParams.flipHorz = flip;</td><td> </td><td class="rblock">       <span class="insert">if (currentProjectorParams.flipHorz != flip)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               currentProjectorParams.flipHorz = flip;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">emit flipHorzChanged(flip);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setFlipVert(bool flip)</td><td> </td><td class="right">void StelCore::setFlipVert(bool flip)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       currentProjectorParams.flipVert = flip;</td><td> </td><td class="rblock">       <span class="insert">if (currentProjectorParams.flipVert != flip)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               currentProjectorParams.flipVert = flip;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">emit flipVertChanged(flip);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool StelCore::getFlipHorz(void) const</td><td> </td><td class="right">bool StelCore::getFlipHorz(void) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return currentProjectorParams.flipHorz;</td><td> </td><td class="right">       return currentProjectorParams.flipHorz;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool StelCore::getFlipVert(void) const</td><td> </td><td class="right">bool StelCore::getFlipVert(void) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return currentProjectorParams.flipVert;</td><td> </td><td class="right">       return currentProjectorParams.flipVert;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Get current value for horizontal viewport offset [-50...50]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">double StelCore::getViewportHorizontalOffset(void)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return (currentProjectorParams.viewportCenterOffset[0] * 100.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Set horizontal viewport offset. Argument will be clamped to be inside [-</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">50...50]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setViewportHorizontalOffset(double newOffsetPct)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenterOffset[0]=0.01f* qMin(50., qMax</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">(-50., newOffsetPct));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenter.set(currentProjectorParams.vie</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">wportXywh[0]+(0.5f+currentProjectorParams.viewportCenterOffset.v[0])*curren</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tProjectorParams.viewportXywh[2],</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               currentProjectorParams.viewp</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ortXywh[1]+(0.5f+currentProjectorParams.viewportCenterOffset.v[1])*currentP</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">rojectorParams.viewportXywh[3]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Get current value for vertical viewport offset [-50...50]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">double StelCore::getViewportVerticalOffset(void)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return (currentProjectorParams.viewportCenterOffset[1] * 100.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Set vertical viewport offset. Argument will be clamped to be inside [-50</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">...50]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setViewportVerticalOffset(double newOffsetPct)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenterOffset[1]=0.01f* qMin(50., qMax</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">(-50., newOffsetPct));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenter.set(currentProjectorParams.vie</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">wportXywh[0]+(0.5f+currentProjectorParams.viewportCenterOffset.v[0])*curren</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tProjectorParams.viewportXywh[2],</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               currentProjectorParams.viewp</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ortXywh[1]+(0.5f+currentProjectorParams.viewportCenterOffset.v[1])*currentP</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">rojectorParams.viewportXywh[3]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setViewportStretch(float stretch)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.widthStretch=qMax(0.001f, stretch);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString StelCore::getDefaultLocationID() const</td><td> </td><td class="right">QString StelCore::getDefaultLocationID() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return defaultLocationID;</td><td> </td><td class="right">       return defaultLocationID;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString StelCore::projectionTypeKeyToNameI18n(const QString&amp; key) const</td><td> </td><td class="right">QString StelCore::projectionTypeKeyToNameI18n(const QString&amp; key) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("ProjectionType"));</td><td> </td><td class="right">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("ProjectionType"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString s(getProjection(StelProjector::ModelViewTranformP(new StelPr
ojector::Mat4dTransform(Mat4d::identity())), (ProjectionType)en.keyToValue(
key.toLatin1()))-&gt;getNameI18());</td><td> </td><td class="right">       QString s(getProjection(StelProjector::ModelViewTranformP(new StelPr
ojector::Mat4dTransform(Mat4d::identity())), (ProjectionType)en.keyToValue(
key.toLatin1()))-&gt;getNameI18());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return s;</td><td> </td><td class="right">       return s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 868</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 941</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       landscapeMgr-&gt;setFlagAtmosphere(p-&gt;hasAtmosphere() &amp;&amp; conf-&gt;value("l
andscape/flag_atmosphere", true).toBool());</td><td> </td><td class="right">       landscapeMgr-&gt;setFlagAtmosphere(p-&gt;hasAtmosphere() &amp;&amp; conf-&gt;value("l
andscape/flag_atmosphere", true).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       landscapeMgr-&gt;setFlagFog(p-&gt;hasAtmosphere() &amp;&amp; conf-&gt;value("landscap
e/flag_fog", true).toBool());</td><td> </td><td class="right">       landscapeMgr-&gt;setFlagFog(p-&gt;hasAtmosphere() &amp;&amp; conf-&gt;value("landscap
e/flag_fog", true).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GETSTELMODULE(StelObjectMgr)-&gt;unSelect();</td><td> </td><td class="right">       GETSTELMODULE(StelObjectMgr)-&gt;unSelect();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMovementMgr* smmgr = getMovementMgr();</td><td> </td><td class="right">       StelMovementMgr* smmgr = getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       smmgr-&gt;setViewDirectionJ2000(altAzToJ2000(smmgr-&gt;getInitViewingDirec
tion(), StelCore::RefractionOff));</td><td> </td><td class="right">       smmgr-&gt;setViewDirectionJ2000(altAzToJ2000(smmgr-&gt;getInitViewingDirec
tion(), StelCore::RefractionOff));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       smmgr-&gt;zoomTo(smmgr-&gt;getInitFov(), 1.);</td><td> </td><td class="right">       smmgr-&gt;zoomTo(smmgr-&gt;getInitFov(), 1.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">double StelCore::getJDOfLastJDUpdate() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return jdOfLastJDUpdate;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setMilliSecondsOfLastJDUpdate(qint64 millis)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       milliSecondsOfLastJDUpdate = millis;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">qint64 StelCore::getMilliSecondsOfLastJDUpdate() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return milliSecondsOfLastJDUpdate;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setJD(double newJD)</td><td> </td><td class="right">void StelCore::setJD(double newJD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       JD.first=newJD;</td><td> </td><td class="right">       JD.first=newJD;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       JD.second=computeDeltaT(newJD);</td><td> </td><td class="right">       JD.second=computeDeltaT(newJD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       resetSync();</td><td> </td><td class="right">       resetSync();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double StelCore::getJD() const</td><td> </td><td class="right">double StelCore::getJD() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return JD.first;</td><td> </td><td class="right">       return JD.first;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 980</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1068</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const QSharedPointer&lt;Planet&gt; StelCore::getCurrentPlanet() const</td><td> </td><td class="right">const QSharedPointer&lt;Planet&gt; StelCore::getCurrentPlanet() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return position-&gt;getHomePlanet();</td><td> </td><td class="right">       return position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const StelObserver *StelCore::getCurrentObserver() const</td><td> </td><td class="right">const StelObserver *StelCore::getCurrentObserver() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return position;</td><td> </td><td class="right">       return position;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setObserver(StelObserver *obs)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       delete position;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       position = obs;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Smoothly move the observer to the given location</td><td> </td><td class="right">// Smoothly move the observer to the given location</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::moveObserverTo(const StelLocation&amp; target, double duration, 
double durationIfPlanetChange)</td><td> </td><td class="right">void StelCore::moveObserverTo(const StelLocation&amp; target, double duration, 
double durationIfPlanetChange)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(locationChanged(target));</td><td> </td><td class="right">       emit(locationChanged(target));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double d = (getCurrentLocation().planetName==target.planetName) ? du
ration : durationIfPlanetChange;</td><td> </td><td class="right">       double d = (getCurrentLocation().planetName==target.planetName) ? du
ration : durationIfPlanetChange;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (d&gt;0.)</td><td> </td><td class="right">       if (d&gt;0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelLocation curLoc = getCurrentLocation();</td><td> </td><td class="right">               StelLocation curLoc = getCurrentLocation();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (position-&gt;isTraveling())</td><td> </td><td class="right">               if (position-&gt;isTraveling())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1380</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1474</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return (fabs(timeSpeed-JD_SECOND)&lt;0.0000001);</td><td> </td><td class="right">       return (fabs(timeSpeed-JD_SECOND)&lt;0.0000001);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Increment time</td><td> </td><td class="right">// Increment time</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::updateTime(double deltaTime)</td><td> </td><td class="right">void StelCore::updateTime(double deltaTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (getRealTimeSpeed())</td><td> </td><td class="right">       if (getRealTimeSpeed())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">// Get rid of the error from the 1 /</span></td><td> </td><td class="rblock">               JD.first = jdOfLastJDUpdate + <span class="insert">(QDateTime::currentMSecsSinceE</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               // JDay = JDayOfLastJDayUpdate + (StelApp::getTotalRunTime()</span></td><td> </td><td class="rblock"><span class="insert">poch()</span> - <span class="insert">milliSecondsOfLastJDUpdate) / 1000.0</span> * JD_SECOND;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> - secondsOfLastJDayUpdate) / ONE_OVER_JD_SECOND;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               // GZ I don't understand the comment. Is the constant wrong?</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               JD.first = jdOfLastJDUpdate + <span class="delete">(StelApp::getTotalRunTime()</span> - </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">secondsOfLastJDUpdate)</span> * JD_SECOND;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               JD.first = jdOfLastJDUpdate + (<span class="delete">StelApp::getTotalRunTime() - 
secondsOfLastJDUpdate)</span> * timeSpeed;</td><td> </td><td class="rblock">               JD.first = jdOfLastJDUpdate + (<span class="insert">QDateTime::currentMSecsSinceE
poch() - milliSecondsOfLastJDUpdate) / 1000.0</span> * timeSpeed;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Fix time limits to -100000 to +100000 to prevent bugs</td><td> </td><td class="right">       // Fix time limits to -100000 to +100000 to prevent bugs</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (JD.first&gt;38245309.499988) JD.first = 38245309.499988;</td><td> </td><td class="right">       if (JD.first&gt;38245309.499988) JD.first = 38245309.499988;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (JD.first&lt;-34803211.500012) JD.first = -34803211.500012;</td><td> </td><td class="right">       if (JD.first&lt;-34803211.500012) JD.first = -34803211.500012;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       JD.second=computeDeltaT(JD.first);</td><td> </td><td class="right">       JD.second=computeDeltaT(JD.first);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (position-&gt;isObserverLifeOver())</td><td> </td><td class="right">       if (position-&gt;isObserverLifeOver())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Unselect if the new home planet is the previously selecte
d object</td><td> </td><td class="right">               // Unselect if the new home planet is the previously selecte
d object</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1420</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1511</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Position of sun and all the satellites (ie planets)</td><td> </td><td class="right">       // Position of sun and all the satellites (ie planets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // GZ maybe setting this static can speedup a bit?</td><td> </td><td class="right">       // GZ maybe setting this static can speedup a bit?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static SolarSystem* solsystem = (SolarSystem*)StelApp::getInstance()
.getModuleMgr().getModule("SolarSystem");</td><td> </td><td class="right">       static SolarSystem* solsystem = (SolarSystem*)StelApp::getInstance()
.getModuleMgr().getModule("SolarSystem");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Likely the most important location where we need JDE:</td><td> </td><td class="right">       // Likely the most important location where we need JDE:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       solsystem-&gt;computePositions(getJDE(), position-&gt;getHomePlanet()-&gt;get
HeliocentricEclipticPos());</td><td> </td><td class="right">       solsystem-&gt;computePositions(getJDE(), position-&gt;getHomePlanet()-&gt;get
HeliocentricEclipticPos());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::resetSync()</td><td> </td><td class="right">void StelCore::resetSync()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       jdOfLastJDUpdate = getJD();</td><td> </td><td class="right">       jdOfLastJDUpdate = getJD();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">secondsOfLastJDUpdate</span> = <span class="delete">StelApp::getTotalRunTime();</span></td><td> </td><td class="rblock">       <span class="insert">//use currentMsecsSinceEpoch directly instead of StelApp::getTotalRu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ntime,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //because the StelApp::startMSecs gets subtracted anyways in update(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //also changed to qint64 to increase precision</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       milliSecondsOfLastJDUpdate</span> = <span class="insert">QDateTime::currentMSecsSinceEpoch();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       emit timeSyncOccurred(jdOfLastJDUpdate);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::registerMathMetaTypes()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec2d&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec2f&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec2i&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec3d&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec3f&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec4d&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec4f&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Vec4i&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Mat4d&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Mat4f&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Mat3d&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qRegisterMetaType&lt;Mat3f&gt;();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    //for debugging QVariants with these types, it helps if we register the</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> string converters</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    QMetaType::registerConverter(&amp;Vec3d::toString);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    QMetaType::registerConverter(&amp;Vec3f::toString);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    QMetaType::registerConverter(&amp;Vec4d::toString);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    QMetaType::registerConverter(&amp;Vec4f::toString);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    QMetaType::registerConverter(&amp;Vec4i::toString);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setStartupTimeMode(const QString&amp; s)</td><td> </td><td class="right">void StelCore::setStartupTimeMode(const QString&amp; s)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       startupTimeMode = s;</td><td> </td><td class="right">       startupTimeMode = s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// return precomputed DeltaT in seconds. Public.</td><td> </td><td class="right">// return precomputed DeltaT in seconds. Public.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double StelCore::getDeltaT() const</td><td> </td><td class="right">double StelCore::getDeltaT() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1735</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1853</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case EspenakMeeus: // GENERAL SOLUTION</td><td> </td><td class="right">               case EspenakMeeus: // GENERAL SOLUTION</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       description = q_("This solution by F. Espenak and J.
 Meeus, based on Morrison &amp; Stephenson (2004) and a polynomial fit through 
tabulated values for 1600-2000, is used for the %1NASA Eclipse Web Site%2 a
nd in their &lt;em&gt;Five Millennium Canon of Solar Eclipses: -1900 to +3000&lt;/em
&gt; (2006). This formula is also used in the solar, lunar and planetary ephem
eris program SOLEX.").arg("&lt;a href='http://eclipse.gsfc.nasa.gov/eclipse.ht
ml'&gt;").arg("&lt;/a&gt;").append(getCurrentDeltaTAlgorithmValidRangeDescription(jd
, &amp;marker)).append(" &lt;em&gt;").append(q_("Used by default.")).append("&lt;/em&gt;");</td><td> </td><td class="right">                       description = q_("This solution by F. Espenak and J.
 Meeus, based on Morrison &amp; Stephenson (2004) and a polynomial fit through 
tabulated values for 1600-2000, is used for the %1NASA Eclipse Web Site%2 a
nd in their &lt;em&gt;Five Millennium Canon of Solar Eclipses: -1900 to +3000&lt;/em
&gt; (2006). This formula is also used in the solar, lunar and planetary ephem
eris program SOLEX.").arg("&lt;a href='http://eclipse.gsfc.nasa.gov/eclipse.ht
ml'&gt;").arg("&lt;/a&gt;").append(getCurrentDeltaTAlgorithmValidRangeDescription(jd
, &amp;marker)).append(" &lt;em&gt;").append(q_("Used by default.")).append("&lt;/em&gt;");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case EspenakMeeusZeroMoonAccel: // PATCHED SOLUTION</td><td> </td><td class="right">               case EspenakMeeusZeroMoonAccel: // PATCHED SOLUTION</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       description = QString("%1 %2").arg(q_("PATCHED VERSI
ON WITHOUT ADDITIONAL LUNAR ACCELERATION.")).arg(q_("This solution by F. Es
penak and J. Meeus, based on Morrison &amp; Stephenson (2004) and a polynomial 
fit through tabulated values for 1600-2000, is used for the %1NASA Eclipse 
Web Site%2 and in their &lt;em&gt;Five Millennium Canon of Solar Eclipses: -1900 
to +3000&lt;/em&gt; (2006). This formula is also used in the solar, lunar and pla
netary ephemeris program SOLEX.").arg("&lt;a href='http://eclipse.gsfc.nasa.go
v/eclipse.html'&gt;").arg("&lt;/a&gt;").append(getCurrentDeltaTAlgorithmValidRangeDe
scription(jd, &amp;marker)).append(" &lt;em&gt;").append("&lt;/em&gt;"));</td><td> </td><td class="right">                       description = QString("%1 %2").arg(q_("PATCHED VERSI
ON WITHOUT ADDITIONAL LUNAR ACCELERATION.")).arg(q_("This solution by F. Es
penak and J. Meeus, based on Morrison &amp; Stephenson (2004) and a polynomial 
fit through tabulated values for 1600-2000, is used for the %1NASA Eclipse 
Web Site%2 and in their &lt;em&gt;Five Millennium Canon of Solar Eclipses: -1900 
to +3000&lt;/em&gt; (2006). This formula is also used in the solar, lunar and pla
netary ephemeris program SOLEX.").arg("&lt;a href='http://eclipse.gsfc.nasa.go
v/eclipse.html'&gt;").arg("&lt;/a&gt;").append(getCurrentDeltaTAlgorithmValidRangeDe
scription(jd, &amp;marker)).append(" &lt;em&gt;").append("&lt;/em&gt;"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Banjevic:</td><td> </td><td class="right">               case Banjevic:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       description = q_("This solution by B. Banjevic, base
d on Stephenson &amp; Morrison (1984), was published in article &lt;em&gt;Ancient ecl
ipses and dating the fall of Babylon&lt;/em&gt; (%1).").arg("&lt;a href='http://adsa
bs.harvard.edu/abs/2006POBeo..80..251B'&gt;2006&lt;/a&gt;").append(getCurrentDeltaTA
lgorithmValidRangeDescription(jd, &amp;marker));</td><td> </td><td class="right">                       description = q_("This solution by B. Banjevic, base
d on Stephenson &amp; Morrison (1984), was published in article &lt;em&gt;Ancient ecl
ipses and dating the fall of Babylon&lt;/em&gt; (%1).").arg("&lt;a href='http://adsa
bs.harvard.edu/abs/2006POBeo..80..251B'&gt;2006&lt;/a&gt;").append(getCurrentDeltaTA
lgorithmValidRangeDescription(jd, &amp;marker));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case IslamSadiqQureshi:</td><td> </td><td class="right">               case IslamSadiqQureshi:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       description = q_("This solution by S. Islam, M. Sadi
q and M. S. Qureshi, based on Meeus &amp; Simons (2000), was published in artic
le &lt;em&gt;Error Minimization of Polynomial Approximation of DeltaT&lt;/em&gt; (%1) a
nd revisited by Sana Islam in 2013.").arg("&lt;a href='http://www.ias.ac.in/<span class="delete">ja
a/dec2008/JAA610.pdf'&gt;2008&lt;/a&gt;").append(getCurrentDeltaTAlgorithmValidRange
</span>Description(jd, &amp;marker));</td><td> </td><td class="rblock">                       description = q_("This solution by S. Islam, M. Sadi
q and M. S. Qureshi, based on Meeus &amp; Simons (2000), was published in artic
le &lt;em&gt;Error Minimization of Polynomial Approximation of DeltaT&lt;/em&gt; (%1) a
nd revisited by Sana Islam in 2013.").arg("&lt;a href='http://www.ias.ac.in/<span class="insert">ar
ticle/fulltext/joaa/029/03-04/0363-0366'&gt;2008&lt;/a&gt;").append(getCurrentDeltaT
AlgorithmValidRange</span>Description(jd, &amp;marker));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case KhalidSultanaZaidi:</td><td> </td><td class="right">               case KhalidSultanaZaidi:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       description = q_("This polynomial approximation with
 0.6 seconds of accuracy by M. Khalid, Mariam Sultana and Faheem Zaidi was 
published in &lt;em&gt;Delta T: Polynomial Approximation of Time Period 1620-2013
&lt;/em&gt; (%1).").arg("&lt;a href='http://dx.doi.org/10.1155/2014/480964'&gt;2014&lt;/a&gt;
").append(getCurrentDeltaTAlgorithmValidRangeDescription(jd, &amp;marker));</td><td> </td><td class="right">                       description = q_("This polynomial approximation with
 0.6 seconds of accuracy by M. Khalid, Mariam Sultana and Faheem Zaidi was 
published in &lt;em&gt;Delta T: Polynomial Approximation of Time Period 1620-2013
&lt;/em&gt; (%1).").arg("&lt;a href='http://dx.doi.org/10.1155/2014/480964'&gt;2014&lt;/a&gt;
").append(getCurrentDeltaTAlgorithmValidRangeDescription(jd, &amp;marker));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Custom:</td><td> </td><td class="right">               case Custom:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       description = q_("This is a quadratic formula for ca
lculation of %1T with coefficients defined by the user.").arg(QChar(0x0394)
);</td><td> </td><td class="right">                       description = q_("This is a quadratic formula for ca
lculation of %1T with coefficients defined by the user.").arg(QChar(0x0394)
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default:</td><td> </td><td class="right">               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       description = q_("Error");</td><td> </td><td class="right">                       description = q_("Error");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1772</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1890</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Schoch:</td><td> </td><td class="right">               case Schoch:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Valid range unknown</td><td> </td><td class="right">                       // Valid range unknown</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Clemence:</td><td> </td><td class="right">               case Clemence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = 1681;</td><td> </td><td class="right">                       start   = 1681;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 1900;</td><td> </td><td class="right">                       finish  = 1900;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case IAU:</td><td> </td><td class="right">               case IAU:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = 1681;</td><td> </td><td class="right">                       start   = 1681;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       finish  = 1936; // Details in http://adsabs.harvard.
edu/abs/1939MNRAS..99..541S</td><td> </td><td class="rblock">                       finish  = 1936; // Details in http://adsabs.harvard.
edu/abs/1939MNRAS..99..541S</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case AstronomicalEphemeris:</td><td> </td><td class="right">               case AstronomicalEphemeris:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // GZ: What is the source of "1681..1900"? Expl.Supp
l.AE 1961-p87 says "...over periods extending back to ancient times"</td><td> </td><td class="right">                       // GZ: What is the source of "1681..1900"? Expl.Supp
l.AE 1961-p87 says "...over periods extending back to ancient times"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // I changed to what I estimate.</td><td> </td><td class="right">                       // I changed to what I estimate.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = -500; // 1681;</td><td> </td><td class="right">                       start   = -500; // 1681;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  =  2000; // 1900;</td><td> </td><td class="right">                       finish  =  2000; // 1900;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case TuckermanGoldstine:</td><td> </td><td class="right">               case TuckermanGoldstine:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = -600;</td><td> </td><td class="right">                       start   = -600;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 1649;</td><td> </td><td class="right">                       finish  = 1649;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1823</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 1941</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Borkowski:</td><td> </td><td class="right">               case Borkowski:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = -2136;</td><td> </td><td class="right">                       start   = -2136;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 1715;</td><td> </td><td class="right">                       finish  = 1715;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case SchmadelZech1988:</td><td> </td><td class="right">               case SchmadelZech1988:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = 1800;</td><td> </td><td class="right">                       start   = 1800;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 1988;</td><td> </td><td class="right">                       finish  = 1988;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       validRangeAppendix = q_("with a mean error of less t
han one second, max. error 1.9s, and meaningless values outside this range"
);</td><td> </td><td class="right">                       validRangeAppendix = q_("with a mean error of less t
han one second, max. error 1.9s, and meaningless values outside this range"
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ChaprontTouze:</td><td> </td><td class="right">               case ChaprontTouze:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // FIXME: I<span class="delete">t's</span> valid range?</td><td> </td><td class="rblock">                       // FIXME: I<span class="insert">s it</span> valid range?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = -4000;</td><td> </td><td class="right">                       start   = -4000;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 8000;</td><td> </td><td class="right">                       finish  = 8000;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case StephensonMorrison1995:</td><td> </td><td class="right">               case StephensonMorrison1995:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = -700;</td><td> </td><td class="right">                       start   = -700;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 1600;</td><td> </td><td class="right">                       finish  = 1600;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Stephenson1997:</td><td> </td><td class="right">               case Stephenson1997:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       start   = -500;</td><td> </td><td class="right">                       start   = -500;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       finish  = 1600;</td><td> </td><td class="right">                       finish  = 1600;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1924</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 2042</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               r = true;</td><td> </td><td class="right">               r = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (ssys-&gt;getEclipseFactor(this)&lt;=0.01) // Total solar eclipse</td><td> </td><td class="right">       if (ssys-&gt;getEclipseFactor(this)&lt;=0.01) // Total solar eclipse</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               r = false;</td><td> </td><td class="right">               r = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return r;</td><td> </td><td class="right">       return r;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double StelCore::getCurrentEpoch() const</td><td> </td><td class="right">double StelCore::getCurrentEpoch() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 2000.0 + (getJD() - 2451545.0)/365.25;</td><td> </td><td class="right">       return 2000.0 + (getJD() - 2451545.0)/365.25;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// DE430/DE431 handling</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool StelCore::de430IsAvailable()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return de430Available;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool StelCore::de431IsAvailable()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return de431Available;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool StelCore::de430IsActive()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return de430Active;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool StelCore::de431IsActive()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return de431Active;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setDe430Active(bool status)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       de430Active = de430Available &amp;&amp; status;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setDe431Active(bool status)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       de431Active = de431Available &amp;&amp; status;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::initEphemeridesFunctions()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QSettings* conf = StelApp::getInstance().getSettings();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString de430ConfigPath = conf-&gt;value("astro/de430_path").toString()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString de431ConfigPath = conf-&gt;value("astro/de431_path").toString()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString de430FilePath;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString de431FilePath;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //&lt;-- DE430 --&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(de430ConfigPath.remove(QChar('"')).isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               de430FilePath = StelFileMgr::findFile("ephem/" + QString(DE4</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">30_FILENAME), StelFileMgr::File);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               de430FilePath = StelFileMgr::findFile(de430ConfigPath, StelF</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ileMgr::File);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       de430Available=!de430FilePath.isEmpty();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(de430Available)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "DE430 at: " &lt;&lt; de430FilePath;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               EphemWrapper::init_de430(de430FilePath.toStdString().c_str()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setDe430Active(de430Available &amp;&amp; conf-&gt;value("astro/flag_use_de430",</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> false).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //&lt;-- DE431 --&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(de431ConfigPath.remove(QChar('"')).isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               de431FilePath = StelFileMgr::findFile("ephem/" + QString(DE4</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">31_FILENAME), StelFileMgr::File);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               de431FilePath = StelFileMgr::findFile(de431ConfigPath, StelF</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ileMgr::File);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       de431Available=!de431FilePath.isEmpty();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(de431Available)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "DE431 at: " &lt;&lt; de431FilePath;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               EphemWrapper::init_de431(de431FilePath.toStdString().c_str()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setDe431Active(de431Available &amp;&amp; conf-&gt;value("astro/flag_use_de431",</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> false).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 29 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>21 lines changed or deleted</i></th><th><i> </i></th><th><i>156 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
