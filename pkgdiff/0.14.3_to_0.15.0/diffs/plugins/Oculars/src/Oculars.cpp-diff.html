<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 3.13.0-92-generic #139-Ubuntu SMP Tue Jun 28 20:42:26 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: Oculars.cpp - Oculars.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;Oculars.cpp&nbsp;</th><th> </th><th>&nbsp;Oculars.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 123</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 123</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLongitudeLine(false),</td><td> </td><td class="right">       flagLongitudeLine(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagHorizonLine(false),</td><td> </td><td class="right">       flagHorizonLine(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagGalacticEquatorLine(false),</td><td> </td><td class="right">       flagGalacticEquatorLine(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagAdaptation(false),</td><td> </td><td class="right">       flagAdaptation(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLimitStars(false),</td><td> </td><td class="right">       flagLimitStars(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       magLimitStars(0.0),</td><td> </td><td class="right">       magLimitStars(0.0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLimitDSOs(false),</td><td> </td><td class="right">       flagLimitDSOs(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       magLimitDSOs(0.0),</td><td> </td><td class="right">       magLimitDSOs(0.0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLimitPlanets(false),</td><td> </td><td class="right">       flagLimitPlanets(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       magLimitPlanets(0.0),</td><td> </td><td class="right">       magLimitPlanets(0.0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">relativeStarScale(1.0),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       absoluteStarScale(1.0),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagMoonScale(false),</td><td> </td><td class="right">       flagMoonScale(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       maxEyepieceAngle(0.0),</td><td> </td><td class="right">       maxEyepieceAngle(0.0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       requireSelection(true),</td><td> </td><td class="right">       requireSelection(true),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLimitMagnitude(false),</td><td> </td><td class="right">       flagLimitMagnitude(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       useMaxEyepieceAngle(true),</td><td> </td><td class="right">       useMaxEyepieceAngle(true),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       guiPanelEnabled(false),</td><td> </td><td class="right">       guiPanelEnabled(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagDecimalDegrees(false),</td><td> </td><td class="right">       flagDecimalDegrees(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagSemiTransporency(false),</td><td> </td><td class="right">       flagSemiTransporency(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">flipVert(false),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       flipHorz(false),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ccdRotationSignalMapper(0),</td><td> </td><td class="right">       ccdRotationSignalMapper(0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ccdsSignalMapper(0),</td><td> </td><td class="right">       ccdsSignalMapper(0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ocularsSignalMapper(0),</td><td> </td><td class="right">       ocularsSignalMapper(0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopesSignalMapper(0),</td><td> </td><td class="right">       telescopesSignalMapper(0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       lenseSignalMapper(0),</td><td> </td><td class="right">       lenseSignalMapper(0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pxmapGlow(NULL),</td><td> </td><td class="right">       pxmapGlow(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pxmapOnIcon(NULL),</td><td> </td><td class="right">       pxmapOnIcon(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pxmapOffIcon(NULL),</td><td> </td><td class="right">       pxmapOffIcon(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       toolbarButton(NULL),</td><td> </td><td class="right">       toolbarButton(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ocularDialog(NULL),</td><td> </td><td class="right">       ocularDialog(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 186</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 190</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qt_set_sequence_auto_mnemonic(true);</td><td> </td><td class="right">       qt_set_sequence_auto_mnemonic(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Oculars::~Oculars()</td><td> </td><td class="right">Oculars::~Oculars()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete ocularDialog;</td><td> </td><td class="right">       delete ocularDialog;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ocularDialog = NULL;</td><td> </td><td class="right">       ocularDialog = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (guiPanel)</td><td> </td><td class="right">       if (guiPanel)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete guiPanel;</td><td> </td><td class="right">               delete guiPanel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pxmapGlow)</td><td> </td><td class="right">       if (pxmapGlow)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete pxmapGlow;</td><td> </td><td class="right">               delete pxmapGlow;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pxmapOnIcon)</td><td> </td><td class="right">       if (pxmapOnIcon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete pxmapOnIcon;</td><td> </td><td class="right">               delete pxmapOnIcon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pxmapOffIcon)</td><td> </td><td class="right">       if (pxmapOffIcon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete pxmapOffIcon;</td><td> </td><td class="right">               delete pxmapOffIcon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDeleteAll(ccds);</td><td> </td><td class="right">       qDeleteAll(ccds);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ccds.clear();</td><td> </td><td class="right">       ccds.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDeleteAll(telescopes);</td><td> </td><td class="right">       qDeleteAll(telescopes);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 217</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 220</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#if 0</td><td> </td><td class="right">#if 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark -</td><td> </td><td class="right">#pragma mark -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark StelModule Methods</td><td> </td><td class="right">#pragma mark StelModule Methods</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool Oculars::configureGui(bool show)</td><td> </td><td class="right">bool Oculars::configureGui(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (show) {</td><td> </td><td class="rblock">       if (show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ocularDialog-&gt;setVisible(true);</td><td> </td><td class="right">               ocularDialog-&gt;setVisible(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return ready;</td><td> </td><td class="right">       return ready;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::deinit()</td><td> </td><td class="right">void Oculars::deinit()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // update the ini file.</td><td> </td><td class="right">       // update the ini file.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;remove("ccd");</td><td> </td><td class="right">       settings-&gt;remove("ccd");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;remove("ocular");</td><td> </td><td class="right">       settings-&gt;remove("ocular");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;remove("telescope");</td><td> </td><td class="right">       settings-&gt;remove("telescope");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;remove("lens");</td><td> </td><td class="right">       settings-&gt;remove("lens");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int index = 0;</td><td> </td><td class="right">       int index = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       foreach(CCD* ccd, ccds) {</td><td> </td><td class="rblock">       foreach(CCD* ccd, ccds)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ccd-&gt;writeToSettings(settings, index);</td><td> </td><td class="right">               ccd-&gt;writeToSettings(settings, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               index++;</td><td> </td><td class="right">               index++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       index = 0;</td><td> </td><td class="right">       index = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       foreach(Ocular * ocular, oculars) {</td><td> </td><td class="rblock">       foreach(Ocular * ocular, oculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ocular-&gt;writeToSettings(settings, index);</td><td> </td><td class="right">               ocular-&gt;writeToSettings(settings, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               index++;</td><td> </td><td class="right">               index++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       index = 0;</td><td> </td><td class="right">       index = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       foreach(Telescope* telescope, <span class="delete">telescopes){</span></td><td> </td><td class="rblock">       foreach(Telescope* telescope, <span class="insert">telescopes)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope-&gt;writeToSettings(settings, index);</td><td> </td><td class="right">               telescope-&gt;writeToSettings(settings, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               index++;</td><td> </td><td class="right">               index++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       index = 0;</td><td> </td><td class="right">       index = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       foreach(Lens* lens, lense) {</td><td> </td><td class="rblock">       foreach(Lens* lens, lense)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lens-&gt;writeToSettings(settings, index);</td><td> </td><td class="right">               lens-&gt;writeToSettings(settings, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               index++;</td><td> </td><td class="right">               index++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("ocular_count", oculars.count());</td><td> </td><td class="right">       settings-&gt;setValue("ocular_count", oculars.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("telescope_count", telescopes.count());</td><td> </td><td class="right">       settings-&gt;setValue("telescope_count", telescopes.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("ccd_count", ccds.count());</td><td> </td><td class="right">       settings-&gt;setValue("ccd_count", ccds.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("lens_count", lense.count());</td><td> </td><td class="right">       settings-&gt;setValue("lens_count", lense.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;sync();</td><td> </td><td class="right">       settings-&gt;sync();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       disconnect(this, SIGNAL(selectedOcularChanged()), this, SLOT(updateO
cularReticle()));</td><td> </td><td class="right">       disconnect(this, SIGNAL(selectedOcularChanged()), this, SLOT(updateO
cularReticle()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       disconnect(&amp;StelApp::getInstance(), SIGNAL(colorSchemeChanged(const </td><td> </td><td class="rblock">       disconnect(&amp;StelApp::getInstance(), SIGNAL(colorSchemeChanged(const </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">QString&amp;)),</td><td> </td><td class="rblock">QString&amp;)), this, SLOT(setStelStyle(const <span class="insert">QString&amp;)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       this, SLOT(setStelStyle(const <span class="delete">QStrin</span></td><td> </td><td class="rblock">       disconnect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()), this,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">g&amp;)));</span></td><td> </td><td class="rblock"> SLOT(retranslateGui()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       disconnect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()),</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       this, SLOT(retranslateGui()));</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Draw any parts on the screen which are for our module</td><td> </td><td class="right">//! Draw any parts on the screen which are for our module</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::draw(StelCore* core)</td><td> </td><td class="right">void Oculars::draw(StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flagShowTelrad) {</td><td> </td><td class="rblock">       if (flagShowTelrad)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               paintTelrad();</td><td> </td><td class="right">               paintTelrad();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if <span class="delete">(flagShowOculars){</span></td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else if <span class="insert">(flagShowOculars)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Ensure there is a selected ocular &amp; telescope</td><td> </td><td class="right">               // Ensure there is a selected ocular &amp; telescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (selectedCCDIndex &gt; ccds.count()) {</td><td> </td><td class="rblock">               if (selectedCCDIndex &gt; ccds.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars: the selected sensor index of
 "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars: the selected sensor index of
 "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                &lt;&lt; <span class="delete">selected</span></td><td> </td><td class="rblock">                                  &lt;&lt; <span class="insert">selectedCCDIndex</span> &lt;&lt; " is greater than </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">CCDIndex</span> &lt;&lt; " is greater than the sensor count of "</td><td> </td><td class="rblock">the sensor count of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                &lt;&lt; <span class="delete">ccds.cou</span></td><td> </td><td class="rblock">                                  &lt;&lt; <span class="insert">ccds.count()</span> &lt;&lt; ". Module disabled!";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">nt()</span> &lt;&lt; ". Module disabled!";</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (selectedOcularIndex &gt; oculars.count()) {</td><td> </td><td class="rblock">               if (selectedOcularIndex &gt; oculars.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars: the selected ocular index of
 "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars: the selected ocular index of
 "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                &lt;&lt; <span class="delete">selected</span></td><td> </td><td class="rblock">                                  &lt;&lt; <span class="insert">selectedOcularIndex</span> &lt;&lt; " is greater <span class="insert">th</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">OcularIndex</span> &lt;&lt; " is greater <span class="delete">than</span> the ocular count of "</td><td> </td><td class="rblock"><span class="insert">an</span> the ocular count of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                &lt;&lt; <span class="delete">oculars.</span></td><td> </td><td class="rblock">                                  &lt;&lt; <span class="insert">oculars.count()</span> &lt;&lt; ". Module <span class="insert">disabled!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">count()</span> &lt;&lt; ". Module <span class="delete">disabled!";</span></td><td> </td><td class="rblock"><span class="insert">";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               else if (selectedTelescopeIndex &gt; telescopes.count()) {</td><td> </td><td class="rblock">               else if (selectedTelescopeIndex &gt; telescopes.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars: the selected telescope index
 of "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars: the selected telescope index
 of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                &lt;&lt; <span class="delete">selected</span></td><td> </td><td class="rblock">                                  &lt;&lt; <span class="insert">selectedTelescopeIndex</span> &lt;&lt; " is greater</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">TelescopeIndex</span> &lt;&lt; " is greater than the telescope count of "</td><td> </td><td class="rblock"> than the telescope count of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                &lt;&lt; <span class="delete">telescop</span></td><td> </td><td class="rblock">                                  &lt;&lt; <span class="insert">telescopes.count()</span> &lt;&lt; ". Module <span class="insert">disabl</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">es.count()</span> &lt;&lt; ". Module <span class="delete">disabled!";</span></td><td> </td><td class="rblock"><span class="insert">ed!";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (ready) {</td><td> </td><td class="rblock">               if (ready)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (selectedOcularIndex &gt; -1) {</td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       if (selectedOcularIndex &gt; -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               paintOcularMask(core);</td><td> </td><td class="right">                               paintOcularMask(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (flagShowCrosshairs)  {</td><td> </td><td class="rblock">                               if (flagShowCrosshairs)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       paintCrosshairs();</td><td> </td><td class="right">                                       paintCrosshairs();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (guiPanelEnabled)</td><td> </td><td class="right">                       if (guiPanelEnabled)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Reset the state to allow the panel to be 
painted normally</td><td> </td><td class="right">                               // Reset the state to allow the panel to be 
painted normally</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               glDisable(GL_TEXTURE_2D);</td><td> </td><td class="right">                               glDisable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_A
LPHA);</td><td> </td><td class="right">                               glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_A
LPHA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               glEnable(GL_BLEND);</td><td> </td><td class="right">                               glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Paint the information in the upper-right 
hand corner</td><td> </td><td class="right">                               // Paint the information in the upper-right 
hand corner</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               paintText(core);</td><td> </td><td class="right">                               paintText(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (flagShowCCD) {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else if (flagShowCCD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               paintCCDBounds();</td><td> </td><td class="right">               paintCCDBounds();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (guiPanelEnabled)</td><td> </td><td class="right">               if (guiPanelEnabled)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Reset the state to allow the panel to be painted 
normally</td><td> </td><td class="right">                       // Reset the state to allow the panel to be painted 
normally</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       glDisable(GL_TEXTURE_2D);</td><td> </td><td class="right">                       glDisable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</td><td> </td><td class="right">                       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       glEnable(GL_BLEND);</td><td> </td><td class="right">                       glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 350</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 366</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               order = GETSTELMODULE(LabelMgr)-&gt;getCallOrder(actionName) + 
100.0;</td><td> </td><td class="right">               order = GETSTELMODULE(LabelMgr)-&gt;getCallOrder(actionName) + 
100.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return order;</td><td> </td><td class="right">       return order;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const StelStyle Oculars::getModuleStyleSheet(const StelStyle&amp; style)</td><td> </td><td class="right">const StelStyle Oculars::getModuleStyleSheet(const StelStyle&amp; style)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelStyle pluginStyle(style);</td><td> </td><td class="right">       StelStyle pluginStyle(style);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (StelApp::getInstance().getVisionModeNight()) {</td><td> </td><td class="rblock">       if (StelApp::getInstance().getVisionModeNight())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pluginStyle.qtStyleSheet.append(nightStyleSheet);</td><td> </td><td class="right">               pluginStyle.qtStyleSheet.append(nightStyleSheet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } <span class="delete">else{</span></td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pluginStyle.qtStyleSheet.append(normalStyleSheet);</td><td> </td><td class="right">               pluginStyle.qtStyleSheet.append(normalStyleSheet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return pluginStyle;</td><td> </td><td class="right">       return pluginStyle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::handleMouseClicks(class QMouseEvent* event)</td><td> </td><td class="right">void Oculars::handleMouseClicks(class QMouseEvent* event)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td> </td><td class="right">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(StelApp::getInstance().getStelObjectMgr().getWasSelected()){</span></td><td> </td><td class="rblock">       if <span class="insert">(StelApp::getInstance().getStelObjectMgr().getWasSelected())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (flagShowOculars) {</td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               if (flagShowOculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // center the selected object in the ocular, and tra
ck.</td><td> </td><td class="right">                       // center the selected object in the ocular, and tra
ck.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       movementManager-&gt;setFlagTracking(true);</td><td> </td><td class="right">                       movementManager-&gt;setFlagTracking(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // remove the usage label if it is being displayed.</td><td> </td><td class="right">                       // remove the usage label if it is being displayed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hideUsageMessageIfDisplayed();</td><td> </td><td class="right">                       hideUsageMessageIfDisplayed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if(flagShowOculars) {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else if(flagShowOculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: this is broke in Stellarium.</td><td> </td><td class="right">               //TODO: this is broke in Stellarium.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // The ocular is displayed, but no object is selected.  So d
on't track the stars.  We may have locked</td><td> </td><td class="right">               // The ocular is displayed, but no object is selected.  So d
on't track the stars.  We may have locked</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // the position of the screen if the movement keys were used
.  so call this to be on the safe side.</td><td> </td><td class="right">               // the position of the screen if the movement keys were used
.  so call this to be on the safe side.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               movementManager-&gt;setFlagLockEquPos(false);</td><td> </td><td class="right">               movementManager-&gt;setFlagLockEquPos(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Do we need to set this?</td><td> </td><td class="right">               // Do we need to set this?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // movementManager-&gt;setFlagTracking(false);</td><td> </td><td class="right">               // movementManager-&gt;setFlagTracking(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       event-&gt;setAccepted(false);</td><td> </td><td class="right">       event-&gt;setAccepted(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::handleKeys(QKeyEvent* event)</td><td> </td><td class="right">void Oculars::handleKeys(QKeyEvent* event)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!flagShowOculars &amp;&amp; !flagShowCCD) {</td><td> </td><td class="rblock">       if (!flagShowOculars &amp;&amp; !flagShowCCD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // We onle care about the arrow keys.  This flag tracks that.</td><td> </td><td class="right">       // We onle care about the arrow keys.  This flag tracks that.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool consumeEvent = false;</td><td> </td><td class="right">       bool consumeEvent = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td> </td><td class="right">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (event-&gt;type() == QEvent::KeyPress) {</td><td> </td><td class="rblock">       if (event-&gt;type() == QEvent::KeyPress)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Direction and zoom replacements</td><td> </td><td class="right">               // Direction and zoom replacements</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               switch (event-&gt;key()) {</td><td> </td><td class="rblock">               switch (event-&gt;key())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Left:</td><td> </td><td class="right">                       case Qt::Key_Left:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;turnLeft(true);</td><td> </td><td class="right">                               movementManager-&gt;turnLeft(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Right:</td><td> </td><td class="right">                       case Qt::Key_Right:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;turnRight(true);</td><td> </td><td class="right">                               movementManager-&gt;turnRight(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Up:</td><td> </td><td class="right">                       case Qt::Key_Up:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (!event-&gt;modifiers().testFlag(Qt::Control
Modifier))</td><td> </td><td class="right">                               if (!event-&gt;modifiers().testFlag(Qt::Control
Modifier))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 431</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 459</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_PageDown:</td><td> </td><td class="right">                       case Qt::Key_PageDown:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;zoomOut(true);</td><td> </td><td class="right">                               movementManager-&gt;zoomOut(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Shift:</td><td> </td><td class="right">                       case Qt::Key_Shift:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;moveSlow(true);</td><td> </td><td class="right">                               movementManager-&gt;moveSlow(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_M:</td><td> </td><td class="right">                       case Qt::Key_M:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               double multiplier = 1.0;</td><td> </td><td class="right">                               double multiplier = 1.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (event-&gt;modifiers().testFlag(Qt::ControlM</td><td> </td><td class="rblock">                               if (event-&gt;modifiers().testFlag(Qt::ControlM</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">odifier)) {</td><td> </td><td class="rblock">odifier))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       multiplier = 0.1;</td><td> </td><td class="right">                                       multiplier = 0.1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (event-&gt;modifiers().testFlag(Qt::AltModif</td><td> </td><td class="rblock">                               if (event-&gt;modifiers().testFlag(Qt::AltModif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ier)) {</td><td> </td><td class="rblock">ier))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       multiplier = 5.0;</td><td> </td><td class="right">                                       multiplier = 5.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (event-&gt;modifiers().testFlag(Qt::ShiftMod</td><td> </td><td class="rblock">                               if (event-&gt;modifiers().testFlag(Qt::ShiftMod</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ifier)) {</td><td> </td><td class="rblock">ifier))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       reticleRotation += (1.0 * multiplier
);</td><td> </td><td class="right">                                       reticleRotation += (1.0 * multiplier
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               } else {</td><td> </td><td class="rblock">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       reticleRotation -= (1.0 * multiplier
);</td><td> </td><td class="right">                                       reticleRotation -= (1.0 * multiplier
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qDebug() &lt;&lt; reticleRotation;</td><td> </td><td class="right">                               qDebug() &lt;&lt; reticleRotation;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // When a deplacement key is released stop mooving</td><td> </td><td class="right">               // When a deplacement key is released stop mooving</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               switch (event-&gt;key()) {</td><td> </td><td class="rblock">               switch (event-&gt;key())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Left:</td><td> </td><td class="right">                       case Qt::Key_Left:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;turnLeft(false);</td><td> </td><td class="right">                               movementManager-&gt;turnLeft(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Right:</td><td> </td><td class="right">                       case Qt::Key_Right:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;turnRight(false);</td><td> </td><td class="right">                               movementManager-&gt;turnRight(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Up:</td><td> </td><td class="right">                       case Qt::Key_Up:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;turnUp(false);</td><td> </td><td class="right">                               movementManager-&gt;turnUp(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 478</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 514</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_PageDown:</td><td> </td><td class="right">                       case Qt::Key_PageDown:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;zoomOut(false);</td><td> </td><td class="right">                               movementManager-&gt;zoomOut(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Qt::Key_Shift:</td><td> </td><td class="right">                       case Qt::Key_Shift:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               movementManager-&gt;moveSlow(false);</td><td> </td><td class="right">                               movementManager-&gt;moveSlow(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               consumeEvent = true;</td><td> </td><td class="right">                               consumeEvent = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (consumeEvent) {</td><td> </td><td class="rblock">               if (consumeEvent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // We don't want to re-center the object; just hold 
the current position.</td><td> </td><td class="right">                       // We don't want to re-center the object; just hold 
the current position.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       movementManager-&gt;setFlagLockEquPos(true);</td><td> </td><td class="right">                       movementManager-&gt;setFlagLockEquPos(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (consumeEvent) {</td><td> </td><td class="rblock">       if (consumeEvent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               event-&gt;accept();</td><td> </td><td class="right">               event-&gt;accept();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               event-&gt;setAccepted(false);</td><td> </td><td class="right">               event-&gt;setAccepted(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::init()</td><td> </td><td class="right">void Oculars::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Ocular plugin - press Command-O to toggle eyepiece view
 mode. Press ALT-o for configuration.";</td><td> </td><td class="right">       qDebug() &lt;&lt; "Ocular plugin - press Command-O to toggle eyepiece view
 mode. Press ALT-o for configuration.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load settings from ocular.ini</td><td> </td><td class="right">       // Load settings from ocular.ini</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try {</td><td> </td><td class="right">       try {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               validateAndLoadIniFile();</td><td> </td><td class="right">               validateAndLoadIniFile();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // assume all is well</td><td> </td><td class="right">               // assume all is well</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ready = true;</td><td> </td><td class="right">               ready = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               requireSelection = settings-&gt;value("require_selection_to_zoo
m", 1.0).toBool();</td><td> </td><td class="right">               requireSelection = settings-&gt;value("require_selection_to_zoo
m", 1.0).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               useMaxEyepieceAngle = settings-&gt;value("use_max_exit_circle",
 0.0).toBool();</td><td> </td><td class="right">               useMaxEyepieceAngle = settings-&gt;value("use_max_exit_circle",
 0.0).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int ocularCount = settings-&gt;value("ocular_count", 0).toInt()
;</td><td> </td><td class="right">               int ocularCount = settings-&gt;value("ocular_count", 0).toInt()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int actualOcularCount = ocularCount;</td><td> </td><td class="right">               int actualOcularCount = ocularCount;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for (int index = 0; index &lt; ocularCount; index++) {</td><td> </td><td class="rblock">               for (int index = 0; index &lt; ocularCount; index++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Ocular *newOcular = Ocular::ocularFromSettings(setti
ngs, index);</td><td> </td><td class="right">                       Ocular *newOcular = Ocular::ocularFromSettings(setti
ngs, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (newOcular != NULL) {</td><td> </td><td class="rblock">                       if (newOcular != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               oculars.append(newOcular);</td><td> </td><td class="right">                               oculars.append(newOcular);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       } else {</td><td> </td><td class="rblock">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               actualOcularCount--;</td><td> </td><td class="right">                               actualOcularCount--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (actualOcularCount &lt; 1) {</td><td> </td><td class="rblock">               if (actualOcularCount &lt; 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (actualOcularCount &lt; ocularCount) {</td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       if (actualOcularCount &lt; ocularCount)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "The Oculars ini file appears 
to be corrupt; delete it.";</td><td> </td><td class="right">                               qWarning() &lt;&lt; "The Oculars ini file appears 
to be corrupt; delete it.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       } else {</td><td> </td><td class="rblock">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "There are no oculars defined 
for the Oculars plugin; plugin will be disabled.";</td><td> </td><td class="right">                               qWarning() &lt;&lt; "There are no oculars defined 
for the Oculars plugin; plugin will be disabled.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex = 0;</td><td> </td><td class="right">                       selectedOcularIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int ccdCount = settings-&gt;value("ccd_count", 0).toInt();</td><td> </td><td class="right">               int ccdCount = settings-&gt;value("ccd_count", 0).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int actualCcdCount = ccdCount;</td><td> </td><td class="right">               int actualCcdCount = ccdCount;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for (int index = 0; index &lt; ccdCount; index++) {</td><td> </td><td class="rblock">               for (int index = 0; index &lt; ccdCount; index++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       CCD *newCCD = CCD::ccdFromSettings(settings, index);</td><td> </td><td class="right">                       CCD *newCCD = CCD::ccdFromSettings(settings, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (newCCD != NULL) {</td><td> </td><td class="rblock">                       if (newCCD != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ccds.append(newCCD);</td><td> </td><td class="right">                               ccds.append(newCCD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       } else {</td><td> </td><td class="rblock">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               actualCcdCount--;</td><td> </td><td class="right">                               actualCcdCount--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (actualCcdCount &lt; ccdCount) {</td><td> </td><td class="rblock">               if (actualCcdCount &lt; ccdCount)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "The Oculars ini file appears to be co
rrupt; delete it.";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "The Oculars ini file appears to be co
rrupt; delete it.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int telescopeCount = settings-&gt;value("telescope_count", 0).t
oInt();</td><td> </td><td class="right">               int telescopeCount = settings-&gt;value("telescope_count", 0).t
oInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int actualTelescopeCount = telescopeCount;</td><td> </td><td class="right">               int actualTelescopeCount = telescopeCount;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for (int index = 0; index &lt; telescopeCount; index++) {</td><td> </td><td class="rblock">               for (int index = 0; index &lt; telescopeCount; index++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Telescope *newTelescope = Telescope::telescopeFromSe
ttings(settings, index);</td><td> </td><td class="right">                       Telescope *newTelescope = Telescope::telescopeFromSe
ttings(settings, index);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (newTelescope != NULL) {</td><td> </td><td class="rblock">                       if (newTelescope != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               telescopes.append(newTelescope);</td><td> </td><td class="right">                               telescopes.append(newTelescope);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">}else</span> {</td><td> </td><td class="rblock">                       <span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               actualTelescopeCount--;</td><td> </td><td class="right">                               actualTelescopeCount--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (actualTelescopeCount &lt; 1) {</td><td> </td><td class="rblock">               if (actualTelescopeCount &lt; 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (actualTelescopeCount &lt; telescopeCount) {</td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       if (actualTelescopeCount &lt; telescopeCount)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "The Oculars ini file appears 
to be corrupt; delete it.";</td><td> </td><td class="right">                               qWarning() &lt;&lt; "The Oculars ini file appears 
to be corrupt; delete it.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       } else {</td><td> </td><td class="rblock">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "There are no telescopes defin
ed for the Oculars plugin; plugin will be disabled.";</td><td> </td><td class="right">                               qWarning() &lt;&lt; "There are no telescopes defin
ed for the Oculars plugin; plugin will be disabled.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = 0;</td><td> </td><td class="right">                       selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int lensCount = settings-&gt;value("lens_count", 0).toInt();</td><td> </td><td class="right">               int lensCount = settings-&gt;value("lens_count", 0).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int actualLensCount = lensCount;</td><td> </td><td class="right">               int actualLensCount = lensCount;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for (int index = 0; index&lt;lensCount; index++) {</td><td> </td><td class="rblock">               for (int index = 0; index&lt;lensCount; index++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Lens *newLens = Lens::lensFromSettings(settings, ind
ex);</td><td> </td><td class="right">                       Lens *newLens = Lens::lensFromSettings(settings, ind
ex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (newLens != NULL) {</td><td> </td><td class="rblock">                       if (newLens != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               lense.append(newLens);</td><td> </td><td class="right">                               lense.append(newLens);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       else {</td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               actualLensCount--;</td><td> </td><td class="right">                               actualLensCount--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (lensCount &gt; 0 &amp;&amp; actualLensCount &lt; lensCount)</td><td> </td><td class="right">               if (lensCount &gt; 0 &amp;&amp; actualLensCount &lt; lensCount)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "The Oculars ini file appears to be co
rrupt; delete it.";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "The Oculars ini file appears to be co
rrupt; delete it.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ocularDialog = new OcularDialog(this, &amp;ccds, &amp;oculars, &amp;tele
scopes, &amp;lense);</td><td> </td><td class="right">               ocularDialog = new OcularDialog(this, &amp;ccds, &amp;oculars, &amp;tele
scopes, &amp;lense);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               initializeActivationActions();</td><td> </td><td class="right">               initializeActivationActions();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               determineMaxEyepieceAngle();</td><td> </td><td class="right">               determineMaxEyepieceAngle();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               guiPanelEnabled = settings-&gt;value("enable_control_panel", tr
ue).toBool();</td><td> </td><td class="right">               guiPanelEnabled = settings-&gt;value("enable_control_panel", tr
ue).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               enableGuiPanel(guiPanelEnabled);</td><td> </td><td class="right">               enableGuiPanel(guiPanelEnabled);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagDecimalDegrees(settings-&gt;value("use_decimal_degrees",
 false).toBool());</td><td> </td><td class="right">               setFlagDecimalDegrees(settings-&gt;value("use_decimal_degrees",
 false).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagLimitMagnitude(settings-&gt;value("limit_stellar_magnitu
de", true).toBool());</td><td> </td><td class="right">               setFlagLimitMagnitude(settings-&gt;value("limit_stellar_magnitu
de", true).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagInitFovUsage(settings-&gt;value("use_initial_fov", false
).toBool());</td><td> </td><td class="right">               setFlagInitFovUsage(settings-&gt;value("use_initial_fov", false
).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagUseFlipForCCD(settings-&gt;value("use_ccd_flip", false).
toBool());</td><td> </td><td class="right">               setFlagUseFlipForCCD(settings-&gt;value("use_ccd_flip", false).
toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagUseSemiTransparency(settings-&gt;value("use_semi_transpa
rency", false).toBool());</td><td> </td><td class="right">               setFlagUseSemiTransparency(settings-&gt;value("use_semi_transpa
rency", false).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } catch (std::runtime_error&amp; e) {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       catch (std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING: unable to locate ocular.ini file or 
create a default one for Ocular plugin: " &lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING: unable to locate ocular.ini file or 
create a default one for Ocular plugin: " &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ready = false;</td><td> </td><td class="right">               ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Load the module's custom style sheets</td><td> </td><td class="right">       //Load the module's custom style sheets</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile styleSheetFile;</td><td> </td><td class="right">       QFile styleSheetFile;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.setFileName(":/ocular/normalStyle.css");</td><td> </td><td class="right">       styleSheetFile.setFileName(":/ocular/normalStyle.css");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text)) {</td><td> </td><td class="rblock">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               normalStyleSheet = styleSheetFile.readAll();</td><td> </td><td class="right">               normalStyleSheet = styleSheetFile.readAll();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.close();</td><td> </td><td class="right">       styleSheetFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.setFileName(":/ocular/nightStyle.css");</td><td> </td><td class="right">       styleSheetFile.setFileName(":/ocular/nightStyle.css");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text)) {</td><td> </td><td class="rblock">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               nightStyleSheet = styleSheetFile.readAll();</td><td> </td><td class="right">               nightStyleSheet = styleSheetFile.readAll();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.close();</td><td> </td><td class="right">       styleSheetFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       connect(&amp;StelApp::getInstance(), SIGNAL(colorSchemeChanged(const QSt</td><td> </td><td class="rblock">       connect(&amp;StelApp::getInstance(), SIGNAL(colorSchemeChanged(const QSt</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ring&amp;)),</td><td> </td><td class="rblock">ring&amp;)), this, SLOT(setStelStyle(const <span class="insert">QString&amp;)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       this, SLOT(setStelStyle(const <span class="delete">QStrin</span></td><td> </td><td class="rblock">       connect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()), this, <span class="insert">SL</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">g&amp;)));</span></td><td> </td><td class="rblock"><span class="insert">OT(retranslateGui()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       connect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()),</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       this, <span class="delete">SLOT(retranslateGui()));</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedOcularChanged()), this, SLOT(updateOcul
arReticle()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedOcularChanged()), this, SLOT(updateOcul
arReticle()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::setStelStyle(const QString&amp;)</td><td> </td><td class="right">void Oculars::setStelStyle(const QString&amp;)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(ocularDialog) {</td><td> </td><td class="rblock">       if(ocularDialog)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ocularDialog-&gt;updateStyle();</td><td> </td><td class="right">               ocularDialog-&gt;updateStyle();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#if 0</td><td> </td><td class="right">#if 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark -</td><td> </td><td class="right">#pragma mark -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark Private slots Methods</td><td> </td><td class="right">#pragma mark Private slots Methods</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::determineMaxEyepieceAngle()</td><td> </td><td class="right">void Oculars::determineMaxEyepieceAngle()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (ready) {</td><td> </td><td class="rblock">       if (ready)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               foreach (Ocular* ocular, oculars) {</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (ocular-&gt;appearentFOV() &gt; maxEyepieceAngle) {</td><td> </td><td class="rblock">               foreach (Ocular* ocular, oculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       if (ocular-&gt;appearentFOV() &gt; maxEyepieceAngle)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               maxEyepieceAngle = ocular-&gt;appearentFOV();</td><td> </td><td class="right">                               maxEyepieceAngle = ocular-&gt;appearentFOV();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // insure it is not zero</td><td> </td><td class="right">       // insure it is not zero</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (maxEyepieceAngle == 0.0) {</td><td> </td><td class="rblock">       if (maxEyepieceAngle == 0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               maxEyepieceAngle = 1.0;</td><td> </td><td class="right">               maxEyepieceAngle = 1.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::instrumentChanged()</td><td> </td><td class="right">void Oculars::instrumentChanged()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // We only zoom if in ocular mode.</td><td> </td><td class="right">       // We only zoom if in ocular mode.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flagShowOculars) {</td><td> </td><td class="rblock">       if (flagShowOculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               zoom(true);</td><td> </td><td class="right">               zoom(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::setRequireSelection(bool state)</td><td> </td><td class="right">void Oculars::setRequireSelection(bool state)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       requireSelection = state;</td><td> </td><td class="right">       requireSelection = state;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::setScaleImageCircle(bool state)</td><td> </td><td class="right">void Oculars::setScaleImageCircle(bool state)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (state) {</td><td> </td><td class="rblock">       if (state)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               determineMaxEyepieceAngle();</td><td> </td><td class="right">               determineMaxEyepieceAngle();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       useMaxEyepieceAngle = state;</td><td> </td><td class="right">       useMaxEyepieceAngle = state;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::setScreenFOVForCCD()</td><td> </td><td class="right">void Oculars::setScreenFOVForCCD()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Lens * lens = selectedLensIndex &gt;=0  ? lense[selectedLensIndex] : NU
LL;</td><td> </td><td class="right">       Lens * lens = selectedLensIndex &gt;=0  ? lense[selectedLensIndex] : NU
LL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedCCDIndex &gt; -1 &amp;&amp; selectedTelescopeIndex &gt; -1) {</td><td> </td><td class="rblock">       if (selectedCCDIndex &gt; -1 &amp;&amp; selectedTelescopeIndex &gt; -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">               StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td> </td><td class="right">               StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double actualFOVx = ccds[selectedCCDIndex]-&gt;getActualFOVx(te
lescopes[selectedTelescopeIndex], lens);</td><td> </td><td class="right">               double actualFOVx = ccds[selectedCCDIndex]-&gt;getActualFOVx(te
lescopes[selectedTelescopeIndex], lens);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double actualFOVy = ccds[selectedCCDIndex]-&gt;getActualFOVy(te
lescopes[selectedTelescopeIndex], lens);</td><td> </td><td class="right">               double actualFOVy = ccds[selectedCCDIndex]-&gt;getActualFOVy(te
lescopes[selectedTelescopeIndex], lens);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (actualFOVx &lt; actualFOVy) {</td><td> </td><td class="rblock">               if (actualFOVx &lt; actualFOVy)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       actualFOVx = actualFOVy;</td><td> </td><td class="right">                       actualFOVx = actualFOVy;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               movementManager-&gt;setFlagTracking(true);</td><td> </td><td class="right">               movementManager-&gt;setFlagTracking(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               movementManager-&gt;zoomTo(actualFOVx * 1.75, 0.0);</td><td> </td><td class="right">               movementManager-&gt;zoomTo(actualFOVx * 1.75, 0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::enableGuiPanel(bool enable)</td><td> </td><td class="right">void Oculars::enableGuiPanel(bool enable)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (enable)</td><td> </td><td class="right">       if (enable)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 752</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 830</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#if 0</td><td> </td><td class="right">#if 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark -</td><td> </td><td class="right">#pragma mark -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark Slots Methods</td><td> </td><td class="right">#pragma mark Slots Methods</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::updateLists()</td><td> </td><td class="right">void Oculars::updateLists()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (oculars.isEmpty())</td><td> </td><td class="right">       if (oculars.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedOcularIndex = -1;</td><td> </td><td class="right">               selectedOcularIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">actionShowOcular-&gt;setChecked</span>(false);</td><td> </td><td class="rblock">               <span class="insert">enableOcular</span>(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (selectedOcularIndex &gt;= oculars.count())</td><td> </td><td class="right">               if (selectedOcularIndex &gt;= oculars.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex = oculars.count() - 1;</td><td> </td><td class="right">                       selectedOcularIndex = oculars.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowOculars)</td><td> </td><td class="right">               if (flagShowOculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit selectedOcularChanged();</td><td> </td><td class="right">                       emit selectedOcularChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (telescopes.isEmpty())</td><td> </td><td class="right">       if (telescopes.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedTelescopeIndex = -1;</td><td> </td><td class="right">               selectedTelescopeIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">actionShowOcular-&gt;setChecked(false);</span></td><td> </td><td class="rblock">               <span class="insert">enableOcular(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               actionShowSensor-&gt;setChecked(false);</span></td><td> </td><td class="rblock"><span class="insert">               toggleCCD(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (selectedTelescopeIndex &gt;= telescopes.count())</td><td> </td><td class="right">               if (selectedTelescopeIndex &gt;= telescopes.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = telescopes.count() - 1;</td><td> </td><td class="right">                       selectedTelescopeIndex = telescopes.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowOculars || flagShowCCD)</td><td> </td><td class="right">               if (flagShowOculars || flagShowCCD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit selectedTelescopeChanged();</td><td> </td><td class="right">                       emit selectedTelescopeChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (ccds.isEmpty())</td><td> </td><td class="right">       if (ccds.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedCCDIndex = -1;</td><td> </td><td class="right">               selectedCCDIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">actionShowSensor-&gt;setChecked</span>(false);</td><td> </td><td class="rblock">               <span class="insert">toggleCCD</span>(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (selectedCCDIndex &gt;= ccds.count())</td><td> </td><td class="right">               if (selectedCCDIndex &gt;= ccds.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedCCDIndex = ccds.count() - 1;</td><td> </td><td class="right">                       selectedCCDIndex = ccds.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowCCD)</td><td> </td><td class="right">               if (flagShowCCD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit selectedCCDChanged();</td><td> </td><td class="right">                       emit selectedCCDChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 814</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 892</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else return 0.0;</td><td> </td><td class="right">       else return 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::enableOcular(bool enableOcularMode)</td><td> </td><td class="right">void Oculars::enableOcular(bool enableOcularMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (enableOcularMode)</td><td> </td><td class="right">       if (enableOcularMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Close the sensor view if it's displayed</td><td> </td><td class="right">               // Close the sensor view if it's displayed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowCCD)</td><td> </td><td class="right">               if (flagShowCCD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">if (actionShowSensor-&gt;isChecked())</span></td><td> </td><td class="rblock">                       <span class="insert">toggleCCD(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               actionShowSensor-&gt;setChecked(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagShowCCD = false;</td><td> </td><td class="right">                       flagShowCCD = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedCCDIndex = -1;</td><td> </td><td class="right">                       selectedCCDIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Close the Telrad sight if it's displayed</td><td> </td><td class="right">               // Close the Telrad sight if it's displayed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowTelrad)</td><td> </td><td class="right">               if (flagShowTelrad)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">if (actionShowTelrad-&gt;isChecked())</span></td><td> </td><td class="rblock">                       <span class="insert">toggleTelrad(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               actionShowTelrad-&gt;setChecked(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Check to ensure that we have enough oculars &amp; telescopes,
 as they may have been edited in the config dialog</td><td> </td><td class="right">               // Check to ensure that we have enough oculars &amp; telescopes,
 as they may have been edited in the config dialog</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (oculars.count() == 0) {</td><td> </td><td class="rblock">               if (oculars.count() == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex = -1;</td><td> </td><td class="right">                       selectedOcularIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "No oculars found";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "No oculars found";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else if (oculars.count() &gt; 0 &amp;&amp; selectedOcularIndex == -1)</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> {</td><td> </td><td class="rblock">               else if (oculars.count() &gt; 0 &amp;&amp; selectedOcularIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex = 0;</td><td> </td><td class="right">                       selectedOcularIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (telescopes.count() == 0) {</td><td> </td><td class="rblock">               if (telescopes.count() == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = -1;</td><td> </td><td class="right">                       selectedTelescopeIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "No telescopes found";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "No telescopes found";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else if (telescopes.count() &gt; 0 &amp;&amp; selectedTelescopeIndex </td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">== -1) {</td><td> </td><td class="rblock">               else if (telescopes.count() &gt; 0 &amp;&amp; selectedTelescopeIndex ==</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"> -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = 0;</td><td> </td><td class="right">                       selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!ready  || selectedOcularIndex == -1 ||  (selectedTelescopeIndex</td><td> </td><td class="rblock">       if (!ready  || selectedOcularIndex == -1 ||  (selectedTelescopeIndex</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> == -1 &amp;&amp; !isBinocularDefined())) {</td><td> </td><td class="rblock"> == -1 &amp;&amp; !isBinocularDefined()))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "The Oculars module has been disabled.";</td><td> </td><td class="right">               qWarning() &lt;&lt; "The Oculars module has been disabled.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       LabelMgr* labelManager = GETSTELMODULE(LabelMgr);</td><td> </td><td class="right">       LabelMgr* labelManager = GETSTELMODULE(LabelMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Toggle the ocular view on &amp; off. To toggle on, we want to ensure 
there is a selected object.</td><td> </td><td class="right">       // Toggle the ocular view on &amp; off. To toggle on, we want to ensure 
there is a selected object.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!flagShowOculars &amp;&amp; requireSelection &amp;&amp; !StelApp::getInstance().</td><td> </td><td class="rblock">       if (!flagShowOculars &amp;&amp; requireSelection &amp;&amp; !StelApp::getInstance().</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">getStelObjectMgr().getWasSelected() ) {</td><td> </td><td class="rblock">getStelObjectMgr().getWasSelected() )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (usageMessageLabelID == -1) {</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               if (usageMessageLabelID == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFontMetrics metrics(font);</td><td> </td><td class="right">                       QFontMetrics metrics(font);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString labelText = q_("Please select an object befo
re switching to ocular view.");</td><td> </td><td class="right">                       QString labelText = q_("Please select an object befo
re switching to ocular view.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelProjector::StelProjectorParams projectorParams =
 core-&gt;getCurrentStelProjectorParams();</td><td> </td><td class="right">                       StelProjector::StelProjectorParams projectorParams =
 core-&gt;getCurrentStelProjectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int xPosition = projectorParams.viewportCenter[0];</td><td> </td><td class="right">                       int xPosition = projectorParams.viewportCenter[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       xPosition = xPosition - 0.5 * (metrics.width(labelTe
xt));</td><td> </td><td class="right">                       xPosition = xPosition - 0.5 * (metrics.width(labelTe
xt));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int yPosition = projectorParams.viewportCenter[1];</td><td> </td><td class="right">                       int yPosition = projectorParams.viewportCenter[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition = yPosition - 0.5 * (metrics.height());</td><td> </td><td class="right">                       yPosition = yPosition - 0.5 * (metrics.height());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const char *tcolor = "#99FF99";</td><td> </td><td class="right">                       const char *tcolor = "#99FF99";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       usageMessageLabelID = labelManager-&gt;labelScreen(labe
lText, xPosition, yPosition,</td><td> </td><td class="right">                       usageMessageLabelID = labelManager-&gt;labelScreen(labe
lText, xPosition, yPosition,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                       true
, font.pixelSize(), tcolor);</td><td> </td><td class="right">                                                                       true
, font.pixelSize(), tcolor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">// we didn't accept the new status - make sure the toolbar b</span></td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">utton reflects this</span></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               disconnect(actionShowOcular, SIGNAL(toggled(bool)),</span></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                        this, SLOT(enableOc</span></td><td> </td><td class="rblock">               if (selectedOcularIndex != -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ular(bool)));</span></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               actionShowOcular-&gt;setChecked(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               connect(actionShowOcular, SIGNAL(toggled(bool)),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               this, SLOT(enableOcular(bool</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)));</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (selectedOcularIndex != -1) {</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // remove the usage label if it is being displayed.</td><td> </td><td class="right">                       // remove the usage label if it is being displayed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hideUsageMessageIfDisplayed();</td><td> </td><td class="right">                       hideUsageMessageIfDisplayed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagShowOculars = enableOcularMode;</td><td> </td><td class="right">                       flagShowOculars = enableOcularMode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       zoom(false);</td><td> </td><td class="right">                       zoom(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //BM: I hope this is the right place...</td><td> </td><td class="right">                       //BM: I hope this is the right place...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (guiPanel)</td><td> </td><td class="right">                       if (guiPanel)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               guiPanel-&gt;showOcularGui();</td><td> </td><td class="right">                               guiPanel-&gt;showOcularGui();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">emit enableOcularChanged(flagShowOculars);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::decrementCCDIndex()</td><td> </td><td class="right">void Oculars::decrementCCDIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedCCDIndex--;</td><td> </td><td class="right">       selectedCCDIndex--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedCCDIndex == -1) {</td><td> </td><td class="rblock">       if (selectedCCDIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedCCDIndex = ccds.count() - 1;</td><td> </td><td class="right">               selectedCCDIndex = ccds.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedCCDChanged());</td><td> </td><td class="right">       emit(selectedCCDChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::decrementOcularIndex()</td><td> </td><td class="right">void Oculars::decrementOcularIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedOcularIndex--;</td><td> </td><td class="right">       selectedOcularIndex--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedOcularIndex == -1) {</td><td> </td><td class="rblock">       if (selectedOcularIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedOcularIndex = oculars.count() - 1;</td><td> </td><td class="right">               selectedOcularIndex = oculars.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // validate the new selection</td><td> </td><td class="right">       // validate the new selection</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedOcularIndex &gt; -1 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBin</td><td> </td><td class="rblock">       if (selectedOcularIndex &gt; -1 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBin</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">oculars()) {</td><td> </td><td class="rblock">oculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if ( selectedTelescopeIndex == -1 &amp;&amp; telescopes.count() == 0</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">) {</td><td> </td><td class="rblock">               if ( selectedTelescopeIndex == -1 &amp;&amp; telescopes.count() == 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // reject the change</td><td> </td><td class="right">                       // reject the change</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex++;</td><td> </td><td class="right">                       selectedOcularIndex++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else if (selectedTelescopeIndex == -1) {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else if (selectedTelescopeIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = 0;</td><td> </td><td class="right">                       selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit(selectedOcularChanged());</td><td> </td><td class="right">                       emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit(selectedOcularChanged());</td><td> </td><td class="right">                       emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit(selectedOcularChanged());</td><td> </td><td class="right">               emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::decrementTelescopeIndex()</td><td> </td><td class="right">void Oculars::decrementTelescopeIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedTelescopeIndex--;</td><td> </td><td class="right">       selectedTelescopeIndex--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedTelescopeIndex == -1) {</td><td> </td><td class="rblock">       if (selectedTelescopeIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedTelescopeIndex = telescopes.count() - 1;</td><td> </td><td class="right">               selectedTelescopeIndex = telescopes.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedTelescopeChanged());</td><td> </td><td class="right">       emit(selectedTelescopeChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::decrementLensIndex()</td><td> </td><td class="right">void Oculars::decrementLensIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedLensIndex--;</td><td> </td><td class="right">       selectedLensIndex--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedLensIndex == lense.count()) {</td><td> </td><td class="rblock">       if (selectedLensIndex == lense.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedLensIndex = -1;</td><td> </td><td class="right">               selectedLensIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedLensIndex == -2) {</td><td> </td><td class="rblock">       if (selectedLensIndex == -2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedLensIndex = lense.count() - 1;</td><td> </td><td class="right">               selectedLensIndex = lense.count() - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedLensChanged());</td><td> </td><td class="right">       emit(selectedLensChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::displayPopupMenu()</td><td> </td><td class="right">void Oculars::displayPopupMenu()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QMenu * popup = new QMenu(&amp;StelMainView::getInstance());</td><td> </td><td class="right">       QMenu * popup = new QMenu(&amp;StelMainView::getInstance());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelGui * gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui
());</td><td> </td><td class="right">       StelGui * gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui
());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(gui);</td><td> </td><td class="right">       Q_ASSERT(gui);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt;this-&gt;getModuleStyleSheet(gui-&gt;getStelStyle()).qtStyleShe
et;</td><td> </td><td class="right">       qDebug() &lt;&lt;this-&gt;getModuleStyleSheet(gui-&gt;getStelStyle()).qtStyleShe
et;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       popup-&gt;setStyleSheet(this-&gt;getModuleStyleSheet(gui-&gt;getStelStyle()).
qtStyleSheet);</td><td> </td><td class="right">       popup-&gt;setStyleSheet(this-&gt;getModuleStyleSheet(gui-&gt;getStelStyle()).
qtStyleSheet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flagShowOculars) {</td><td> </td><td class="rblock">       if (flagShowOculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We are in Oculars mode</td><td> </td><td class="right">               // We are in Oculars mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We want to show all of the Oculars, and if the current oc
ular is not a binocular,</td><td> </td><td class="right">               // We want to show all of the Oculars, and if the current oc
ular is not a binocular,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // we will also show the telescopes.</td><td> </td><td class="right">               // we will also show the telescopes.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!oculars.isEmpty()) {</td><td> </td><td class="rblock">               if (!oculars.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addAction(q_("&amp;Previous ocular"), this, SLOT(
decrementOcularIndex()));</td><td> </td><td class="right">                       popup-&gt;addAction(q_("&amp;Previous ocular"), this, SLOT(
decrementOcularIndex()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addAction(q_("&amp;Next ocular"), this, SLOT(incr
ementOcularIndex()));</td><td> </td><td class="right">                       popup-&gt;addAction(q_("&amp;Next ocular"), this, SLOT(incr
ementOcularIndex()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = new QMenu(q_("Select &amp;ocular"), pop
up);</td><td> </td><td class="right">                       QMenu* submenu = new QMenu(q_("Select &amp;ocular"), pop
up);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int availableOcularCount = 0;</td><td> </td><td class="right">                       int availableOcularCount = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       for (int index = 0; index &lt; oculars.count(); ++index</td><td> </td><td class="rblock">                       for (int index = 0; index &lt; oculars.count(); ++index</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">) {</td><td> </td><td class="rblock">)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString label;</td><td> </td><td class="right">                               QString label;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (availableOcularCount &lt; 10) {</td><td> </td><td class="rblock">                               if (availableOcularCount &lt; 10)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       label = QString("&amp;%1: %2").arg(avail
ableOcularCount).arg(oculars[index]-&gt;name());</td><td> </td><td class="right">                                       label = QString("&amp;%1: %2").arg(avail
ableOcularCount).arg(oculars[index]-&gt;name());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               } else {</td><td> </td><td class="rblock">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       label = oculars[index]-&gt;name();</td><td> </td><td class="right">                                       label = oculars[index]-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //BM: Does this happen at all any more?</td><td> </td><td class="right">                               //BM: Does this happen at all any more?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QAction* action = 0;</td><td> </td><td class="right">                               QAction* action = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (selectedTelescopeIndex == -1) {</td><td> </td><td class="rblock">                               if (selectedTelescopeIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       if (oculars[index]-&gt;isBinoculars()) </td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">{</td><td> </td><td class="rblock">                                       if (oculars[index]-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               action = submenu-&gt;addAction(
label, ocularsSignalMapper, SLOT(map()));</td><td> </td><td class="right">                                               action = submenu-&gt;addAction(
label, ocularsSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               availableOcularCount++;</td><td> </td><td class="right">                                               availableOcularCount++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               ocularsSignalMapper-&gt;setMapp
ing(action, QString("%1").arg(index));</td><td> </td><td class="right">                                               ocularsSignalMapper-&gt;setMapp
ing(action, QString("%1").arg(index));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               } else {</td><td> </td><td class="rblock">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action = submenu-&gt;addAction(label, o
cularsSignalMapper, SLOT(map()));</td><td> </td><td class="right">                                       action = submenu-&gt;addAction(label, o
cularsSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       availableOcularCount++;</td><td> </td><td class="right">                                       availableOcularCount++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       ocularsSignalMapper-&gt;setMapping(acti
on, QString("%1").arg(index));</td><td> </td><td class="right">                                       ocularsSignalMapper-&gt;setMapping(acti
on, QString("%1").arg(index));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (action &amp;&amp; index == selectedOcularIndex) </td><td> </td><td class="rblock">                               if (action &amp;&amp; index == selectedOcularIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">{</td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action-&gt;setChecked(true);</td><td> </td><td class="right">                                       action-&gt;setChecked(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addSeparator();</td><td> </td><td class="right">                       popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // If there is more than one telescope, show the prev/next/l
ist complex.</td><td> </td><td class="right">               // If there is more than one telescope, show the prev/next/l
ist complex.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // If the selected ocular is a binoculars, show nothing.</td><td> </td><td class="right">               // If the selected ocular is a binoculars, show nothing.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (telescopes.count() &gt; 1 &amp;&amp; (selectedOcularIndex &gt; -1 &amp;&amp; !</td><td> </td><td class="rblock">               if (telescopes.count() &gt; 1 &amp;&amp; (selectedOcularIndex &gt; -1 &amp;&amp; !</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">oculars[selectedOcularIndex]-&gt;isBinoculars())) {</td><td> </td><td class="rblock">oculars[selectedOcularIndex]-&gt;isBinoculars()))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td> </td><td class="right">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       submenu = addLensSubmenu(popup);</td><td> </td><td class="right">                       submenu = addLensSubmenu(popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addSeparator();</td><td> </td><td class="right">                       popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QAction* action = popup-&gt;addAction(q_("Toggle &amp;crosshair"));</td><td> </td><td class="right">               QAction* action = popup-&gt;addAction(q_("Toggle &amp;crosshair"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setCheckable(true);</td><td> </td><td class="right">               action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setChecked(flagShowCrosshairs);</td><td> </td><td class="right">               action-&gt;setChecked(flagShowCrosshairs);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               connect(action, SIGNAL(toggled(bool)), actionShowCrosshairs,
 SLOT(setChecked(bool)));</td><td> </td><td class="right">               connect(action, SIGNAL(toggled(bool)), actionShowCrosshairs,
 SLOT(setChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We are not in ocular mode</td><td> </td><td class="right">               // We are not in ocular mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We want to show the CCD's, and if a CCD is selected, the 
telescopes</td><td> </td><td class="right">               // We want to show the CCD's, and if a CCD is selected, the 
telescopes</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //(as a CCD requires a telescope) and the general menu items
.</td><td> </td><td class="right">               //(as a CCD requires a telescope) and the general menu items
.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QAction* action = new QAction(q_("Configure &amp;Oculars"), popu
p);</td><td> </td><td class="right">               QAction* action = new QAction(q_("Configure &amp;Oculars"), popu
p);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setCheckable(true);</td><td> </td><td class="right">               action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setChecked(ocularDialog-&gt;visible());</td><td> </td><td class="right">               action-&gt;setChecked(ocularDialog-&gt;visible());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               connect(action, SIGNAL(triggered(bool)), ocularDialog, SLOT(
setVisible(bool)));</td><td> </td><td class="right">               connect(action, SIGNAL(triggered(bool)), ocularDialog, SLOT(
setVisible(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               popup-&gt;addAction(action);</td><td> </td><td class="right">               popup-&gt;addAction(action);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               popup-&gt;addSeparator();</td><td> </td><td class="right">               popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!flagShowTelrad) {</td><td> </td><td class="rblock">               if (!flagShowTelrad)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;CCD")
);</td><td> </td><td class="right">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;CCD")
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setChecked(flagShowCCD);</td><td> </td><td class="right">                       action-&gt;setChecked(flagShowCCD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       connect(action, SIGNAL(toggled(bool)), actionShowSen
sor, SLOT(setChecked(bool)));</td><td> </td><td class="right">                       connect(action, SIGNAL(toggled(bool)), actionShowSen
sor, SLOT(setChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!flagShowCCD) {</td><td> </td><td class="rblock">               if (!flagShowCCD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;Telra
d"));</td><td> </td><td class="right">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;Telra
d"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setChecked(flagShowTelrad);</td><td> </td><td class="right">                       action-&gt;setChecked(flagShowTelrad);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       connect(action, SIGNAL(toggled(bool)), actionShowTel
rad, SLOT(setChecked(bool)));</td><td> </td><td class="right">                       connect(action, SIGNAL(toggled(bool)), actionShowTel
rad, SLOT(setChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               popup-&gt;addSeparator();</td><td> </td><td class="right">               popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; selectedTelescop</td><td> </td><td class="rblock">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; selectedTelescop</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">eIndex &gt; -1) {</td><td> </td><td class="rblock">eIndex &gt; -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addAction(q_("&amp;Previous CCD"), this, SLOT(dec
rementCCDIndex()));</td><td> </td><td class="right">                       popup-&gt;addAction(q_("&amp;Previous CCD"), this, SLOT(dec
rementCCDIndex()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addAction(q_("&amp;Next CCD"), this, SLOT(increme
ntCCDIndex()));</td><td> </td><td class="right">                       popup-&gt;addAction(q_("&amp;Next CCD"), this, SLOT(increme
ntCCDIndex()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = new QMenu(q_("&amp;Select CCD"), popup)
;</td><td> </td><td class="right">                       QMenu* submenu = new QMenu(q_("&amp;Select CCD"), popup)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0103" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       for (int index = 0; index &lt; ccds.count(); ++index) {</td><td> </td><td class="rblock">                       for (int index = 0; index &lt; ccds.count(); ++index)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString label;</td><td> </td><td class="right">                               QString label;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0104" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (index &lt; 10) {</td><td> </td><td class="rblock">                               if (index &lt; 10)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       label = QString("&amp;%1: %2").arg(index
).arg(ccds[index]-&gt;name());</td><td> </td><td class="right">                                       label = QString("&amp;%1: %2").arg(index
).arg(ccds[index]-&gt;name());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0105" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               } else {</td><td> </td><td class="rblock">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       label = ccds[index]-&gt;name();</td><td> </td><td class="right">                                       label = ccds[index]-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QAction* action = submenu-&gt;addAction(label, 
ccdsSignalMapper, SLOT(map()));</td><td> </td><td class="right">                               QAction* action = submenu-&gt;addAction(label, 
ccdsSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0106" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (index == selectedCCDIndex) {</td><td> </td><td class="rblock">                               if (index == selectedCCDIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action-&gt;setChecked(true);</td><td> </td><td class="right">                                       action-&gt;setChecked(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ccdsSignalMapper-&gt;setMapping(action, QString
("%1").arg(index));</td><td> </td><td class="right">                               ccdsSignalMapper-&gt;setMapping(action, QString
("%1").arg(index));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       submenu = new QMenu(q_("&amp;Rotate CCD"), popup);</td><td> </td><td class="right">                       submenu = new QMenu(q_("&amp;Rotate CCD"), popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QAction* rotateAction = NULL;</td><td> </td><td class="right">                       QAction* rotateAction = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;1: -90")
 + QChar(0x00B0), ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;1: -90")
 + QChar(0x00B0), ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 1068</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 1187</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("15"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("15"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;9: +45")
 + QChar(0x00B0), ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;9: +45")
 + QChar(0x00B0), ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("45"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("45"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;0: +90")
 + QChar(0x00B0), ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;0: +90")
 + QChar(0x00B0), ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("90"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("90"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(q_("&amp;Reset rotatio
n"), this, SLOT(ccdRotationReset()));</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(q_("&amp;Reset rotatio
n"), this, SLOT(ccdRotationReset()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addSeparator();</td><td> </td><td class="right">                       popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0107" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; telescopes.count</td><td> </td><td class="rblock">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; telescopes.count</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">() &gt; 1) {</td><td> </td><td class="rblock">() &gt; 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td> </td><td class="right">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       submenu = addLensSubmenu(popup);</td><td> </td><td class="right">                       submenu = addLensSubmenu(popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addSeparator();</td><td> </td><td class="right">                       popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       popup-&gt;exec(QCursor::pos());</td><td> </td><td class="right">       popup-&gt;exec(QCursor::pos());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete popup;</td><td> </td><td class="right">       delete popup;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::incrementCCDIndex()</td><td> </td><td class="right">void Oculars::incrementCCDIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedCCDIndex++;</td><td> </td><td class="right">       selectedCCDIndex++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0108" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedCCDIndex == ccds.count()) {</td><td> </td><td class="rblock">       if (selectedCCDIndex == ccds.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedCCDIndex = 0;</td><td> </td><td class="right">               selectedCCDIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedCCDChanged());</td><td> </td><td class="right">       emit(selectedCCDChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::incrementOcularIndex()</td><td> </td><td class="right">void Oculars::incrementOcularIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedOcularIndex++;</td><td> </td><td class="right">       selectedOcularIndex++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0109" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedOcularIndex == oculars.count()) {</td><td> </td><td class="rblock">       if (selectedOcularIndex == oculars.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedOcularIndex = 0;</td><td> </td><td class="right">               selectedOcularIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // validate the new selection</td><td> </td><td class="right">       // validate the new selection</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0110" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedOcularIndex &gt; -1 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBin</td><td> </td><td class="rblock">       if (selectedOcularIndex &gt; -1 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBin</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">oculars()) {</td><td> </td><td class="rblock">oculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if ( selectedTelescopeIndex == -1 &amp;&amp; telescopes.count() == 0</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">) {</td><td> </td><td class="rblock">               if ( selectedTelescopeIndex == -1 &amp;&amp; telescopes.count() == 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // reject the change</td><td> </td><td class="right">                       // reject the change</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex++;</td><td> </td><td class="right">                       selectedOcularIndex++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0111" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else if (selectedTelescopeIndex == -1) {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else if (selectedTelescopeIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = 0;</td><td> </td><td class="right">                       selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit(selectedOcularChanged());</td><td> </td><td class="right">                       emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0112" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit(selectedOcularChanged());</td><td> </td><td class="right">                       emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0113" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit(selectedOcularChanged());</td><td> </td><td class="right">               emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::incrementTelescopeIndex()</td><td> </td><td class="right">void Oculars::incrementTelescopeIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedTelescopeIndex++;</td><td> </td><td class="right">       selectedTelescopeIndex++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0114" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedTelescopeIndex == telescopes.count()) {</td><td> </td><td class="rblock">       if (selectedTelescopeIndex == telescopes.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedTelescopeIndex = 0;</td><td> </td><td class="right">               selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedTelescopeChanged());</td><td> </td><td class="right">       emit(selectedTelescopeChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::incrementLensIndex()</td><td> </td><td class="right">void Oculars::incrementLensIndex()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedLensIndex++;</td><td> </td><td class="right">       selectedLensIndex++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0115" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedLensIndex == lense.count()) {</td><td> </td><td class="rblock">       if (selectedLensIndex == lense.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedLensIndex = -1;</td><td> </td><td class="right">               selectedLensIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedLensChanged());</td><td> </td><td class="right">       emit(selectedLensChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::disableLens()</td><td> </td><td class="right">void Oculars::disableLens()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedLensIndex = -1;</td><td> </td><td class="right">       selectedLensIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedLensChanged());</td><td> </td><td class="right">       emit(selectedLensChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::rotateCCD(QString amount)</td><td> </td><td class="right">void Oculars::rotateCCD(QString amount)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CCD *ccd = ccds[selectedCCDIndex];</td><td> </td><td class="right">       CCD *ccd = ccds[selectedCCDIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ccd) return;</td><td> </td><td class="right">       if (!ccd) return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double angle = ccd-&gt;chipRotAngle();</td><td> </td><td class="right">       double angle = ccd-&gt;chipRotAngle();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       angle += amount.toInt();</td><td> </td><td class="right">       angle += amount.toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0116" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (angle &gt;= 360) {</td><td> </td><td class="rblock">       if (angle &gt;= 360)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               angle -= 360;</td><td> </td><td class="right">               angle -= 360;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0117" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (angle &lt;= -360) {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else if (angle &lt;= -360)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               angle += 360;</td><td> </td><td class="right">               angle += 360;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ccd-&gt;setChipRotAngle(angle);</td><td> </td><td class="right">       ccd-&gt;setChipRotAngle(angle);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(selectedCCDChanged());</td><td> </td><td class="right">       emit(selectedCCDChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::selectCCDAtIndex(QString indexString)</td><td> </td><td class="right">void Oculars::selectCCDAtIndex(QString indexString)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int index = indexString.toInt();</td><td> </td><td class="right">       int index = indexString.toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0118" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (index &gt; -2 &amp;&amp; index &lt; ccds.count()) {</td><td> </td><td class="rblock">       if (index &gt; -2 &amp;&amp; index &lt; ccds.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedCCDIndex = index;</td><td> </td><td class="right">               selectedCCDIndex = index;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit(selectedCCDChanged());</td><td> </td><td class="right">               emit(selectedCCDChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::selectOcularAtIndex(QString indexString)</td><td> </td><td class="right">void Oculars::selectOcularAtIndex(QString indexString)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int index = indexString.toInt();</td><td> </td><td class="right">       int index = indexString.toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // validate the new selection</td><td> </td><td class="right">       // validate the new selection</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0119" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (oculars[index]-&gt;isBinoculars()) {</td><td> </td><td class="rblock">       if (oculars[index]-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedOcularIndex = index;</td><td> </td><td class="right">               selectedOcularIndex = index;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit(selectedOcularChanged());</td><td> </td><td class="right">               emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0120" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if ( selectedTelescopeIndex == -1 &amp;&amp; telescopes.count() == 0</td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">) {</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               if ( selectedTelescopeIndex == -1 &amp;&amp; telescopes.count() == 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // reject the change</td><td> </td><td class="right">                       // reject the change</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0121" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (selectedTelescopeIndex == -1) {</td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       if (selectedTelescopeIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               selectedTelescopeIndex = 0;</td><td> </td><td class="right">                               selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedOcularIndex = index;</td><td> </td><td class="right">                       selectedOcularIndex = index;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit(selectedOcularChanged());</td><td> </td><td class="right">                       emit(selectedOcularChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::selectTelescopeAtIndex(QString indexString)</td><td> </td><td class="right">void Oculars::selectTelescopeAtIndex(QString indexString)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int index = indexString.toInt();</td><td> </td><td class="right">       int index = indexString.toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0122" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (index &gt; -2 &amp;&amp; index &lt; telescopes.count()) {</td><td> </td><td class="rblock">       if (index &gt; -2 &amp;&amp; index &lt; telescopes.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedTelescopeIndex = index;</td><td> </td><td class="right">               selectedTelescopeIndex = index;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit(selectedTelescopeChanged());</td><td> </td><td class="right">               emit(selectedTelescopeChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::selectLensAtIndex(QString indexString)</td><td> </td><td class="right">void Oculars::selectLensAtIndex(QString indexString)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int index = indexString.toInt();</td><td> </td><td class="right">       int index = indexString.toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0123" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (index &gt; -2 &amp;&amp; index &lt; lense.count()) {</td><td> </td><td class="rblock">       if (index &gt; -2 &amp;&amp; index &lt; lense.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedLensIndex = index;</td><td> </td><td class="right">               selectedLensIndex = index;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit(selectedLensChanged());</td><td> </td><td class="right">               emit(selectedLensChanged());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::toggleCCD(bool show)</td><td> </td><td class="right">void Oculars::toggleCCD(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //If there are no sensors...</td><td> </td><td class="right">       //If there are no sensors...</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0124" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (ccds.isEmpty() || telescopes.isEmpty()) {</td><td> </td><td class="rblock">       if (ccds.isEmpty() || telescopes.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: BM: Make this an on-screen message and/or disable th
e button</td><td> </td><td class="right">               //TODO: BM: Make this an on-screen message and/or disable th
e button</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //if there are no sensors.</td><td> </td><td class="right">               //if there are no sensors.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show)</td><td> </td><td class="right">               if (show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars plugin: Unable to display a s
ensor boundary: No sensors or telescopes are defined.";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars plugin: Unable to display a s
ensor boundary: No sensors or telescopes are defined.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagShowCCD = false;</td><td> </td><td class="right">               flagShowCCD = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedCCDIndex = -1;</td><td> </td><td class="right">               selectedCCDIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               show = false;</td><td> </td><td class="right">               show = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0125" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if (actionShowSensor-&gt;isChecked()) {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       actionShowSensor-&gt;setChecked(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td> </td><td class="right">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0126" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (show) {</td><td> </td><td class="rblock">       <span class="insert">StelSkyDrawer *skyManager = core-&gt;getSkyDrawer();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       skyManager-&gt;setAbsoluteStarScale(absoluteStarScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       if (show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               initialFOV = movementManager-&gt;getCurrentFov();</td><td> </td><td class="right">               initialFOV = movementManager-&gt;getCurrentFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Mutually exclusive with the ocular mode</td><td> </td><td class="right">               //Mutually exclusive with the ocular mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               hideUsageMessageIfDisplayed();</td><td> </td><td class="right">               hideUsageMessageIfDisplayed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0127" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if (flagShowOculars) {</span></td><td> </td><td class="rblock">               <span class="insert">enableOcular(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if (actionShowOcular-&gt;isChecked()) {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               actionShowOcular-&gt;setChecked(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowTelrad) {</td><td> </td><td class="right">               if (flagShowTelrad) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0128" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">if (actionShowTelrad-&gt;isChecked()) {</span></td><td> </td><td class="rblock">                       <span class="insert">toggleTelrad(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               actionShowTelrad-&gt;setChecked(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0129" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (selectedTelescopeIndex &lt; 0) {</td><td> </td><td class="rblock">               if (selectedTelescopeIndex &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedTelescopeIndex = 0;</td><td> </td><td class="right">                       selectedTelescopeIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0130" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (selectedCCDIndex &lt; 0) {</td><td> </td><td class="rblock">               if (selectedCCDIndex &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       selectedCCDIndex = 0;</td><td> </td><td class="right">                       selectedCCDIndex = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagShowCCD = true;</td><td> </td><td class="right">               flagShowCCD = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setScreenFOVForCCD();</td><td> </td><td class="right">               setScreenFOVForCCD();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0131" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (guiPanel) {</td><td> </td><td class="rblock">               <span class="insert">// Change relative scale for stars</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // TODO: Finding experimental value for better rendering</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               skyManager-&gt;setRelativeStarScale(0.6);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               if (guiPanel)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       guiPanel-&gt;showCcdGui();</td><td> </td><td class="right">                       guiPanel-&gt;showCcdGui();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0132" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagShowCCD = false;</td><td> </td><td class="right">               flagShowCCD = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0133" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               skyManager-&gt;setRelativeStarScale(relativeStarScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               movementManager-&gt;setFlagTracking(false);</td><td> </td><td class="right">               movementManager-&gt;setFlagTracking(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Zoom out</td><td> </td><td class="right">               //Zoom out</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (getFlagInitFovUsage())</td><td> </td><td class="right">               if (getFlagInitFovUsage())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       movementManager-&gt;zoomTo(movementManager-&gt;getInitFov(
));</td><td> </td><td class="right">                       movementManager-&gt;zoomTo(movementManager-&gt;getInitFov(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       movementManager-&gt;zoomTo(initialFOV);</td><td> </td><td class="right">                       movementManager-&gt;zoomTo(initialFOV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (getFlagUseFlipForCCD())</td><td> </td><td class="right">               if (getFlagUseFlipForCCD())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       core-&gt;setFlipHorz(false);</td><td> </td><td class="right">                       core-&gt;setFlipHorz(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       core-&gt;setFlipVert(false);</td><td> </td><td class="right">                       core-&gt;setFlipVert(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0134" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (guiPanel) {</td><td> </td><td class="rblock">               if (guiPanel)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       guiPanel-&gt;foldGui();</td><td> </td><td class="right">                       guiPanel-&gt;foldGui();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0135" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">emit enableCCDChanged(flagShowCCD);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::toggleCCD()</td><td> </td><td class="right">void Oculars::toggleCCD()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0136" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if (flagShowCCD) {</span></td><td> </td><td class="rblock">       <span class="insert">toggleCCD(!flagShowCCD);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               toggleCCD(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       } else {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               toggleCCD(true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::toggleCrosshairs(bool show)</td><td> </td><td class="right">void Oculars::toggleCrosshairs(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0137" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if<span class="delete"> (show &amp;&amp; flagShowOcula</span>rs)</td><td> </td><td class="rblock">       if<span class="insert">(show != flagShowCrosshai</span>rs)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0138" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               flagShowCrosshairs = <span class="delete">true;</span></td><td> </td><td class="rblock">               flagShowCrosshairs = <span class="insert">show;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"><span class="insert">               emit enableCrosshairsChanged(show);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               flagShowCrosshairs = false;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::toggleTelrad(bool show)</td><td> </td><td class="right">void Oculars::toggleTelrad(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0139" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if<span class="delete"> (show</span>)</td><td> </td><td class="rblock">       if<span class="insert">(show!=flagShowTelrad</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0140" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">hideUsageMessageIfDisplayed();</span></td><td> </td><td class="rblock">               if <span class="insert">(show)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               if (actionShowOcular-&gt;isChecked())</span></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       actionShowOcular-&gt;setChecked(false);</span></td><td> </td><td class="rblock"><span class="insert">                       hideUsageMessageIfDisplayed();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">(actionShowSensor-&gt;isChecked())</span></td><td> </td><td class="rblock"><span class="insert">                       enableOcular(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       actionShowSensor-&gt;setChecked(false);</span></td><td> </td><td class="rblock"><span class="insert">                       toggleCCD(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               flagShowTelrad = show;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit enableTelradChanged(flagShowTelrad);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0141" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       flagShowTelrad = show;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::toggleTelrad()</td><td> </td><td class="right">void Oculars::toggleTelrad()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0142" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if (flagShowTelrad)</span></td><td> </td><td class="rblock">       <span class="insert">toggleTelrad(!flagShowTelrad);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               toggleTelrad(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               toggleTelrad(true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#if 0</td><td> </td><td class="right">#if 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark -</td><td> </td><td class="right">#pragma mark -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark Private Methods</td><td> </td><td class="right">#pragma mark Private Methods</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ************************************************************************
****************************************** */</td><td> </td><td class="right">/* ************************************************************************
****************************************** */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::initializeActivationActions()</td><td> </td><td class="right">void Oculars::initializeActivationActions()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui(
));</td><td> </td><td class="right">       StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(gui);</td><td> </td><td class="right">       Q_ASSERT(gui);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString ocularsGroup = N_("Oculars");</td><td> </td><td class="right">       QString ocularsGroup = N_("Oculars");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0143" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowOcular = addAction("actionShow_Ocular", ocularsGroup, N_("</td><td> </td><td class="rblock">       actionShowOcular = addAction("actionShow_Ocular", ocularsGroup, N_("</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Ocular view"), <span class="delete">"enableOcular(bool)",</span> "Ctrl+O");</td><td> </td><td class="rblock">Ocular view"), <span class="insert">"enableOcular",</span> "Ctrl+O");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">actionShowOcular-&gt;setChecked(flagShowOculars);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Make a toolbar button</td><td> </td><td class="right">       // Make a toolbar button</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0144" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       try {</td><td> </td><td class="rblock">       try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pxmapGlow = new QPixmap(":/graphicGui/glow32x32.png");</td><td> </td><td class="right">               pxmapGlow = new QPixmap(":/graphicGui/glow32x32.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pxmapOnIcon = new QPixmap(":/ocular/bt_ocular_on.png");</td><td> </td><td class="right">               pxmapOnIcon = new QPixmap(":/ocular/bt_ocular_on.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pxmapOffIcon = new QPixmap(":/ocular/bt_ocular_off.png");</td><td> </td><td class="right">               pxmapOffIcon = new QPixmap(":/ocular/bt_ocular_off.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0145" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               toolbarButton = new StelButton(NULL,</td><td> </td><td class="rblock">               toolbarButton = new StelButton(NULL, *pxmapOnIcon, <span class="insert">*pxmapOff</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              *pxmapOnIcon,</td><td> </td><td class="rblock"><span class="insert">Icon,</span> *pxmapGlow, "actionShow_Ocular");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              <span class="delete">*pxmapOffIcon,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              *pxmapGlow,</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              "actionShow_Ocular");</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td> </td><td class="right">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0146" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } catch (std::runtime_error&amp; e) {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       catch (std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING: unable create toolbar button for Ocu
lars plugin: " &lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING: unable create toolbar button for Ocu
lars plugin: " &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionMenu = addAction("actionShow_Ocular_Menu", ocularsGroup, N_("O
culars popup menu"), "displayPopupMenu()", "Alt+O");</td><td> </td><td class="right">       actionMenu = addAction("actionShow_Ocular_Menu", ocularsGroup, N_("O
culars popup menu"), "displayPopupMenu()", "Alt+O");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0147" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowCrosshairs = addAction("actionShow_Ocular_Crosshairs", ocu</td><td> </td><td class="rblock">       actionShowCrosshairs = addAction("actionShow_Ocular_Crosshairs", ocu</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">larsGroup, N_("Show crosshairs"), <span class="delete">"toggleCrosshairs(bool)",</span> "Alt+C");</td><td> </td><td class="rblock">larsGroup, N_("Show crosshairs"), <span class="insert">"enableCrosshairs",</span> "Alt+C");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowSensor = addAction("actionShow_Sensor", ocularsGroup, N_("</td><td> </td><td class="rblock">       actionShowSensor = addAction("actionShow_Sensor", ocularsGroup, N_("</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Image sensor frame"), <span class="delete">"toggleCCD(bool)");</span></td><td> </td><td class="rblock">Image sensor frame"), <span class="insert">"enableCCD");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowTelrad = addAction("actionShow_Telrad", ocularsGroup, N_("</td><td> </td><td class="rblock">       actionShowTelrad = addAction("actionShow_Telrad", ocularsGroup, N_("</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Telrad sight"), <span class="delete">"toggleTelrad(bool)",</span> "Ctrl+B");</td><td> </td><td class="rblock">Telrad sight"), <span class="insert">"enableTelrad",</span> "Ctrl+B");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionConfiguration = addAction("actionOpen_Oculars_Configuration", 
ocularsGroup, N_("Oculars plugin configuration"), ocularDialog, "visible");</td><td> </td><td class="right">       actionConfiguration = addAction("actionOpen_Oculars_Configuration", 
ocularsGroup, N_("Oculars plugin configuration"), ocularDialog, "visible");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Select next telescope via keyboard</td><td> </td><td class="right">       // Select next telescope via keyboard</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Telescope_Increment", ocularsGroup, N_("Select
 next telescope"), "incrementTelescopeIndex()", "");</td><td> </td><td class="right">       addAction("actionShow_Telescope_Increment", ocularsGroup, N_("Select
 next telescope"), "incrementTelescopeIndex()", "");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Select previous telescope via keyboard</td><td> </td><td class="right">       // Select previous telescope via keyboard</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Telescope_Decrement", ocularsGroup, N_("Select
 previous telescope"), "decrementTelescopeIndex()", "");</td><td> </td><td class="right">       addAction("actionShow_Telescope_Decrement", ocularsGroup, N_("Select
 previous telescope"), "decrementTelescopeIndex()", "");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Select next eyepiece via keyboard</td><td> </td><td class="right">       // Select next eyepiece via keyboard</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Ocular_Increment", ocularsGroup, N_("Select ne
xt eyepiece"), "incrementOcularIndex()", "");</td><td> </td><td class="right">       addAction("actionShow_Ocular_Increment", ocularsGroup, N_("Select ne
xt eyepiece"), "incrementOcularIndex()", "");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Select previous eyepiece via keyboard</td><td> </td><td class="right">       // Select previous eyepiece via keyboard</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Ocular_Decrement", ocularsGroup, N_("Select pr
evious eyepiece"), "decrementOcularIndex()", "");</td><td> </td><td class="right">       addAction("actionShow_Ocular_Decrement", ocularsGroup, N_("Select pr
evious eyepiece"), "decrementOcularIndex()", "");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedCCDChanged()), this, SLOT(instrumentCha
nged()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedCCDChanged()), this, SLOT(instrumentCha
nged()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1372</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1515</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(ccdsSignalMapper, SIGNAL(mapped(QString)), this, SLOT(setScr
eenFOVForCCD()));</td><td> </td><td class="right">       connect(ccdsSignalMapper, SIGNAL(mapped(QString)), this, SLOT(setScr
eenFOVForCCD()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(ocularsSignalMapper, SIGNAL(mapped(QString)), this, SLOT(sel
ectOcularAtIndex(QString)));</td><td> </td><td class="right">       connect(ocularsSignalMapper, SIGNAL(mapped(QString)), this, SLOT(sel
ectOcularAtIndex(QString)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(telescopesSignalMapper, SIGNAL(mapped(QString)), this, SLOT(
selectTelescopeAtIndex(QString)));</td><td> </td><td class="right">       connect(telescopesSignalMapper, SIGNAL(mapped(QString)), this, SLOT(
selectTelescopeAtIndex(QString)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(telescopesSignalMapper, SIGNAL(mapped(QString)), this, SLOT(
setScreenFOVForCCD()));</td><td> </td><td class="right">       connect(telescopesSignalMapper, SIGNAL(mapped(QString)), this, SLOT(
setScreenFOVForCCD()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(lenseSignalMapper, SIGNAL(mapped(QString)), this, SLOT(selec
tLensAtIndex(QString)));</td><td> </td><td class="right">       connect(lenseSignalMapper, SIGNAL(mapped(QString)), this, SLOT(selec
tLensAtIndex(QString)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool Oculars::isBinocularDefined()</td><td> </td><td class="right">bool Oculars::isBinocularDefined()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool binocularFound = false;</td><td> </td><td class="right">       bool binocularFound = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0148" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       foreach (Ocular* ocular, oculars) {</td><td> </td><td class="rblock">       foreach (Ocular* ocular, oculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (ocular-&gt;isBinoculars()) {</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               if (ocular-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       binocularFound = true;</td><td> </td><td class="right">                       binocularFound = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return binocularFound;</td><td> </td><td class="right">       return binocularFound;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::paintCCDBounds()</td><td> </td><td class="right">void Oculars::paintCCDBounds()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Lens *lens = selectedLensIndex &gt;=0  ? lense[selectedLensIndex] : NUL
L;</td><td> </td><td class="right">       Lens *lens = selectedLensIndex &gt;=0  ? lense[selectedLensIndex] : NUL
L;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP projector = core-&gt;getProjection(StelCore::Frame
EquinoxEqu);</td><td> </td><td class="right">       const StelProjectorP projector = core-&gt;getProjection(StelCore::Frame
EquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double screenFOV = params.fov;</td><td> </td><td class="right">       double screenFOV = params.fov;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // draw sensor rectangle</td><td> </td><td class="right">       // draw sensor rectangle</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0149" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(selectedCCDIndex != -1) {</td><td> </td><td class="rblock">       if(selectedCCDIndex != -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               CCD *ccd = ccds[selectedCCDIndex];</td><td> </td><td class="right">               CCD *ccd = ccds[selectedCCDIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0150" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (ccd) {</td><td> </td><td class="rblock">               if (ccd)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelPainter painter(projector);</td><td> </td><td class="right">                       StelPainter painter(projector);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.setColor(0.77f, 0.14f, 0.16f, 1.0f);</td><td> </td><td class="right">                       painter.setColor(0.77f, 0.14f, 0.16f, 1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Telescope *telescope = telescopes[selectedTelescopeI
ndex];</td><td> </td><td class="right">                       Telescope *telescope = telescopes[selectedTelescopeI
ndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double ccdXRatio = ccd-&gt;getActualFOVx(telescop
e, lens) / screenFOV;</td><td> </td><td class="right">                       const double ccdXRatio = ccd-&gt;getActualFOVx(telescop
e, lens) / screenFOV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double ccdYRatio = ccd-&gt;getActualFOVy(telescop
e, lens) / screenFOV;</td><td> </td><td class="right">                       const double ccdYRatio = ccd-&gt;getActualFOVy(telescop
e, lens) / screenFOV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // flip are needed and allowed?</td><td> </td><td class="right">                       // flip are needed and allowed?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       float ratioLimit = 0.125f;</td><td> </td><td class="right">                       float ratioLimit = 0.125f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (getFlagUseFlipForCCD() &amp;&amp; (ccdXRatio&gt;=ratioLimit
 || ccdYRatio&gt;=ratioLimit))</td><td> </td><td class="right">                       if (getFlagUseFlipForCCD() &amp;&amp; (ccdXRatio&gt;=ratioLimit
 || ccdYRatio&gt;=ratioLimit))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1417</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1564</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               core-&gt;setFlipHorz(false);</td><td> </td><td class="right">                               core-&gt;setFlipHorz(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               core-&gt;setFlipVert(false);</td><td> </td><td class="right">                               core-&gt;setFlipVert(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // As the FOV is based on the narrow aspect of the s
creen, we need to calculate</td><td> </td><td class="right">                       // As the FOV is based on the narrow aspect of the s
creen, we need to calculate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // height &amp; width based soley off of that dimension.</td><td> </td><td class="right">                       // height &amp; width based soley off of that dimension.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int aspectIndex = 2;</td><td> </td><td class="right">                       int aspectIndex = 2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0151" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (params.viewportXywh[2] &gt; params.viewportXywh[3])</td><td> </td><td class="rblock">                       if (params.viewportXywh[2] &gt; params.viewportXywh[3])</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> {</td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               aspectIndex = 3;</td><td> </td><td class="right">                               aspectIndex = 3;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       float width = params.viewportXywh[aspectIndex] * ccd
YRatio * params.devicePixelsPerPixel;</td><td> </td><td class="right">                       float width = params.viewportXywh[aspectIndex] * ccd
YRatio * params.devicePixelsPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       float height = params.viewportXywh[aspectIndex] * cc
dXRatio * params.devicePixelsPerPixel;</td><td> </td><td class="right">                       float height = params.viewportXywh[aspectIndex] * cc
dXRatio * params.devicePixelsPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double polarAngle = 0;</td><td> </td><td class="right">                       double polarAngle = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // if the telescope is Equatorial derotate the field</td><td> </td><td class="right">                       // if the telescope is Equatorial derotate the field</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0152" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (telescope-&gt;isEquatorial()) {</td><td> </td><td class="rblock">                       if (telescope-&gt;isEquatorial())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d CPos;</td><td> </td><td class="right">                               Vec3d CPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec2f cpos = projector-&gt;getViewportCenter();</td><td> </td><td class="right">                               Vec2f cpos = projector-&gt;getViewportCenter();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               projector-&gt;unProject(cpos[0], cpos[1], CPos)
;</td><td> </td><td class="right">                               projector-&gt;unProject(cpos[0], cpos[1], CPos)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d CPrel(CPos);</td><td> </td><td class="right">                               Vec3d CPrel(CPos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               CPrel[2]*=0.2;</td><td> </td><td class="right">                               CPrel[2]*=0.2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d crel;</td><td> </td><td class="right">                               Vec3d crel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               projector-&gt;project(CPrel, crel);</td><td> </td><td class="right">                               projector-&gt;project(CPrel, crel);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               polarAngle = atan2(cpos[1] - crel[1], cpos[0
] - crel[0]) * (-180.0)/M_PI; // convert to degrees</td><td> </td><td class="right">                               polarAngle = atan2(cpos[1] - crel[1], cpos[0
] - crel[0]) * (-180.0)/M_PI; // convert to degrees</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (CPos[2] &gt; 0) polarAngle += 90.0;</td><td> </td><td class="right">                               if (CPos[2] &gt; 0) polarAngle += 90.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else polarAngle -= 90.0;</td><td> </td><td class="right">                               else polarAngle -= 90.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0153" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (width &gt; 0.0 &amp;&amp; height &gt; 0.0) {</td><td> </td><td class="rblock">                       if (width &gt; 0.0 &amp;&amp; height &gt; 0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QPoint a, b;</td><td> </td><td class="right">                               QPoint a, b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QTransform transform = QTransform().translat
e(params.viewportCenter[0] * params.devicePixelsPerPixel,</td><td> </td><td class="right">                               QTransform transform = QTransform().translat
e(params.viewportCenter[0] * params.devicePixelsPerPixel,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               params.viewportCenter[1] * p
arams.devicePixelsPerPixel).rotate(-(ccd-&gt;chipRotAngle() + polarAngle));</td><td> </td><td class="right">                                               params.viewportCenter[1] * p
arams.devicePixelsPerPixel).rotate(-(ccd-&gt;chipRotAngle() + polarAngle));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // bottom line</td><td> </td><td class="right">                               // bottom line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               a = transform.map(QPoint(-width/2.0, -height
/2.0));</td><td> </td><td class="right">                               a = transform.map(QPoint(-width/2.0, -height
/2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               b = transform.map(QPoint(width/2.0, -height/
2.0));</td><td> </td><td class="right">                               b = transform.map(QPoint(width/2.0, -height/
2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td> </td><td class="right">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // top line</td><td> </td><td class="right">                               // top line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               a = transform.map(QPoint(-width/2.0, height/
2.0));</td><td> </td><td class="right">                               a = transform.map(QPoint(-width/2.0, height/
2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               b = transform.map(QPoint(width/2.0, height/2
.0));</td><td> </td><td class="right">                               b = transform.map(QPoint(width/2.0, height/2
.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td> </td><td class="right">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // left line</td><td> </td><td class="right">                               // left line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               a = transform.map(QPoint(-width/2.0, -height
/2.0));</td><td> </td><td class="right">                               a = transform.map(QPoint(-width/2.0, -height
/2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               b = transform.map(QPoint(-width/2.0, height/
2.0));</td><td> </td><td class="right">                               b = transform.map(QPoint(-width/2.0, height/
2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td> </td><td class="right">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // right line</td><td> </td><td class="right">                               // right line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               a = transform.map(QPoint(width/2.0, height/2
.0));</td><td> </td><td class="right">                               a = transform.map(QPoint(width/2.0, height/2
.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               b = transform.map(QPoint(width/2.0, -height/
2.0));</td><td> </td><td class="right">                               b = transform.map(QPoint(width/2.0, -height/
2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td> </td><td class="right">                               painter.drawLine2d(a.x(), a.y(), b.x(), b.y(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0154" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if(ccd-&gt;hasOAG()) {</td><td> </td><td class="rblock">                               if(ccd-&gt;hasOAG())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double InnerOAGRatio = ccd-&gt;ge
tInnerOAGRadius(telescope, lens) / screenFOV;</td><td> </td><td class="right">                                       const double InnerOAGRatio = ccd-&gt;ge
tInnerOAGRadius(telescope, lens) / screenFOV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double OuterOAGRatio = ccd-&gt;ge
tOuterOAGRadius(telescope, lens) / screenFOV;</td><td> </td><td class="right">                                       const double OuterOAGRatio = ccd-&gt;ge
tOuterOAGRadius(telescope, lens) / screenFOV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double prismXRatio = ccd-&gt;getO
AGActualFOVx(telescope, lens) / screenFOV;</td><td> </td><td class="right">                                       const double prismXRatio = ccd-&gt;getO
AGActualFOVx(telescope, lens) / screenFOV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       float in_oag_r = params.viewportXywh
[aspectIndex] * InnerOAGRatio * params.devicePixelsPerPixel;</td><td> </td><td class="right">                                       float in_oag_r = params.viewportXywh
[aspectIndex] * InnerOAGRatio * params.devicePixelsPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       float out_oag_r = params.viewportXyw
h[aspectIndex] * OuterOAGRatio * params.devicePixelsPerPixel;</td><td> </td><td class="right">                                       float out_oag_r = params.viewportXyw
h[aspectIndex] * OuterOAGRatio * params.devicePixelsPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       float h_width = params.viewportXywh[
aspectIndex] * prismXRatio * params.devicePixelsPerPixel / 2.0;</td><td> </td><td class="right">                                       float h_width = params.viewportXywh[
aspectIndex] * prismXRatio * params.devicePixelsPerPixel / 2.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //painter.setColor(0.60f, 0.20f, 0.2
0f, .5f);</td><td> </td><td class="right">                                       //painter.setColor(0.60f, 0.20f, 0.2
0f, .5f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       painter.drawCircle(params.viewportCe
nter[0] * params.devicePixelsPerPixel,</td><td> </td><td class="right">                                       painter.drawCircle(params.viewportCe
nter[0] * params.devicePixelsPerPixel,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       params.viewportCente
r[1] * params.devicePixelsPerPixel, in_oag_r);</td><td> </td><td class="right">                                                       params.viewportCente
r[1] * params.devicePixelsPerPixel, in_oag_r);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1544</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1695</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::paintCrosshairs()</td><td> </td><td class="right">void Oculars::paintCrosshairs()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP projector = core-&gt;getProjection(StelCore::Frame
EquinoxEqu);</td><td> </td><td class="right">       const StelProjectorP projector = core-&gt;getProjection(StelCore::Frame
EquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Center of screen</td><td> </td><td class="right">       // Center of screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2i centerScreen(projector-&gt;getViewportPosX()+projector-&gt;getViewpo
rtWidth()/2,</td><td> </td><td class="right">       Vec2i centerScreen(projector-&gt;getViewportPosX()+projector-&gt;getViewpo
rtWidth()/2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0155" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                          <span class="delete">                projector-&gt;getViewportPosY()+proj
ector-&gt;getViewpo</span>rtHeight()/2);</td><td> </td><td class="rblock">                          <span class="insert">projector-&gt;getViewportPosY()+projector-&gt;getViewpo
</span>rtHeight()/2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float length = 0.5 * params.viewportFovDiameter;</td><td> </td><td class="right">       float length = 0.5 * params.viewportFovDiameter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // See if we need to scale the length</td><td> </td><td class="right">       // See if we need to scale the length</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0156" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (useMaxEyepieceAngle &amp;&amp; oculars[selectedOcularIndex]-&gt;appearentFO</td><td> </td><td class="rblock">       if (useMaxEyepieceAngle &amp;&amp; oculars[selectedOcularIndex]-&gt;appearentFO</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">V() &gt; 0.0) {</td><td> </td><td class="rblock">V() &gt; 0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               length = oculars[selectedOcularIndex]-&gt;appearentFOV() * leng
th / maxEyepieceAngle;</td><td> </td><td class="right">               length = oculars[selectedOcularIndex]-&gt;appearentFOV() * leng
th / maxEyepieceAngle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       length *= params.devicePixelsPerPixel;</td><td> </td><td class="right">       length *= params.devicePixelsPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the lines</td><td> </td><td class="right">       // Draw the lines</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter painter(projector);</td><td> </td><td class="right">       StelPainter painter(projector);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0157" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       painter.setColor(0.77<span class="delete">, 0.14, 0.16, 1</span>);</td><td> </td><td class="rblock">       painter.setColor(0.77<span class="insert">f, 0.14f, 0.16f, 1.f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
, centerScreen[1] + length);</td><td> </td><td class="right">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
, centerScreen[1] + length);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
, centerScreen[1] - length);</td><td> </td><td class="right">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
, centerScreen[1] - length);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
 + length, centerScreen[1]);</td><td> </td><td class="right">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
 + length, centerScreen[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
 - length, centerScreen[1]);</td><td> </td><td class="right">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]
 - length, centerScreen[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::paintTelrad()</td><td> </td><td class="right">void Oculars::paintTelrad()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!flagShowOculars) {</td><td> </td><td class="right">       if (!flagShowOculars) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelProjectorP projector = StelApp::getInstance().getC
ore()-&gt;getProjection(StelCore::FrameEquinoxEqu);</td><td> </td><td class="right">               const StelProjectorP projector = StelApp::getInstance().getC
ore()-&gt;getProjection(StelCore::FrameEquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // StelPainter drawing</td><td> </td><td class="right">               // StelPainter drawing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelPainter painter(projector);</td><td> </td><td class="right">               StelPainter painter(projector);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0158" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               painter.setColor(0.77<span class="delete">, 0.14, 0.16, 1.0</span>);</td><td> </td><td class="rblock">               painter.setColor(0.77<span class="insert">f, 0.14f, 0.16f, 1.f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec2i centerScreen(projector-&gt;getViewportPosX() + projector-
&gt;getViewportWidth() / 2,</td><td> </td><td class="right">               Vec2i centerScreen(projector-&gt;getViewportPosX() + projector-
&gt;getViewportWidth() / 2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0159" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                  <span class="delete">                              projector-&gt;
getViewportPosY() + projector-</span>&gt;getViewportHeight() / 2);</td><td> </td><td class="rblock">                                  <span class="insert">projector-&gt;getViewportPosY() + projector-
</span>&gt;getViewportHeight() / 2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float pixelsPerRad = projector-&gt;getPixelPerRadAtCenter();</td><td> </td><td class="right">               float pixelsPerRad = projector-&gt;getPixelPerRadAtCenter();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p
ixelsPerRad * (M_PI/180) * (0.5));</td><td> </td><td class="right">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p
ixelsPerRad * (M_PI/180) * (0.5));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p
ixelsPerRad * (M_PI/180) * (2.0));</td><td> </td><td class="right">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p
ixelsPerRad * (M_PI/180) * (2.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p
ixelsPerRad * (M_PI/180) * (4.0));</td><td> </td><td class="right">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p
ixelsPerRad * (M_PI/180) * (4.0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::paintOcularMask(const StelCore *core)</td><td> </td><td class="right">void Oculars::paintOcularMask(const StelCore *core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameAltAz)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameAltAz)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter painter(prj);</td><td> </td><td class="right">       StelPainter painter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double inner = 0.5 * params.viewportFovDiameter * params.devicePixel
sPerPixel;</td><td> </td><td class="right">       double inner = 0.5 * params.viewportFovDiameter * params.devicePixel
sPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // See if we need to scale the mask</td><td> </td><td class="right">       // See if we need to scale the mask</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0160" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (useMaxEyepieceAngle</td><td> </td><td class="rblock">       if (useMaxEyepieceAngle &amp;&amp; <span class="insert">oculars[selectedOcularIndex]-&gt;appearentFO</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                &amp;&amp; <span class="delete">oculars[selectedOcularIndex]-&gt;appearentFOV()</span> &gt; 0.0</td><td> </td><td class="rblock"><span class="insert">V()</span> &gt; 0.0 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBinoculars()) {</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               inner = oculars[selectedOcularIndex]-&gt;appearentFOV() * inner
 / maxEyepieceAngle;</td><td> </td><td class="right">               inner = oculars[selectedOcularIndex]-&gt;appearentFOV() * inner
 / maxEyepieceAngle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_BLEND);</td><td> </td><td class="right">       glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td> </td><td class="right">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Paint the reticale, if needed</td><td> </td><td class="right">       // Paint the reticale, if needed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!reticleTexture.isNull())</td><td> </td><td class="right">       if (!reticleTexture.isNull())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               painter.enableTexture2d(true);</td><td> </td><td class="right">               painter.enableTexture2d(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0161" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               painter.setColor(0.77<span class="delete">, 0.14, 0.16, 1.0</span>);</td><td> </td><td class="rblock">               painter.setColor(0.77<span class="insert">f, 0.14f, 0.16f, 1.f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               reticleTexture-&gt;bind();</td><td> </td><td class="right">               reticleTexture-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int textureHeight;</td><td> </td><td class="right">               int textureHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int textureWidth;</td><td> </td><td class="right">               int textureWidth;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               reticleTexture-&gt;getDimensions(textureWidth, textureHeight);</td><td> </td><td class="right">               reticleTexture-&gt;getDimensions(textureWidth, textureHeight);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               painter.drawSprite2dMode(params.viewportXywh[2] / 2 * params
.devicePixelsPerPixel,</td><td> </td><td class="right">               painter.drawSprite2dMode(params.viewportXywh[2] / 2 * params
.devicePixelsPerPixel,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0162" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                        params.viewportXywh[3] / 2 * <span class="delete">params</span></td><td> </td><td class="rblock">                               params.viewportXywh[3] / 2 * <span class="insert">params.devicePi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.devicePixelsPerPixel,</span></td><td> </td><td class="rblock"><span class="insert">xelsPerPixel,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                        inner, reticleRotation);</td><td> </td><td class="rblock">                               inner, reticleRotation);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0163" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (oculars[selectedOcularIndex]-&gt;hasPermanentCrosshair()) {</td><td> </td><td class="rblock">       if (oculars[selectedOcularIndex]-&gt;hasPermanentCrosshair())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               paintCrosshairs();</td><td> </td><td class="right">               paintCrosshairs();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float alpha = 1.f;</td><td> </td><td class="right">       float alpha = 1.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (getFlagUseSemiTransparency())</td><td> </td><td class="right">       if (getFlagUseSemiTransparency())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               alpha = 0.85f;</td><td> </td><td class="right">               alpha = 0.85f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.setColor(0.f,0.f,0.f,alpha);</td><td> </td><td class="right">       painter.setColor(0.f,0.f,0.f,alpha);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GLfloat outerRadius = params.viewportXywh[2] * params.devicePixelsPe
rPixel + params.viewportXywh[3] * params.devicePixelsPerPixel;</td><td> </td><td class="right">       GLfloat outerRadius = params.viewportXywh[2] * params.devicePixelsPe
rPixel + params.viewportXywh[3] * params.devicePixelsPerPixel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1651</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1803</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sinCache[slices]=sinCache[0];</td><td> </td><td class="right">       sinCache[slices]=sinCache[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       cosCache[slices]=cosCache[0];</td><td> </td><td class="right">       cosCache[slices]=cosCache[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       /* Enable arrays */</td><td> </td><td class="right">       /* Enable arrays */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.enableClientStates(true);</td><td> </td><td class="right">       painter.enableClientStates(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.setVertexPointer(3, GL_FLOAT, vertices);</td><td> </td><td class="right">       painter.setVertexPointer(3, GL_FLOAT, vertices);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       radiusHigh=outerRadius-deltaRadius;</td><td> </td><td class="right">       radiusHigh=outerRadius-deltaRadius;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i=0; i&lt;=slices; i++)</td><td> </td><td class="right">       for (int i=0; i&lt;=slices; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0164" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               vertices[i*2][0]= params.viewportCenter[0] + <span class="delete">outerRadius*sin</span></td><td> </td><td class="rblock">               vertices[i*2][0]= params.viewportCenter[0] <span class="insert">* params.devicePi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Cache[i];</span></td><td> </td><td class="rblock"><span class="insert">xelsPerPixel</span> + <span class="insert">outerRadius*sinCache[i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               vertices[i*2][1]= params.viewportCenter[1] + <span class="delete">outerRadius*cos</span></td><td> </td><td class="rblock">               vertices[i*2][1]= params.viewportCenter[1] <span class="insert">* params.devicePi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Cache[i];</span></td><td> </td><td class="rblock"><span class="insert">xelsPerPixel</span> + <span class="insert">outerRadius*cosCache[i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               vertices[i*2][2] = 0.0;</td><td> </td><td class="right">               vertices[i*2][2] = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0165" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               vertices[i*2+1][0]= params.viewportCenter[0] + <span class="delete">radiusHigh*si</span></td><td> </td><td class="rblock">               vertices[i*2+1][0]= params.viewportCenter[0] <span class="insert">* params.device</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">nCache[i];</span></td><td> </td><td class="rblock"><span class="insert">PixelsPerPixel</span> + <span class="insert">radiusHigh*sinCache[i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               vertices[i*2+1][1]= params.viewportCenter[1] + <span class="delete">radiusHigh*co</span></td><td> </td><td class="rblock">               vertices[i*2+1][1]= params.viewportCenter[1] <span class="insert">* params.device</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">sCache[i];</span></td><td> </td><td class="rblock"><span class="insert">PixelsPerPixel</span> + <span class="insert">radiusHigh*cosCache[i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               vertices[i*2+1][2] = 0.0;</td><td> </td><td class="right">               vertices[i*2+1][2] = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.drawFromArray(StelPainter::TriangleStrip, (slices+1)*2, 0, f
alse);</td><td> </td><td class="right">       painter.drawFromArray(StelPainter::TriangleStrip, (slices+1)*2, 0, f
alse);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.enableClientStates(false);</td><td> </td><td class="right">       painter.enableClientStates(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::paintText(const StelCore* core)</td><td> </td><td class="right">void Oculars::paintText(const StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameAltAz)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameAltAz)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter painter(prj);</td><td> </td><td class="right">       StelPainter painter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the current instruments</td><td> </td><td class="right">       // Get the current instruments</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CCD *ccd = NULL;</td><td> </td><td class="right">       CCD *ccd = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0166" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(selectedCCDIndex != -1) {</td><td> </td><td class="rblock">       if(selectedCCDIndex != -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ccd = ccds[selectedCCDIndex];</td><td> </td><td class="right">               ccd = ccds[selectedCCDIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Ocular *ocular = NULL;</td><td> </td><td class="right">       Ocular *ocular = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0167" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(selectedOcularIndex !=-1) {</td><td> </td><td class="rblock">       if(selectedOcularIndex !=-1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ocular = oculars[selectedOcularIndex];</td><td> </td><td class="right">               ocular = oculars[selectedOcularIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Telescope *telescope = NULL;</td><td> </td><td class="right">       Telescope *telescope = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0168" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(selectedTelescopeIndex != -1) {</td><td> </td><td class="rblock">       if(selectedTelescopeIndex != -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope = telescopes[selectedTelescopeIndex];</td><td> </td><td class="right">               telescope = telescopes[selectedTelescopeIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Lens *lens = NULL;</td><td> </td><td class="right">       Lens *lens = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0169" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(selectedLensIndex != -1) {</td><td> </td><td class="rblock">       if(selectedLensIndex != -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lens = lense[selectedLensIndex];</td><td> </td><td class="right">               lens = lense[selectedLensIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // set up the color and the GL state</td><td> </td><td class="right">       // set up the color and the GL state</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0170" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       painter.setColor(0.8<span class="delete">, 0.48, 0.0, 1</span>);</td><td> </td><td class="rblock">       painter.setColor(0.8<span class="insert">f, 0.48f, 0.f, 1.f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glDisable(GL_TEXTURE_2D);</td><td> </td><td class="right">       glDisable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</td><td> </td><td class="right">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_BLEND);</td><td> </td><td class="right">       glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the X &amp; Y positions, and the line height</td><td> </td><td class="right">       // Get the X &amp; Y positions, and the line height</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.setFont(font);</td><td> </td><td class="right">       painter.setFont(font);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString widthString = "MMMMMMMMMMMMMMMMMMM";</td><td> </td><td class="right">       QString widthString = "MMMMMMMMMMMMMMMMMMM";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float insetFromRHS = painter.getFontMetrics().width(widthString);</td><td> </td><td class="right">       float insetFromRHS = painter.getFontMetrics().width(widthString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams projectorParams = core-&gt;getCurren
tStelProjectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams projectorParams = core-&gt;getCurren
tStelProjectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int xPosition = projectorParams.viewportXywh[2];</td><td> </td><td class="right">       int xPosition = projectorParams.viewportXywh[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1709</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1865</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       yPosition -= 40;</td><td> </td><td class="right">       yPosition -= 40;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int lineHeight = painter.getFontMetrics().height();</td><td> </td><td class="right">       const int lineHeight = painter.getFontMetrics().height();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The Ocular</td><td> </td><td class="right">       // The Ocular</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagShowOculars &amp;&amp; ocular!=NULL)</td><td> </td><td class="right">       if (flagShowOculars &amp;&amp; ocular!=NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString ocularNumberLabel;</td><td> </td><td class="right">               QString ocularNumberLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString name = ocular-&gt;name();</td><td> </td><td class="right">               QString name = ocular-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (name.isEmpty())</td><td> </td><td class="right">               if (name.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0171" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       ocularNumberLabel = QString(q_("Ocular <span class="delete">#%1"))</span></td><td> </td><td class="rblock">                       ocularNumberLabel = QString(q_("Ocular <span class="insert">#%1")).arg(se</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       .arg(selectedOcularIndex);</span></td><td> </td><td class="rblock"><span class="insert">lectedOcularIndex);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0172" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       ocularNumberLabel = QString(q_("Ocular #%1: <span class="delete">%2"))</span></td><td> </td><td class="rblock">                       ocularNumberLabel = QString(q_("Ocular #%1: <span class="insert">%2")).ar</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       .arg(selectedOcularIndex)</span></td><td> </td><td class="rblock"><span class="insert">g(selectedOcularIndex).arg(name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       .arg(name);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // The name of the ocular could be really long.</td><td> </td><td class="right">               // The name of the ocular could be really long.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0173" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (name.length() &gt; widthString.length()) {</td><td> </td><td class="rblock">               if (name.length() &gt; widthString.length())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       xPosition -= (insetFromRHS / 2.0);</td><td> </td><td class="right">                       xPosition -= (insetFromRHS / 2.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               painter.drawText(xPosition, yPosition, ocularNumberLabel);</td><td> </td><td class="right">               painter.drawText(xPosition, yPosition, ocularNumberLabel);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               yPosition-=lineHeight;</td><td> </td><td class="right">               yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0174" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!ocular-&gt;isBinoculars()) {</td><td> </td><td class="rblock">               if (!ocular-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString eFocalLength = QVariant(ocular-&gt;effectiveFoc
alLength()).toString();</td><td> </td><td class="right">                       QString eFocalLength = QVariant(ocular-&gt;effectiveFoc
alLength()).toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // TRANSLATORS: FL = Focal length</td><td> </td><td class="right">                       // TRANSLATORS: FL = Focal length</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString eFocalLengthLabel = QString(q_("Ocular FL: %
1 mm")).arg(eFocalLength);</td><td> </td><td class="right">                       QString eFocalLengthLabel = QString(q_("Ocular FL: %
1 mm")).arg(eFocalLength);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xPosition, yPosition, eFocalLengthL
abel);</td><td> </td><td class="right">                       painter.drawText(xPosition, yPosition, eFocalLengthL
abel);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString ocularFov = QString::number(ocular-&gt;appearen
tFOV());</td><td> </td><td class="right">                       QString ocularFov = QString::number(ocular-&gt;appearen
tFOV());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ocularFov.append(QChar(0x00B0));//Degree sign</td><td> </td><td class="right">                       ocularFov.append(QChar(0x00B0));//Degree sign</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // TRANSLATORS: aFOV = apparent field of view</td><td> </td><td class="right">                       // TRANSLATORS: aFOV = apparent field of view</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0175" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       QString ocularFOVLabel = QString(q_("Ocular aFOV: %1</td><td> </td><td class="rblock">                       QString ocularFOVLabel = QString(q_("Ocular aFOV: %1</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">"))</span></td><td> </td><td class="rblock"><span class="insert">")).arg(ocularFov);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                .arg(ocularFov);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xPosition, yPosition, ocularFOVLabe
l);</td><td> </td><td class="right">                       painter.drawText(xPosition, yPosition, ocularFOVLabe
l);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString lensNumberLabel;</td><td> </td><td class="right">                       QString lensNumberLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Barlow and Shapley lens</td><td> </td><td class="right">                       // Barlow and Shapley lens</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (lens != NULL) // it's null if lens is not select
ed (lens index = -1)</td><td> </td><td class="right">                       if (lens != NULL) // it's null if lens is not select
ed (lens index = -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString lensName = lens-&gt;name();</td><td> </td><td class="right">                               QString lensName = lens-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (lensName.isEmpty())</td><td> </td><td class="right">                               if (lensName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1765</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1919</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               lensNumberLabel = QString (q_("Lens: none"))
;</td><td> </td><td class="right">                               lensNumberLabel = QString (q_("Lens: none"))
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xPosition, yPosition, lensNumberLab
el);</td><td> </td><td class="right">                       painter.drawText(xPosition, yPosition, lensNumberLab
el);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // The telescope</td><td> </td><td class="right">                       // The telescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString telescopeString = "";</td><td> </td><td class="right">                       QString telescopeString = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString magString = "";</td><td> </td><td class="right">                       QString magString = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString fovString = "";</td><td> </td><td class="right">                       QString fovString = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0176" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QString exitPupil = "";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (telescope!=NULL)</td><td> </td><td class="right">                       if (telescope!=NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString telescopeName = telescope-&gt;name();</td><td> </td><td class="right">                               QString telescopeName = telescope-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (telescopeName.isEmpty())</td><td> </td><td class="right">                               if (telescopeName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       telescopeString = QString("%1").arg(
selectedTelescopeIndex);</td><td> </td><td class="right">                                       telescopeString = QString("%1").arg(
selectedTelescopeIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       telescopeString = QString("%1: %2").
arg(selectedTelescopeIndex).arg(telescopeName);</td><td> </td><td class="right">                                       telescopeString = QString("%1: %2").
arg(selectedTelescopeIndex).arg(telescopeName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // General info</td><td> </td><td class="right">                               // General info</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (lens!=NULL)</td><td> </td><td class="right">                               if (lens!=NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       magString = QString::number(((int)(o
cular-&gt;magnification(telescope, lens) * 10.0)) / 10.0);</td><td> </td><td class="right">                                       magString = QString::number(((int)(o
cular-&gt;magnification(telescope, lens) * 10.0)) / 10.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       magString.append(QChar(0x00D7));//Mu
ltiplication sign</td><td> </td><td class="right">                                       magString.append(QChar(0x00D7));//Mu
ltiplication sign</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       fovString = QString::number(((int)(o
cular-&gt;actualFOV(telescope, lens) * 10000.00)) / 10000.0);</td><td> </td><td class="right">                                       fovString = QString::number(((int)(o
cular-&gt;actualFOV(telescope, lens) * 10000.00)) / 10000.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       fovString.append(QChar(0x00B0));//De
gree sign</td><td> </td><td class="right">                                       fovString.append(QChar(0x00B0));//De
gree sign</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0177" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       <span class="insert">exitPupil = QString::number(telescop</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e-&gt;diameter()/ocular-&gt;magnification(telescope, lens), 'f', 2);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xPosition, yPosition, QString(q_("T
elescope #%1")).arg(telescopeString));</td><td> </td><td class="right">                       painter.drawText(xPosition, yPosition, QString(q_("T
elescope #%1")).arg(telescopeString));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xPosition, yPosition, QString(q_("M
agnification: %1")).arg(magString));</td><td> </td><td class="right">                       painter.drawText(xPosition, yPosition, QString(q_("M
agnification: %1")).arg(magString));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0178" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">painter.drawText(xPosition, yPosition, QString(q_("E</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">xit pupil: %1 mm")).arg(exitPupil));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       yPosition-=lineHeight;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xPosition, yPosition, QString(q_("F
OV: %1")).arg(fovString));</td><td> </td><td class="right">                       painter.drawText(xPosition, yPosition, QString(q_("F
OV: %1")).arg(fovString));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The CCD</td><td> </td><td class="right">       // The CCD</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0179" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flagShowCCD &amp;&amp; ccd!=NULL) {</td><td> </td><td class="rblock">       if (flagShowCCD &amp;&amp; ccd!=NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString ccdSensorLabel, ccdInfoLabel;</td><td> </td><td class="right">               QString ccdSensorLabel, ccdInfoLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString name = "";</td><td> </td><td class="right">               QString name = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString telescopeName = "";</td><td> </td><td class="right">               QString telescopeName = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double fovX = 0.0;</td><td> </td><td class="right">               double fovX = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double fovY = 0.0;</td><td> </td><td class="right">               double fovY = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (telescope!=NULL &amp;&amp; lens!=NULL)</td><td> </td><td class="right">               if (telescope!=NULL &amp;&amp; lens!=NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fovX = ((int)(ccd-&gt;getActualFOVx(telescope, lens) * 
1000.0)) / 1000.0;</td><td> </td><td class="right">                       fovX = ((int)(ccd-&gt;getActualFOVx(telescope, lens) * 
1000.0)) / 1000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fovY = ((int)(ccd-&gt;getActualFOVy(telescope, lens) * 
1000.0)) / 1000.0;</td><td> </td><td class="right">                       fovY = ((int)(ccd-&gt;getActualFOVy(telescope, lens) * 
1000.0)) / 1000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       name = ccd-&gt;name();</td><td> </td><td class="right">                       name = ccd-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1855</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 2016</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::validateAndLoadIniFile()</td><td> </td><td class="right">void Oculars::validateAndLoadIniFile()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Insure the module directory exists</td><td> </td><td class="right">       // Insure the module directory exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelFileMgr::makeSureDirExistsAndIsWritable(StelFileMgr::getUserDir(
)+"/modules/Oculars");</td><td> </td><td class="right">       StelFileMgr::makeSureDirExistsAndIsWritable(StelFileMgr::getUserDir(
)+"/modules/Oculars");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelFileMgr::Flags flags = (StelFileMgr::Flags)(StelFileMgr::Directo
ry|StelFileMgr::Writable);</td><td> </td><td class="right">       StelFileMgr::Flags flags = (StelFileMgr::Flags)(StelFileMgr::Directo
ry|StelFileMgr::Writable);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString ocularIniPath = StelFileMgr::findFile("modules/Oculars/", fl
ags) + "ocular.ini";</td><td> </td><td class="right">       QString ocularIniPath = StelFileMgr::findFile("modules/Oculars/", fl
ags) + "ocular.ini";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (ocularIniPath.isEmpty())</td><td> </td><td class="right">       if (ocularIniPath.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // If the ini file does not already exist, create it from the resour
ce in the QT resource</td><td> </td><td class="right">       // If the ini file does not already exist, create it from the resour
ce in the QT resource</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0180" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(!QFileInfo(ocularIniPath).exists()) {</td><td> </td><td class="rblock">       if(!QFileInfo(ocularIniPath).exists())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QFile src(":/ocular/default_ocular.ini");</td><td> </td><td class="right">               QFile src(":/ocular/default_ocular.ini");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0181" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!src.copy(ocularIniPath)) {</td><td> </td><td class="rblock">               if (!src.copy(ocularIniPath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars::validateIniFile cannot copy 
default_ocular.ini resource to [non-existing] "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars::validateIniFile cannot copy 
default_ocular.ini resource to [non-existing] "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0182" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                     + ocularIniPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    + ocularIniPath;</td><td> </td><td class="rblock">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qDebug() &lt;&lt; "Oculars::validateIniFile copied default
_ocular.ini to " &lt;&lt; QDir::toNativeSeparators(ocularIniPath);</td><td> </td><td class="right">                       qDebug() &lt;&lt; "Oculars::validateIniFile copied default
_ocular.ini to " &lt;&lt; QDir::toNativeSeparators(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // The resource is read only, and the new file inher
its this, so set write-able.</td><td> </td><td class="right">                       // The resource is read only, and the new file inher
its this, so set write-able.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFile dest(ocularIniPath);</td><td> </td><td class="right">                       QFile dest(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       dest.setPermissions(dest.permissions() | QFile::Writ
eOwner);</td><td> </td><td class="right">                       dest.setPermissions(dest.permissions() | QFile::Writ
eOwner);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0183" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Oculars::validateIniFile ocular.ini exists at: 
" &lt;&lt; QDir::toNativeSeparators(ocularIniPath) &lt;&lt; ". Checking version...";</td><td> </td><td class="right">               qDebug() &lt;&lt; "Oculars::validateIniFile ocular.ini exists at: 
" &lt;&lt; QDir::toNativeSeparators(ocularIniPath) &lt;&lt; ". Checking version...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QSettings settings(ocularIniPath, QSettings::IniFormat);</td><td> </td><td class="right">               QSettings settings(ocularIniPath, QSettings::IniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double ocularsVersion = settings.value("oculars_version", "0
.0").toDouble();</td><td> </td><td class="right">               double ocularsVersion = settings.value("oculars_version", "0
.0").toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Oculars::validateIniFile found existing ini f
ile version " &lt;&lt; ocularsVersion;</td><td> </td><td class="right">               qWarning() &lt;&lt; "Oculars::validateIniFile found existing ini f
ile version " &lt;&lt; ocularsVersion;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0184" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (ocularsVersion &lt; MIN_OCULARS_INI_VERSION) {</td><td> </td><td class="rblock">               if (ocularsVersion &lt; MIN_OCULARS_INI_VERSION)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars::validateIniFile existing ini
 file version " &lt;&lt; ocularsVersion</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars::validateIniFile existing ini
 file version " &lt;&lt; ocularsVersion</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0185" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                  <span class="delete">                              &lt;&lt; " too ol
d to use; required version is " &lt;&lt; MIN_OCULARS_INI_VERSION &lt;&lt; ". Copying ov
</span>er new one.";</td><td> </td><td class="rblock">                                  <span class="insert">&lt;&lt; " too old to use; required version is 
" &lt;&lt; MIN_OCULARS_INI_VERSION &lt;&lt; ". Copying ov</span>er new one.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // delete last "old" file, if it exists</td><td> </td><td class="right">                       // delete last "old" file, if it exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFile deleteFile(ocularIniPath + ".old");</td><td> </td><td class="right">                       QFile deleteFile(ocularIniPath + ".old");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       deleteFile.remove();</td><td> </td><td class="right">                       deleteFile.remove();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Rename the old one, and copy over a new one</td><td> </td><td class="right">                       // Rename the old one, and copy over a new one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFile oldFile(ocularIniPath);</td><td> </td><td class="right">                       QFile oldFile(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0186" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (!oldFile.rename(ocularIniPath + ".old")) {</td><td> </td><td class="rblock">                       if (!oldFile.rename(ocularIniPath + ".old"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "Oculars::validateIniFile cann
ot move ocular.ini resource to ocular.ini.old at path  " + QDir::toNativeSe
parators(ocularIniPath);</td><td> </td><td class="right">                               qWarning() &lt;&lt; "Oculars::validateIniFile cann
ot move ocular.ini resource to ocular.ini.old at path  " + QDir::toNativeSe
parators(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0187" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       } else {</td><td> </td><td class="rblock">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "Oculars::validateIniFile ocul
ar.ini resource renamed to ocular.ini.old at path  " + QDir::toNativeSepara
tors(ocularIniPath);</td><td> </td><td class="right">                               qWarning() &lt;&lt; "Oculars::validateIniFile ocul
ar.ini resource renamed to ocular.ini.old at path  " + QDir::toNativeSepara
tors(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QFile src(":/ocular/default_ocular.ini");</td><td> </td><td class="right">                               QFile src(":/ocular/default_ocular.ini");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0188" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (!src.copy(ocularIniPath)) {</td><td> </td><td class="rblock">                               if (!src.copy(ocularIniPath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "Oculars::validateIniF
ile cannot copy default_ocular.ini resource to [non-existing] " + QDir::toN
ativeSeparators(ocularIniPath);</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "Oculars::validateIniF
ile cannot copy default_ocular.ini resource to [non-existing] " + QDir::toN
ativeSeparators(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0189" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               } else {</td><td> </td><td class="rblock">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "Oculars::validateIniFil
e copied default_ocular.ini to " &lt;&lt; QDir::toNativeSeparators(ocularIniPath)
;</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "Oculars::validateIniFil
e copied default_ocular.ini to " &lt;&lt; QDir::toNativeSeparators(ocularIniPath)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // The resource is read only, and th
e new file inherits this...  make sure the new file</td><td> </td><td class="right">                                       // The resource is read only, and th
e new file inherits this...  make sure the new file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // is writable by the Stellarium pro
cess so that updates can be done.</td><td> </td><td class="right">                                       // is writable by the Stellarium pro
cess so that updates can be done.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       QFile dest(ocularIniPath);</td><td> </td><td class="right">                                       QFile dest(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       dest.setPermissions(dest.permissions
() | QFile::WriteOwner);</td><td> </td><td class="right">                                       dest.setPermissions(dest.permissions
() | QFile::WriteOwner);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings = new QSettings(ocularIniPath, QSettings::IniFormat, this);</td><td> </td><td class="right">       settings = new QSettings(ocularIniPath, QSettings::IniFormat, this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1926</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 2100</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagLongitudeLine(flagLongitudeLine);</td><td> </td><td class="right">       gridManager-&gt;setFlagLongitudeLine(flagLongitudeLine);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagHorizonLine(flagHorizonLine);</td><td> </td><td class="right">       gridManager-&gt;setFlagHorizonLine(flagHorizonLine);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagGalacticEquatorLine(flagGalacticEquatorLine);</td><td> </td><td class="right">       gridManager-&gt;setFlagGalacticEquatorLine(flagGalacticEquatorLine);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setFlagLuminanceAdaptation(flagAdaptation);</td><td> </td><td class="right">       skyManager-&gt;setFlagLuminanceAdaptation(flagAdaptation);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setFlagStarMagnitudeLimit(flagLimitStars);</td><td> </td><td class="right">       skyManager-&gt;setFlagStarMagnitudeLimit(flagLimitStars);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setFlagPlanetMagnitudeLimit(flagLimitPlanets);</td><td> </td><td class="right">       skyManager-&gt;setFlagPlanetMagnitudeLimit(flagLimitPlanets);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setFlagNebulaMagnitudeLimit(flagLimitDSOs);</td><td> </td><td class="right">       skyManager-&gt;setFlagNebulaMagnitudeLimit(flagLimitDSOs);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setCustomStarMagnitudeLimit(magLimitStars);</td><td> </td><td class="right">       skyManager-&gt;setCustomStarMagnitudeLimit(magLimitStars);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setCustomPlanetMagnitudeLimit(magLimitPlanets);</td><td> </td><td class="right">       skyManager-&gt;setCustomPlanetMagnitudeLimit(magLimitPlanets);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setCustomNebulaMagnitudeLimit(magLimitDSOs);</td><td> </td><td class="right">       skyManager-&gt;setCustomNebulaMagnitudeLimit(magLimitDSOs);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0190" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">skyManager-&gt;setRelativeStarScale(relativeStarScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       skyManager-&gt;setAbsoluteStarScale(absoluteStarScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;setFlagTracking(false);</td><td> </td><td class="right">       movementManager-&gt;setFlagTracking(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;setFlagEnableZoomKeys(true);</td><td> </td><td class="right">       movementManager-&gt;setFlagEnableZoomKeys(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;setFlagEnableMouseNavigation(true);</td><td> </td><td class="right">       movementManager-&gt;setFlagEnableMouseNavigation(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GETSTELMODULE(SolarSystem)-&gt;setFlagMoonScale(flagMoonScale);</td><td> </td><td class="right">       GETSTELMODULE(SolarSystem)-&gt;setFlagMoonScale(flagMoonScale);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set the screen display</td><td> </td><td class="right">       // Set the screen display</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0191" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">core-&gt;setFlipHorz(false);</span></td><td> </td><td class="rblock">       <span class="insert">core-&gt;setFlipHorz(flipHorz);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       core-&gt;setFlipVert(false);</span></td><td> </td><td class="rblock"><span class="insert">       core-&gt;setFlipVert(flipVert);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (getFlagInitFovUsage())</td><td> </td><td class="right">       if (getFlagInitFovUsage())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               movementManager-&gt;zoomTo(movementManager-&gt;getInitFov());</td><td> </td><td class="right">               movementManager-&gt;zoomTo(movementManager-&gt;getInitFov());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               movementManager-&gt;zoomTo(initialFOV);</td><td> </td><td class="right">               movementManager-&gt;zoomTo(initialFOV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::zoom(bool zoomedIn)</td><td> </td><td class="right">void Oculars::zoom(bool zoomedIn)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0192" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flagShowOculars &amp;&amp; selectedOcularIndex == -1) {</td><td> </td><td class="rblock">       if (flagShowOculars &amp;&amp; selectedOcularIndex == -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // The user cycled out the selected ocular</td><td> </td><td class="right">               // The user cycled out the selected ocular</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagShowOculars = false;</td><td> </td><td class="right">               flagShowOculars = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0193" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flagShowOculars)  {</td><td> </td><td class="rblock">       if (flagShowOculars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!zoomedIn)  {</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               if (!zoomedIn)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">                       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       GridLinesMgr *gridManager = (GridLinesMgr *)StelApp:
:getInstance().getModuleMgr().getModule("GridLinesMgr");</td><td> </td><td class="right">                       GridLinesMgr *gridManager = (GridLinesMgr *)StelApp:
:getInstance().getModuleMgr().getModule("GridLinesMgr");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Current state</td><td> </td><td class="right">                       // Current state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagAzimuthalGrid = gridManager-&gt;getFlagAzimuthalGri
d();</td><td> </td><td class="right">                       flagAzimuthalGrid = gridManager-&gt;getFlagAzimuthalGri
d();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagGalacticGrid = gridManager-&gt;getFlagGalacticGrid(
);</td><td> </td><td class="right">                       flagGalacticGrid = gridManager-&gt;getFlagGalacticGrid(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagEquatorGrid = gridManager-&gt;getFlagEquatorGrid();</td><td> </td><td class="right">                       flagEquatorGrid = gridManager-&gt;getFlagEquatorGrid();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagEquatorJ2000Grid = gridManager-&gt;getFlagEquatorJ2
000Grid();</td><td> </td><td class="right">                       flagEquatorJ2000Grid = gridManager-&gt;getFlagEquatorJ2
000Grid();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagEquatorLine = gridManager-&gt;getFlagEquatorLine();</td><td> </td><td class="right">                       flagEquatorLine = gridManager-&gt;getFlagEquatorLine();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagEclipticLine = gridManager-&gt;getFlagEclipticLine(
);</td><td> </td><td class="right">                       flagEclipticLine = gridManager-&gt;getFlagEclipticLine(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 1976</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 2155</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelSkyDrawer *skyManager = core-&gt;getSkyDrawer();</td><td> </td><td class="right">                       StelSkyDrawer *skyManager = core-&gt;getSkyDrawer();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Current state</td><td> </td><td class="right">                       // Current state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagAdaptation = skyManager-&gt;getFlagLuminanceAdaptat
ion();</td><td> </td><td class="right">                       flagAdaptation = skyManager-&gt;getFlagLuminanceAdaptat
ion();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagLimitStars = skyManager-&gt;getFlagStarMagnitudeLim
it();</td><td> </td><td class="right">                       flagLimitStars = skyManager-&gt;getFlagStarMagnitudeLim
it();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagLimitPlanets = skyManager-&gt;getFlagPlanetMagnitud
eLimit();</td><td> </td><td class="right">                       flagLimitPlanets = skyManager-&gt;getFlagPlanetMagnitud
eLimit();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagLimitDSOs = skyManager-&gt;getFlagNebulaMagnitudeLi
mit();</td><td> </td><td class="right">                       flagLimitDSOs = skyManager-&gt;getFlagNebulaMagnitudeLi
mit();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       magLimitStars = skyManager-&gt;getCustomStarMagnitudeLi
mit();</td><td> </td><td class="right">                       magLimitStars = skyManager-&gt;getCustomStarMagnitudeLi
mit();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       magLimitPlanets = skyManager-&gt;getCustomPlanetMagnitu
deLimit();</td><td> </td><td class="right">                       magLimitPlanets = skyManager-&gt;getCustomPlanetMagnitu
deLimit();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       magLimitDSOs = skyManager-&gt;getCustomNebulaMagnitudeL
imit();</td><td> </td><td class="right">                       magLimitDSOs = skyManager-&gt;getCustomNebulaMagnitudeL
imit();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0194" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">relativeStarScale = skyManager-&gt;getRelativeStarScale</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       absoluteStarScale = skyManager-&gt;getAbsoluteStarScale</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagMoonScale = GETSTELMODULE(SolarSystem)-&gt;getFlagM
oonScale();</td><td> </td><td class="right">                       flagMoonScale = GETSTELMODULE(SolarSystem)-&gt;getFlagM
oonScale();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0195" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">flipHorz = core-&gt;getFlipHorz();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       flipVert = core-&gt;getFlipVert();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelMovementMgr *movementManager = core-&gt;getMovement
Mgr();</td><td> </td><td class="right">                       StelMovementMgr *movementManager = core-&gt;getMovement
Mgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       initialFOV = movementManager-&gt;getCurrentFov();</td><td> </td><td class="right">                       initialFOV = movementManager-&gt;getCurrentFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // set new state</td><td> </td><td class="right">               // set new state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               zoomOcular();</td><td> </td><td class="right">               zoomOcular();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0196" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //reset to original state</td><td> </td><td class="right">               //reset to original state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               unzoomOcular();</td><td> </td><td class="right">               unzoomOcular();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::zoomOcular()</td><td> </td><td class="right">void Oculars::zoomOcular()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td> </td><td class="right">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0197" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       GridLinesMgr *gridManager =</td><td> </td><td class="rblock">       GridLinesMgr *gridManager = (GridLinesMgr <span class="insert">*)StelApp::getInstance().g</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       (GridLinesMgr <span class="delete">*)StelApp::getInstance().getModuleMgr(</span></td><td> </td><td class="rblock"><span class="insert">etModuleMgr().getModule("GridLinesMgr");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">).getModule("GridLinesMgr");</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelSkyDrawer *skyManager = core-&gt;getSkyDrawer();</td><td> </td><td class="right">       StelSkyDrawer *skyManager = core-&gt;getSkyDrawer();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagAzimuthalGrid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagAzimuthalGrid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagGalacticGrid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagGalacticGrid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEquatorGrid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEquatorGrid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEquatorJ2000Grid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEquatorJ2000Grid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEquatorLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEquatorLine(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEclipticLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEclipticLine(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEclipticJ2000Grid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEclipticJ2000Grid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l19" /><small>skipping to change at</small><em> line 2020</em></th><th> </th><th><a name="part-r19" /><small>skipping to change at</small><em> line 2205</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagGalacticEquatorLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagGalacticEquatorLine(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyManager-&gt;setFlagLuminanceAdaptation(false);</td><td> </td><td class="right">       skyManager-&gt;setFlagLuminanceAdaptation(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GETSTELMODULE(SolarSystem)-&gt;setFlagMoonScale(false);</td><td> </td><td class="right">       GETSTELMODULE(SolarSystem)-&gt;setFlagMoonScale(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;setFlagTracking(true);</td><td> </td><td class="right">       movementManager-&gt;setFlagTracking(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;setFlagEnableZoomKeys(false);</td><td> </td><td class="right">       movementManager-&gt;setFlagEnableZoomKeys(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;setFlagEnableMouseNavigation(false);</td><td> </td><td class="right">       movementManager-&gt;setFlagEnableMouseNavigation(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // We won't always have a selected object</td><td> </td><td class="right">       // We won't always have a selected object</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0198" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (StelApp::getInstance().getStelObjectMgr().getWasSelected()) {</td><td> </td><td class="rblock">       if (StelApp::getInstance().getStelObjectMgr().getWasSelected())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelObjectP selectedObject = StelApp::getInstance().getStelO
bjectMgr().getSelectedObject()[0];</td><td> </td><td class="right">               StelObjectP selectedObject = StelApp::getInstance().getStelO
bjectMgr().getSelectedObject()[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0199" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               movementManager-&gt;moveToJ2000(selectedObject-&gt;getEquinoxEquat
orialPos(core), <span class="delete">0.0, 1</span>);</td><td> </td><td class="rblock">               movementManager-&gt;moveToJ2000(selectedObject-&gt;getEquinoxEquat
orialPos(core), <span class="insert">movementManager-&gt;mountFrameToJ2000(Vec3d(0., 0., 1.)), 0.0,
 StelMovementMgr::ZoomIn</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set the screen display</td><td> </td><td class="right">       // Set the screen display</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Ocular * ocular = oculars[selectedOcularIndex];</td><td> </td><td class="right">       Ocular * ocular = oculars[selectedOcularIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Telescope * telescope = NULL;</td><td> </td><td class="right">       Telescope * telescope = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Lens * lens = NULL;</td><td> </td><td class="right">       Lens * lens = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Only consider flip is we're not binoculars</td><td> </td><td class="right">       // Only consider flip is we're not binoculars</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (ocular-&gt;isBinoculars())</td><td> </td><td class="right">       if (ocular-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               core-&gt;setFlipHorz(false);</td><td> </td><td class="right">               core-&gt;setFlipHorz(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               core-&gt;setFlipVert(false);</td><td> </td><td class="right">               core-&gt;setFlipVert(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0200" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (selectedLensIndex &gt;= 0) {</td><td> </td><td class="rblock">               if (selectedLensIndex &gt;= 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       lens = lense[selectedLensIndex];</td><td> </td><td class="right">                       lens = lense[selectedLensIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope = telescopes[selectedTelescopeIndex];</td><td> </td><td class="right">               telescope = telescopes[selectedTelescopeIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               core-&gt;setFlipHorz(telescope-&gt;isHFlipped());</td><td> </td><td class="right">               core-&gt;setFlipHorz(telescope-&gt;isHFlipped());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               core-&gt;setFlipVert(telescope-&gt;isVFlipped());</td><td> </td><td class="right">               core-&gt;setFlipVert(telescope-&gt;isVFlipped());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0201" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// Change relative and absolute scales for stars</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // TODO: Finding experimental value for better rendering</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       skyManager-&gt;setRelativeStarScale(0.6);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       skyManager-&gt;setAbsoluteStarScale(0.75);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Limit stars and DSOs if it enable and it's telescope + eyepiece c
ombination</td><td> </td><td class="right">       // Limit stars and DSOs if it enable and it's telescope + eyepiece c
ombination</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (getFlagLimitMagnitude() &amp;&amp; !ocular-&gt;isBinoculars())</td><td> </td><td class="right">       if (getFlagLimitMagnitude() &amp;&amp; !ocular-&gt;isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Simplified calculation of the penetrating power of the te
lescope</td><td> </td><td class="right">               // Simplified calculation of the penetrating power of the te
lescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double limitMag = 2.1 + 5*std::log10(telescope-&gt;diameter());</td><td> </td><td class="right">               double limitMag = 2.1 + 5*std::log10(telescope-&gt;diameter());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               skyManager-&gt;setFlagStarMagnitudeLimit(true);</td><td> </td><td class="right">               skyManager-&gt;setFlagStarMagnitudeLimit(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               skyManager-&gt;setFlagNebulaMagnitudeLimit(true);</td><td> </td><td class="right">               skyManager-&gt;setFlagNebulaMagnitudeLimit(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               skyManager-&gt;setCustomStarMagnitudeLimit(limitMag);</td><td> </td><td class="right">               skyManager-&gt;setCustomStarMagnitudeLimit(limitMag);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               skyManager-&gt;setCustomNebulaMagnitudeLimit(limitMag);</td><td> </td><td class="right">               skyManager-&gt;setCustomNebulaMagnitudeLimit(limitMag);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actualFOV = ocular-&gt;actualFOV(telescope, lens);</td><td> </td><td class="right">       actualFOV = ocular-&gt;actualFOV(telescope, lens);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // See if the mask was scaled; if so, correct the actualFOV.</td><td> </td><td class="right">       // See if the mask was scaled; if so, correct the actualFOV.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0202" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (useMaxEyepieceAngle &amp;&amp; ocular-&gt;appearentFOV() &gt; 0.0 &amp;&amp; !ocular-&gt;</td><td> </td><td class="rblock">       if (useMaxEyepieceAngle &amp;&amp; ocular-&gt;appearentFOV() &gt; 0.0 &amp;&amp; !ocular-&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">isBinoculars()) {</td><td> </td><td class="rblock">isBinoculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               actualFOV = maxEyepieceAngle * actualFOV / ocular-&gt;appearent
FOV();</td><td> </td><td class="right">               actualFOV = maxEyepieceAngle * actualFOV / ocular-&gt;appearent
FOV();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementManager-&gt;zoomTo(actualFOV, 0.0);</td><td> </td><td class="right">       movementManager-&gt;zoomTo(actualFOV, 0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::hideUsageMessageIfDisplayed()</td><td> </td><td class="right">void Oculars::hideUsageMessageIfDisplayed()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0203" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (usageMessageLabelID &gt; -1) {</td><td> </td><td class="rblock">       if (usageMessageLabelID &gt; -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               LabelMgr *labelManager = GETSTELMODULE(LabelMgr);</td><td> </td><td class="right">               LabelMgr *labelManager = GETSTELMODULE(LabelMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               labelManager-&gt;setLabelShow(usageMessageLabelID, false);</td><td> </td><td class="right">               labelManager-&gt;setLabelShow(usageMessageLabelID, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               labelManager-&gt;deleteLabel(usageMessageLabelID);</td><td> </td><td class="right">               labelManager-&gt;deleteLabel(usageMessageLabelID);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               usageMessageLabelID = -1;</td><td> </td><td class="right">               usageMessageLabelID = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Lens* Oculars::selectedLens()</td><td> </td><td class="right">Lens* Oculars::selectedLens()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0204" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (selectedLensIndex &gt;= 0 &amp;&amp; selectedLensIndex &lt; lense.count()) {</td><td> </td><td class="rblock">       if (selectedLensIndex &gt;= 0 &amp;&amp; selectedLensIndex &lt; lense.count())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return lense[selectedLensIndex];</td><td> </td><td class="right">               return lense[selectedLensIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return NULL;</td><td> </td><td class="right">       return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QMenu* Oculars::addLensSubmenu(QMenu* parent)</td><td> </td><td class="right">QMenu* Oculars::addLensSubmenu(QMenu* parent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(parent);</td><td> </td><td class="right">       Q_ASSERT(parent);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QMenu *submenu = new QMenu(q_("&amp;Lens"), parent);</td><td> </td><td class="right">       QMenu *submenu = new QMenu(q_("&amp;Lens"), parent);</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 204 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>315 lines changed or deleted</i></th><th><i> </i></th><th><i>509 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
