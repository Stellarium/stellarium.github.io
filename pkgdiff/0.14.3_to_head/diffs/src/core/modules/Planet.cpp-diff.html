<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-81-generic #125-Ubuntu SMP Wed Mar 2 17:31:01 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: Planet.cpp - Planet.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;Planet.cpp&nbsp;</th><th> </th><th>&nbsp;Planet.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 57</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 57</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLContext&gt;</td><td> </td><td class="right">#include &lt;QOpenGLContext&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLShader&gt;</td><td> </td><td class="right">#include &lt;QOpenGLShader&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::labelColor = Vec3f(0.4,0.4,0.8);</td><td> </td><td class="right">Vec3f Planet::labelColor = Vec3f(0.4,0.4,0.8);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitColor = Vec3f(1,0.6,1);</td><td> </td><td class="right">Vec3f Planet::orbitColor = Vec3f(1,0.6,1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelTextureSP Planet::hintCircleTex;</td><td> </td><td class="right">StelTextureSP Planet::hintCircleTex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelTextureSP Planet::texEarthShadow;</td><td> </td><td class="right">StelTextureSP Planet::texEarthShadow;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool Planet::permanentDrawingOrbits = false;</td><td> </td><td class="right">bool Planet::permanentDrawingOrbits = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool Planet::flagCustomGrsSettings = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">double Planet::customGrsJD = 2456901.5;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">double Planet::customGrsDrift = 15.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">int Planet::customGrsLongitude = 216;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QOpenGLShaderProgram* Planet::planetShaderProgram=NULL;</td><td> </td><td class="right">QOpenGLShaderProgram* Planet::planetShaderProgram=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Planet::PlanetShaderVars Planet::planetShaderVars;</td><td> </td><td class="right">Planet::PlanetShaderVars Planet::planetShaderVars;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QOpenGLShaderProgram* Planet::ringPlanetShaderProgram=NULL;</td><td> </td><td class="right">QOpenGLShaderProgram* Planet::ringPlanetShaderProgram=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Planet::RingPlanetShaderVars Planet::ringPlanetShaderVars;</td><td> </td><td class="right">Planet::RingPlanetShaderVars Planet::ringPlanetShaderVars;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QOpenGLShaderProgram* Planet::moonShaderProgram=NULL;</td><td> </td><td class="right">QOpenGLShaderProgram* Planet::moonShaderProgram=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Planet::MoonShaderVars Planet::moonShaderVars;</td><td> </td><td class="right">Planet::MoonShaderVars Planet::moonShaderVars;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QMap&lt;Planet::PlanetType, QString&gt; Planet::pTypeMap;</td><td> </td><td class="right">QMap&lt;Planet::PlanetType, QString&gt; Planet::pTypeMap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QMap&lt;Planet::ApparentMagnitudeAlgorithm, QString&gt; Planet::vMagAlgorithmMap;</td><td> </td><td class="right">QMap&lt;Planet::ApparentMagnitudeAlgorithm, QString&gt; Planet::vMagAlgorithmMap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 521</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 526</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double new_date = lastOrbitJDE + delta_points*deltaOrbitJDE;</td><td> </td><td class="right">               double new_date = lastOrbitJDE + delta_points*deltaOrbitJDE;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // qDebug( "Updating orbit coordinates for %s (delta %f) (%d
 points)\n", getEnglishName().toUtf8().data(), deltaOrbitJDE, delta_points)
;</td><td> </td><td class="right">               // qDebug( "Updating orbit coordinates for %s (delta %f) (%d
 points)\n", getEnglishName().toUtf8().data(), deltaOrbitJDE, delta_points)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if( delta_points &gt; 0 &amp;&amp; delta_points &lt; ORBIT_SEGMENTS &amp;&amp; orb
itCached)</td><td> </td><td class="right">               if( delta_points &gt; 0 &amp;&amp; delta_points &lt; ORBIT_SEGMENTS &amp;&amp; orb
itCached)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for( int d=0; d&lt;ORBIT_SEGMENTS; d++ )</td><td> </td><td class="right">                       for( int d=0; d&lt;ORBIT_SEGMENTS; d++ )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if(d + delta_points &gt;= ORBIT_SEGMENTS )</td><td> </td><td class="rblock">                               if(d + delta_points &gt;= ORBIT_SEGMENTS<span class="insert">-1</span> )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // calculate new points</td><td> </td><td class="right">                                       // calculate new points</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       calc_date = new_date + (d-ORBIT_SEGM
ENTS/2)*deltaOrbitJDE;</td><td> </td><td class="right">                                       calc_date = new_date + (d-ORBIT_SEGM
ENTS/2)*deltaOrbitJDE;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // date increments between points wi
ll not be completely constant though</td><td> </td><td class="right">                                       // date increments between points wi
ll not be completely constant though</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       computeTransMatrix(calc_date-core-&gt;c
omputeDeltaT(calc_date)/86400.0, calc_date);</td><td> </td><td class="right">                                       computeTransMatrix(calc_date-core-&gt;c
omputeDeltaT(calc_date)/86400.0, calc_date);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (osculatingFunc)</td><td> </td><td class="right">                                       if (osculatingFunc)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               (*osculatingFunc)(dateJDE,ca
lc_date,eclipticPos);</td><td> </td><td class="right">                                               (*osculatingFunc)(dateJDE,ca
lc_date,eclipticPos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 613</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 618</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // calculate actual Planet position</td><td> </td><td class="right">               // calculate actual Planet position</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               coordFunc(dateJDE, eclipticPos, userDataPtr);</td><td> </td><td class="right">               coordFunc(dateJDE, eclipticPos, userDataPtr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lastJDE = dateJDE;</td><td> </td><td class="right">               lastJDE = dateJDE;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (fabs(lastJDE-dateJDE)&gt;deltaJDE)</td><td> </td><td class="right">       else if (fabs(lastJDE-dateJDE)&gt;deltaJDE)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // calculate actual Planet position</td><td> </td><td class="right">               // calculate actual Planet position</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               coordFunc(dateJDE, eclipticPos, userDataPtr);</td><td> </td><td class="right">               coordFunc(dateJDE, eclipticPos, userDataPtr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">// XXX: do we need to do that even when the orbit is not vis</span></td><td> </td><td class="rblock">               <span class="insert">if (orbitFader.getInterstate()&gt;0.000001)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ible?</span></td><td> </td><td class="rblock">                       for( int d=0; d&lt;ORBIT_SEGMENTS; d++ )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for( int d=0; d&lt;ORBIT_SEGMENTS; d++ )</td><td> </td><td class="rblock">                               orbit[d]=getHeliocentricPos(orbitP[d]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       orbit[d]=getHeliocentricPos(orbitP[d]);</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lastJDE = dateJDE;</td><td> </td><td class="right">               lastJDE = dateJDE;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Compute the transformation matrix from the local Planet coordinate syste
m to the parent Planet coordinate system.</td><td> </td><td class="right">// Compute the transformation matrix from the local Planet coordinate syste
m to the parent Planet coordinate system.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// In case of the planets, this makes the axis point to their respective ce
lestial poles.</td><td> </td><td class="right">// In case of the planets, this makes the axis point to their respective ce
lestial poles.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// TODO: Verify for the other planets if their axes are relative to J2000 e
cliptic (VSOP87A XY plane) or relative to (precessed) ecliptic of date?</td><td> </td><td class="right">// TODO: Verify for the other planets if their axes are relative to J2000 e
cliptic (VSOP87A XY plane) or relative to (precessed) ecliptic of date?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Planet::computeTransMatrix(double JD, double JDE)</td><td> </td><td class="right">void Planet::computeTransMatrix(double JD, double JDE)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 710</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 715</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double rotations = 1.f; // NOTE: Maybe 1e-3 will be better?</td><td> </td><td class="right">       double rotations = 1.f; // NOTE: Maybe 1e-3 will be better?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (re.period!=0.) // OK, it's not a moon with chaotic period of rot
ation :)</td><td> </td><td class="right">       if (re.period!=0.) // OK, it's not a moon with chaotic period of rot
ation :)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rotations = t / (double) re.period;</td><td> </td><td class="right">               rotations = t / (double) re.period;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double wholeRotations = floor(rotations);</td><td> </td><td class="right">       double wholeRotations = floor(rotations);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double remainder = rotations - wholeRotations;</td><td> </td><td class="right">       double remainder = rotations - wholeRotations;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (englishName=="Jupiter")</td><td> </td><td class="right">       if (englishName=="Jupiter")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if( re.offset &gt;= 0.0 )</span></td><td> </td><td class="rblock">               // <span class="insert">http://www.projectpluto.com/grs_form.htm</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               {</span></td><td> </td><td class="rblock"><span class="insert">               // CM( System II)</span> =  <span class="insert">181.62 + 870.1869147</span> * <span class="insert">jd</span> + <span class="insert">correction </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // use semi-empirical coefficient for GRS drift</span></td><td> </td><td class="rblock"><span class="insert">[870d rotation every day]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // <span class="delete">qDebug() &lt;&lt; "Jupiter: offset = " &lt;&lt; re.offset &lt;&lt; </span></td><td> </td><td class="rblock"><span class="insert">               const double rad  = M_PI/180.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">" --&gt; rotation</span> = <span class="delete">" &lt;&lt; (remainder</span> * <span class="delete">360.</span> + <span class="delete">re.offset</span> - <span class="delete">0.2483</span> * <span class="delete">qAbs(jd</span> - <span class="delete">24</span></td><td> </td><td class="rblock"><span class="insert">               double jup_mean = (JDE</span> - <span class="insert">2455636.938)</span> * <span class="insert">360. / 4332.89709;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">56172));</span></td><td> </td><td class="rblock"><span class="insert">               double eqn_center = 5.55 * sin( rad*jup_mean);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       return remainder</span> * 360. + <span class="delete">re.offset</span> - <span class="delete">0.2483</span> * <span class="delete">qAbs(</span></td><td> </td><td class="rblock"><span class="insert">               double angle = (JDE</span> - <span class="insert">2451870.628)</span> * 360. <span class="insert">/ 398.884 - eqn_ce</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">JDE - <span class="delete">2456172);</span></td><td> </td><td class="rblock"><span class="insert">nter;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"><span class="insert">               //double correction = 11 * sin( rad*angle) + 5 * cos( rad*an</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">gle)- 1.25 * cos( rad*jup_mean) - eqn_center; // original correction</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double correction = 25.8</span> + <span class="insert">11 * sin( rad*angle)</span> - <span class="insert">2.5</span> * <span class="insert">cos(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> rad*jup_mean) - eqn_center; // light speed correction not used because in </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">stellarium the jd is manipulated for that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double cm2=181.62 + 870.1869147 * JDE + correction; // Centr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">al Meridian II</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               cm2=cm2 - 360.0*(int)(cm2/360.);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // http://www.skyandtelescope.com/observing/transit-times-of</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">-jupiters-great-red-spot/ writes:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // The predictions assume the Red Spot was at Jovian System </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">II longitude 216° in September 2014 and continues to drift 1.25° per month,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> based on historical trends noted by JUPOS.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // GRS longitude was at 2014-09-08 216d with a drift of 1.25</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">d every month</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double longitudeGRS = 0.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (flagCustomGrsSettings)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       longitudeGRS = customGrsLongitude + customGrsDrift*(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">JDE - <span class="insert">customGrsJD)/365.25;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">{</span></td><td> </td><td class="rblock">                       longitudeGRS=216+1.25*( JDE - 2456908)/30;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // http://www.projectpluto.com/grs_form.htm</span></td><td> </td><td class="rblock">               // qDebug() &lt;&lt; "Jupiter: CM2 = " &lt;&lt; cm2 &lt;&lt; " <span class="insert">longitudeGRS</span> = </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // CM( System II) =  181.62 + 870.1869147 * jd + cor</span></td><td> </td><td class="rblock">" &lt;&lt; longitudeGRS &lt;&lt; " --&gt; rotation = " &lt;&lt; (cm2 - longitudeGRS);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rection [870d rotation every day]</span></td><td> </td><td class="rblock">               return cm2 - longitudeGRS + <span class="insert">50.;</span> // Jupiter <span class="insert">Texture</span> not 0d</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       const double rad  = M_PI/180.;</span></td><td> </td><td class="rblock">               // To verify:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       double jup_mean = (JDE - 2455636.938) * 360. / 4332.</span></td><td> </td><td class="rblock">               // GRS at 2015-02-26 23:07 UT on picture at <span class="insert">https://maximusp</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">89709;</span></td><td> </td><td class="rblock"><span class="insert">hotography.files.wordpress.com/2015/03/jupiter-febr-26-2015.jpg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       double eqn_center = 5.55 * sin( rad*jup_mean);</span></td><td> </td><td class="rblock">               //        2014-02-25 19:03 UT    <span class="insert">http://www.damianpeach.com/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       double angle = (JDE - 2451870.628) * 360. / 398.884 </span></td><td> </td><td class="rblock"><span class="insert">jup1314/2014_02_25rgb0305.jpg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">- eqn_center;</span></td><td> </td><td class="rblock">               //        2013-05-01 10:29 UT    <span class="insert">http://astro.christone.net/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //double correction = 11 * sin( rad*angle) + 5 * cos</span></td><td> </td><td class="rblock"><span class="insert">jupiter/jupiter2012/jupiter20130501.jpg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">( rad*angle)- 1.25 * cos( rad*jup_mean) - eqn_center; // original correctio</span></td><td> </td><td class="rblock">               //        2012-10-26 00:12 UT at <span class="insert">http://www.lunar-captures.c</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">n</span></td><td> </td><td class="rblock"><span class="insert">om//jupiter2012_files/121026_JupiterGRS_Tar.jpg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       double correction = 25.8 + 11 * sin( rad*angle) - 2.</span></td><td> </td><td class="rblock">               //        2011-08-28 02:29 UT at <span class="insert">http://www.damianpeach.com/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">5 * cos( rad*jup_mean) - eqn_center; // light speed correction not used bec</span></td><td> </td><td class="rblock"><span class="insert">jup1112/2011_08_28rgb.jpg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ause in stellarium the jd is manipulated for that</span></td><td> </td><td class="rblock">               // stellarium 2h too early: 2010-09-21 23:37 UT <span class="insert">http://www.d</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       double cm2=181.62 + 870.1869147 * JDE + correction; </span></td><td> </td><td class="rblock"><span class="insert">igitalsky.org.uk/Jupiter/2010-09-21_23-37-30_R-G-B_800.jpg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">// Central Meridian II</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       cm2=cm2 - 360.0*(int)(cm2/360.);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // http://www.skyandtelescope.com/observing/transit-</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">times-of-jupiters-great-red-spot/ writes:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // The predictions assume the Red Spot was at Jovian</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> System II longitude 216° in September 2014 and continues to drift 1.25° pe</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">r month, based on historical trends noted by JUPOS.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // GRS longitude was at 2014-09-08 216d with a drift</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> of 1.25d every month</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       double</span> longitudeGRS=216+1.25*( JDE - 2456908)/30;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // qDebug() &lt;&lt; "Jupiter: CM2 = " &lt;&lt; cm2 &lt;&lt; " <span class="delete">longitu</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">deGRS</span> = " &lt;&lt; longitudeGRS &lt;&lt; " --&gt; rotation = " &lt;&lt; (cm2 - longitudeGRS);</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return cm2 - longitudeGRS + <span class="delete">25.;</span> // <span class="delete">+ 25 =</span> Jupiter <span class="delete">T</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">exture</span> not 0d</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // To verify:</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // GRS at 2015-02-26 23:07 UT on picture at <span class="delete">https://</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">maximusphotography.files.wordpress.com/2015/03/jupiter-febr-26-2015.jpg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       //        2014-02-25 19:03 UT    <span class="delete">http://www.damianpe</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ach.com/jup1314/2014_02_25rgb0305.jpg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       //        2013-05-01 10:29 UT    <span class="delete">http://astro.christ</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">one.net/jupiter/jupiter2012/jupiter20130501.jpg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       //        2012-10-26 00:12 UT at <span class="delete">http://www.lunar-ca</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ptures.com//jupiter2012_files/121026_JupiterGRS_Tar.jpg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       //        2011-08-28 02:29 UT at <span class="delete">http://www.damianpe</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ach.com/jup1112/2011_08_28rgb.jpg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // stellarium 2h too early: 2010-09-21 23:37 UT <span class="delete">http</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">://www.digitalsky.org.uk/Jupiter/2010-09-21_23-37-30_R-G-B_800.jpg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return remainder * 360. + re.offset;</td><td> </td><td class="right">               return remainder * 360. + re.offset;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Planet::getMeanSolarDay() const</td><td> </td><td class="right">double Planet::getMeanSolarDay() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double msd = 0.;</td><td> </td><td class="right">       double msd = 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (englishName=="Sun")</td><td> </td><td class="right">       if (englishName=="Sun")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 779</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 779</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return msd;</td><td> </td><td class="right">       return msd;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the Planet position in the parent Planet ecliptic coordinate in AU</td><td> </td><td class="right">// Get the Planet position in the parent Planet ecliptic coordinate in AU</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d Planet::getEclipticPos() const</td><td> </td><td class="right">Vec3d Planet::getEclipticPos() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return eclipticPos;</td><td> </td><td class="right">       return eclipticPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">// Return the heliocentric ecliptical position (Vsop87)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Vec3d Planet::getHeliocentricEclipticPos() const</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d pos = eclipticPos;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       PlanetP pp = parent;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if (pp)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               while (pp-&gt;parent)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       pos += pp-&gt;eclipticPos;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       pp = pp-&gt;parent;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return pos;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Return heliocentric coordinate of p</td><td> </td><td class="right">// Return heliocentric coordinate of p</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d Planet::getHeliocentricPos(Vec3d p) const</td><td> </td><td class="right">Vec3d Planet::getHeliocentricPos(Vec3d p) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Note: using shared copies is too slow here.  So we use direct acc
ess</td><td> </td><td class="right">       // Note: using shared copies is too slow here.  So we use direct acc
ess</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // instead.</td><td> </td><td class="right">       // instead.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d pos = p;</td><td> </td><td class="right">       Vec3d pos = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const Planet* pp = parent.data();</td><td> </td><td class="right">       const Planet* pp = parent.data();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pp)</td><td> </td><td class="right">       if (pp)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               while (pp-&gt;parent.data())</td><td> </td><td class="right">               while (pp-&gt;parent.data())</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 6 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>75 lines changed or deleted</i></th><th><i> </i></th><th><i>53 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
