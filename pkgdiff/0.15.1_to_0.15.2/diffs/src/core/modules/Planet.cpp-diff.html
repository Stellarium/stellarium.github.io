<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-67-generic #88-Ubuntu SMP Wed Mar 8 16:34:45 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: Planet.cpp - Planet.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;Planet.cpp&nbsp;</th><th> </th><th>&nbsp;Planet.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 28</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 28</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTexture.hpp"</td><td> </td><td class="right">#include "StelTexture.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyDrawer.hpp"</td><td> </td><td class="right">#include "StelSkyDrawer.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "SolarSystem.hpp"</td><td> </td><td class="right">#include "SolarSystem.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "LandscapeMgr.hpp"</td><td> </td><td class="right">#include "LandscapeMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "Orbit.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "planetsephems/precession.h"</td><td> </td><td class="right">#include "planetsephems/precession.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObserver.hpp"</td><td> </td><td class="right">#include "StelObserver.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "sidereal_time.h"</td><td> </td><td class="right">#include "sidereal_time.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTextureMgr.hpp"</td><td> </td><td class="right">#include "StelTextureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StarMgr.hpp"</td><td> </td><td class="right">#include "StarMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMovementMgr.hpp"</td><td> </td><td class="right">#include "StelMovementMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 60</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 61</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::labelColor = Vec3f(0.4f,0.4f,0.8f);</td><td> </td><td class="right">Vec3f Planet::labelColor = Vec3f(0.4f,0.4f,0.8f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitMajorPlanetsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitMajorPlanetsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitMoonsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitMoonsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitMinorPlanetsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitMinorPlanetsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitDwarfPlanetsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitDwarfPlanetsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitCubewanosColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitCubewanosColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitPlutinosColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitPlutinosColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitScatteredDiscObjectsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitScatteredDiscObjectsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitOortCloudObjectsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitOortCloudObjectsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Vec3f Planet::orbitSednoidsColor = Vec3f(1.0f,0.6f,1.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitCometsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitCometsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitMercuryColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitMercuryColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitVenusColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitVenusColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitEarthColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitEarthColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitMarsColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitMarsColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitJupiterColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitJupiterColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitSaturnColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitSaturnColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitUranusColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitUranusColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f Planet::orbitNeptuneColor = Vec3f(1.0f,0.6f,1.0f);</td><td> </td><td class="right">Vec3f Planet::orbitNeptuneColor = Vec3f(1.0f,0.6f,1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelTextureSP Planet::hintCircleTex;</td><td> </td><td class="right">StelTextureSP Planet::hintCircleTex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 121</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 123</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         orbitCached(false),</td><td> </td><td class="right">         orbitCached(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         closeOrbit(acloseOrbit),</td><td> </td><td class="right">         closeOrbit(acloseOrbit),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         englishName(englishName),</td><td> </td><td class="right">         englishName(englishName),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         nameI18(englishName),</td><td> </td><td class="right">         nameI18(englishName),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         nativeName(""),</td><td> </td><td class="right">         nativeName(""),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         texMapName(atexMapName),</td><td> </td><td class="right">         texMapName(atexMapName),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         normalMapName(anormalMapName),</td><td> </td><td class="right">         normalMapName(anormalMapName),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         flagLighting(flagLighting),</td><td> </td><td class="right">         flagLighting(flagLighting),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         radius(radius),</td><td> </td><td class="right">         radius(radius),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         oneMinusOblateness(1.0-oblateness),</td><td> </td><td class="right">         oneMinusOblateness(1.0-oblateness),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         eclipticPos(0.,0.,0.),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         haloColor(halocolor),</td><td> </td><td class="right">         haloColor(halocolor),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         albedo(albedo),</td><td> </td><td class="right">         albedo(albedo),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">         <span class="insert">absoluteMagnitude(-99.0f),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         rotLocalToParent(Mat4d::identity()),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         axisRotation(0.),</td><td> </td><td class="right">         axisRotation(0.),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         rings(NULL),</td><td> </td><td class="right">         rings(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         distance(0.0),</td><td> </td><td class="right">         distance(0.0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         sphereScale(1.f),</td><td> </td><td class="right">         sphereScale(1.f),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         lastJDE(J2000),</td><td> </td><td class="right">         lastJDE(J2000),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         coordFunc(coordFunc),</td><td> </td><td class="right">         coordFunc(coordFunc),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         userDataPtr(auserDataPtr),</td><td> </td><td class="right">         userDataPtr(auserDataPtr),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         osculatingFunc(osculatingFunc),</td><td> </td><td class="right">         osculatingFunc(osculatingFunc),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         parent(NULL),</td><td> </td><td class="right">         parent(NULL),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         flagLabels(true),</td><td> </td><td class="right">         flagLabels(true),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         hidden(hidden),</td><td> </td><td class="right">         hidden(hidden),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         atmosphere(hasAtmosphere),</td><td> </td><td class="right">         atmosphere(hasAtmosphere),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">         <span class="delete">halo(hasHalo)</span></td><td> </td><td class="rblock">         <span class="insert">halo(hasHalo),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">         vMagAlgorithm(Planet::UndefinedAlgorithm)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Initialize pType with the key found in pTypeMap, or mark planet t
ype as undefined.</td><td> </td><td class="right">       // Initialize pType with the key found in pTypeMap, or mark planet t
ype as undefined.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The latter condition should obviously never happen.</td><td> </td><td class="right">       // The latter condition should obviously never happen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pType = pTypeMap.key(pTypeStr, Planet::isUNDEFINED);</td><td> </td><td class="right">       pType = pTypeMap.key(pTypeStr, Planet::isUNDEFINED);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       vMagAlgorithm = Planet::UndefinedAlgorithm;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">eclipticPos = Vec3d(0.,0.,0.);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       rotLocalToParent = Mat4d::identity();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texMap = StelApp::getInstance().getTextureManager().createTextureThr
ead(StelFileMgr::getInstallationDir()+"/textures/"+texMapName, StelTexture:
:StelTextureParams(true, GL_LINEAR, GL_REPEAT));</td><td> </td><td class="right">       texMap = StelApp::getInstance().getTextureManager().createTextureThr
ead(StelFileMgr::getInstallationDir()+"/textures/"+texMapName, StelTexture:
:StelTextureParams(true, GL_LINEAR, GL_REPEAT));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       normalMap = StelApp::getInstance().getTextureManager().createTexture
Thread(StelFileMgr::getInstallationDir()+"/textures/"+normalMapName, StelTe
xture::StelTextureParams(true, GL_LINEAR, GL_REPEAT));</td><td> </td><td class="right">       normalMap = StelApp::getInstance().getTextureManager().createTexture
Thread(StelFileMgr::getInstallationDir()+"/textures/"+normalMapName, StelTe
xture::StelTextureParams(true, GL_LINEAR, GL_REPEAT));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (englishName!="Pluto")</td><td> </td><td class="right">       if (englishName!="Pluto")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               deltaJDE = 0.001*StelCore::JD_SECOND;</td><td> </td><td class="right">               deltaJDE = 0.001*StelCore::JD_SECOND;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 173</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 176</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isStar,         "star");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isStar,         "star");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isPlanet,       "planet");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isPlanet,       "planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isMoon,         "moon");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isMoon,         "moon");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isAsteroid,     "asteroid");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isAsteroid,     "asteroid");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isPlutino,      "plutino");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isPlutino,      "plutino");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isComet,        "comet");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isComet,        "comet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isDwarfPlanet,  "dwarf planet");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isDwarfPlanet,  "dwarf planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isCubewano,     "cubewano");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isCubewano,     "cubewano");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isSDO,          "scattered disc object");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isSDO,          "scattered disc object");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isOCO,          "Oort cloud object");</td><td> </td><td class="right">       pTypeMap.insert(Planet::isOCO,          "Oort cloud object");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       pTypeMap.insert(Planet::isSednoid,      "sednoid");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pTypeMap.insert(Planet::isUNDEFINED,    "UNDEFINED"); // something m
ust be broken before we ever see this!</td><td> </td><td class="right">       pTypeMap.insert(Planet::isUNDEFINED,    "UNDEFINED"); // something m
ust be broken before we ever see this!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (vMagAlgorithmMap.count() &gt; 0)</td><td> </td><td class="right">       if (vMagAlgorithmMap.count() &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Planet::init(): Non-empty static map. This is a
 programming error, but we can fix that.";</td><td> </td><td class="right">               qDebug() &lt;&lt; "Planet::init(): Non-empty static map. This is a
 programming error, but we can fix that.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               vMagAlgorithmMap.clear();</td><td> </td><td class="right">               vMagAlgorithmMap.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vMagAlgorithmMap.insert(Planet::Planesas,</span>       "planesas");</td><td> </td><td class="rblock">       <span class="insert">vMagAlgorithmMap.insert(Planet::Expl_Sup_2013,  "ExpSup2013");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vMagAlgorithmMap.insert(Planet::Mueller,</span>        "mueller");</td><td> </td><td class="rblock"><span class="insert">       vMagAlgorithmMap.insert(Planet::Expl_Sup_1992,</span>  "planesas"); <span class="insert">// depr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vMagAlgorithmMap.insert(Planet::Harris,</span>         "harris");</td><td> </td><td class="rblock"><span class="insert">ecate in 0.16, remove later. TODO: Rename the other strings. BETTER: Use th</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e metaobject!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vMagAlgorithmMap.insert(Planet::Expl_Sup_1992,  "ExpSup1992");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vMagAlgorithmMap.insert(Planet::Mueller_1893,</span>   "mueller");     <span class="insert">// d</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eprecate in 0.16, remove later.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vMagAlgorithmMap.insert(Planet::Mueller_1893,   "Mueller1893"); // b</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">etter name</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vMagAlgorithmMap.insert(Planet::Astr_Alm_1984,</span>  "harris");      <span class="insert">// d</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eprecate in 0.16, remove later</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vMagAlgorithmMap.insert(Planet::Astr_Alm_1984,  "AstrAlm1984"); // c</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">onsistent name</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vMagAlgorithmMap.insert(Planet::Generic,        "generic"),</td><td> </td><td class="right">       vMagAlgorithmMap.insert(Planet::Generic,        "generic"),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vMagAlgorithmMap.insert(Planet::UndefinedAlgorithm, "");</td><td> </td><td class="right">       vMagAlgorithmMap.insert(Planet::UndefinedAlgorithm, "");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Planet::~Planet()</td><td> </td><td class="right">Planet::~Planet()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (rings)</td><td> </td><td class="right">       if (rings)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete rings;</td><td> </td><td class="right">               delete rings;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 255</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 263</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flags&amp;Magnitude &amp;&amp; getVMagnitude(core)!=std::numeric_limits&lt;floa
t&gt;::infinity())</td><td> </td><td class="right">       if (flags&amp;Magnitude &amp;&amp; getVMagnitude(core)!=std::numeric_limits&lt;floa
t&gt;::infinity())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (core-&gt;getSkyDrawer()-&gt;getFlagHasAtmosphere() &amp;&amp; (alt_app
&gt;-3.0*M_PI/180.0)) // Don't show extincted magnitude much below horizon whe
re model is meaningless.</td><td> </td><td class="right">               if (core-&gt;getSkyDrawer()-&gt;getFlagHasAtmosphere() &amp;&amp; (alt_app
&gt;-3.0*M_PI/180.0)) // Don't show extincted magnitude much below horizon whe
re model is meaningless.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oss &lt;&lt; q_("Magnitude: &lt;b&gt;%1&lt;/b&gt; (after extinction: &lt;
b&gt;%2&lt;/b&gt;)").arg(QString::number(getVMagnitude(core), 'f', 2),</td><td> </td><td class="right">                       oss &lt;&lt; q_("Magnitude: &lt;b&gt;%1&lt;/b&gt; (after extinction: &lt;
b&gt;%2&lt;/b&gt;)").arg(QString::number(getVMagnitude(core), 'f', 2),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                           
            QString::number(getVMagnitudeWithExtinction(core), 'f', 2)) &lt;&lt; 
"&lt;br&gt;";</td><td> </td><td class="right">                                                                           
            QString::number(getVMagnitudeWithExtinction(core), 'f', 2)) &lt;&lt; 
"&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oss &lt;&lt; q_("Magnitude: &lt;b&gt;%1&lt;/b&gt;").arg(getVMagnitude(
core), 0, 'f', 2) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">                       oss &lt;&lt; q_("Magnitude: &lt;b&gt;%1&lt;/b&gt;").arg(getVMagnitude(
core), 0, 'f', 2) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (flags&amp;AbsoluteMagnitude &amp;&amp; <span class="delete">getVMagnitude(core)!=std::numeric_lim</span></td><td> </td><td class="rblock">       if (flags&amp;AbsoluteMagnitude &amp;&amp; <span class="insert">(getAbsoluteMagnitude() &gt; -99.))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">its&lt;float&gt;::infinity())</span></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               oss &lt;&lt; q_("Absolute Magnitude: <span class="delete">%1").arg(getVMagnitude(core)-</span></td><td> </td><td class="rblock">               oss &lt;&lt; q_("Absolute Magnitude: <span class="insert">%1").arg(getAbsoluteMagnitude</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">5.*(std::log10(distanceAu*AU/PARSEC)-1.),</span> 0, 'f', 2) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="rblock"><span class="insert">(),</span> 0, 'f', 2) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">const float moMag=getMeanOppositionMagnitude();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (moMag&lt;50.f)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       oss &lt;&lt; q_("Mean Opposition Magnitude: %1").arg(moMag</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">, 0, 'f', 2) &lt;&lt; "&lt;br&gt;";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       oss &lt;&lt; getPositionInfoString(core, flags);</td><td> </td><td class="right">       oss &lt;&lt; getPositionInfoString(core, flags);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // GZ This is mostly for debugging. Maybe also useful for letting pe
ople use our results to cross-check theirs, but we should not act as refere
nce, currently...</td><td> </td><td class="right">       // GZ This is mostly for debugging. Maybe also useful for letting pe
ople use our results to cross-check theirs, but we should not act as refere
nce, currently...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TODO: maybe separate this out into:</td><td> </td><td class="right">       // TODO: maybe separate this out into:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //if (flags&amp;EclipticCoordXYZ)</td><td> </td><td class="right">       //if (flags&amp;EclipticCoordXYZ)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // For now: add to EclipticCoord</td><td> </td><td class="right">       // For now: add to EclipticCoord</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //if (flags&amp;EclipticCoord)</td><td> </td><td class="right">       //if (flags&amp;EclipticCoord)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //      oss &lt;&lt; q_("Ecliptical XYZ (VSOP87A): %1/%2/%3").arg(QString:
:number(eclipticPos[0], 'f', 3), QString::number(eclipticPos[1], 'f', 3), Q
String::number(eclipticPos[2], 'f', 3)) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">       //      oss &lt;&lt; q_("Ecliptical XYZ (VSOP87A): %1/%2/%3").arg(QString:
:number(eclipticPos[0], 'f', 3), QString::number(eclipticPos[1], 'f', 3), Q
String::number(eclipticPos[2], 'f', 3)) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 417</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 430</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               oss &lt;&lt; QString(q_("Phase Angle: %1")).arg(St
elUtils::radToDmsStr(getPhaseAngle(observerHelioPos), true)) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">                               oss &lt;&lt; QString(q_("Phase Angle: %1")).arg(St
elUtils::radToDmsStr(getPhaseAngle(observerHelioPos), true)) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               oss &lt;&lt; QString(q_("Elongation: %1")).arg(Ste
lUtils::radToDmsStr(elongation, true)) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">                               oss &lt;&lt; QString(q_("Elongation: %1")).arg(Ste
lUtils::radToDmsStr(elongation, true)) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oss &lt;&lt; QString(q_("Phase: %1")).arg(getPhase(observe
rHelioPos), 0, 'f', 2);</td><td> </td><td class="right">                       oss &lt;&lt; QString(q_("Phase: %1")).arg(getPhase(observe
rHelioPos), 0, 'f', 2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (!moonPhase.isEmpty())</td><td> </td><td class="right">                       if (!moonPhase.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               oss &lt;&lt; " (" &lt;&lt; moonPhase &lt;&lt; ")";</td><td> </td><td class="right">                               oss &lt;&lt; " (" &lt;&lt; moonPhase &lt;&lt; ")";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oss &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">                       oss &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oss &lt;&lt; QString(q_("Illuminated: %1%")).arg(getPhase(
observerHelioPos) * 100, 0, 'f', 1) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">                       oss &lt;&lt; QString(q_("Illuminated: %1%")).arg(getPhase(
observerHelioPos) * 100, 0, 'f', 1) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       oss &lt;&lt; QString(q_("Albedo: %1")).arg(QString::number
(getAlbedo(), 'f', 3)) &lt;&lt; "&lt;br&gt;";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (englishName=="Sun")</td><td> </td><td class="right">               if (englishName=="Sun")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Only show during eclipse, show percent?</td><td> </td><td class="right">                       // Only show during eclipse, show percent?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       static SolarSystem *ssystem=GETSTELMODULE(SolarSyste
m);</td><td> </td><td class="right">                       static SolarSystem *ssystem=GETSTELMODULE(SolarSyste
m);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Debug solution:</td><td> </td><td class="right">                       // Debug solution:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//                     float eclipseFactor = ssystem-&gt;getEclipseFactor(core
);</td><td> </td><td class="right">//                     float eclipseFactor = ssystem-&gt;getEclipseFactor(core
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//                     oss &lt;&lt; QString(q_("Eclipse Factor: %1 alpha: %2")).a
rg(eclipseFactor).arg(-0.1f*qMax(-10.0f, (float) std::log10(eclipseFactor))
) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">//                     oss &lt;&lt; QString(q_("Eclipse Factor: %1 alpha: %2")).a
rg(eclipseFactor).arg(-0.1f*qMax(-10.0f, (float) std::log10(eclipseFactor))
) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Release version:</td><td> </td><td class="right">                       // Release version:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       float eclipseFactor = 100.f*(1.f-ssystem-&gt;getEclipse
Factor(core));</td><td> </td><td class="right">                       float eclipseFactor = 100.f*(1.f-ssystem-&gt;getEclipse
Factor(core));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 438</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 452</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               oss &lt;&lt; QString(q_("Eclipse Factor: %1%")).ar
g(eclipseFactor) &lt;&lt; "&lt;br&gt;";</td><td> </td><td class="right">                               oss &lt;&lt; QString(q_("Eclipse Factor: %1%")).ar
g(eclipseFactor) &lt;&lt; "&lt;br&gt;";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       postProcessInfoString(str, flags);</td><td> </td><td class="right">       postProcessInfoString(str, flags);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return str;</td><td> </td><td class="right">       return str;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QVariantMap Planet::getInfoMap(const StelCore *core) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QVariantMap map = StelObject::getInfoMap(core);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (getEnglishName()!="Sun")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               const Vec3d&amp; observerHelioPos = core-&gt;getObserverHeliocentri</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">cEclipticPos();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("distance", getJ2000EquatorialPos(core).length())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double phase=getPhase(observerHelioPos);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("phase", phase);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("illumination", 100.*phase);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double phaseAngle = getPhaseAngle(observerHelioPos);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("phase-angle", phaseAngle);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("phase-angle-dms", StelUtils::radToDmsStr(phaseAn</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">gle));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("phase-angle-deg", StelUtils::radToDecDegStr(phas</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eAngle));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double elongation = getElongation(observerHelioPos);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("elongation", elongation);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("elongation-dms", StelUtils::radToDmsStr(elongati</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">on));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("elongation-deg", StelUtils::radToDecDegStr(elong</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ation));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.insert("type", getPlanetTypeString()); // replace existi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ng "type=Planet" by something more detailed.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // TBD: Is there ANY reason to keep "type"="Planet" and add </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">a "ptype"=getPlanetTypeString() field?</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return map;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get sky label (sky translation)</td><td> </td><td class="right">//! Get sky label (sky translation)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString Planet::getSkyLabel(const StelCore*) const</td><td> </td><td class="right">QString Planet::getSkyLabel(const StelCore*) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString str;</td><td> </td><td class="right">       QString str;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QTextStream oss(&amp;str);</td><td> </td><td class="right">       QTextStream oss(&amp;str);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       oss.setRealNumberPrecision(2);</td><td> </td><td class="right">       oss.setRealNumberPrecision(2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       oss &lt;&lt; getNameI18n();</td><td> </td><td class="right">       oss &lt;&lt; getNameI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (sphereScale != 1.f)</td><td> </td><td class="right">       if (sphereScale != 1.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 846</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 886</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return remainder * 360. + re.offset;</td><td> </td><td class="right">               return remainder * 360. + re.offset;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Planet::getMeanSolarDay() const</td><td> </td><td class="right">double Planet::getMeanSolarDay() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double msd = 0.;</td><td> </td><td class="right">       double msd = 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (englishName=="Sun")</td><td> </td><td class="right">       if (englishName=="Sun")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return <span class="delete">msd;</span></td><td> </td><td class="rblock">       <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // A mean solar day (equals to Earth's day) has been added h</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ere for educational purposes</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // Details: https://sourceforge.net/p/stellarium/discussion/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">278769/thread/fbe282db/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               return <span class="insert">1.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double sday = getSiderealDay();</td><td> </td><td class="right">       double sday = getSiderealDay();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double coeff = qAbs(sday/getSiderealPeriod());</td><td> </td><td class="right">       double coeff = qAbs(sday/getSiderealPeriod());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float sign = 1;</td><td> </td><td class="right">       float sign = 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // planets with retrograde rotation</td><td> </td><td class="right">       // planets with retrograde rotation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (englishName=="Venus" || englishName=="Uranus" || englishName=="P
luto")</td><td> </td><td class="right">       if (englishName=="Venus" || englishName=="Uranus" || englishName=="P
luto")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sign = -1;</td><td> </td><td class="right">               sign = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pType==Planet::isMoon)</td><td> </td><td class="right">       if (pType==Planet::isMoon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 947</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 991</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the elongation angle (radians) for an observer at pos obsPos in heli
ocentric coordinates (dist in AU)</td><td> </td><td class="right">// Get the elongation angle (radians) for an observer at pos obsPos in heli
ocentric coordinates (dist in AU)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Planet::getElongation(const Vec3d&amp; obsPos) const</td><td> </td><td class="right">double Planet::getElongation(const Vec3d&amp; obsPos) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double observerRq = obsPos.lengthSquared();</td><td> </td><td class="right">       const double observerRq = obsPos.lengthSquared();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const Vec3d&amp; planetHelioPos = getHeliocentricEclipticPos();</td><td> </td><td class="right">       const Vec3d&amp; planetHelioPos = getHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double planetRq = planetHelioPos.lengthSquared();</td><td> </td><td class="right">       const double planetRq = planetHelioPos.lengthSquared();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double observerPlanetRq = (obsPos - planetHelioPos).lengthSqua
red();</td><td> </td><td class="right">       const double observerPlanetRq = (obsPos - planetHelioPos).lengthSqua
red();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return std::acos((observerPlanetRq  + observerRq - planetRq)/(2.0*sq
rt(observerPlanetRq*observerRq)));</td><td> </td><td class="right">       return std::acos((observerPlanetRq  + observerRq - planetRq)/(2.0*sq
rt(observerPlanetRq*observerRq)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Source: Explanatory Supplement 2013, Table 10.6 and formula (10.5) with </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">semimajorAxis a from Table 8.7.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">float Planet::getMeanOppositionMagnitude() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (absoluteMagnitude==-99.)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 100.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (englishName=="Sun")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 100;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double semimajorAxis=0.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (englishName=="Moon")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return -12.74f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else    if (englishName=="Mars")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return -2.01f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Jupiter")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return -2.7f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Saturn")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 0.67f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Uranus")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 5.52f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Neptune")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 7.84f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Pluto")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 15.12f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Io")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 5.02f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Europa")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 5.29f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Ganymede")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 4.61f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (englishName=="Callisto")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return 5.65f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (parent-&gt;englishName=="Mars")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               semimajorAxis=1.52371034;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (parent-&gt;englishName=="Jupiter")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               semimajorAxis=5.202887;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (parent-&gt;englishName=="Saturn")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               semimajorAxis=9.53667594;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (parent-&gt;englishName=="Uranus")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               semimajorAxis=19.18916464;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (parent-&gt;englishName=="Neptune")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               semimajorAxis=30.06992276;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (parent-&gt;englishName=="Pluto")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               semimajorAxis=39.48211675;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else if (pType&gt;= isAsteroid)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (userDataPtr)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       semimajorAxis=((CometOrbit*)userDataPtr)-&gt;getSemimaj</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">orAxis();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (semimajorAxis&gt;0.)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return absoluteMagnitude+5*log10(semimajorAxis*(semimajorAxi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">s-1));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return 100.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Computation of the visual magnitude (V band) of the planet.</td><td> </td><td class="right">// Computation of the visual magnitude (V band) of the planet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">float Planet::getVMagnitude(const StelCore* core) const</td><td> </td><td class="right">float Planet::getVMagnitude(const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (parent == 0)</td><td> </td><td class="right">       if (parent == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Sun, compute the apparent magnitude for the absolute mag 
(V: 4.83) and observer's distance</td><td> </td><td class="right">               // Sun, compute the apparent magnitude for the absolute mag 
(V: 4.83) and observer's distance</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Hint: Absolute Magnitude of the Sun in Several Bands: htt
p://mips.as.arizona.edu/~cnaw/sun.html</td><td> </td><td class="right">               // Hint: Absolute Magnitude of the Sun in Several Bands: htt
p://mips.as.arizona.edu/~cnaw/sun.html</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double distParsec = std::sqrt(core-&gt;getObserverHelioce
ntricEclipticPos().lengthSquared())*AU/PARSEC;</td><td> </td><td class="right">               const double distParsec = std::sqrt(core-&gt;getObserverHelioce
ntricEclipticPos().lengthSquared())*AU/PARSEC;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // check how much of it is visible</td><td> </td><td class="right">               // check how much of it is visible</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const SolarSystem* ssm = GETSTELMODULE(SolarSystem);</td><td> </td><td class="right">               const SolarSystem* ssm = GETSTELMODULE(SolarSystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double shadowFactor = ssm-&gt;getEclipseFactor(core);</td><td> </td><td class="right">               double shadowFactor = ssm-&gt;getEclipseFactor(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // See: Hughes, D. W., Brightness during a solar eclipse // 
Journal of the British Astronomical Association, vol.110, no.4, p.203-205</td><td> </td><td class="right">               // See: Hughes, D. W., Brightness during a solar eclipse // 
Journal of the British Astronomical Association, vol.110, no.4, p.203-205</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // URL: http://adsabs.harvard.edu/abs/2000JBAA..110..203H</td><td> </td><td class="right">               // URL: http://adsabs.harvard.edu/abs/2000JBAA..110..203H</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(shadowFactor &lt; 0.000128)</td><td> </td><td class="right">               if(shadowFactor &lt; 0.000128)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       shadowFactor = 0.000128;</td><td> </td><td class="right">                       shadowFactor = 0.000128;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return 4.83 + 5.*(std::log10(distParsec)-1.) - 2.5*(std::log
10(shadowFactor));</td><td> </td><td class="right">               return 4.83 + 5.*(std::log10(distParsec)-1.) - 2.5*(std::log
10(shadowFactor));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // Compute the <span class="delete">angular phase</span></td><td> </td><td class="rblock">       // Compute the <span class="insert">phase angle i. We need the intermediate results also 
below, therefore we don't just call getPhaseAngle.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const Vec3d&amp; observerHelioPos = core-&gt;getObserverHeliocentricEclipti
cPos();</td><td> </td><td class="right">       const Vec3d&amp; observerHelioPos = core-&gt;getObserverHeliocentricEclipti
cPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double observerRq = observerHelioPos.lengthSquared();</td><td> </td><td class="right">       const double observerRq = observerHelioPos.lengthSquared();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const Vec3d&amp; planetHelioPos = getHeliocentricEclipticPos();</td><td> </td><td class="right">       const Vec3d&amp; planetHelioPos = getHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double planetRq = planetHelioPos.lengthSquared();</td><td> </td><td class="right">       const double planetRq = planetHelioPos.lengthSquared();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double observerPlanetRq = (observerHelioPos - planetHelioPos).
lengthSquared();</td><td> </td><td class="right">       const double observerPlanetRq = (observerHelioPos - planetHelioPos).
lengthSquared();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double cos_chi = (observerPlanetRq + planetRq - observerRq)/(2
.0*std::sqrt(observerPlanetRq*planetRq));</td><td> </td><td class="right">       const double cos_chi = (observerPlanetRq + planetRq - observerRq)/(2
.0*std::sqrt(observerPlanetRq*planetRq));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const double phase = std::acos(cos_chi);</td><td> </td><td class="rblock">       const double phase<span class="insert">Angle</span> = std::acos(cos_chi);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double shadowFactor = 1.;</td><td> </td><td class="right">       double shadowFactor = 1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Check if the satellite is inside the inner shadow of the parent p
lanet:</td><td> </td><td class="right">       // Check if the satellite is inside the inner shadow of the parent p
lanet:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (parent-&gt;parent != 0)</td><td> </td><td class="right">       if (parent-&gt;parent != 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const Vec3d&amp; parentHeliopos = parent-&gt;getHeliocentricEclipti
cPos();</td><td> </td><td class="right">               const Vec3d&amp; parentHeliopos = parent-&gt;getHeliocentricEclipti
cPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double parent_Rq = parentHeliopos.lengthSquared();</td><td> </td><td class="right">               const double parent_Rq = parentHeliopos.lengthSquared();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double pos_times_parent_pos = planetHelioPos * parentH
eliopos;</td><td> </td><td class="right">               const double pos_times_parent_pos = planetHelioPos * parentH
eliopos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (pos_times_parent_pos &gt; parent_Rq)</td><td> </td><td class="right">               if (pos_times_parent_pos &gt; parent_Rq)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1019</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1118</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // compute a fantasy value for the magnitude
:</td><td> </td><td class="right">                               // compute a fantasy value for the magnitude
:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               d /= radius;</td><td> </td><td class="right">                               d /= radius;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               shadowFactor = (0.5 - (std::asin(d)+d*std::s
qrt(1.0-d*d))/M_PI);</td><td> </td><td class="right">                               shadowFactor = (0.5 - (std::asin(d)+d*std::s
qrt(1.0-d*d))/M_PI);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Use empirical formulae for main planets when seen from earth</td><td> </td><td class="right">       // Use empirical formulae for main planets when seen from earth</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (core-&gt;getCurrentLocation().planetName=="Earth")</td><td> </td><td class="right">       if (core-&gt;getCurrentLocation().planetName=="Earth")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const double phaseDeg=phase*180./M_PI;</td><td> </td><td class="rblock">               const double phaseDeg=phase<span class="insert">Angle</span>*180./M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double d = 5. * log10(std::sqrt(observerPlanetRq*plane
tRq));</td><td> </td><td class="right">               const double d = 5. * log10(std::sqrt(observerPlanetRq*plane
tRq));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // GZ: I prefer the values given by Meeus, Astronomical Algo
rithms (1992).</td><td> </td><td class="right">               // GZ: I prefer the values given by Meeus, Astronomical Algo
rithms (1992).</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               // There are <span class="delete">two</span> solutions:</td><td> </td><td class="rblock">               // There are <span class="insert">three</span> solutions:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               // (1) G. Mueller, based on visual observations 1877-91. [Ex</td><td> </td><td class="rblock">               // <span class="insert">(0) "Planesas": original solution in Stellarium, present </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">pl.Suppl.1961]</span></td><td> </td><td class="rblock"><span class="insert">around 2010.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //</span> (1) G. Mueller, based on visual observations 1877-91. [Ex</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">pl.Suppl.1961 p.312ff]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // (2) Astronomical Almanac 1984 and later. These give V (in
strumental) magnitudes.</td><td> </td><td class="right">               // (2) Astronomical Almanac 1984 and later. These give V (in
strumental) magnitudes.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // The structure is almost identical, just the numbers are d
ifferent!</td><td> </td><td class="right">               // The structure is almost identical, just the numbers are d
ifferent!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // I activate (1) for now, because we want to simulate the e
ye's impression. (Esp. Venus!)</td><td> </td><td class="right">               // I activate (1) for now, because we want to simulate the e
ye's impression. (Esp. Venus!)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // AW: (2) activated by default</td><td> </td><td class="right">               // AW: (2) activated by default</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">// GZ Note that calling (2) "Harris" is an absolute misnomer</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">. Meeus clearly describes this in AstrAlg1998 p.286.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // The values should likely be named:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // Planesas --&gt; Expl_Suppl_1992  AND THIS SHOULD BECOME DEFA</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ULT</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // Mueller  --&gt; Mueller_1893</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // Harris   --&gt; Astr_Eph_1984</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               switch (core-&gt;getCurrentPlanet()-&gt;getApparentMagnitudeAlgori
thm())</td><td> </td><td class="right">               switch (core-&gt;getCurrentPlanet()-&gt;getApparentMagnitudeAlgori
thm())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       case <span class="delete">Planesas:</span></td><td> </td><td class="rblock">                       case <span class="insert">UndefinedAlgorithm:        // The most recent s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">olution should be activated by default</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       case Expl_Sup_2013:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               // GZ2017: This is taken straight from the E</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">xplanatory Supplement to the Astronomical Ephemeris 2013 (chap. 10.3)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               // AW2017: Updated data from Errata in The E</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">xplanatory Supplement to the Astronomical Almanac (3rd edition, 1st printin</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">g)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               //         http://aa.usno.navy.mil/publicati</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ons/docs/exp_supp_errata.pdf (Last update: 1 December 2016)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Mercury")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -0.6 + d + (((3.02e-6*phaseDe</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">g - 0.000488)*phaseDeg + 0.0498)*phaseDeg);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Venus")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               { // there are two regions strongly enclosed</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> per phaseDeg (2.7..163.6..170.2). However, we must deliver a solution for </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">every case.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       if (phaseDeg&lt;163.6)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               return -4.47 + d + ((0.13e-6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">*phaseDeg + 0.000057)*phaseDeg + 0.0103)*phaseDeg;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               return 0.98 + d -0.0102*phas</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eDeg;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Earth")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -3.87 + d + (((0.48e-6*phaseD</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eg + 0.000019)*phaseDeg + 0.0130)*phaseDeg);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Mars")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -1.52 + d + 0.016*phaseDeg;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Jupiter")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -9.40 + d + 0.005*phaseDeg;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Saturn")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       // add rings computation</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       // implemented from Meeus, Astr.Alg.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1992</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       const double jde=core-&gt;getJDE();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       const double T=(jde-2451545.0)/36525</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       const double i=((0.000004*T-0.012998</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">)*T+28.075216)*M_PI/180.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       const double Omega=((0.000412*T+1.39</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">4681)*T+169.508470)*M_PI/180.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       static SolarSystem *ssystem=GETSTELM</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ODULE(SolarSystem);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       const Vec3d saturnEarth=getHeliocent</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ricEclipticPos() - ssystem-&gt;getEarth()-&gt;getHeliocentricEclipticPos();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       double lambda=atan2(saturnEarth[1], </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">saturnEarth[0]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       double beta=atan2(saturnEarth[2], st</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">d::sqrt(saturnEarth[0]*saturnEarth[0]+saturnEarth[1]*saturnEarth[1]));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       const double sinx=sin(i)*cos(beta)*s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">in(lambda-Omega)-cos(i)*sin(beta);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       double rings = -2.6*fabs(sinx) + 1.2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">5*sinx*sinx; // ExplSup2013: added term as (10.81)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -8.88 + d + 0.044*phaseDeg + </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">rings;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Uranus")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -7.19 + d + 0.002*phaseDeg;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Neptune")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -6.87 + d;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Pluto")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -1.01 + d;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Io")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -1.68 + d + phaseDeg*(0.46   </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">- 0.0010*phaseDeg);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Europa")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -1.41 + d + phaseDeg*(0.0312 </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">- 0.00125*phaseDeg);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Ganymede")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -2.09 + d + phaseDeg*(0.323  </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">- 0.00066*phaseDeg);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (englishName=="Callisto")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return -1.05 + d + phaseDeg*(0.078  </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">- 0.00274*phaseDeg);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if ((absoluteMagnitude!=-99.) &amp;&amp; (englishNam</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e!="Moon"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       return absoluteMagnitude+d;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       case Expl_Sup_1992:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Algorithm provided by Pere Planesas (Obse
rvatorio Astronomico Nacional)</td><td> </td><td class="right">                               // Algorithm provided by Pere Planesas (Obse
rvatorio Astronomico Nacional)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               <span class="insert">// GZ2016: Actually, this is taken straight </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">from the Explanatory Supplement to the Astronomical Ephemeris 1992! (chap. </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">7.12)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               // The value -8.88 for Saturn V(1,0) seems t</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">o be a correction of a typo, where Suppl.Astr. gives -7.19 just like for Ur</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">anus.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               double f1 = phaseDeg/100.;</td><td> </td><td class="right">                               double f1 = phaseDeg/100.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Mercury")</td><td> </td><td class="right">                               if (englishName=="Mercury")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if ( phaseDeg &gt; 150. ) f1 = 1.5;</td><td> </td><td class="right">                                       if ( phaseDeg &gt; 150. ) f1 = 1.5;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -0.36 + d + 3.8*f1 - 2.73*f1*
f1 + 2*f1*f1*f1;</td><td> </td><td class="right">                                       return -0.36 + d + 3.8*f1 - 2.73*f1*
f1 + 2*f1*f1*f1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Venus")</td><td> </td><td class="right">                               if (englishName=="Venus")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -4.29 + d + 0.09*f1 + 2.39*f1
*f1 - 0.65*f1*f1*f1;</td><td> </td><td class="right">                                       return -4.29 + d + 0.09*f1 + 2.39*f1
*f1 - 0.65*f1*f1*f1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Mars")</td><td> </td><td class="right">                               if (englishName=="Mars")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1061</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1225</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // implemented from Meeus, Astr.Alg.
1992</td><td> </td><td class="right">                                       // implemented from Meeus, Astr.Alg.
1992</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double jde=core-&gt;getJDE();</td><td> </td><td class="right">                                       const double jde=core-&gt;getJDE();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double T=(jde-2451545.0)/36525
.0;</td><td> </td><td class="right">                                       const double T=(jde-2451545.0)/36525
.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double i=((0.000004*T-0.012998
)*T+28.075216)*M_PI/180.0;</td><td> </td><td class="right">                                       const double i=((0.000004*T-0.012998
)*T+28.075216)*M_PI/180.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double Omega=((0.000412*T+1.39
4681)*T+169.508470)*M_PI/180.0;</td><td> </td><td class="right">                                       const double Omega=((0.000412*T+1.39
4681)*T+169.508470)*M_PI/180.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       static SolarSystem *ssystem=GETSTELM
ODULE(SolarSystem);</td><td> </td><td class="right">                                       static SolarSystem *ssystem=GETSTELM
ODULE(SolarSystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const Vec3d saturnEarth=getHeliocent
ricEclipticPos() - ssystem-&gt;getEarth()-&gt;getHeliocentricEclipticPos();</td><td> </td><td class="right">                                       const Vec3d saturnEarth=getHeliocent
ricEclipticPos() - ssystem-&gt;getEarth()-&gt;getHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double lambda=atan2(saturnEarth[1], 
saturnEarth[0]);</td><td> </td><td class="right">                                       double lambda=atan2(saturnEarth[1], 
saturnEarth[0]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double beta=atan2(saturnEarth[2], st
d::sqrt(saturnEarth[0]*saturnEarth[0]+saturnEarth[1]*saturnEarth[1]));</td><td> </td><td class="right">                                       double beta=atan2(saturnEarth[2], st
d::sqrt(saturnEarth[0]*saturnEarth[0]+saturnEarth[1]*saturnEarth[1]));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double sinx=sin(i)*cos(beta)*s
in(lambda-Omega)-cos(i)*sin(beta);</td><td> </td><td class="right">                                       const double sinx=sin(i)*cos(beta)*s
in(lambda-Omega)-cos(i)*sin(beta);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       double rings = -2.6*<span class="delete">sinx + 1.25*sinx
</span>*sinx;</td><td> </td><td class="rblock">                                       double rings = -2.6*<span class="insert">fabs(sinx) + 1.2
5*sinx</span>*sinx;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -8.88 + d + 0.044*phaseDeg + 
rings;</td><td> </td><td class="right">                                       return -8.88 + d + 0.044*phaseDeg + 
rings;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Uranus")</td><td> </td><td class="right">                               if (englishName=="Uranus")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -7.19 + d + 0.0028*phaseDeg;</td><td> </td><td class="right">                                       return -7.19 + d + 0.0028*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Neptune")</td><td> </td><td class="right">                               if (englishName=="Neptune")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -6.87 + d;</td><td> </td><td class="right">                                       return -6.87 + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Pluto")</td><td> </td><td class="right">                               if (englishName=="Pluto")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -1.01 + d + 0.041*phaseDeg;</td><td> </td><td class="right">                                       return -1.01 + d + 0.041*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       case Mueller:</td><td> </td><td class="rblock">                       case Mueller<span class="insert">_1893</span>:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // (1)</td><td> </td><td class="right">                               // (1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Mercury")</td><td> </td><td class="right">                               if (englishName=="Mercury")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double ph50=phaseDeg-50.0;</td><td> </td><td class="right">                                       double ph50=phaseDeg-50.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return 1.16 + d + 0.02838*ph50 + 0.0
001023*ph50*ph50;</td><td> </td><td class="right">                                       return 1.16 + d + 0.02838*ph50 + 0.0
001023*ph50*ph50;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Venus")</td><td> </td><td class="right">                               if (englishName=="Venus")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       return -4.0<span class="delete"> + d + 0.01322*phaseDeg +
</span> 0.0000004247*phaseDeg*phaseDeg*phaseDeg;</td><td> </td><td class="rblock">                                       return -4.0<span class="insert">0 + d + 0.01322*phaseDeg 
+</span> 0.0000004247*phaseDeg*phaseDeg*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Mars")</td><td> </td><td class="right">                               if (englishName=="Mars")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       return -1.3 + d + 0.01486*phaseDeg;</td><td> </td><td class="rblock">                                       return -1.3<span class="insert">0</span> + d + 0.01486*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Jupiter")</td><td> </td><td class="right">                               if (englishName=="Jupiter")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -8.93 + d;</td><td> </td><td class="right">                                       return -8.93 + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Saturn")</td><td> </td><td class="right">                               if (englishName=="Saturn")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // add rings computation</td><td> </td><td class="right">                                       // add rings computation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // implemented from Meeus, Astr.Alg.
1992</td><td> </td><td class="right">                                       // implemented from Meeus, Astr.Alg.
1992</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double jde=core-&gt;getJDE();</td><td> </td><td class="right">                                       const double jde=core-&gt;getJDE();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double T=(jde-2451545.0)/36525
.0;</td><td> </td><td class="right">                                       const double T=(jde-2451545.0)/36525
.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double i=((0.000004*T-0.012998
)*T+28.075216)*M_PI/180.0;</td><td> </td><td class="right">                                       const double i=((0.000004*T-0.012998
)*T+28.075216)*M_PI/180.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double Omega=((0.000412*T+1.39
4681)*T+169.508470)*M_PI/180.0;</td><td> </td><td class="right">                                       const double Omega=((0.000412*T+1.39
4681)*T+169.508470)*M_PI/180.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1107</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1271</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double lambda=atan2(saturnEarth[1], 
saturnEarth[0]);</td><td> </td><td class="right">                                       double lambda=atan2(saturnEarth[1], 
saturnEarth[0]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double beta=atan2(saturnEarth[2], st
d::sqrt(saturnEarth[0]*saturnEarth[0]+saturnEarth[1]*saturnEarth[1]));</td><td> </td><td class="right">                                       double beta=atan2(saturnEarth[2], st
d::sqrt(saturnEarth[0]*saturnEarth[0]+saturnEarth[1]*saturnEarth[1]));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double sinB=sin(i)*cos(beta)*s
in(lambda-Omega)-cos(i)*sin(beta);</td><td> </td><td class="right">                                       const double sinB=sin(i)*cos(beta)*s
in(lambda-Omega)-cos(i)*sin(beta);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double rings = -2.6*fabs(sinB) + 1.2
5*sinB*sinB; // sinx=sinB, saturnicentric latitude of earth. longish, see M
eeus.</td><td> </td><td class="right">                                       double rings = -2.6*fabs(sinB) + 1.2
5*sinB*sinB; // sinx=sinB, saturnicentric latitude of earth. longish, see M
eeus.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -8.68 + d + 0.044*phaseDeg + 
rings;</td><td> </td><td class="right">                                       return -8.68 + d + 0.044*phaseDeg + 
rings;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Uranus")</td><td> </td><td class="right">                               if (englishName=="Uranus")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -6.85 + d;</td><td> </td><td class="right">                                       return -6.85 + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Neptune")</td><td> </td><td class="right">                               if (englishName=="Neptune")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -7.05 + d;</td><td> </td><td class="right">                                       return -7.05 + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               // Original formulae doesn't have equ<span class="delete">eation 
f</span>or Pluto</td><td> </td><td class="rblock">                               // Original formulae doesn't have equ<span class="insert">ation f
</span>or Pluto</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Pluto")</td><td> </td><td class="right">                               if (englishName=="Pluto")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -1.0 + d;</td><td> </td><td class="right">                                       return -1.0 + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       case <span class="delete">Harris:</span></td><td> </td><td class="rblock">                       case <span class="insert">Astr_Alm_1984:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       case UndefinedAlgorithm:        // activated by defa</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ult</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // (2)</td><td> </td><td class="right">                               // (2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Mercury")</td><td> </td><td class="right">                               if (englishName=="Mercury")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -0.42 + d + .038*phaseDeg - 0
.000273*phaseDeg*phaseDeg + 0.000002*phaseDeg*phaseDeg*phaseDeg;</td><td> </td><td class="right">                                       return -0.42 + d + .038*phaseDeg - 0
.000273*phaseDeg*phaseDeg + 0.000002*phaseDeg*phaseDeg*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Venus")</td><td> </td><td class="right">                               if (englishName=="Venus")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -4.40 + d + 0.0009*phaseDeg +
 0.000239*phaseDeg*phaseDeg - 0.00000065*phaseDeg*phaseDeg*phaseDeg;</td><td> </td><td class="right">                                       return -4.40 + d + 0.0009*phaseDeg +
 0.000239*phaseDeg*phaseDeg - 0.00000065*phaseDeg*phaseDeg*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Mars")</td><td> </td><td class="right">                               if (englishName=="Mars")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -1.52 + d + 0.016*phaseDeg;</td><td> </td><td class="right">                                       return -1.52 + d + 0.016*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Jupiter")</td><td> </td><td class="right">                               if (englishName=="Jupiter")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -9.40 + d + 0.005*phaseDeg;</td><td> </td><td class="right">                                       return -9.40 + d + 0.005*phaseDeg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1152</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1315</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -7.19f + d;</td><td> </td><td class="right">                                       return -7.19f + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Neptune")</td><td> </td><td class="right">                               if (englishName=="Neptune")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -6.87f + d;</td><td> </td><td class="right">                                       return -6.87f + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (englishName=="Pluto")</td><td> </td><td class="right">                               if (englishName=="Pluto")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return -1.00f + d;</td><td> </td><td class="right">                                       return -1.00f + d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       case Generic:</td><td> </td><td class="right">                       case Generic:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               // <span class="delete">Calculation visual magnitude from phase a
</span>ngle and albedo of the planet</td><td> </td><td class="rblock">                               // <span class="insert">drop down to calculation of visual magnit
ude from phase a</span>ngle and albedo of the planet</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // This formula <span class="delete">seems to give wrong results</span></td><td> </td><td class="rblock">       // This formula <span class="insert">source is unknown. But this is actually used even fo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const double p = (1.0 - <span class="delete">phase/M_PI)</span> * cos_chi + std::sqrt(1.0 - <span class="delete">cos_</span></td><td> </td><td class="rblock"><span class="insert">r the Moon!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">chi*cos_chi)</span> / M_PI;</td><td> </td><td class="rblock">       const double p = (1.0 - <span class="insert">phaseAngle/M_PI)</span> * cos_chi + std::sqrt(1.0 -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"> <span class="insert">cos_chi*cos_chi)</span> / M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double F = 2.0 * albedo * radius * radius * p / (3.0*observerPlanetR
q*planetRq) * shadowFactor;</td><td> </td><td class="right">       double F = 2.0 * albedo * radius * radius * p / (3.0*observerPlanetR
q*planetRq) * shadowFactor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return -26.73 - 2.5 * std::log10(F);</td><td> </td><td class="right">       return -26.73 - 2.5 * std::log10(F);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Planet::getAngularSize(const StelCore* core) const</td><td> </td><td class="right">double Planet::getAngularSize(const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double rad = radius;</td><td> </td><td class="right">       double rad = radius;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (rings)</td><td> </td><td class="right">       if (rings)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rad = rings-&gt;getSize();</td><td> </td><td class="right">               rad = rings-&gt;getSize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return std::atan2(rad*sphereScale,getJ2000EquatorialPos(core).length
()) * 180./M_PI;</td><td> </td><td class="right">       return std::atan2(rad*sphereScale,getJ2000EquatorialPos(core).length
()) * 180./M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1598</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1761</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               float fov=core-&gt;getProjection(transfo)-&gt;getF
ov();</td><td> </td><td class="right">                               float fov=core-&gt;getProjection(transfo)-&gt;getF
ov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               float fovFactor=1.6f;</td><td> </td><td class="right">                               float fovFactor=1.6f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // scale brightness to reduce if fov smaller
 than 5 degrees. Min brightness (to avoid glare) if fov=2deg.</td><td> </td><td class="right">                               // scale brightness to reduce if fov smaller
 than 5 degrees. Min brightness (to avoid glare) if fov=2deg.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (fov&lt;5.0f)</td><td> </td><td class="right">                               if (fov&lt;5.0f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       fovFactor -= 0.1f*(5.0f-qMax(2.0f, f
ov));</td><td> </td><td class="right">                                       fovFactor -= 0.1f*(5.0f-qMax(2.0f, f
ov));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Special case for the Moon. Was 1.6, but t
his often is too bright.</td><td> </td><td class="right">                               // Special case for the Moon. Was 1.6, but t
his often is too bright.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               light.diffuse = Vec4f(fovFactor,magFactorGre
en*fovFactor,magFactorBlue*fovFactor,1.f);</td><td> </td><td class="right">                               light.diffuse = Vec4f(fovFactor,magFactorGre
en*fovFactor,magFactorBlue*fovFactor,1.f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       sPainter-&gt;setColor(albedo,magFactorGreen*albedo,magF
actorBlue*albedo);</td><td> </td><td class="right">                       sPainter-&gt;setColor(albedo,magFactorGreen*albedo,magF
actorBlue*albedo);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // possibly tint sun's color from extinction. This should de
liberately cause stronger reddening than for the other objects.</td><td> </td><td class="right">               // possibly tint sun's color from extinction. This should de
liberately cause stronger reddening than for the other objects.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (this==ssm-&gt;getSun())</td><td> </td><td class="right">               if (this==ssm-&gt;getSun())</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">sPainter-&gt;setColor(2.f,</span> pow(0.75f, <span class="delete">extinctedMag)*2.f</span></td><td> </td><td class="rblock">               <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> pow(0.42f, <span class="delete">0.9f*extinctedMag)*2.f);</span></td><td> </td><td class="rblock"><span class="insert">                       // when we zoom in, reduce the overbrightness. (LP:#</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1421173)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       const float fov=core-&gt;getProjection(transfo)-&gt;getFov</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       const float overbright=qMin(2.0f, qMax(0.85f,0.5f*fo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">v)); // scale full brightness to 0.85...2. (&lt;2 when fov gets under 4 degree</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">s)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       sPainter-&gt;setColor(overbright,</span> pow(0.75f, <span class="insert">extinctedM</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ag)*overbright,</span> pow(0.42f, <span class="insert">0.9f*extinctedMag)*overbright);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (rings)</td><td> </td><td class="right">               if (rings)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // The planet has rings, we need to use depth buffer
 and adjust the clipping planes to avoid</td><td> </td><td class="right">                       // The planet has rings, we need to use depth buffer
 and adjust the clipping planes to avoid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // reaching the maximum resolution of the depth buff
er</td><td> </td><td class="right">                       // reaching the maximum resolution of the depth buff
er</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double dist = getEquinoxEquatorialPos(core).le
ngth();</td><td> </td><td class="right">                       const double dist = getEquinoxEquatorialPos(core).le
ngth();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double z_near = 0.9*(dist - rings-&gt;getSize());</td><td> </td><td class="right">                       double z_near = 0.9*(dist - rings-&gt;getSize());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double z_far  = 1.1*(dist + rings-&gt;getSize());</td><td> </td><td class="right">                       double z_far  = 1.1*(dist + rings-&gt;getSize());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (z_near &lt; 0.0) z_near = 0.0;</td><td> </td><td class="right">                       if (z_near &lt; 0.0) z_near = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double n,f;</td><td> </td><td class="right">                       double n,f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1800</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1967</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Planet::drawSphere(StelPainter* painter, float screenSz, bool drawOnly
Ring)</td><td> </td><td class="right">void Planet::drawSphere(StelPainter* painter, float screenSz, bool drawOnly
Ring)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (texMap)</td><td> </td><td class="right">       if (texMap)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // For lazy loading, return if texture not yet loaded</td><td> </td><td class="right">               // For lazy loading, return if texture not yet loaded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!texMap-&gt;bind(0))</td><td> </td><td class="right">               if (!texMap-&gt;bind(0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">painter-&gt;enableTexture2d(true);</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glDisable(GL_BLEND);</span></td><td> </td><td class="rblock">       <span class="insert">painter-&gt;setBlending(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_CULL_FACE);</span></td><td> </td><td class="rblock"><span class="insert">       painter-&gt;setCullFace(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the spheroid itself</td><td> </td><td class="right">       // Draw the spheroid itself</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Adapt the number of facets according with the size of the sphere 
for optimization</td><td> </td><td class="right">       // Adapt the number of facets according with the size of the sphere 
for optimization</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int nb_facet = (int)(screenSz * 40.f/50.f);     // 40 facets for 102
4 pixels diameter on screen</td><td> </td><td class="right">       int nb_facet = (int)(screenSz * 40.f/50.f);     // 40 facets for 102
4 pixels diameter on screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (nb_facet&lt;10) nb_facet = 10;</td><td> </td><td class="right">       if (nb_facet&lt;10) nb_facet = 10;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (nb_facet&gt;100) nb_facet = 100;</td><td> </td><td class="right">       if (nb_facet&gt;100) nb_facet = 100;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Generates the vertice</td><td> </td><td class="right">       // Generates the vertice</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet3DModel model;</td><td> </td><td class="right">       Planet3DModel model;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sSphere(&amp;model, radius*sphereScale, oneMinusOblateness, nb_facet, nb
_facet);</td><td> </td><td class="right">       sSphere(&amp;model, radius*sphereScale, oneMinusOblateness, nb_facet, nb
_facet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1933</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 2100</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;setAttributeArray(shaderVars-&gt;vertex, (const GLfloat*)pro
jectedVertexArr.constData(), 3));</td><td> </td><td class="right">       GL(shader-&gt;setAttributeArray(shaderVars-&gt;vertex, (const GLfloat*)pro
jectedVertexArr.constData(), 3));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;enableAttributeArray(shaderVars-&gt;vertex));</td><td> </td><td class="right">       GL(shader-&gt;enableAttributeArray(shaderVars-&gt;vertex));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;setAttributeArray(shaderVars-&gt;unprojectedVertex, (const G
Lfloat*)model.vertexArr.constData(), 3));</td><td> </td><td class="right">       GL(shader-&gt;setAttributeArray(shaderVars-&gt;unprojectedVertex, (const G
Lfloat*)model.vertexArr.constData(), 3));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;enableAttributeArray(shaderVars-&gt;unprojectedVertex));</td><td> </td><td class="right">       GL(shader-&gt;enableAttributeArray(shaderVars-&gt;unprojectedVertex));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;setAttributeArray(shaderVars-&gt;texCoord, (const GLfloat*)m
odel.texCoordArr.constData(), 2));</td><td> </td><td class="right">       GL(shader-&gt;setAttributeArray(shaderVars-&gt;texCoord, (const GLfloat*)m
odel.texCoordArr.constData(), 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;enableAttributeArray(shaderVars-&gt;texCoord));</td><td> </td><td class="right">       GL(shader-&gt;enableAttributeArray(shaderVars-&gt;texCoord));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">QOpenGLFunctions* gl = painter-&gt;glFuncs();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (rings)</td><td> </td><td class="right">       if (rings)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glDepthMask(GL_TRUE);</span></td><td> </td><td class="rblock">               <span class="insert">painter-&gt;setDepthMask(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glClear(GL_DEPTH_BUFFER_BIT);</span></td><td> </td><td class="rblock"><span class="insert">               painter-&gt;setDepthTest(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glEnable(GL_DEPTH_TEST);</span></td><td> </td><td class="rblock"><span class="insert">               gl-&gt;glClear(GL_DEPTH_BUFFER_BIT);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!drawOnlyRing)</td><td> </td><td class="right">       if (!drawOnlyRing)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               GL(gl<span class="delete">DrawElements(GL_TRIANGLES, model.indiceArr.size(), GL_U
</span>NSIGNED_SHORT, model.indiceArr.constData()));</td><td> </td><td class="rblock">               GL(gl<span class="insert">-&gt;glDrawElements(GL_TRIANGLES, model.indiceArr.size(), 
GL_U</span>NSIGNED_SHORT, model.indiceArr.constData()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (rings)</td><td> </td><td class="right">       if (rings)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Draw the rings just after the planet</td><td> </td><td class="right">               // Draw the rings just after the planet</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glDepthMask(GL_FALSE</span>);</td><td> </td><td class="rblock">               <span class="insert">painter-&gt;setDepthMask(false</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Normal transparency mode</td><td> </td><td class="right">               // Normal transparency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span></td><td> </td><td class="rblock">               <span class="insert">painter-&gt;setBlending(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glEnable(GL_BLEND);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Ring3DModel ringModel;</td><td> </td><td class="right">               Ring3DModel ringModel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sRing(&amp;ringModel, rings-&gt;radiusMin, rings-&gt;radiusMax, 128, 3
2);</td><td> </td><td class="right">               sRing(&amp;ringModel, rings-&gt;radiusMin, rings-&gt;radiusMax, 128, 3
2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;setUniformValue(ringPlanetShader
Vars.isRing, true));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;setUniformValue(ringPlanetShader
Vars.isRing, true));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;setUniformValue(ringPlanetShader
Vars.texture, 2));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;setUniformValue(ringPlanetShader
Vars.texture, 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;setUniformValue(ringPlanetShader
Vars.ringS, 1));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;setUniformValue(ringPlanetShader
Vars.ringS, 1));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               computeModelMatrix(modelMatrix);</td><td> </td><td class="right">               computeModelMatrix(modelMatrix);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const Vec4d position = mTarget * modelMatrix.getColumn(3);</td><td> </td><td class="right">               const Vec4d position = mTarget * modelMatrix.getColumn(3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1980</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 2148</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter-&gt;getProjector()-&gt;project(*((Vec3f*)(ringMode
l.vertexArr.constData()+i*3)), *((Vec3f*)(projectedVertexArr.data()+i*3)));</td><td> </td><td class="right">                       painter-&gt;getProjector()-&gt;project(*((Vec3f*)(ringMode
l.vertexArr.constData()+i*3)), *((Vec3f*)(projectedVertexArr.data()+i*3)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;setAttributeArray(ringPlanetShad
erVars.vertex, (const GLfloat*)projectedVertexArr.constData(), 3));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;setAttributeArray(ringPlanetShad
erVars.vertex, (const GLfloat*)projectedVertexArr.constData(), 3));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;enableAttributeArray(ringPlanetS
haderVars.vertex));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;enableAttributeArray(ringPlanetS
haderVars.vertex));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;setAttributeArray(ringPlanetShad
erVars.unprojectedVertex, (const GLfloat*)ringModel.vertexArr.constData(), 
3));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;setAttributeArray(ringPlanetShad
erVars.unprojectedVertex, (const GLfloat*)ringModel.vertexArr.constData(), 
3));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;enableAttributeArray(ringPlanetS
haderVars.unprojectedVertex));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;enableAttributeArray(ringPlanetS
haderVars.unprojectedVertex));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;setAttributeArray(ringPlanetShad
erVars.texCoord, (const GLfloat*)ringModel.texCoordArr.constData(), 2));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;setAttributeArray(ringPlanetShad
erVars.texCoord, (const GLfloat*)ringModel.texCoordArr.constData(), 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GL(ringPlanetShaderProgram-&gt;enableAttributeArray(ringPlanetS
haderVars.texCoord));</td><td> </td><td class="right">               GL(ringPlanetShaderProgram-&gt;enableAttributeArray(ringPlanetS
haderVars.texCoord));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (eyePos[2]&lt;0)</td><td> </td><td class="right">               if (eyePos[2]&lt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       glCullFace(GL_FRONT);</td><td> </td><td class="rblock">                       gl<span class="insert">-&gt;gl</span>CullFace(GL_FRONT);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               GL(gl<span class="delete">DrawElements(GL_TRIANGLES, ringModel.indiceArr.size(), 
</span>GL_UNSIGNED_SHORT, ringModel.indiceArr.constData()));</td><td> </td><td class="rblock">               GL(gl<span class="insert">-&gt;glDrawElements(GL_TRIANGLES, ringModel.indiceArr.size
(), </span>GL_UNSIGNED_SHORT, ringModel.indiceArr.constData()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (eyePos[2]&lt;0)</td><td> </td><td class="right">               if (eyePos[2]&lt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       glCullFace(GL_BACK);</td><td> </td><td class="rblock">                       gl<span class="insert">-&gt;gl</span>CullFace(GL_BACK);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glDisable(GL_DEPTH_TEST</span>);</td><td> </td><td class="rblock">               <span class="insert">painter-&gt;setDepthTest(false</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GL(shader-&gt;release());</td><td> </td><td class="right">       GL(shader-&gt;release());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glDisable(GL_CULL_FACE</span>);</td><td> </td><td class="rblock">       <span class="insert">painter-&gt;setCullFace(false</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Planet::drawHints(const StelCore* core, const QFont&amp; planetNameFont)</td><td> </td><td class="right">void Planet::drawHints(const StelCore* core, const QFont&amp; planetNameFont)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (labelsFader.getInterstate()&lt;=0.f)</td><td> </td><td class="right">       if (labelsFader.getInterstate()&lt;=0.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(prj);</td><td> </td><td class="right">       StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.setFont(planetNameFont);</td><td> </td><td class="right">       sPainter.setFont(planetNameFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 2016</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 2184</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.drawText(screenPos[0],screenPos[1], getSkyLabel(core), 0, t
mp, tmp, false);</td><td> </td><td class="right">       sPainter.drawText(screenPos[0],screenPos[1], getSkyLabel(core), 0, t
mp, tmp, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // hint disappears smoothly on close view</td><td> </td><td class="right">       // hint disappears smoothly on close view</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (hintFader.getInterstate()&lt;=0)</td><td> </td><td class="right">       if (hintFader.getInterstate()&lt;=0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       tmp -= 10.f;</td><td> </td><td class="right">       tmp -= 10.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (tmp&lt;1) tmp=1;</td><td> </td><td class="right">       if (tmp&lt;1) tmp=1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.setColor(labelColor[0], labelColor[1], labelColor[2],labels
Fader.getInterstate()*hintFader.getInterstate()/tmp*0.7f);</td><td> </td><td class="right">       sPainter.setColor(labelColor[0], labelColor[1], labelColor[2],labels
Fader.getInterstate()*hintFader.getInterstate()/tmp*0.7f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the 2D small circle</td><td> </td><td class="right">       // Draw the 2D small circle</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glEnable(GL_BLEND);</span></td><td> </td><td class="rblock">       <span class="insert">sPainter.setBlending(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       sPainter.enableTexture2d(true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::hintCircleTex-&gt;bind();</td><td> </td><td class="right">       Planet::hintCircleTex-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.drawSprite2dMode(screenPos[0], screenPos[1], 11);</td><td> </td><td class="right">       sPainter.drawSprite2dMode(screenPos[0], screenPos[1], 11);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Ring::Ring(float radiusMin, float radiusMax, const QString &amp;texname)</td><td> </td><td class="right">Ring::Ring(float radiusMin, float radiusMax, const QString &amp;texname)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        :radiusMin(radiusMin),radiusMax(radiusMax)</td><td> </td><td class="right">        :radiusMin(radiusMin),radiusMax(radiusMax)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       tex = StelApp::getInstance().getTextureManager().createTexture(StelF
ileMgr::getInstallationDir()+"/textures/"+texname);</td><td> </td><td class="right">       tex = StelApp::getInstance().getTextureManager().createTexture(StelF
ileMgr::getInstallationDir()+"/textures/"+texname);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l19" /><small>skipping to change at</small><em> line 2065</em></th><th> </th><th><a name="part-r19" /><small>skipping to change at</small><em> line 2231</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               case isSDO:</td><td> </td><td class="right">                               case isSDO:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       orbColor = orbitScatteredDiscObjects
Color;</td><td> </td><td class="right">                                       orbColor = orbitScatteredDiscObjects
Color;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               case isOCO:</td><td> </td><td class="right">                               case isOCO:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       orbColor = orbitOortCloudObjectsColo
r;</td><td> </td><td class="right">                                       orbColor = orbitOortCloudObjectsColo
r;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               case isComet:</td><td> </td><td class="right">                               case isComet:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       orbColor = orbitCometsColor;</td><td> </td><td class="right">                                       orbColor = orbitCometsColor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               <span class="insert">case isSednoid:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       orbColor = orbitSednoidsColor;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               default:</td><td> </td><td class="right">                               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       orbColor = orbitColor;</td><td> </td><td class="right">                                       orbColor = orbitColor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ocsMajorPlanets:</td><td> </td><td class="right">               case ocsMajorPlanets:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString pName = getEnglishName().toLower();</td><td> </td><td class="right">                       QString pName = getEnglishName().toLower();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (pName=="mercury")</td><td> </td><td class="right">                       if (pName=="mercury")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               orbColor = orbitMercuryColor;</td><td> </td><td class="right">                               orbColor = orbitMercuryColor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l20" /><small>skipping to change at</small><em> line 2116</em></th><th> </th><th><a name="part-r20" /><small>skipping to change at</small><em> line 2285</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!orbitFader.getInterstate())</td><td> </td><td class="right">       if (!orbitFader.getInterstate())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!re.siderealPeriod)</td><td> </td><td class="right">       if (!re.siderealPeriod)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameHelioc
entricEclipticJ2000);</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameHelioc
entricEclipticJ2000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(prj);</td><td> </td><td class="right">       StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Normal transparency mode</td><td> </td><td class="right">       // Normal transparency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span></td><td> </td><td class="rblock">       <span class="insert">sPainter.setBlending(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_BLEND);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f orbColor = getCurrentOrbitColor();</td><td> </td><td class="right">       Vec3f orbColor = getCurrentOrbitColor();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.setColor(orbColor[0], orbColor[1], orbColor[2], orbitFader.
getInterstate());</td><td> </td><td class="right">       sPainter.setColor(orbColor[0], orbColor[1], orbColor[2], orbitFader.
getInterstate());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d onscreen;</td><td> </td><td class="right">       Vec3d onscreen;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // special case - use current Planet position as center vertex so th
at draws</td><td> </td><td class="right">       // special case - use current Planet position as center vertex so th
at draws</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // on its orbit all the time (since segmented rather than smooth cur
ve)</td><td> </td><td class="right">       // on its orbit all the time (since segmented rather than smooth cur
ve)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d savePos = orbit[ORBIT_SEGMENTS/2];</td><td> </td><td class="right">       Vec3d savePos = orbit[ORBIT_SEGMENTS/2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       orbit[ORBIT_SEGMENTS/2]=getHeliocentricEclipticPos();</td><td> </td><td class="right">       orbit[ORBIT_SEGMENTS/2]=getHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       orbit[ORBIT_SEGMENTS]=orbit[0];</td><td> </td><td class="right">       orbit[ORBIT_SEGMENTS]=orbit[0];</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 45 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>54 lines changed or deleted</i></th><th><i> </i></th><th><i>279 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
