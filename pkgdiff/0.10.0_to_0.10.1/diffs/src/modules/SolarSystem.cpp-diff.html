<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: SolarSystem.cpp - SolarSystem.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;SolarSystem.cpp&nbsp;</th><th> </th><th>&nbsp;SolarSystem.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 22</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 22</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td><td> </td><td class="right"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * GNU General Public License for more details.</td><td> </td><td class="right"> * GNU General Public License for more details.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * You should have received a copy of the GNU General Public License</td><td> </td><td class="right"> * You should have received a copy of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * along with this program; if not, write to the Free Software</td><td> </td><td class="right"> * along with this program; if not, write to the Free Software</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td> </td><td class="right"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;algorithm&gt;</td><td> </td><td class="right">#include &lt;algorithm&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "SolarSystem.hpp"</td><td> </td><td class="right">#include "SolarSystem.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include "STexture.hpp"</td><td> </td><td class="rblock">#include "S<span class="insert">tel</span>Texture.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "stellplanet.h"</td><td> </td><td class="right">#include "stellplanet.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Orbit.hpp"</td><td> </td><td class="right">#include "Orbit.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include <span class="delete">"Navigator.hpp"</span></td><td> </td><td class="rblock">#include <span class="insert">"StelNavigator.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include <span class="delete">"Projector.hpp"</span></td><td> </td><td class="rblock">#include <span class="insert">"StelProjector.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTextureMgr.hpp"</td><td> </td><td class="right">#include "StelTextureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFontMgr.hpp"</td><td> </td><td class="right">#include "StelFontMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyCultureMgr.hpp"</td><td> </td><td class="right">#include "StelSkyCultureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelIniParser.hpp"</td><td> </td><td class="right">#include "StelIniParser.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include <span class="delete">"Navigator.hpp"</span></td><td> </td><td class="rblock">#include <span class="insert">"StelNavigator.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include <span class="delete">"SFont.hpp"</span></td><td> </td><td class="rblock">#include <span class="insert">"StelFont.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include <span class="delete">"SkyDrawer.hpp"</span></td><td> </td><td class="rblock">#include <span class="insert">"StelSkyDrawer.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelStyle.hpp"</td><td> </td><td class="right">#include "StelStyle.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelPainter.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QTextStream&gt;</td><td> </td><td class="right">#include &lt;QTextStream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QVariant&gt;</td><td> </td><td class="right">#include &lt;QVariant&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QString&gt;</td><td> </td><td class="right">#include &lt;QString&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QStringList&gt;</td><td> </td><td class="right">#include &lt;QStringList&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMap&gt;</td><td> </td><td class="right">#include &lt;QMap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMultiMap&gt;</td><td> </td><td class="right">#include &lt;QMultiMap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMapIterator&gt;</td><td> </td><td class="right">#include &lt;QMapIterator&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 86</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 87</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for(std::vector&lt;Orbit*&gt;::iterator iter = orbits.begin(); iter != orb
its.end(); ++iter)</td><td> </td><td class="right">       for(std::vector&lt;Orbit*&gt;::iterator iter = orbits.begin(); iter != orb
its.end(); ++iter)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (*iter) delete *iter;</td><td> </td><td class="right">               if (*iter) delete *iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               *iter = NULL;</td><td> </td><td class="right">               *iter = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sun = NULL;</td><td> </td><td class="right">       sun = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       moon = NULL;</td><td> </td><td class="right">       moon = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       earth = NULL;</td><td> </td><td class="right">       earth = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::hintCircleTex.reset();</td><td> </td><td class="right">       Planet::hintCircleTex.reset();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Planet::texEarthShadow.reset();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> Reimplementation of the getCallOrder method</td><td> </td><td class="right"> Reimplementation of the getCallOrder method</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double SolarSystem::getCallOrder(StelModuleActionName actionName) const</td><td> </td><td class="right">double SolarSystem::getCallOrder(StelModuleActionName actionName) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (actionName==StelModule::ActionDraw)</td><td> </td><td class="right">       if (actionName==StelModule::ActionDraw)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return StelApp::getInstance().getModuleMgr().getModule("Star
Mgr")-&gt;getCallOrder(actionName)+10;</td><td> </td><td class="right">               return StelApp::getInstance().getModuleMgr().getModule("Star
Mgr")-&gt;getCallOrder(actionName)+10;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 0;</td><td> </td><td class="right">       return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Init and load the solar system data</td><td> </td><td class="right">// Init and load the solar system data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::init()</td><td> </td><td class="right">void SolarSystem::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(conf);</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       loadPlanets();  // Load planets data</td><td> </td><td class="right">       loadPlanets();  // Load planets data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute position and matrix of sun and all the satellites (ie pla
nets)</td><td> </td><td class="right">       // Compute position and matrix of sun and all the satellites (ie pla
nets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // for the first initialization <span class="delete">assert that center is sun center (on
</span>ly impacts on light speed correction)</td><td> </td><td class="rblock">       // for the first initialization <span class="insert">Q_ASSERT that center is sun center (
on</span>ly impacts on light speed correction)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       computePositions(StelUtils::getJDFromSystem());</td><td> </td><td class="right">       computePositions(StelUtils::getJDFromSystem());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setSelected("");        // Fix a bug on macosX! Thanks Fumio!</td><td> </td><td class="right">       setSelected("");        // Fix a bug on macosX! Thanks Fumio!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagMoonScale(conf-&gt;value("viewing/flag_moon_scaled", conf-&gt;value
("viewing/flag_init_moon_scaled", "false").toBool()).toBool());  // name ch
ange</td><td> </td><td class="right">       setFlagMoonScale(conf-&gt;value("viewing/flag_moon_scaled", conf-&gt;value
("viewing/flag_init_moon_scaled", "false").toBool()).toBool());  // name ch
ange</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMoonScale(conf-&gt;value("viewing/moon_scale", 5.0).toDouble());</td><td> </td><td class="right">       setMoonScale(conf-&gt;value("viewing/moon_scale", 5.0).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPlanets(conf-&gt;value("astro/flag_planets").toBool());</td><td> </td><td class="right">       setFlagPlanets(conf-&gt;value("astro/flag_planets").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(conf-&gt;value("astro/flag_planets_hints").toBool());</td><td> </td><td class="right">       setFlagHints(conf-&gt;value("astro/flag_planets_hints").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLabels(conf-&gt;value("astro/flag_planets_labels", true).toBool(
));</td><td> </td><td class="right">       setFlagLabels(conf-&gt;value("astro/flag_planets_labels", true).toBool(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLabelsAmount(conf-&gt;value("astro/labels_amount", 3.).toDouble());</td><td> </td><td class="right">       setLabelsAmount(conf-&gt;value("astro/labels_amount", 3.).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(conf-&gt;value("astro/flag_planets_orbits").toBool());</td><td> </td><td class="right">       setFlagOrbits(conf-&gt;value("astro/flag_planets_orbits").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLightTravelTime(conf-&gt;value("astro/flag_light_travel_time", f
alse).toBool());</td><td> </td><td class="right">       setFlagLightTravelTime(conf-&gt;value("astro/flag_light_travel_time", f
alse).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 130</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 132</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getStelObjectMgr().registerStelObjectMgr(this
);</td><td> </td><td class="right">       StelApp::getInstance().getStelObjectMgr().registerStelObjectMgr(this
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getTextureManager().setDefaultParams();</td><td> </td><td class="right">       StelApp::getInstance().getTextureManager().setDefaultParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getTextureManager().setMinFilter(GL_LINEAR);</td><td> </td><td class="right">       StelApp::getInstance().getTextureManager().setMinFilter(GL_LINEAR);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texPointer = StelApp::getInstance().getTextureManager().createTextur
e("pointeur4.png");</td><td> </td><td class="right">       texPointer = StelApp::getInstance().getTextureManager().createTextur
e("pointeur4.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::hintCircleTex = StelApp::getInstance().getTextureManager().c
reateTexture("planet-indicator.png");</td><td> </td><td class="right">       Planet::hintCircleTex = StelApp::getInstance().getTextureManager().c
reateTexture("planet-indicator.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::drawPointer(const StelCore* core)</td><td> </td><td class="right">void SolarSystem::drawPointer(const StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const <span class="delete">Navigator*</span> nav = <span class="delete">core-&gt;getNavigation();</span></td><td> </td><td class="rblock">       const <span class="insert">StelNavigator*</span> nav = <span class="insert">core-&gt;getNavigator();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const <span class="delete">Projector*</span> prj = <span class="delete">core-&gt;getProjection();</span></td><td> </td><td class="rblock">       const <span class="insert">StelProjectorP</span> prj = <span class="insert">core-&gt;getProjection(StelCore::FrameJ2000)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; newSelected = StelApp::getInstance().getSte
lObjectMgr().getSelectedObject("Planet");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; newSelected = StelApp::getInstance().getSte
lObjectMgr().getSelectedObject("Planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!newSelected.empty())</td><td> </td><td class="right">       if (!newSelected.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelObjectP obj = newSelected[0];</td><td> </td><td class="right">               const StelObjectP obj = newSelected[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               Vec3d pos=obj-&gt;get<span class="delete">ObsJ2000</span>Pos(nav);</td><td> </td><td class="rblock">               Vec3d pos=obj-&gt;get<span class="insert">J2000Equatorial</span>Pos(nav);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d screenpos;</td><td> </td><td class="right">               Vec3d screenpos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               prj-&gt;setCurrentFrame(Projector::FrameJ2000);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Compute 2D pos and return if outside screen</td><td> </td><td class="right">               // Compute 2D pos and return if outside screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!prj-&gt;project(pos, screenpos)) return;</td><td> </td><td class="rblock">               if (!prj-&gt;project(pos, screenpos))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               StelPainter sPainter(prj);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glColor3f(1.0f,0.3f,0.3f);</td><td> </td><td class="right">               glColor3f(1.0f,0.3f,0.3f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               float size = obj-&gt;get<span class="delete">OnScreenSize(core)*2</span>;</td><td> </td><td class="rblock">               float size = obj-&gt;get<span class="insert">AngularSize(core)*M_PI/180.*prj-&gt;getPix
elPerRadAtCenter()*2.</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               size+=26.f + 10.f*std::sin(2.f * StelApp::getInstance().getT
otalRunTime());</td><td> </td><td class="right">               size+=26.f + 10.f*std::sin(2.f * StelApp::getInstance().getT
otalRunTime());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               texPointer-&gt;bind();</td><td> </td><td class="right">               texPointer-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        glEnable(GL_TEXTURE_2D);</td><td> </td><td class="right">        glEnable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        glEnable(GL_BLEND);</td><td> </td><td class="right">        glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transp
arency mode</td><td> </td><td class="right">        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transp
arency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        glPushMatrix();</td><td> </td><td class="right">        glPushMatrix();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        glTranslatef(screenpos[0], screenpos[1], 0.0f);</td><td> </td><td class="right">        glTranslatef(screenpos[0], screenpos[1], 0.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 343</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 346</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td> </td><td class="right">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double semi_major_axis;</td><td> </td><td class="right">                       double semi_major_axis;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (pericenterDistance &lt;= 0.0) {</td><td> </td><td class="right">                       if (pericenterDistance &lt;= 0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td> </td><td class="right">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (semi_major_axis &lt;= -1e100) {</td><td> </td><td class="right">                               if (semi_major_axis &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "ERROR: " &lt;&lt; englishName</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "ERROR: " &lt;&lt; englishName</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td> </td><td class="right">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       abort();</td><td> </td><td class="right">                                       abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       semi_major_axis /= AU;</td><td> </td><td class="right">                                       semi_major_axis /= AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">assert(eccentricity != 1.0); // para
</span>bolic orbits have no semi_major_axis</td><td> </td><td class="rblock">                                       <span class="insert">Q_ASSERT(eccentricity != 1.0); // pa
ra</span>bolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td> </td><td class="right">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               pericenterDistance /= AU;</td><td> </td><td class="right">                               pericenterDistance /= AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = (eccentricity == 1.0)</td><td> </td><td class="right">                               semi_major_axis = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               ? 0.0 // parabolic orbits ha
ve no semi_major_axis</td><td> </td><td class="right">                                               ? 0.0 // parabolic orbits ha
ve no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               : pericenterDistance / (1.0-
eccentricity);</td><td> </td><td class="right">                                               : pericenterDistance / (1.0-
eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td> </td><td class="right">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double period;</td><td> </td><td class="right">                       double period;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 407</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 410</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                         : 0.0;</td><td> </td><td class="right">                                                         : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double parent_rot_j2000_longitude = 0.0;</td><td> </td><td class="right">                       double parent_rot_j2000_longitude = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (parent-&gt;getParent()) {</td><td> </td><td class="right">                       if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double c_obl = cos(parentRotObliquity)
;</td><td> </td><td class="right">                               const double c_obl = cos(parentRotObliquity)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double s_obl = sin(parentRotObliquity)
;</td><td> </td><td class="right">                               const double s_obl = sin(parentRotObliquity)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double c_nod = cos(parent_rot_asc_node
);</td><td> </td><td class="right">                               const double c_nod = cos(parent_rot_asc_node
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double s_nod = sin(parent_rot_asc_node
);</td><td> </td><td class="right">                               const double s_nod = sin(parent_rot_asc_node
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitAxis0( c_nod,       s_nod, 
       0.0);</td><td> </td><td class="right">                               const Vec3d OrbitAxis0( c_nod,       s_nod, 
       0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c
_obl,s_obl);</td><td> </td><td class="right">                               const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c
_obl,s_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s
_obl,c_obl);</td><td> </td><td class="right">                               const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s
_obl,c_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               const Vec3d J2000Pole(<span class="delete">matJ2000ToVsop87.multi
</span>plyWithoutTranslation(Vec3d(0,0,1)));</td><td> </td><td class="rblock">                               const Vec3d J2000Pole(<span class="insert">StelNavigator::matJ200
0ToVsop87.multi</span>plyWithoutTranslation(Vec3d(0,0,1)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d J2000NodeOrigin(J2000Pole^OrbitPole);</td><td> </td><td class="right">                               Vec3d J2000NodeOrigin(J2000Pole^OrbitPole);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               J2000NodeOrigin.normalize();</td><td> </td><td class="right">                               J2000NodeOrigin.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               parent_rot_j2000_longitude = atan2(J2000Node
Origin*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</td><td> </td><td class="right">                               parent_rot_j2000_longitude = atan2(J2000Node
Origin*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Create an elliptical orbit</td><td> </td><td class="right">                       // Create an elliptical orbit</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       EllipticalOrbit *orb = new EllipticalOrbit(pericente
rDistance,</td><td> </td><td class="right">                       EllipticalOrbit *orb = new EllipticalOrbit(pericente
rDistance,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  eccentric
ity,</td><td> </td><td class="right">                                                                  eccentric
ity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  inclinati
on,</td><td> </td><td class="right">                                                                  inclinati
on,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  ascending
_node,</td><td> </td><td class="right">                                                                  ascending
_node,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 448</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 451</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td> </td><td class="right">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td> </td><td class="right">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double semi_major_axis;</td><td> </td><td class="right">                       double semi_major_axis;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (pericenterDistance &lt;= 0.0) {</td><td> </td><td class="right">                       if (pericenterDistance &lt;= 0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td> </td><td class="right">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (semi_major_axis &lt;= -1e100) {</td><td> </td><td class="right">                               if (semi_major_axis &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td> </td><td class="right">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       abort();</td><td> </td><td class="right">                                       abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">assert(eccentricity != 1.0); // para
</span>bolic orbits have no semi_major_axis</td><td> </td><td class="rblock">                                       <span class="insert">Q_ASSERT(eccentricity != 1.0); // pa
ra</span>bolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td> </td><td class="right">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = (eccentricity == 1.0)</td><td> </td><td class="right">                               semi_major_axis = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               ? 0.0 // parabolic orbits ha
ve no semi_major_axis</td><td> </td><td class="right">                                               ? 0.0 // parabolic orbits ha
ve no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               : pericenterDistance / (1.0-
eccentricity);</td><td> </td><td class="right">                                               : pericenterDistance / (1.0-
eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td> </td><td class="right">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (meanMotion &lt;= -1e100) {</td><td> </td><td class="right">                       if (meanMotion &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double period = pd.value(secname+"/orb
it_Period",-1e100).toDouble();</td><td> </td><td class="right">                               const double period = pd.value(secname+"/orb
it_Period",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 512</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 515</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                         : 0.0;</td><td> </td><td class="right">                                                         : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double parent_rot_j2000_longitude = 0.0;</td><td> </td><td class="right">                       double parent_rot_j2000_longitude = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        if (parent-&gt;getParent()) {</td><td> </td><td class="right">                        if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const double c_obl = cos(parentRotObliquity);</td><td> </td><td class="right">                           const double c_obl = cos(parentRotObliquity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const double s_obl = sin(parentRotObliquity);</td><td> </td><td class="right">                           const double s_obl = sin(parentRotObliquity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const double c_nod = cos(parent_rot_asc_node);</td><td> </td><td class="right">                           const double c_nod = cos(parent_rot_asc_node);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const double s_nod = sin(parent_rot_asc_node);</td><td> </td><td class="right">                           const double s_nod = sin(parent_rot_asc_node);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const Vec3d OrbitAxis0( c_nod,       s_nod,     
   0.0);</td><td> </td><td class="right">                           const Vec3d OrbitAxis0( c_nod,       s_nod,     
   0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c_obl
,s_obl);</td><td> </td><td class="right">                           const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c_obl
,s_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s_obl
,c_obl);</td><td> </td><td class="right">                           const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s_obl
,c_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           <span class="delete">const Vec3d J2000Pole(matJ2000ToVsop87.multiplyW
</span>ithoutTranslation(Vec3d(0,0,1)));</td><td> </td><td class="rblock">                           <span class="insert">                       const Vec3d J2000Pole(Ste
lNavigator::matJ2000ToVsop87.multiplyW</span>ithoutTranslation(Vec3d(0,0,1)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           Vec3d J2000NodeOrigin(J2000Pole^OrbitPole);</td><td> </td><td class="right">                           Vec3d J2000NodeOrigin(J2000Pole^OrbitPole);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           J2000NodeOrigin.normalize();</td><td> </td><td class="right">                           J2000NodeOrigin.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                           parent_rot_j2000_longitude = atan2(J2000NodeOrig
in*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</td><td> </td><td class="right">                           parent_rot_j2000_longitude = atan2(J2000NodeOrig
in*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        }</td><td> </td><td class="right">                        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       CometOrbit *orb = new CometOrbit(pericenterDistance,</td><td> </td><td class="right">                       CometOrbit *orb = new CometOrbit(pericenterDistance,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        eccentricity,</td><td> </td><td class="right">                                                        eccentricity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        inclination,</td><td> </td><td class="right">                                                        inclination,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        ascending_node,</td><td> </td><td class="right">                                                        ascending_node,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        arg_of_pericenter,</td><td> </td><td class="right">                                                        arg_of_pericenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        time_at_pericenter,</td><td> </td><td class="right">                                                        time_at_pericenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 645</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 648</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="pluto_special")</td><td> </td><td class="right">               if (funcName=="pluto_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = posFuncType(get_pluto_helio_coordsv);</td><td> </td><td class="right">                       posfunc = posFuncType(get_pluto_helio_coordsv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (posfunc.empty())</td><td> </td><td class="right">               if (posfunc.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "ERROR : can't find posfunc " &lt;&lt; funcN
ame &lt;&lt; " for " &lt;&lt; englishName;</td><td> </td><td class="right">                       qWarning() &lt;&lt; "ERROR : can't find posfunc " &lt;&lt; funcN
ame &lt;&lt; " for " &lt;&lt; englishName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       exit(-1);</td><td> </td><td class="right">                       exit(-1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Create the Planet and add it to the list</td><td> </td><td class="right">               // Create the Planet and add it to the list</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               Planet* p = new <span class="delete">Planet(parent,</span></td><td> </td><td class="rblock">               Planet* p = new <span class="insert">Planet(englishName,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       englishName,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       pd.value(secname+"/halo").toBool(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/lighting").toBool
(),</td><td> </td><td class="right">                                       pd.value(secname+"/lighting").toBool
(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/radius").toDouble
()/AU,</td><td> </td><td class="right">                                       pd.value(secname+"/radius").toDouble
()/AU,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/oblateness", 0.0)
.toDouble(),</td><td> </td><td class="right">                                       pd.value(secname+"/oblateness", 0.0)
.toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       StelUtils::strToVec3f(pd.value(secna
me+"/color").toString()),</td><td> </td><td class="right">                                       StelUtils::strToVec3f(pd.value(secna
me+"/color").toString()),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/albedo").toDouble
(),</td><td> </td><td class="right">                                       pd.value(secname+"/albedo").toDouble
(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/tex_map").toStrin
g(),</td><td> </td><td class="right">                                       pd.value(secname+"/tex_map").toStrin
g(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/tex_halo").toStri
ng(),</td><td> </td><td class="right">                                       pd.value(secname+"/tex_halo").toStri
ng(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       posfunc,</td><td> </td><td class="right">                                       posfunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       osculatingFunc,</td><td> </td><td class="right">                                       osculatingFunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       closeOrbit,</td><td> </td><td class="right">                                       closeOrbit,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/hidden", 0).toBoo
l(),</td><td> </td><td class="right">                                       pd.value(secname+"/hidden", 0).toBoo
l(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/atmosphere", fals
e).toBool());</td><td> </td><td class="right">                                       pd.value(secname+"/atmosphere", fals
e).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">               <span class="insert">if (parent!=NULL)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       p-&gt;setParent(parent);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="earth") earth = p;</td><td> </td><td class="right">               if (secname=="earth") earth = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="sun") sun = p;</td><td> </td><td class="right">               if (secname=="sun") sun = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="moon") moon = p;</td><td> </td><td class="right">               if (secname=="moon") moon = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double rotObliquity = pd.value(secname+"/rot_obliquity",0.).
toDouble()*(M_PI/180.0);</td><td> </td><td class="right">               double rotObliquity = pd.value(secname+"/rot_obliquity",0.).
toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double rotAscNode = pd.value(secname+"/rot_equator_ascending
_node",0.).toDouble()*(M_PI/180.0);</td><td> </td><td class="right">               double rotAscNode = pd.value(secname+"/rot_equator_ascending
_node",0.).toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Use more common planet North pole data if available</td><td> </td><td class="right">               // Use more common planet North pole data if available</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // NB: N pole as defined by IAU (NOT right hand rotation rul
e)</td><td> </td><td class="right">               // NB: N pole as defined by IAU (NOT right hand rotation rul
e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // NB: J2000 epoch</td><td> </td><td class="right">               // NB: J2000 epoch</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double J2000NPoleRA = pd.value(secname+"/rot_pole_ra", 0.).t
oDouble()*M_PI/180.;</td><td> </td><td class="right">               double J2000NPoleRA = pd.value(secname+"/rot_pole_ra", 0.).t
oDouble()*M_PI/180.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double J2000NPoleDE = pd.value(secname+"/rot_pole_de", 0.).t
oDouble()*M_PI/180.;</td><td> </td><td class="right">               double J2000NPoleDE = pd.value(secname+"/rot_pole_de", 0.).t
oDouble()*M_PI/180.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if(J2000NPoleRA || J2000NPoleDE) {</td><td> </td><td class="rblock">               if(J2000NPoleRA || J2000NPoleDE)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">// qDebug() &lt;&lt; "Using north pole data for " &lt;&lt; engli</span></td><td> </td><td class="rblock">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">shName &lt;&lt; endl;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d J2000NPole;</td><td> </td><td class="right">                       Vec3d J2000NPole;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelUtils::spheToRect(J2000NPoleRA,J2000NPoleDE,J200
0NPole);</td><td> </td><td class="right">                       StelUtils::spheToRect(J2000NPoleRA,J2000NPoleDE,J200
0NPole);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       Vec3d vsop87Pole(<span class="delete">matJ2000ToVsop87.multiplyWithoutTra
</span>nslation(J2000NPole));</td><td> </td><td class="rblock">                       Vec3d vsop87Pole(<span class="insert">StelNavigator::matJ2000ToVsop87.mul
tiplyWithoutTra</span>nslation(J2000NPole));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double ra, de;</td><td> </td><td class="right">                       double ra, de;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelUtils::rectToSphe(&amp;ra, &amp;de, vsop87Pole);</td><td> </td><td class="right">                       StelUtils::rectToSphe(&amp;ra, &amp;de, vsop87Pole);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotObliquity = (M_PI_2 - de);</td><td> </td><td class="right">                       rotObliquity = (M_PI_2 - de);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotAscNode = (ra + M_PI_2);</td><td> </td><td class="right">                       rotAscNode = (ra + M_PI_2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // qDebug() &lt;&lt; "\tCalculated rotational obliquity: "
 &lt;&lt; rotObliquity*180./M_PI &lt;&lt; endl;</td><td> </td><td class="right">                       // qDebug() &lt;&lt; "\tCalculated rotational obliquity: "
 &lt;&lt; rotObliquity*180./M_PI &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // qDebug() &lt;&lt; "\tCalculated rotational ascending no
de: " &lt;&lt; rotAscNode*180./M_PI &lt;&lt; endl;</td><td> </td><td class="right">                       // qDebug() &lt;&lt; "\tCalculated rotational ascending no
de: " &lt;&lt; rotAscNode*180./M_PI &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               p-&gt;setRotationElements(</td><td> </td><td class="right">               p-&gt;setRotationElements(</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   pd.value(secname+"/rot_periode", pd.value(secname+"/orbi
t_Period", 24.).toDouble()).toDouble()/24.,</td><td> </td><td class="right">                   pd.value(secname+"/rot_periode", pd.value(secname+"/orbi
t_Period", 24.).toDouble()).toDouble()/24.,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   pd.value(secname+"/rot_rotation_offset",0.).toDouble(),</td><td> </td><td class="right">                   pd.value(secname+"/rot_rotation_offset",0.).toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   pd.value(secname+"/rot_epoch", J2000).toDouble(),</td><td> </td><td class="right">                   pd.value(secname+"/rot_epoch", J2000).toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   rotObliquity,</td><td> </td><td class="right">                   rotObliquity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   rotAscNode,</td><td> </td><td class="right">                   rotAscNode,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   pd.value(secname+"/rot_precession_rate",0.).toDouble()*M
_PI/(180*36525),</td><td> </td><td class="right">                   pd.value(secname+"/rot_precession_rate",0.).toDouble()*M
_PI/(180*36525),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   pd.value(secname+"/orbit_visualization_period",0.).toDou
ble());</td><td> </td><td class="right">                   pd.value(secname+"/orbit_visualization_period",0.).toDou
ble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 715</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 715</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Ring *r = new Ring(rMin,rMax,pd.value(secname+"/tex_
ring").toString());</td><td> </td><td class="right">                       Ring *r = new Ring(rMin,rMax,pd.value(secname+"/tex_
ring").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;setRings(r);</td><td> </td><td class="right">                       p-&gt;setRings(r);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               systemPlanets.push_back(p);</td><td> </td><td class="right">               systemPlanets.push_back(p);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               readOk++;</td><td> </td><td class="right">               readOk++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // special case: load earth shadow texture</td><td> </td><td class="right">       // special case: load earth shadow texture</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getTextureManager().setDefaultParams();</td><td> </td><td class="right">       StelApp::getInstance().getTextureManager().setDefaultParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">texEarthShadow = StelApp::getInstance().getTextureManager().createTe
</span>xture("earth-shadow.png");</td><td> </td><td class="rblock">       <span class="insert">Planet::texEarthShadow = StelApp::getInstance().getTextureManager().
createTe</span>xture("earth-shadow.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "/" &lt;&lt; totalPlanets &lt;&lt; "planet orb
its";</td><td> </td><td class="right">       qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "/" &lt;&lt; totalPlanets &lt;&lt; "planet orb
its";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Compute the position for every elements of the solar system.</td><td> </td><td class="right">// Compute the position for every elements of the solar system.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// The order is not important since the position is computed relatively to 
the mother body</td><td> </td><td class="right">// The order is not important since the position is computed relatively to 
the mother body</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::computePositions(double date, const Vec3d&amp; observerPos)</td><td> </td><td class="right">void SolarSystem::computePositions(double date, const Vec3d&amp; observerPos)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagLightTravelTime)</td><td> </td><td class="right">       if (flagLightTravelTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 774</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 774</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Draw all the elements of the solar system</td><td> </td><td class="right">// Draw all the elements of the solar system</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// We are supposed to be in heliocentric coordinate</td><td> </td><td class="right">// We are supposed to be in heliocentric coordinate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::draw(StelCore* core)</td><td> </td><td class="right">void SolarSystem::draw(StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!flagShow)</td><td> </td><td class="right">       if (!flagShow)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">Navigator*</span> nav = <span class="delete">core-&gt;getNavigation();</span></td><td> </td><td class="rblock">       <span class="insert">StelNavigator*</span> nav = <span class="insert">core-&gt;getNavigator();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Projector* prj = core-&gt;getProjection();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::setFont(&amp;planetNameFont);</td><td> </td><td class="right">       Planet::setFont(&amp;planetNameFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">// Set the light parameters taking sun as the light source</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       const float zero[4] = {0,0,0,0};</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       const float ambient[4] = {0.02,0.02,0.02,0.02};</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       const float diffuse[4] = {1,1,1,1};</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glLightfv(GL_LIGHT0,GL_AMBIENT, ambient);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glLightfv(GL_LIGHT0,GL_DIFFUSE, diffuse);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glLightfv(GL_LIGHT0,GL_SPECULAR,zero);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glMaterialfv(GL_FRONT,GL_AMBIENT,  ambient);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glMaterialfv(GL_FRONT,GL_DIFFUSE,  diffuse);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glMaterialfv(GL_FRONT,GL_EMISSION, zero);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glMaterialfv(GL_FRONT,GL_SHININESS,zero);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glMaterialfv(GL_FRONT,GL_SPECULAR, zero);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Light pos in zero (sun)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glLightfv(GL_LIGHT0,GL_POSITION,Vec4f(0.f,0.f,0.f,1.f));</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_LIGHT0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute each Planet distance to the observer</td><td> </td><td class="right">       // Compute each Planet distance to the observer</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Vec3d obsHelioPos = nav-&gt;getObserverHelioPos();</td><td> </td><td class="rblock">       Vec3d obsHelioPos = nav-&gt;getObserverHelio<span class="insert">centricEcliptic</span>Pos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector&lt;Planet*&gt;::iterator iter;</td><td> </td><td class="right">       vector&lt;Planet*&gt;::iterator iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       iter = systemPlanets.begin();</td><td> </td><td class="right">       iter = systemPlanets.begin();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while (iter != systemPlanets.end())</td><td> </td><td class="right">       while (iter != systemPlanets.end())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               (*iter)-&gt;computeDistance(obsHelioPos);</td><td> </td><td class="right">               (*iter)-&gt;computeDistance(obsHelioPos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ++iter;</td><td> </td><td class="right">               ++iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // And sort them from the furthest to the closest</td><td> </td><td class="right">       // And sort them from the furthest to the closest</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 820</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 800</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the elements</td><td> </td><td class="right">       // Draw the elements</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float maxMagLabel=core-&gt;getSkyDrawer()-&gt;getLimitMagnitude()*0.80+(la
belsAmount*1.2f)-2.f;</td><td> </td><td class="right">       float maxMagLabel=core-&gt;getSkyDrawer()-&gt;getLimitMagnitude()*0.80+(la
belsAmount*1.2f)-2.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       iter = systemPlanets.begin();</td><td> </td><td class="right">       iter = systemPlanets.begin();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while (iter != systemPlanets.end())</td><td> </td><td class="right">       while (iter != systemPlanets.end())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               (*iter)-&gt;draw(core, maxMagLabel);</td><td> </td><td class="right">               (*iter)-&gt;draw(core, maxMagLabel);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ++iter;</td><td> </td><td class="right">               ++iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glDisable(GL_LIGHT0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // special case: draw earth shadow over moon if appropriate</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // stencil buffer is set up in moon drawing above</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // This effect curently only looks right from earth viewpoint</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if (nav-&gt;getHomePlanet()-&gt;getEnglishName() == "Earth")</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               drawEarthShadow(nav, prj);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       drawPointer(core);</td><td> </td><td class="right">       drawPointer(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setStelStyle(const StelStyle&amp; style)</td><td> </td><td class="right">void SolarSystem::setStelStyle(const StelStyle&amp; style)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load colors from config file</td><td> </td><td class="right">       // Load colors from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString section = style.confSectionName;</td><td> </td><td class="right">       QString section = style.confSectionName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString defaultColor = conf-&gt;value(section+"/default_color").toStrin
g();</td><td> </td><td class="right">       QString defaultColor = conf-&gt;value(section+"/default_color").toStrin
g();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 883</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 855</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return NULL;</td><td> </td><td class="right">       return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Search if any Planet is close to position given in earth equatorial posi
tion and return the distance</td><td> </td><td class="right">// Search if any Planet is close to position given in earth equatorial posi
tion and return the distance</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelObject* SolarSystem::search(Vec3d pos, const StelCore* core) const</td><td> </td><td class="right">StelObject* SolarSystem::search(Vec3d pos, const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pos.normalize();</td><td> </td><td class="right">       pos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet * closest = NULL;</td><td> </td><td class="right">       Planet * closest = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double cos_angle_closest = 0.;</td><td> </td><td class="right">       double cos_angle_closest = 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">static </span>Vec3d equPos;</td><td> </td><td class="rblock">       Vec3d equPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</td><td> </td><td class="right">       vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while (iter != systemPlanets.end())</td><td> </td><td class="right">       while (iter != systemPlanets.end())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               equPos = (*iter)-&gt;get<span class="delete">ObsEquatorialPos(core-&gt;getNavigation())
</span>;</td><td> </td><td class="rblock">               equPos = (*iter)-&gt;get<span class="insert">EquinoxEquatorialPos(core-&gt;getNavigator
())</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               equPos.normalize();</td><td> </td><td class="right">               equPos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double cos_ang_dist = equPos[0]*pos[0] + equPos[1]*pos[1] + 
equPos[2]*pos[2];</td><td> </td><td class="right">               double cos_ang_dist = equPos[0]*pos[0] + equPos[1]*pos[1] + 
equPos[2]*pos[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (cos_ang_dist&gt;cos_angle_closest)</td><td> </td><td class="right">               if (cos_ang_dist&gt;cos_angle_closest)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       closest = *iter;</td><td> </td><td class="right">                       closest = *iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       cos_angle_closest = cos_ang_dist;</td><td> </td><td class="right">                       cos_angle_closest = cos_ang_dist;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               iter++;</td><td> </td><td class="right">               iter++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 913</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 885</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else return NULL;</td><td> </td><td class="right">       else return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Return a stl vector containing the planets located inside the limFov cir
cle around position v</td><td> </td><td class="right">// Return a stl vector containing the planets located inside the limFov cir
cle around position v</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QList&lt;StelObjectP&gt; SolarSystem::searchAround(const Vec3d&amp; vv, double limitF
ov, const StelCore* core) const</td><td> </td><td class="right">QList&lt;StelObjectP&gt; SolarSystem::searchAround(const Vec3d&amp; vv, double limitF
ov, const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;StelObjectP&gt; result;</td><td> </td><td class="right">       QList&lt;StelObjectP&gt; result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!getFlagPlanets())</td><td> </td><td class="right">       if (!getFlagPlanets())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return result;</td><td> </td><td class="right">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Vec3d v = core-&gt;getNavigat<span class="delete">ion()-&gt;j2000ToEarth</span>Equ(vv);</td><td> </td><td class="rblock">       Vec3d v = core-&gt;getNavigat<span class="insert">or()-&gt;j2000ToEquinox</span>Equ(vv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       v.normalize();</td><td> </td><td class="right">       v.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double cosLimFov = cos(limitFov * M_PI/180.);</td><td> </td><td class="right">       double cosLimFov = cos(limitFov * M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">static </span>Vec3d equPos;</td><td> </td><td class="rblock">       Vec3d equPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</td><td> </td><td class="right">       vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while (iter != systemPlanets.end())</td><td> </td><td class="right">       while (iter != systemPlanets.end())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               equPos = (*iter)-&gt;get<span class="delete">ObsEquatorialPos(core-&gt;getNavigation())
</span>;</td><td> </td><td class="rblock">               equPos = (*iter)-&gt;get<span class="insert">EquinoxEquatorialPos(core-&gt;getNavigator
())</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               equPos.normalize();</td><td> </td><td class="right">               equPos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (equPos[0]*v[0] + equPos[1]*v[1] + equPos[2]*v[2]&gt;=cosLim
Fov)</td><td> </td><td class="right">               if (equPos[0]*v[0] + equPos[1]*v[1] + equPos[2]*v[2]&gt;=cosLim
Fov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       result.push_back(*iter);</td><td> </td><td class="right">                       result.push_back(*iter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               iter++;</td><td> </td><td class="right">               iter++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Update i18 names from english names according to passed translator</td><td> </td><td class="right">// Update i18 names from english names according to passed translator</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::updateI18n()</td><td> </td><td class="right">void SolarSystem::updateI18n()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">Translator&amp; trans = StelApp::getInstance().getLocaleMgr().getSkyTran
</span>slator();</td><td> </td><td class="rblock">       <span class="insert">StelTranslator&amp; trans = StelApp::getInstance().getLocaleMgr().getSky
Tran</span>slator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector&lt;Planet*&gt;::iterator iter;</td><td> </td><td class="right">       vector&lt;Planet*&gt;::iterator iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+
+ )</td><td> </td><td class="right">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+
+ )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               (*iter)-&gt;translateName(trans);</td><td> </td><td class="right">               (*iter)-&gt;translateName(trans);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       planetNameFont = StelApp::getInstance().getFontManager().getStandard
Font(trans.getTrueLocaleName(), fontSize);</td><td> </td><td class="right">       planetNameFont = StelApp::getInstance().getFontManager().getStandard
Font(trans.getTrueLocaleName(), fontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString SolarSystem::getPlanetHashString(void)</td><td> </td><td class="right">QString SolarSystem::getPlanetHashString(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1068</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1040</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    if (obj &amp;&amp; obj-&gt;getType() == "Planet")</td><td> </td><td class="right">    if (obj &amp;&amp; obj-&gt;getType() == "Planet")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selected = obj;</td><td> </td><td class="right">       selected = obj;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    else</td><td> </td><td class="right">    else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selected = NULL;</td><td> </td><td class="right">       selected = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Undraw other objects hints, orbit, trails etc..</td><td> </td><td class="right">       // Undraw other objects hints, orbit, trails etc..</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(getFlagHints());</td><td> </td><td class="right">       setFlagHints(getFlagHints());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(getFlagOrbits());</td><td> </td><td class="right">       setFlagOrbits(getFlagOrbits());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagTrails(getFlagTrails());</td><td> </td><td class="right">       setFlagTrails(getFlagTrails());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">// draws earth shadow overlapping the moon using stencil buffer</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">// umbra and penumbra are sized separately for accuracy</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">void SolarSystem::drawEarthShadow(const Navigator * nav, Projector * prj)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d e = getEarth()-&gt;getEclipticPos();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d m = getMoon()-&gt;getEclipticPos();  // relative to earth</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d mh = getMoon()-&gt;getHeliocentricEclipticPos();  // relative to </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">sun</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       float mscale = getMoon()-&gt;getSphereScale();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // shadow location at earth + moon distance along earth vector from </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">sun</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d en = e;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       en.normalize();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d shadow = en * (e.length() + m.length());</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_BLEND);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glColor3f(1,1,1);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // find shadow radii in AU</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       double r_penumbra = shadow.length()*702378.1/AU/e.length() - 696000/</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">AU;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       double r_umbra = 6378.1/AU - m.length()*(689621.9/AU/e.length());</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // find vector orthogonal to sun-earth vector using cross product wi</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">th</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // a non-parallel vector</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d rpt = shadow^Vec3d(0,0,1);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       rpt.normalize();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d upt = rpt*r_umbra*mscale*1.02;  // point on umbra edge</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       rpt *= r_penumbra*mscale;  // point on penumbra edge</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // modify shadow location for scaled moon</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d mdist = shadow - mh;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if(mdist.length() &gt; r_penumbra + 2000/AU) return;   // not visible s</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">o don't bother drawing</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       shadow = mh + mdist*mscale;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       r_penumbra *= mscale;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //nav-&gt;switchToHeliocentric();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_STENCIL_TEST);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glStencilFunc(GL_EQUAL, 0x1, 0x1);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       prj-&gt;setCurrentFrame(Projector::FrameHelio);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // shadow radial texture</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       texEarthShadow-&gt;bind();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d r, s;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // umbra first</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glBegin(GL_TRIANGLE_FAN);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      // johannes: work-around for nasty ATI rendering bug:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">      // use y-texture coordinate of 0.5 instead of 0.0</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glTexCoord2f(0.f,0.5f);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       prj-&gt;drawVertex3v(shadow);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for (int i=0; i&lt;=100; i++)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               r = Mat4d::rotation(shadow, 2*M_PI*i/100.) * upt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               s = shadow + r;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glTexCoord2f(0.6f,0.5f);  // position in texture of umbra ed</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ge</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               prj-&gt;drawVertex3v(s);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnd();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // now penumbra</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Vec3d u, sp;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glBegin(GL_TRIANGLE_STRIP);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for (int i=0; i&lt;=100; i++)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               r = Mat4d::rotation(shadow, 2*M_PI*i/100.) * rpt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               u = Mat4d::rotation(shadow, 2*M_PI*i/100.) * upt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               s = shadow + r;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               sp = shadow + u;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glTexCoord2f(0.6f,0.5f);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               prj-&gt;drawVertex3v(sp);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glTexCoord2f(1.f,0.5f);  // position in texture of umbra edg</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               prj-&gt;drawVertex3v(s);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnd();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glDisable(GL_STENCIL_TEST);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::update(double deltaTime)</td><td> </td><td class="right">void SolarSystem::update(double deltaTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool restartTrails = false;</td><td> </td><td class="right">       bool restartTrails = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">Navigator* nav = StelApp::getInstance().getCore()-&gt;getNavigation(</span>);</td><td> </td><td class="rblock">       <span class="insert">StelNavigator* nav = StelApp::getInstance().getCore()-&gt;getNavigator(
</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Determine if home planet has changed, and restart planet trails</td><td> </td><td class="right">       // Determine if home planet has changed, and restart planet trails</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // since the data is no longer useful</td><td> </td><td class="right">       // since the data is no longer useful</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (nav-&gt;getHomePlanet() != lastHomePlanet)</td><td> </td><td class="right">       if (nav-&gt;getHomePlanet() != lastHomePlanet)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lastHomePlanet = nav-&gt;getHomePlanet();</td><td> </td><td class="right">               lastHomePlanet = nav-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               restartTrails = true;</td><td> </td><td class="right">               restartTrails = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector&lt;Planet*&gt;::iterator iter = systemPlanets.begin();</td><td> </td><td class="right">       vector&lt;Planet*&gt;::iterator iter = systemPlanets.begin();</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 35 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>160 lines changed or deleted</i></th><th><i> </i></th><th><i>38 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
