<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: typeface.cpp - typeface.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;typeface.cpp&nbsp;</th><th> </th><th>&nbsp;typeface.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 39</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 39</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - (20080221) Code formatting to meet Stellarium coding guidelines</td><td> </td><td class="right">// - (20080221) Code formatting to meet Stellarium coding guidelines</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - (20080221) Additional comments for Doxygen</td><td> </td><td class="right">// - (20080221) Additional comments for Doxygen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - (20080221) Improve comments</td><td> </td><td class="right">// - (20080221) Improve comments</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// ________________________________________________________________________
__________________________</td><td> </td><td class="right">// ________________________________________________________________________
__________________________</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;cstddef&gt;</td><td> </td><td class="right">#include &lt;cstddef&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;vector&gt;</td><td> </td><td class="right">#include &lt;vector&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;map&gt;</td><td> </td><td class="right">#include &lt;map&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;iostream&gt;</td><td> </td><td class="right">#include &lt;iostream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;fstream&gt;</td><td> </td><td class="right">#include &lt;fstream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include &lt;cassert&gt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;algorithm&gt;</td><td> </td><td class="right">#include &lt;algorithm&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QtGlobal&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QString&gt;</td><td> </td><td class="right">#include &lt;QString&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;ft2build.h&gt;</td><td> </td><td class="right">#include &lt;ft2build.h&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include FT_FREETYPE_H</td><td> </td><td class="right">#include FT_FREETYPE_H</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include FT_GLYPH_H</td><td> </td><td class="right">#include FT_GLYPH_H</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "GLee.h"</td><td> </td><td class="right">#include "GLee.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "typeface.h"</td><td> </td><td class="right">#include "typeface.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Data would be hidden inside an anonymous namespace, but msvc 6 can't han
dle it</td><td> </td><td class="right">// Data would be hidden inside an anonymous namespace, but msvc 6 can't han
dle it</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static FT_Library ftlibrary_;</td><td> </td><td class="right">static FT_Library ftlibrary_;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static bool FTinitialized=false;</td><td> </td><td class="right">static bool FTinitialized=false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Information on a cached glyph</td><td> </td><td class="right">//! Information on a cached glyph</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct CacheEntry</td><td> </td><td class="right">struct CacheEntry</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // CacheEntry() : topLeftUV_(0.f,0.f), bottomRightUV_(0.f,0.f), rend
erSize_(0,0), advance_(0.f,0.f), bitmapPosition_(0.f,0.f) {}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       size_t textureIndex_;       //!&lt; Index into the TypeFace's texture a
rray</td><td> </td><td class="right">       size_t textureIndex_;       //!&lt; Index into the TypeFace's texture a
rray</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2f topLeftUV_;           //!&lt; Texcoords for the top left corner o
f the glyph</td><td> </td><td class="right">       Vec2f topLeftUV_;           //!&lt; Texcoords for the top left corner o
f the glyph</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2f bottomRightUV_;       //!&lt; Texcoords for the bottom right corn
er of the glyph</td><td> </td><td class="right">       Vec2f bottomRightUV_;       //!&lt; Texcoords for the bottom right corn
er of the glyph</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2size_t    renderSize_;  //!&lt; The size of the glyph in pixels on 
the render target</td><td> </td><td class="right">       Vec2size_t    renderSize_;  //!&lt; The size of the glyph in pixels on 
the render target</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2f advance_;             //!&lt; The character advance for the cache
d glyph</td><td> </td><td class="right">       Vec2f advance_;             //!&lt; The character advance for the cache
d glyph</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2f bitmapPosition_;      //!&lt; The offset from the pen to the top 
left corner of the bitmap</td><td> </td><td class="right">       Vec2f bitmapPosition_;      //!&lt; The offset from the pen to the top 
left corner of the bitmap</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Information on a cache texture</td><td> </td><td class="right">//! Information on a cache texture</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct TextureInfo</td><td> </td><td class="right">struct TextureInfo</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       TextureInfo() : size_(0,0) {}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       typedef GLuint Handle;      //!&lt; typedef for a texture handle for an
 OpenGL texture</td><td> </td><td class="right">       typedef GLuint Handle;      //!&lt; typedef for a texture handle for an
 OpenGL texture</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Handle handle_;             //!&lt; The OpenGL texture handle</td><td> </td><td class="right">       Handle handle_;             //!&lt; The OpenGL texture handle</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2size_t size_;           //!&lt; The size of the texture in texels</td><td> </td><td class="right">       Vec2size_t size_;           //!&lt; The size of the texture in texels</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">typedef std::vector&lt;TextureInfo&gt;      Textures;       //!&lt; An array of text
ures</td><td> </td><td class="right">typedef std::vector&lt;TextureInfo&gt;      Textures;       //!&lt; An array of text
ures</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">typedef std::map&lt;FT_UInt, CacheEntry&gt; CharacterCache; //!&lt; The cache maps g
lyphs to cache entries</td><td> </td><td class="right">typedef std::map&lt;FT_UInt, CacheEntry&gt; CharacterCache; //!&lt; The cache maps g
lyphs to cache entries</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Implementation data for the TypeFace class</td><td> </td><td class="right">//! Implementation data for the TypeFace class</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct Data</td><td> </td><td class="right">struct Data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Constructor</td><td> </td><td class="right">       //! Constructor</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Data(size_t aPointSize, size_t aResolution) :</td><td> </td><td class="right">       Data(size_t aPointSize, size_t aResolution) :</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">pointSize_(aPointSize), resolution_(aResolution</span>) {}</td><td> </td><td class="rblock">               <span class="insert">        pointSize_(aPointSize), resolution_(aResolution), of
fset_(0, 0</span>) {}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       size_t pointSize_;              //!&lt; The size of the type face in po
ints</td><td> </td><td class="right">       size_t pointSize_;              //!&lt; The size of the type face in po
ints</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       size_t resolution_;             //!&lt; The resolution of the type face
 in dpi</td><td> </td><td class="right">       size_t resolution_;             //!&lt; The resolution of the type face
 in dpi</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       FT_Face face_;                  //!&lt; A handle to the FreeType face o
bject</td><td> </td><td class="right">       FT_Face face_;                  //!&lt; A handle to the FreeType face o
bject</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CharacterCache characterCache_; //!&lt; The glyph cache</td><td> </td><td class="right">       CharacterCache characterCache_; //!&lt; The glyph cache</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2i offset_;                  //!&lt; The top left corner of the next
 glyph to be cached</td><td> </td><td class="right">       Vec2i offset_;                  //!&lt; The top left corner of the next
 glyph to be cached</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Textures textures_;             //!&lt; The texture sizes and handles o
btained from OpenGL</td><td> </td><td class="right">       Textures textures_;             //!&lt; The texture sizes and handles o
btained from OpenGL</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool hasKerning_;               //!&lt; Set to true if the type face su
pports kerning</td><td> </td><td class="right">       bool hasKerning_;               //!&lt; Set to true if the type face su
pports kerning</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 255</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 257</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       : data_(new Data(aPointSize, aResolution))</td><td> </td><td class="right">       : data_(new Data(aPointSize, aResolution))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!StelFileMgr::exists(aFaceName))</td><td> </td><td class="right">       if (!StelFileMgr::exists(aFaceName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Error: cannot find TTF font file " &lt;&lt; aFaceNa
me;</td><td> </td><td class="right">               qWarning() &lt;&lt; "Error: cannot find TTF font file " &lt;&lt; aFaceNa
me;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (FTinitialized==false)</td><td> </td><td class="right">       if (FTinitialized==false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int res = FT_Init_FreeType(&amp;ftlibrary_);</td><td> </td><td class="right">               int res = FT_Init_FreeType(&amp;ftlibrary_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">assert</span>(res==0);</td><td> </td><td class="rblock">               <span class="insert">Q_ASSERT</span>(res==0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               res = 0;</td><td> </td><td class="right">               res = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               FTinitialized = true;</td><td> </td><td class="right">               FTinitialized = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int res = FT_New_Face(ftlibrary_, aFaceName.toLocal8Bit(), 0, &amp;data_
-&gt;face_);</td><td> </td><td class="right">       int res = FT_New_Face(ftlibrary_, aFaceName.toLocal8Bit(), 0, &amp;data_
-&gt;face_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(res == 0);</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(res == 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       res = FT_IS_SCALABLE(data_-&gt;face_);</td><td> </td><td class="right">       res = FT_IS_SCALABLE(data_-&gt;face_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(res!=0);</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(res!=0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       res = FT_IS_SFNT(data_-&gt;face_);</td><td> </td><td class="right">       res = FT_IS_SFNT(data_-&gt;face_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(res!=0);</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(res!=0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!data_-&gt;face_-&gt;charmap)</td><td> </td><td class="right">       if(!data_-&gt;face_-&gt;charmap)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               FT_Set_Charmap(data_-&gt;face_, data_-&gt;face_-&gt;charmaps[0]);</td><td> </td><td class="right">               FT_Set_Charmap(data_-&gt;face_, data_-&gt;face_-&gt;charmaps[0]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       res = FT_Set_Char_Size(data_-&gt;face_,</td><td> </td><td class="right">       res = FT_Set_Char_Size(data_-&gt;face_,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               0L,</td><td> </td><td class="right">                               0L,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               static_cast&lt;FT_F26Dot6&gt;(aPointSize &lt;&lt; 6),</td><td> </td><td class="right">                               static_cast&lt;FT_F26Dot6&gt;(aPointSize &lt;&lt; 6),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               aResolution,</td><td> </td><td class="right">                               aResolution,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               aResolution);</td><td> </td><td class="right">                               aResolution);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(res == 0);</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(res == 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       data_-&gt;hasKerning_ = (FT_HAS_KERNING(data_-&gt;face_) != 0);</td><td> </td><td class="right">       data_-&gt;hasKerning_ = (FT_HAS_KERNING(data_-&gt;face_) != 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">TypeFace::~TypeFace()</td><td> </td><td class="right">TypeFace::~TypeFace()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flushCache();</td><td> </td><td class="right">       flushCache();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       FT_Done_Face(data_-&gt;face_);</td><td> </td><td class="right">       FT_Done_Face(data_-&gt;face_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete data_;</td><td> </td><td class="right">       delete data_;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 301</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 303</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return data_-&gt;pointSize_;</td><td> </td><td class="right">       return data_-&gt;pointSize_;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TypeFace::setPointSize(size_t aPointSize)</td><td> </td><td class="right">void TypeFace::setPointSize(size_t aPointSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(data_-&gt;pointSize_ != aPointSize)</td><td> </td><td class="right">       if(data_-&gt;pointSize_ != aPointSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               data_-&gt;pointSize_ = aPointSize;</td><td> </td><td class="right">               data_-&gt;pointSize_ = aPointSize;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const FT_F26Dot6 sz = static_cast&lt;FT_F26Dot6&gt;(aPointSize &lt;&lt; 
6);</td><td> </td><td class="right">               const FT_F26Dot6 sz = static_cast&lt;FT_F26Dot6&gt;(aPointSize &lt;&lt; 
6);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int res = FT_Set_Char_Size(data_-&gt;face_, sz, sz, data_-&gt;reso
lution_, data_-&gt;resolution_);</td><td> </td><td class="right">               int res = FT_Set_Char_Size(data_-&gt;face_, sz, sz, data_-&gt;reso
lution_, data_-&gt;resolution_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">assert</span>(res == 0);</td><td> </td><td class="rblock">               <span class="insert">Q_ASSERT</span>(res == 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               res = 0;</td><td> </td><td class="right">               res = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               FT_Set_Char_Size(data_-&gt;face_, sz, sz, data_-&gt;resolution_, d
ata_-&gt;resolution_);</td><td> </td><td class="right">               FT_Set_Char_Size(data_-&gt;face_, sz, sz, data_-&gt;resolution_, d
ata_-&gt;resolution_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flushCache();</td><td> </td><td class="right">               flushCache();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">size_t TypeFace::resolution() const</td><td> </td><td class="right">size_t TypeFace::resolution() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return data_-&gt;resolution_;</td><td> </td><td class="right">       return data_-&gt;resolution_;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 376</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 378</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       renderGlyphs(aString);</td><td> </td><td class="right">       renderGlyphs(aString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glPopMatrix();</td><td> </td><td class="right">       glPopMatrix();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glPopAttrib();</td><td> </td><td class="right">       glPopAttrib();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">float TypeFace::width(const QString&amp; aString)</td><td> </td><td class="right">float TypeFace::width(const QString&amp; aString)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float ret = 0;</td><td> </td><td class="right">       float ret = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       size_t leftChar = 0;</td><td> </td><td class="right">       size_t leftChar = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for<span class="delete">(int pos=0; pos&lt;aString.size(); pos++</span>)</td><td> </td><td class="rblock">       for<span class="insert"> (int pos=0; pos&lt;aString.size(); ++pos</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               size_t rightChar = FT_Get_Char_Index(data_-&gt;face_, aString.a
t(pos).unicode());</td><td> </td><td class="right">               size_t rightChar = FT_Get_Char_Index(data_-&gt;face_, aString.a
t(pos).unicode());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ret += kerning(leftChar, rightChar)[0];</td><td> </td><td class="right">               ret += kerning(leftChar, rightChar)[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ret += cachedGlyph(rightChar).advance_[0];</td><td> </td><td class="right">               ret += cachedGlyph(rightChar).advance_[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               leftChar = rightChar;</td><td> </td><td class="right">               leftChar = rightChar;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return ret;</td><td> </td><td class="right">       return ret;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int TypeFace::hitCharacterIndex(const QString&amp; aString, float anOffset)</td><td> </td><td class="right">int TypeFace::hitCharacterIndex(const QString&amp; aString, float anOffset)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 413</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 415</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               found = true;</td><td> </td><td class="right">                               found = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       leftChar = rightChar;</td><td> </td><td class="right">                       leftChar = rightChar;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oldOffset = newOffset;</td><td> </td><td class="right">                       oldOffset = newOffset;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ++characterIndex;</td><td> </td><td class="right">                       ++characterIndex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if(!found)</span></td><td> </td><td class="rblock">       <span class="insert">if (!found)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               characterIndex =</span> -1;</td><td> </td><td class="rblock"><span class="insert">               return</span> -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return characterIndex;</td><td> </td><td class="right">       return characterIndex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TypeFace::addCacheEntry(FT_GlyphRec_* aGlyph,</td><td> </td><td class="right">void TypeFace::addCacheEntry(FT_GlyphRec_* aGlyph,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                             FT_BitmapGlyphRec_* aBitmapGlyph,</td><td> </td><td class="right">                             FT_BitmapGlyphRec_* aBitmapGlyph,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                             size_t aGlyphIndex,</td><td> </td><td class="right">                             size_t aGlyphIndex,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                             const Vec2size_t&amp; aGlyphSize)</td><td> </td><td class="right">                             const Vec2size_t&amp; aGlyphSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const TextureInfo&amp; textureInfo = *(data_-&gt;textures_.rbegin());</td><td> </td><td class="right">       const TextureInfo&amp; textureInfo = *(data_-&gt;textures_.rbegin());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 493</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 495</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TypeFace::cacheGlyph(size_t aGlyphIndex)</td><td> </td><td class="right">void TypeFace::cacheGlyph(size_t aGlyphIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ensureTextureIsAvailable();</td><td> </td><td class="right">       ensureTextureIsAvailable();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // 20060728 Modified to not load bitmap glyps - Stellarium patch 151
9491</td><td> </td><td class="right">       // 20060728 Modified to not load bitmap glyps - Stellarium patch 151
9491</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const FT_Error loadError = FT_Load_Glyph(data_-&gt;face_,</td><td> </td><td class="right">       const FT_Error loadError = FT_Load_Glyph(data_-&gt;face_,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                aGlyphIndex,</td><td> </td><td class="right">                                                aGlyphIndex,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                FT_LOAD_NO_HINTING | FT_LOA
D_NO_BITMAP);</td><td> </td><td class="right">                                                FT_LOAD_NO_HINTING | FT_LOA
D_NO_BITMAP);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(loadError == 0);</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(loadError == 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(loadError == 0)</td><td> </td><td class="right">       if(loadError == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               FT_Glyph glyph;</td><td> </td><td class="right">               FT_Glyph glyph;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const FT_Error getError = FT_Get_Glyph( data_-&gt;face_-&gt;glyph,
 &amp;glyph);</td><td> </td><td class="right">               const FT_Error getError = FT_Get_Glyph( data_-&gt;face_-&gt;glyph,
 &amp;glyph);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(getError == 0)</td><td> </td><td class="right">               if(getError == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const FT_Error bitmapError = FT_Glyph_To_Bitmap(&amp;gly
ph,</td><td> </td><td class="right">                       const FT_Error bitmapError = FT_Glyph_To_Bitmap(&amp;gly
ph,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                       FT_R
ENDER_MODE_NORMAL,</td><td> </td><td class="right">                                                                       FT_R
ENDER_MODE_NORMAL,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                       0, 1
);</td><td> </td><td class="right">                                                                       0, 1
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 532</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 534</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">CacheEntry&amp; TypeFace::cachedGlyph(size_t aGlyphIndex)</td><td> </td><td class="right">CacheEntry&amp; TypeFace::cachedGlyph(size_t aGlyphIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CharacterCache::iterator cacheIterator = data_-&gt;characterCache_.find
(aGlyphIndex);</td><td> </td><td class="right">       CharacterCache::iterator cacheIterator = data_-&gt;characterCache_.find
(aGlyphIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(cacheIterator == data_-&gt;characterCache_.end())</td><td> </td><td class="right">       if(cacheIterator == data_-&gt;characterCache_.end())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               cacheGlyph(aGlyphIndex);</td><td> </td><td class="right">               cacheGlyph(aGlyphIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               cacheIterator = data_-&gt;characterCache_.find(aGlyphIndex);</td><td> </td><td class="right">               cacheIterator = data_-&gt;characterCache_.find(aGlyphIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">assert</span>(cacheIterator != data_-&gt;characterCache_.end());</td><td> </td><td class="rblock">               <span class="insert">Q_ASSERT</span>(cacheIterator != data_-&gt;characterCache_.end());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return cacheIterator-&gt;second;</td><td> </td><td class="right">       return cacheIterator-&gt;second;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec2f TypeFace::renderGlyph(size_t aGlyphIndex, const Vec2f&amp; aPosition)</td><td> </td><td class="right">Vec2f TypeFace::renderGlyph(size_t aGlyphIndex, const Vec2f&amp; aPosition)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CacheEntry&amp; entry = cachedGlyph(aGlyphIndex);</td><td> </td><td class="right">       CacheEntry&amp; entry = cachedGlyph(aGlyphIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bindTexture(entry);</td><td> </td><td class="right">       bindTexture(entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 571</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 573</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glTexCoord2f( topLeftUV[0], bottomRightUV[1] );</td><td> </td><td class="right">               glTexCoord2f( topLeftUV[0], bottomRightUV[1] );</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glVertex2f( position[0], position[1] + glyphHeight );</td><td> </td><td class="right">               glVertex2f( position[0], position[1] + glyphHeight );</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnd();</td><td> </td><td class="right">       glEnd();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return entry.advance_;</td><td> </td><td class="right">       return entry.advance_;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec2f TypeFace::kerning(size_t leftGlyphIndex, size_t rightGlyphIndex) cons
t</td><td> </td><td class="right">Vec2f TypeFace::kerning(size_t leftGlyphIndex, size_t rightGlyphIndex) cons
t</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Vec2f <span class="delete">ret;</span></td><td> </td><td class="rblock">       Vec2f <span class="insert">ret(0.f, 0.f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if(data_-&gt;hasKerning_</span> &amp;&amp; (leftGlyphIndex &gt; 0) &amp;&amp; (rightGlyphIndex &gt; </td><td> </td><td class="rblock"><span class="insert">       if (data_-&gt;hasKerning_</span> &amp;&amp; (leftGlyphIndex &gt; 0) &amp;&amp; (rightGlyphIndex &gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">0))</td><td> </td><td class="rblock"> 0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               FT_Vector kerningVector;</td><td> </td><td class="right">               FT_Vector kerningVector;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               FT_Error ftError = FT_Get_Kerning(data_-&gt;face_, leftGlyphInd
ex,</td><td> </td><td class="right">               FT_Error ftError = FT_Get_Kerning(data_-&gt;face_, leftGlyphInd
ex,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                 rightGlyphIndex, FT_KERNIN
G_DEFAULT,</td><td> </td><td class="right">                                                 rightGlyphIndex, FT_KERNIN
G_DEFAULT,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                 &amp;kerningVector);</td><td> </td><td class="right">                                                 &amp;kerningVector);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if(!ftError)</td><td> </td><td class="rblock">               if<span class="insert"> </span>(!ftError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">ret = Vec2f(static_cast&lt;float&gt;(kerningVector.x),</span></td><td> </td><td class="rblock">                       <span class="insert">ret.set(static_cast&lt;float&gt;(kerningVector.x)* OneOver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                   static_cast&lt;float&gt;(kerningVector.y)) * O</span></td><td> </td><td class="rblock"><span class="insert">64, static_cast&lt;float&gt;(kerningVector.y)* OneOver64);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">neOver64;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return ret;</td><td> </td><td class="right">       return ret;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TypeFace::bindTexture(const CacheEntry&amp; aCacheEntry) const</td><td> </td><td class="right">void TypeFace::bindTexture(const CacheEntry&amp; aCacheEntry) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">assert</span>(aCacheEntry.textureIndex_ &lt; data_-&gt;textures_.size());</td><td> </td><td class="rblock">       <span class="insert">Q_ASSERT</span>(aCacheEntry.textureIndex_ &lt; data_-&gt;textures_.size());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const TextureInfo&amp; info = data_-&gt;textures_[aCacheEntry.textureIndex_
];</td><td> </td><td class="right">       const TextureInfo&amp; info = data_-&gt;textures_[aCacheEntry.textureIndex_
];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GLint currentTextureID = -1;</td><td> </td><td class="right">       GLint currentTextureID = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glGetIntegerv(GL_TEXTURE_2D_BINDING_EXT, &amp;currentTextureID);</td><td> </td><td class="right">       glGetIntegerv(GL_TEXTURE_2D_BINDING_EXT, &amp;currentTextureID);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(static_cast&lt;GLuint&gt;(currentTextureID) != info.handle_)</td><td> </td><td class="right">       if(static_cast&lt;GLuint&gt;(currentTextureID) != info.handle_)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glBindTexture(GL_TEXTURE_2D, info.handle_);</td><td> </td><td class="right">               glBindTexture(GL_TEXTURE_2D, info.handle_);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void TypeFace::renderGlyphs(const QString&amp; aString<span class="delete">, bool useColorSwitch</span>)</td><td> </td><td class="rblock">void TypeFace::renderGlyphs(const QString&amp; aString)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2f vPos(0.0f, 0.0f);</td><td> </td><td class="right">       Vec2f vPos(0.0f, 0.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       size_t leftChar = 0;</td><td> </td><td class="right">       size_t leftChar = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for<span class="delete">(int pos=0; pos&lt;aString.size(); pos++</span>)</td><td> </td><td class="rblock">       for<span class="insert"> (int pos=0; pos&lt;aString.size(); ++pos</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if (useColorSwitch)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       // Manage color highlight here</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if(aString.at(pos)==L'\21')</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glColor3f(0.5,1,0.5);  // normal</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               ++pos;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               continue;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if(aString.at(pos)==L'\22')</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glColor3f(1,1,1);    // hilight</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               ++pos;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               continue;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               size_t rightChar = FT_Get_Char_Index(data_-&gt;face_, aString.a
t(pos).unicode());</td><td> </td><td class="right">               size_t rightChar = FT_Get_Char_Index(data_-&gt;face_, aString.a
t(pos).unicode());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               vPos += kerning(leftChar, rightChar);</td><td> </td><td class="right">               vPos += kerning(leftChar, rightChar);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               vPos += renderGlyph(rightChar, vPos);</td><td> </td><td class="right">               vPos += renderGlyph(rightChar, vPos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               leftChar = rightChar;</td><td> </td><td class="right">               leftChar = rightChar;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 22 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>39 lines changed or deleted</i></th><th><i> </i></th><th><i>24 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
