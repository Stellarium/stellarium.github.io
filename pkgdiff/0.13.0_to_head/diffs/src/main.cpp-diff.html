<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: main.cpp - main.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;main.cpp&nbsp;</th><th> </th><th>&nbsp;main.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 28</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 28</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 51 Franklin Street, Suite 500, Boston, MA  02110-1335,
 USA.</td><td> </td><td class="right"> * Foundation, Inc., 51 Franklin Street, Suite 500, Boston, MA  02110-1335,
 USA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMainView.hpp"</td><td> </td><td class="right">#include "StelMainView.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLogger.hpp"</td><td> </td><td class="right">#include "StelLogger.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "CLIProcessor.hpp"</td><td> </td><td class="right">#include "CLIProcessor.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelIniParser.hpp"</td><td> </td><td class="right">#include "StelIniParser.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#ifndef DISABLE_SCRIPTING</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelScriptOutput.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#endif</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifndef USE_QUICKVIEW</td><td> </td><td class="right">#ifndef USE_QUICKVIEW</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;QApplication&gt;</td><td> </td><td class="right">       #include &lt;QApplication&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;QMessageBox&gt;</td><td> </td><td class="right">       #include &lt;QMessageBox&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;QStyleFactory&gt;</td><td> </td><td class="right">       #include &lt;QStyleFactory&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;QGuiApplication&gt;</td><td> </td><td class="right">       #include &lt;QGuiApplication&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 144</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 147</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        argv = newArgv;</td><td> </td><td class="right">        argv = newArgv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QCoreApplication::setApplicationName("stellarium");</td><td> </td><td class="right">       QCoreApplication::setApplicationName("stellarium");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QCoreApplication::setApplicationVersion(StelUtils::getApplicationVer
sion());</td><td> </td><td class="right">       QCoreApplication::setApplicationVersion(StelUtils::getApplicationVer
sion());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QCoreApplication::setOrganizationDomain("stellarium.org");</td><td> </td><td class="right">       QCoreApplication::setOrganizationDomain("stellarium.org");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QCoreApplication::setOrganizationName("stellarium");</td><td> </td><td class="right">       QCoreApplication::setOrganizationName("stellarium");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // LP:1335611: Avoid troubles with search of the paths of the plugin
s (deployments troubles) --AW</td><td> </td><td class="right">       // LP:1335611: Avoid troubles with search of the paths of the plugin
s (deployments troubles) --AW</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       #if QT_VERSION<span class="delete">=</span>=QT_VERSION_CHECK(5, 3, 1)</td><td> </td><td class="rblock">       #if QT_VERSION<span class="insert">&gt;</span>=QT_VERSION_CHECK(5, 3, 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QCoreApplication::addLibraryPath(".");</td><td> </td><td class="right">       QCoreApplication::addLibraryPath(".");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #endif</td><td> </td><td class="right">       #endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QGuiApplication::setDesktopSettingsAware(false);</td><td> </td><td class="right">       QGuiApplication::setDesktopSettingsAware(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifndef USE_QUICKVIEW</td><td> </td><td class="right">#ifndef USE_QUICKVIEW</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QApplication::setStyle(QStyleFactory::create("Fusion"));</td><td> </td><td class="right">       QApplication::setStyle(QStyleFactory::create("Fusion"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The QApplication MUST be created before the StelFileMgr is initia
lized.</td><td> </td><td class="right">       // The QApplication MUST be created before the StelFileMgr is initia
lized.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QApplication app(argc, argv);</td><td> </td><td class="right">       QApplication app(argc, argv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 291</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 294</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Config file " &lt;&lt; QDir::toNativeSeparators(confi
gFileFullPath) &lt;&lt; " does not exist. Copying the default file.";</td><td> </td><td class="right">               qDebug() &lt;&lt; "Config file " &lt;&lt; QDir::toNativeSeparators(confi
gFileFullPath) &lt;&lt; " does not exist. Copying the default file.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               copyDefaultConfigFile(configFileFullPath);</td><td> </td><td class="right">               copyDefaultConfigFile(configFileFullPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               confSettings = new QSettings(configFileFullPath, StelIniForm
at);</td><td> </td><td class="right">               confSettings = new QSettings(configFileFullPath, StelIniForm
at);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(confSettings);</td><td> </td><td class="right">       Q_ASSERT(confSettings);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Config file is: " &lt;&lt; QDir::toNativeSeparators(configFil
eFullPath);</td><td> </td><td class="right">       qDebug() &lt;&lt; "Config file is: " &lt;&lt; QDir::toNativeSeparators(configFil
eFullPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">#ifndef DISABLE_SCRIPTING</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString outputFile = StelFileMgr::getUserDir()+"/output.txt";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (confSettings-&gt;value("main/use_separate_output_file", false).toBo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ol())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               outputFile = StelFileMgr::getUserDir()+"/output-"+QDateTime:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">:currentDateTime().toString("yyyyMMdd-HHmmss")+".txt";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelScriptOutput::init(outputFile);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       #endif</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Override config file values from CLI.</td><td> </td><td class="right">       // Override config file values from CLI.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CLIProcessor::parseCLIArgsPostConfig(argList, confSettings);</td><td> </td><td class="right">       CLIProcessor::parseCLIArgsPostConfig(argList, confSettings);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Support hi-dpi pixmaps</td><td> </td><td class="right">       // Support hi-dpi pixmaps</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       app.setAttribute(Qt::AA_UseHighDpiPixmaps);</td><td> </td><td class="right">       app.setAttribute(Qt::AA_UseHighDpiPixmaps);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Add the DejaVu font that we use everywhere in the program</td><td> </td><td class="right">       // Add the DejaVu font that we use everywhere in the program</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QString&amp; fName = StelFileMgr::findFile("data/DejaVuSans.ttf");</td><td> </td><td class="right">       const QString&amp; fName = StelFileMgr::findFile("data/DejaVuSans.ttf");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!fName.isEmpty())</td><td> </td><td class="right">       if (!fName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QFontDatabase::addApplicationFont(fName);</td><td> </td><td class="right">               QFontDatabase::addApplicationFont(fName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 312</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 322</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString fileFont = confSettings-&gt;value("gui/base_font_file", "").toS
tring();</td><td> </td><td class="right">       QString fileFont = confSettings-&gt;value("gui/base_font_file", "").toS
tring();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!fileFont.isEmpty())</td><td> </td><td class="right">       if (!fileFont.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString&amp; afName = StelFileMgr::findFile(QString("data/
%1").arg(fileFont));</td><td> </td><td class="right">               const QString&amp; afName = StelFileMgr::findFile(QString("data/
%1").arg(fileFont));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!afName.isEmpty() &amp;&amp; !afName.contains("file not found"))</td><td> </td><td class="right">               if (!afName.isEmpty() &amp;&amp; !afName.contains("file not found"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFontDatabase::addApplicationFont(afName);</td><td> </td><td class="right">                       QFontDatabase::addApplicationFont(afName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "ERROR while loading custom font " &lt;&lt; 
QDir::toNativeSeparators(fileFont);</td><td> </td><td class="right">                       qWarning() &lt;&lt; "ERROR while loading custom font " &lt;&lt; 
QDir::toNativeSeparators(fileFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">QString baseFont = confSettings-&gt;value("gui/base_font_name", "DejaVu</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> Sans").toString();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set the default application font and font size.</td><td> </td><td class="right">       // Set the default application font and font size.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Note that style sheet will possibly override this setting.</td><td> </td><td class="right">       // Note that style sheet will possibly override this setting.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef Q_OS_WIN</td><td> </td><td class="right">#ifdef Q_OS_WIN</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// Let's try avoid ugly font rendering on Windows.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // Details: https://sourceforge.net/p/stellarium/discussion/278769/t</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">hread/810a1e5c/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString baseFont = confSettings-&gt;value("gui/base_font_name", "Verdan</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">a").toString();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFont tmpFont(baseFont);</td><td> </td><td class="right">       QFont tmpFont(baseFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       tmpFont.setStyleHint(QFont::AnyStyle, QFont::OpenGLCompatible);</td><td> </td><td class="right">       tmpFont.setStyleHint(QFont::AnyStyle, QFont::OpenGLCompatible);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString baseFont = confSettings-&gt;value("gui/base_font_name", "DejaVu
 Sans").toString();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFont tmpFont(baseFont);</td><td> </td><td class="right">       QFont tmpFont(baseFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       tmpFont.setPixelSize(confSettings-&gt;value("gui/base_font_size", 13).t
oInt());</td><td> </td><td class="right">       tmpFont.setPixelSize(confSettings-&gt;value("gui/base_font_size", 13).t
oInt());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QGuiApplication::setFont(tmpFont);</td><td> </td><td class="right">       QGuiApplication::setFont(tmpFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Initialize translator feature</td><td> </td><td class="right">       // Initialize translator feature</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelTranslator::init(StelFileMgr::getInstallationDir() + "/data/iso6
39-1.utf8");</td><td> </td><td class="right">       StelTranslator::init(StelFileMgr::getInstallationDir() + "/data/iso6
39-1.utf8");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Use our custom translator for Qt translations as well</td><td> </td><td class="right">       // Use our custom translator for Qt translations as well</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CustomQTranslator trans;</td><td> </td><td class="right">       CustomQTranslator trans;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 344</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 356</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool appCanRun = true;</td><td> </td><td class="right">       bool appCanRun = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // some basic diagnostics</td><td> </td><td class="right">       // some basic diagnostics</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QGLFormat::hasOpenGL()){</td><td> </td><td class="right">       if (!QGLFormat::hasOpenGL()){</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Oops... This system does not support OpenGL."
;</td><td> </td><td class="right">               qWarning() &lt;&lt; "Oops... This system does not support OpenGL."
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QMessageBox::warning(0, "Stellarium", q_("This system does n
ot support OpenGL."));</td><td> </td><td class="right">               QMessageBox::warning(0, "Stellarium", q_("This system does n
ot support OpenGL."));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               appCanRun = false;</td><td> </td><td class="right">               appCanRun = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!(QGLFormat::openGLVersionFlags() &amp; QGLFormat::OpenGL_Version_2_
1) &amp;&amp; !(QGLFormat::openGLVersionFlags() &amp; QGLFormat::OpenGL_ES_Version_2_0)
) // Check supported version of OpenGL</td><td> </td><td class="right">       if (!(QGLFormat::openGLVersionFlags() &amp; QGLFormat::OpenGL_Version_2_
1) &amp;&amp; !(QGLFormat::openGLVersionFlags() &amp; QGLFormat::OpenGL_ES_Version_2_0)
) // Check supported version of OpenGL</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               // OK, minimal required version of OpenGL is 2.1 <span class="delete">(OpenGL</span> ES </td><td> </td><td class="rblock">               // OK, minimal required version of OpenGL is 2.1 <span class="insert">and OpenGL </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">is 2.0). If platform does not support this</td><td> </td><td class="rblock"><span class="insert">Shading Language is 1.20 (or OpenGL ES is 2.0 and GLSL</span> ES is 2.0).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//</span> version then say to <span class="delete">user</span> about troubles and quit from <span class="delete">app</span></td><td> </td><td class="rblock">               <span class="insert">// Recommended OpenGL 3.0 and OpenGL Shading Language 1.30 a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">lication.</span></td><td> </td><td class="rblock"><span class="insert">nd above.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //</span> If platform does not support this version then say to <span class="insert">use</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">r</span> about troubles and quit from <span class="insert">application.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               #ifdef Q_OS_WIN</td><td> </td><td class="right">               #ifdef Q_OS_WIN</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Oops... Insufficient OpenGL version. Please u
pdate drivers, graphics hardware, or use MESA (or ANGLE) version.";</td><td> </td><td class="right">               qWarning() &lt;&lt; "Oops... Insufficient OpenGL version. Please u
pdate drivers, graphics hardware, or use MESA (or ANGLE) version.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QMessageBox::warning(0, "Stellarium", q_("Insufficient OpenG
L version. Please update drivers, graphics hardware, or use MESA (or ANGLE)
 version."));</td><td> </td><td class="right">               QMessageBox::warning(0, "Stellarium", q_("Insufficient OpenG
L version. Please update drivers, graphics hardware, or use MESA (or ANGLE)
 version."));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               #else</td><td> </td><td class="right">               #else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Oops... Insufficient OpenGL version. Please u
pdate drivers, or graphics hardware.";</td><td> </td><td class="right">               qWarning() &lt;&lt; "Oops... Insufficient OpenGL version. Please u
pdate drivers, or graphics hardware.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QMessageBox::warning(0, "Stellarium", q_("Insufficient OpenG
L version. Please update drivers, or graphics hardware."));</td><td> </td><td class="right">               QMessageBox::warning(0, "Stellarium", q_("Insufficient OpenG
L version. Please update drivers, or graphics hardware."));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               #endif</td><td> </td><td class="right">               #endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               appCanRun = false;</td><td> </td><td class="right">               appCanRun = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 7 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>8 lines changed or deleted</i></th><th><i> </i></th><th><i>25 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
