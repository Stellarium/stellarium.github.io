<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: ConstellationMgr.cpp - ConstellationMgr.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;ConstellationMgr.cpp&nbsp;</th><th> </th><th>&nbsp;ConstellationMgr.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 91</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 91</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       allBoundarySegments.clear();</td><td> </td><td class="right">       allBoundarySegments.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ConstellationMgr::init()</td><td> </td><td class="right">void ConstellationMgr::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(conf);</td><td> </td><td class="right">       Q_ASSERT(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       lastLoadedSkyCulture = "dummy";</td><td> </td><td class="right">       lastLoadedSkyCulture = "dummy";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       updateSkyCulture();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fontSize = conf-&gt;value("viewing/constellation_font_size",16.).toDoub
le();</td><td> </td><td class="right">       fontSize = conf-&gt;value("viewing/constellation_font_size",16.).toDoub
le();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLines(conf-&gt;value("viewing/flag_constellation_drawing").toBoo
l());</td><td> </td><td class="right">       setFlagLines(conf-&gt;value("viewing/flag_constellation_drawing").toBoo
l());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLabels(conf-&gt;value("viewing/flag_constellation_name").toBool(
));</td><td> </td><td class="right">       setFlagLabels(conf-&gt;value("viewing/flag_constellation_name").toBool(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagBoundaries(conf-&gt;value("viewing/flag_constellation_boundaries
",false).toBool());</td><td> </td><td class="right">       setFlagBoundaries(conf-&gt;value("viewing/flag_constellation_boundaries
",false).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setArtIntensity(conf-&gt;value("viewing/constellation_art_intensity", 0
.5).toDouble());</td><td> </td><td class="right">       setArtIntensity(conf-&gt;value("viewing/constellation_art_intensity", 0
.5).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setArtFadeDuration(conf-&gt;value("viewing/constellation_art_fade_durat
ion",2.).toDouble());</td><td> </td><td class="right">       setArtFadeDuration(conf-&gt;value("viewing/constellation_art_fade_durat
ion",2.).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagArt(conf-&gt;value("viewing/flag_constellation_art").toBool());</td><td> </td><td class="right">       setFlagArt(conf-&gt;value("viewing/flag_constellation_art").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagIsolateSelected(conf-&gt;value("viewing/flag_constellation_isola
te_selected",</td><td> </td><td class="right">       setFlagIsolateSelected(conf-&gt;value("viewing/flag_constellation_isola
te_selected",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               conf-&gt;value("viewing/flag_constellation_pick
", false).toBool() ).toBool());</td><td> </td><td class="right">                               conf-&gt;value("viewing/flag_constellation_pick
", false).toBool() ).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       StelApp::getInstance().getStelObjectMgr().registerStelObjectMgr(this
);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> Reimplementation of the getCallOrder method</td><td> </td><td class="right"> Reimplementation of the getCallOrder method</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double ConstellationMgr::getCallOrder(StelModuleActionName actionName) cons
t</td><td> </td><td class="right">double ConstellationMgr::getCallOrder(StelModuleActionName actionName) cons
t</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (actionName==StelModule::ActionDraw)</td><td> </td><td class="right">       if (actionName==StelModule::ActionDraw)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return StelApp::getInstance().getModuleMgr().getModule("Grid
LinesMgr")-&gt;getCallOrder(actionName)+10;</td><td> </td><td class="right">               return StelApp::getInstance().getModuleMgr().getModule("Grid
LinesMgr")-&gt;getCallOrder(actionName)+10;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 0;</td><td> </td><td class="right">       return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void ConstellationMgr::updateSkyCulture()</td><td> </td><td class="rblock">void ConstellationMgr::updateSkyCulture(<span class="insert">const QString&amp; skyCultureDir</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       QString newSkyCulture = StelApp::getInstance().getSkyCultureMgr().ge
tCurrentSkyCultureID();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelFileMgr&amp; fileMan = StelApp::getInstance().getFileMgr();</td><td> </td><td class="right">       StelFileMgr&amp; fileMan = StelApp::getInstance().getFileMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Check if the sky culture changed since last load, if not don't lo
ad anything</td><td> </td><td class="right">       // Check if the sky culture changed since last load, if not don't lo
ad anything</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (lastLoadedSkyCulture == <span class="delete">newSkyCulture</span>)</td><td> </td><td class="rblock">       if (lastLoadedSkyCulture == <span class="insert">skyCultureDir</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Find constellation art.  If this doesn't exist, warn, but continu
e using ""</td><td> </td><td class="right">       // Find constellation art.  If this doesn't exist, warn, but continu
e using ""</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // the loadLinesAndArt function knows how to handle this (just loads
 lines).</td><td> </td><td class="right">       // the loadLinesAndArt function knows how to handle this (just loads
 lines).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString conArtFile;</td><td> </td><td class="right">       QString conArtFile;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try</td><td> </td><td class="right">       try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               conArtFile = fileMan.findFile("skycultures/"+<span class="delete">newSkyCulture</span>+"
/constellationsart.fab");</td><td> </td><td class="rblock">               conArtFile = fileMan.findFile("skycultures/"+<span class="insert">skyCultureDir</span>+"
/constellationsart.fab");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch (std::runtime_error&amp; e)</td><td> </td><td class="right">       catch (std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qWarning() &lt;&lt; "WARNING: no constellationsart.fab file found 
for sky culture " &lt;&lt; <span class="delete">newSkyCulture</span>;</td><td> </td><td class="rblock">               qWarning() &lt;&lt; "WARNING: no constellationsart.fab file found 
for sky culture " &lt;&lt; <span class="insert">skyCultureDir</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try</td><td> </td><td class="right">       try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               loadLinesAndArt(fileMan.findFile("skycultures/"+<span class="delete">newSkyCultur
e+"/constellationship.fab"), conArtFile, newSkyCulture</span>);</td><td> </td><td class="rblock">               loadLinesAndArt(fileMan.findFile("skycultures/"+<span class="insert">skyCultureDi
r+"/constellationship.fab"), conArtFile, skyCultureDir</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // load constellation names</td><td> </td><td class="right">               // load constellation names</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               loadNames(fileMan.findFile("skycultures/" + <span class="delete">newSkyCulture</span> + 
"/constellation_names.eng.fab"));</td><td> </td><td class="rblock">               loadNames(fileMan.findFile("skycultures/" + <span class="insert">skyCultureDir</span> + 
"/constellation_names.eng.fab"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Translate constellation names for the new sky culture</td><td> </td><td class="right">               // Translate constellation names for the new sky culture</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               updateI18n();</td><td> </td><td class="right">               updateI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // as constellations have changed, clear out any selection a
nd retest for match!</td><td> </td><td class="right">               // as constellations have changed, clear out any selection a
nd retest for match!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedObjectChangeCallBack(StelModule::ReplaceSelection);</td><td> </td><td class="right">               selectedObjectChangeCallBack(StelModule::ReplaceSelection);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch (std::runtime_error&amp; e)</td><td> </td><td class="right">       catch (std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "ERROR: while loading new constellation data f
or sky culture "</td><td> </td><td class="right">               qWarning() &lt;&lt; "ERROR: while loading new constellation data f
or sky culture "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; <span class="delete">newSkyCulture</span> &lt;&lt; ", reason: " &lt;&lt; e.what() &lt;&lt; endl
;</td><td> </td><td class="rblock">                       &lt;&lt; <span class="insert">skyCultureDir</span> &lt;&lt; ", reason: " &lt;&lt; e.what() &lt;&lt; endl
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TODO: do we need to have an else { clearBoundaries(); } ?</td><td> </td><td class="right">       // TODO: do we need to have an else { clearBoundaries(); } ?</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">newSkyCulture</span>=="western")</td><td> </td><td class="rblock">       if (<span class="insert">skyCultureDir</span>=="western")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               try</td><td> </td><td class="right">               try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       loadBoundaries(fileMan.findFile("data/constellations
_boundaries.dat"));</td><td> </td><td class="right">                       loadBoundaries(fileMan.findFile("data/constellations
_boundaries.dat"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               catch (std::runtime_error&amp; e)</td><td> </td><td class="right">               catch (std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "ERROR loading constellation boundarie
s file: " &lt;&lt; e.what();</td><td> </td><td class="right">                       qWarning() &lt;&lt; "ERROR loading constellation boundarie
s file: " &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       lastLoadedSkyCulture = <span class="delete">newSkyCulture</span>;</td><td> </td><td class="rblock">       lastLoadedSkyCulture = <span class="insert">skyCultureDir</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ConstellationMgr::setStelStyle(const StelStyle&amp; style)</td><td> </td><td class="right">void ConstellationMgr::setStelStyle(const StelStyle&amp; style)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load colors from config file</td><td> </td><td class="right">       // Load colors from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString defaultColor = conf-&gt;value(style.confSectionName+"/default_c
olor").toString();</td><td> </td><td class="right">       QString defaultColor = conf-&gt;value(style.confSectionName+"/default_c
olor").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLinesColor(StelUtils::strToVec3f(conf-&gt;value(style.confSectionNam
e+"/const_lines_color",    defaultColor).toString()));</td><td> </td><td class="right">       setLinesColor(StelUtils::strToVec3f(conf-&gt;value(style.confSectionNam
e+"/const_lines_color",    defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setBoundariesColor(StelUtils::strToVec3f(conf-&gt;value(style.confSecti
onName+"/const_boundary_color", "0.8,0.3,0.3").toString()));</td><td> </td><td class="right">       setBoundariesColor(StelUtils::strToVec3f(conf-&gt;value(style.confSecti
onName+"/const_boundary_color", "0.8,0.3,0.3").toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLabelsColor(StelUtils::strToVec3f(conf-&gt;value(style.confSectionNa
me+"/const_names_color",    defaultColor).toString()));</td><td> </td><td class="right">       setLabelsColor(StelUtils::strToVec3f(conf-&gt;value(style.confSectionNa
me+"/const_names_color",    defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ConstellationMgr::selectedObjectChangeCallBack(StelModuleSelectAction 
action)</td><td> </td><td class="right">void ConstellationMgr::selectedObjectChangeCallBack(StelModuleSelectAction 
action)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const QList&lt;StelObjectP&gt; newSelected = <span class="delete">StelApp::getInstance().getSte</span></td><td> </td><td class="rblock">       <span class="insert">StelObjectMgr* omgr = GETSTELMODULE(StelObjectMgr);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">lObjectMgr().getSelectedObject();</span></td><td> </td><td class="rblock"><span class="insert">       Q_ASSERT(omgr);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       const QList&lt;StelObjectP&gt; newSelected = <span class="insert">omgr-&gt;getSelectedObject();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (newSelected.empty())</td><td> </td><td class="right">       if (newSelected.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Even if do not have anything selected, KEEP constellation
 selection intact</td><td> </td><td class="right">               // Even if do not have anything selected, KEEP constellation
 selection intact</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // (allows viewing constellations without distraction from s
tar pointer animation)</td><td> </td><td class="right">               // (allows viewing constellations without distraction from s
tar pointer animation)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // setSelected(NULL);</td><td> </td><td class="right">               // setSelected(NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const QList&lt;StelObjectP&gt; newSelectedConst = <span class="delete">StelApp::getInstance().g
etStelObjectMgr().getSelectedObject(</span>"Constellation");</td><td> </td><td class="rblock">       const QList&lt;StelObjectP&gt; newSelectedConst = <span class="insert">omgr-&gt;getSelectedObject(
</span>"Constellation");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!newSelectedConst.empty())</td><td> </td><td class="right">       if (!newSelectedConst.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//             const boost::intrusive_ptr&lt;Constellation&gt; c = boost::dynamic
_pointer_cast&lt;Constellation&gt;(newSelectedConst[0]);</td><td> </td><td class="right">//             const boost::intrusive_ptr&lt;Constellation&gt; c = boost::dynamic
_pointer_cast&lt;Constellation&gt;(newSelectedConst[0]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//             <span class="delete">StelApp::getInstance().getStelObjectMgr().setSelectedObject(
c-&gt;getBrightestStarInConstellation()</span>);</td><td> </td><td class="rblock">//             <span class="insert">omgr-&gt;setSelectedObject(c-&gt;getBrightestStarInConstellation()
</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // If removing this selection</td><td> </td><td class="right">               // If removing this selection</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(action == StelModule::RemoveFromSelection) {</td><td> </td><td class="right">               if(action == StelModule::RemoveFromSelection) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       unsetSelectedConst((Constellation *)newSelectedConst
[0].get());</td><td> </td><td class="right">                       unsetSelectedConst((Constellation *)newSelectedConst
[0].get());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               } else {</td><td> </td><td class="right">               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Add constellation to selected list (do not select
 a star, just the constellation)</td><td> </td><td class="right">                       // Add constellation to selected list (do not select
 a star, just the constellation)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       setSelectedConst((Constellation *)newSelectedConst[0
].get());</td><td> </td><td class="right">                       setSelectedConst((Constellation *)newSelectedConst[0
].get());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const QList&lt;StelObjectP&gt; newSelectedStar = <span class="delete">StelApp::getInsta
nce().getStelObjectMgr().getSelected</span>Object("Star");</td><td> </td><td class="rblock">               const QList&lt;StelObjectP&gt; newSelectedStar = <span class="insert">omgr-&gt;getSelected
</span>Object("Star");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!newSelectedStar.empty())</td><td> </td><td class="right">               if (!newSelectedStar.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//                     if (!added)</td><td> </td><td class="right">//                     if (!added)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//                             setSelected(NULL);</td><td> </td><td class="right">//                             setSelected(NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       setSelected(newSelectedStar[0].get());</td><td> </td><td class="right">                       setSelected(newSelectedStar[0].get());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//                     if (!added)</td><td> </td><td class="right">//                     if (!added)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               setSelected(NULL);</td><td> </td><td class="right">                               setSelected(NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 420</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 419</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       cons-&gt;artTexture = StelApp::getInstance().getTexture
Manager().createTextureThread(texturePath);</td><td> </td><td class="right">                       cons-&gt;artTexture = StelApp::getInstance().getTexture
Manager().createTextureThread(texturePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int texSizeX, texSizeY;</td><td> </td><td class="right">                       int texSizeX, texSizeY;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (cons-&gt;artTexture==NULL || !cons-&gt;artTexture-&gt;get
Dimensions(texSizeX, texSizeY))</td><td> </td><td class="right">                       if (cons-&gt;artTexture==NULL || !cons-&gt;artTexture-&gt;get
Dimensions(texSizeX, texSizeY))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "Texture dimension not availab
le";</td><td> </td><td class="right">                               qWarning() &lt;&lt; "Texture dimension not availab
le";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       Vec3f s1 = hipStarMgr-&gt;searchHP(hp1)-&gt;getJ2000Equato</td><td> </td><td class="rblock">                       <span class="insert">const StelNavigator* nav = StelApp::getInstance().ge</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rialPos(0);</span></td><td> </td><td class="rblock"><span class="insert">tCore()-&gt;getNavigator();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       Vec3f s2 = hipStarMgr-&gt;searchHP(hp2)-&gt;getJ2000Equato</td><td> </td><td class="rblock">                       Vec3f s1 = hipStarMgr-&gt;searchHP(hp1)-&gt;getJ2000Equato</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rialPos(0);</span></td><td> </td><td class="rblock"><span class="insert">rialPos(nav);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       Vec3f s3 = hipStarMgr-&gt;searchHP(hp3)-&gt;getJ2000Equato</td><td> </td><td class="rblock">                       Vec3f s2 = hipStarMgr-&gt;searchHP(hp2)-&gt;getJ2000Equato</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rialPos(0);</span></td><td> </td><td class="rblock"><span class="insert">rialPos(nav);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       Vec3f s3 = hipStarMgr-&gt;searchHP(hp3)-&gt;getJ2000Equato</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">rialPos(nav);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // To transform from texture coordinate to 2d coordi
nate we need to find X with XA = B</td><td> </td><td class="right">                       // To transform from texture coordinate to 2d coordi
nate we need to find X with XA = B</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // A formed of 4 points in texture coordinate, B for
med with 4 points in 3d coordinate</td><td> </td><td class="right">                       // A formed of 4 points in texture coordinate, B for
med with 4 points in 3d coordinate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // We need 3 stars and the 4th point is deduced from
 the other to get an normal base</td><td> </td><td class="right">                       // We need 3 stars and the 4th point is deduced from
 the other to get an normal base</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // X = B inv(A)</td><td> </td><td class="right">                       // X = B inv(A)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3f s4 = s1 + ((s2 - s1) ^ (s3 - s1));</td><td> </td><td class="right">                       Vec3f s4 = s1 + ((s2 - s1) ^ (s3 - s1));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Mat4f B(s1[0], s1[1], s1[2], 1, s2[0], s2[1], s2[2],
 1, s3[0], s3[1], s3[2], 1, s4[0], s4[1], s4[2], 1);</td><td> </td><td class="right">                       Mat4f B(s1[0], s1[1], s1[2], 1, s2[0], s2[1], s2[2],
 1, s3[0], s3[1], s3[2], 1, s4[0], s4[1], s4[2], 1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Mat4f A(x1, texSizeY - y1, 0.f, 1.f, x2, texSizeY - 
y2, 0.f, 1.f, x3, texSizeY - y3, 0.f, 1.f, x1, texSizeY - y1, texSizeX, 1.f
);</td><td> </td><td class="right">                       Mat4f A(x1, texSizeY - y1, 0.f, 1.f, x2, texSizeY - 
y2, 0.f, 1.f, x3, texSizeY - y3, 0.f, 1.f, x1, texSizeY - y1, texSizeX, 1.f
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Mat4f X = B * A.inverse();</td><td> </td><td class="right">                       Mat4f X = B * A.inverse();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 457</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 457</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "/" &lt;&lt; totalRecords &lt;&lt; "constellat
ion art records successfully for culture" &lt;&lt; cultureName;</td><td> </td><td class="right">       qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "/" &lt;&lt; totalRecords &lt;&lt; "constellat
ion art records successfully for culture" &lt;&lt; cultureName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fic.close();</td><td> </td><td class="right">       fic.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ConstellationMgr::draw(StelCore* core)</td><td> </td><td class="right">void ConstellationMgr::draw(StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelNavigator* nav = core-&gt;getNavigator();</td><td> </td><td class="right">       StelNavigator* nav = core-&gt;getNavigator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(prj);</td><td> </td><td class="right">       StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       drawLines(<span class="delete">prj</span>);</td><td> </td><td class="rblock">       drawLines(<span class="insert">sPainter, nav</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       drawNames(sPainter);</td><td> </td><td class="right">       drawNames(sPainter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       drawArt(prj, nav);</td><td> </td><td class="right">       drawArt(prj, nav);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       drawBoundaries(prj);</td><td> </td><td class="right">       drawBoundaries(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Draw constellations art textures</td><td> </td><td class="right">// Draw constellations art textures</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ConstellationMgr::drawArt(const StelProjectorP&amp; prj, const StelNavigat
or * nav) const</td><td> </td><td class="right">void ConstellationMgr::drawArt(const StelProjectorP&amp; prj, const StelNavigat
or * nav) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glBlendFunc(GL_ONE, GL_ONE);</td><td> </td><td class="right">       glBlendFunc(GL_ONE, GL_ONE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_TEXTURE_2D);</td><td> </td><td class="right">       glEnable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 481</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 481</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector &lt; Constellation * &gt;::const_iterator iter;</td><td> </td><td class="right">       vector &lt; Constellation * &gt;::const_iterator iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (iter = asterisms.begin(); iter != asterisms.end(); ++iter)</td><td> </td><td class="right">       for (iter = asterisms.begin(); iter != asterisms.end(); ++iter)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               (*iter)-&gt;drawArtOptim(prj, nav);</td><td> </td><td class="right">               (*iter)-&gt;drawArtOptim(prj, nav);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glDisable(GL_CULL_FACE);</td><td> </td><td class="right">       glDisable(GL_CULL_FACE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Draw constellations lines</td><td> </td><td class="right">// Draw constellations lines</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void ConstellationMgr::drawLines(const StelP<span class="delete">rojectorP&amp; prj</span>) const</td><td> </td><td class="rblock">void ConstellationMgr::drawLines(const StelP<span class="insert">ainter&amp; sPainter, const StelNav
igator* nav</span>) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glDisable(GL_TEXTURE_2D);</td><td> </td><td class="right">       glDisable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glDisable(GL_BLEND);</td><td> </td><td class="right">       glDisable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_LINE_SMOOTH);</td><td> </td><td class="right">       glEnable(GL_LINE_SMOOTH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       vector &lt; Constellation * &gt;::const_iterator iter;</td><td> </td><td class="right">       vector &lt; Constellation * &gt;::const_iterator iter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (iter = asterisms.begin(); iter != asterisms.end(); ++iter)</td><td> </td><td class="right">       for (iter = asterisms.begin(); iter != asterisms.end(); ++iter)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               (*iter)-&gt;drawOptim(<span class="delete">prj</span>);</td><td> </td><td class="rblock">               (*iter)-&gt;drawOptim(<span class="insert">sPainter, nav</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glDisable(GL_LINE_SMOOTH);</td><td> </td><td class="right">       glDisable(GL_LINE_SMOOTH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Draw the names of all the constellations</td><td> </td><td class="right">// Draw the names of all the constellations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ConstellationMgr::drawNames(const StelPainter&amp; sPainter) const</td><td> </td><td class="right">void ConstellationMgr::drawNames(const StelPainter&amp; sPainter) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_BLEND);</td><td> </td><td class="right">       glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_TEXTURE_2D);</td><td> </td><td class="right">       glEnable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 20 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>26 lines changed or deleted</i></th><th><i> </i></th><th><i>26 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
