<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: TelescopeControl.cpp - TelescopeControl.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;TelescopeControl.cpp&nbsp;</th><th> </th><th>&nbsp;TelescopeControl.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno" valign="top"></td><td class="left">/*</td><td> </td><td class="right">/*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Stellarium Telescope Control Plug-in</td><td> </td><td class="right"> * Stellarium Telescope Control Plug-in</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Copyright (C) 2006 Johannes Gajdosik</td><td> </td><td class="right"> * Copyright (C) 2006 Johannes Gajdosik</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> * Copyright (C) 2009 Bogdan Marinov</td><td> </td><td class="rblock"> * Copyright (C) 2009<span class="insert">-2010</span> Bogdan Marinov</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This module was originally written by Johannes Gajdosik in 2006</td><td> </td><td class="right"> * This module was originally written by Johannes Gajdosik in 2006</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * as a core module of Stellarium. In 2009 it was significantly extended wi
th</td><td> </td><td class="right"> * as a core module of Stellarium. In 2009 it was significantly extended wi
th</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * GUI features and later split as an external plug-in module by Bogdan Mar
inov.</td><td> </td><td class="right"> * GUI features and later split as an external plug-in module by Bogdan Mar
inov.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This class used to be called TelescopeMgr before the split.</td><td> </td><td class="right"> * This class used to be called TelescopeMgr before the split.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This program is free software; you can redistribute it and/or</td><td> </td><td class="right"> * This program is free software; you can redistribute it and/or</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * modify it under the terms of the GNU General Public License</td><td> </td><td class="right"> * modify it under the terms of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * as published by the Free Software Foundation; either version 2</td><td> </td><td class="right"> * as published by the Free Software Foundation; either version 2</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 30</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 30</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td><td> </td><td class="right"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * GNU General Public License for more details.</td><td> </td><td class="right"> * GNU General Public License for more details.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * You should have received a copy of the GNU General Public License</td><td> </td><td class="right"> * You should have received a copy of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * along with this program; if not, write to the Free Software</td><td> </td><td class="right"> * along with this program; if not, write to the Free Software</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td> </td><td class="right"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "TelescopeControl.hpp"</td><td> </td><td class="right">#include "TelescopeControl.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "TelescopeClient.hpp"</td><td> </td><td class="right">#include "TelescopeClient.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "TelescopeDialog.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "SlewDialog.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "LogFile.hpp"</td><td> </td><td class="right">#include "LogFile.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGui.hpp"</td><td> </td><td class="right">#include "StelGui.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGuiItems.hpp"</td><td> </td><td class="right">#include "StelGuiItems.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelIniParser.hpp"</td><td> </td><td class="right">#include "StelIniParser.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelMovementMgr.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObject.hpp"</td><td> </td><td class="right">#include "StelObject.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelStyle.hpp"</td><td> </td><td class="right">#include "StelStyle.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTextureMgr.hpp"</td><td> </td><td class="right">#include "StelTextureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QAction&gt;</td><td> </td><td class="right">#include &lt;QAction&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDateTime&gt;</td><td> </td><td class="right">#include &lt;QDateTime&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDir&gt;</td><td> </td><td class="right">#include &lt;QDir&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 86</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 89</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return info;</td><td> </td><td class="right">       return info;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Q_EXPORT_PLUGIN2(TelescopeControl, TelescopeControlStelPluginInterface)</td><td> </td><td class="right">Q_EXPORT_PLUGIN2(TelescopeControl, TelescopeControlStelPluginInterface)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Constructor and destructor</td><td> </td><td class="right">// Constructor and destructor</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">TelescopeControl::TelescopeControl()</td><td> </td><td class="right">TelescopeControl::TelescopeControl()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("TelescopeControl");</td><td> </td><td class="right">       setObjectName("TelescopeControl");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">connectionTypeNames.insert(ConnectionVirtual, "virtual");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       connectionTypeNames.insert(ConnectionInternal, "internal");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       connectionTypeNames.insert(ConnectionLocal, "local");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       connectionTypeNames.insert(ConnectionRemote, "remote");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">TelescopeControl::~TelescopeControl()</td><td> </td><td class="right">TelescopeControl::~TelescopeControl()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Methods inherited from the StelModule class</td><td> </td><td class="right">// Methods inherited from the StelModule class</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// init(), update(), draw(), setStelStyle(), getCallOrder()</td><td> </td><td class="right">// init(), update(), draw(), setStelStyle(), getCallOrder()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 119</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 127</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelFileMgr::mkDir(moduleDirectoryPath);</td><td> </td><td class="right">                       StelFileMgr::mkDir(moduleDirectoryPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Load the device models</td><td> </td><td class="right">               //Load the device models</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               loadDeviceModels();</td><td> </td><td class="right">               loadDeviceModels();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(deviceModels.isEmpty())</td><td> </td><td class="right">               if(deviceModels.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "TelescopeControl: No device model des
criptions have been loaded. Stellarium will not be able to control a telesc
ope on its own, but it is still possible to do it through an external appli
cation or to connect to a remote host.";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "TelescopeControl: No device model des
criptions have been loaded. Stellarium will not be able to control a telesc
ope on its own, but it is still possible to do it through an external appli
cation or to connect to a remote host.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Unload Stellarium's internal telescope control module</td><td> </td><td class="right">               //Unload Stellarium's internal telescope control module</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">StelApp::getInstance().getModuleMgr().unloadModule("Telescop</span></td><td> </td><td class="rblock">               <span class="insert">//(not necessary since revision 6308; remains as an example)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eMgr", false);//If</span> the alsoDelete parameter is set to true, Stellarium <span class="delete">cras</span></td><td> </td><td class="rblock"><span class="insert">               //StelApp::getInstance().getModuleMgr().unloadModule("Telesc</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">hes</span> with a segmentation fault when an object is selected. TODO: Find out <span class="delete">wh</span></td><td> </td><td class="rblock"><span class="insert">opeMgr", false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">y.</span></td><td> </td><td class="rblock"><span class="insert">               /*If</span> the alsoDelete parameter is set to true, Stellarium <span class="insert">cra</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               //unloadModule()</span> didn't work prior to revision 5058: the mod</td><td> </td><td class="rblock"><span class="insert">shes</span> with a</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ule unloaded <span class="delete">OK,</span> but Stellarium crashed later with a segmentation fault,</td><td> </td><td class="rblock">                 segmentation fault when an object is selected. TODO: Find </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//because</span> LandscapeMgr::getCallOrder() depended on the modul</td><td> </td><td class="rblock">out <span class="insert">why.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">e's existence to return a <span class="delete">value.</span></td><td> </td><td class="rblock"><span class="insert">                 unloadModule()</span> didn't work prior to revision 5058: the mod</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">ule unloaded</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                 <span class="insert">normally,</span> but Stellarium crashed later with a segmentation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"> fault,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                 <span class="insert">because</span> LandscapeMgr::getCallOrder() depended on the modul</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">e's</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                 existence to return a <span class="insert">value.*/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Load and start all telescope clients</td><td> </td><td class="right">               //Load and start all telescope clients</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               loadTelescopes();</td><td> </td><td class="right">               loadTelescopes();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Load OpenGL textures</td><td> </td><td class="right">               //Load OpenGL textures</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               reticleTexture = StelApp::getInstance().getTextureManager().
createTexture(":/telescopeControl/telescope_reticle.png");</td><td> </td><td class="right">               reticleTexture = StelApp::getInstance().getTextureManager().
createTexture(":/telescopeControl/telescope_reticle.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               selectionTexture = StelApp::getInstance().getTextureManager(
).createTexture("pointeur2.png");</td><td> </td><td class="rblock">               selectionTexture = StelApp::getInstance().getTextureManager(
).createTexture("<span class="insert">textures/</span>pointeur2.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Load the module's custom style sheets</td><td> </td><td class="right">               //Load the module's custom style sheets</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QFile styleSheetFile;</td><td> </td><td class="right">               QFile styleSheetFile;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               styleSheetFile.setFileName(":/telescopeControl/normalStyle.c
ss");</td><td> </td><td class="right">               styleSheetFile.setFileName(":/telescopeControl/normalStyle.c
ss");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(styleSheetFile.open(QFile::ReadOnly|QFile::Text))</td><td> </td><td class="right">               if(styleSheetFile.open(QFile::ReadOnly|QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">moduleStyleSheet.insert("color", QString(styleSheetF
ile.readAll()</span>));</td><td> </td><td class="rblock">                       <span class="insert">normalStyleSheet = new QByteArray(styleSheetFile.rea
dAll(</span>));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               styleSheetFile.close();</td><td> </td><td class="right">               styleSheetFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               styleSheetFile.setFileName(":/telescopeControl/nightStyle.cs
s");</td><td> </td><td class="right">               styleSheetFile.setFileName(":/telescopeControl/nightStyle.cs
s");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(styleSheetFile.open(QFile::ReadOnly|QFile::Text))</td><td> </td><td class="right">               if(styleSheetFile.open(QFile::ReadOnly|QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">moduleStyleSheet.insert("night_color", QString(style
SheetFile.readAll()</span>));</td><td> </td><td class="rblock">                       <span class="insert">nightStyleSheet = new QByteArray(styleSheetFile.read
All(</span>));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               styleSheetFile.close();</td><td> </td><td class="right">               styleSheetFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()
.getGui());</td><td> </td><td class="right">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()
.getGui());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Create telescope key bindings</td><td> </td><td class="right">               //Create telescope key bindings</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                <span class="insert">/* QAction-s with these key bindings existed in Stellarium </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">prior to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       revision 6311. Any future backports should account f</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">or that. */</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString group = N_("Telescope Control");</td><td> </td><td class="right">               QString group = N_("Telescope Control");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">#ifdef COMPATIBILITY_001003</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               //QAction-s with these key bindings already exist in Stellar</span></td><td> </td><td class="rblock">               <span class="insert">// "Slew</span> to <span class="insert">object" commands</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ium</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               gui-&gt;getGuiActions("actionMove_Telescope_To_Selection_0")-&gt;s</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">etVisible(false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               //gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_0", </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">N_("Move telescope #0</span> to <span class="delete">selected object"), "Ctrl+0", group, false, false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_1", N_
("Move telescope #1 to selected object"), "Ctrl+1", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_1", N_
("Move telescope #1 to selected object"), "Ctrl+1", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_2", N_
("Move telescope #2 to selected object"), "Ctrl+2", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_2", N_
("Move telescope #2 to selected object"), "Ctrl+2", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_3", N_
("Move telescope #3 to selected object"), "Ctrl+3", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_3", N_
("Move telescope #3 to selected object"), "Ctrl+3", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_4", N_
("Move telescope #4 to selected object"), "Ctrl+4", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_4", N_
("Move telescope #4 to selected object"), "Ctrl+4", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_5", N_
("Move telescope #5 to selected object"), "Ctrl+5", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_5", N_
("Move telescope #5 to selected object"), "Ctrl+5", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_6", N_
("Move telescope #6 to selected object"), "Ctrl+6", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_6", N_
("Move telescope #6 to selected object"), "Ctrl+6", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_7", N_
("Move telescope #7 to selected object"), "Ctrl+7", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_7", N_
("Move telescope #7 to selected object"), "Ctrl+7", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_8", N_
("Move telescope #8 to selected object"), "Ctrl+8", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_8", N_
("Move telescope #8 to selected object"), "Ctrl+8", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_9", N_
("Move telescope #9 to selected object"), "Ctrl+9", group, false, false);</td><td> </td><td class="right">               gui-&gt;addGuiActions("actionMove_Telescope_To_Selection_9", N_
("Move telescope #9 to selected object"), "Ctrl+9", group, false, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #endif //COMPATIBILITY_001003</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Select</span></td><td> </td><td class="rblock">               <span class="insert">// "Slew to the center of the screen" commands</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ion_0"), SIGNAL(triggered()), this, SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_1", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">("Move telescope #1 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_1"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">Alt+1", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_2", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_2"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">("Move telescope #2 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">Alt+2", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_3"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_3", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">("Move telescope #3 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_4"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">Alt+3", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_4", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_5"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">("Move telescope #4 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">Alt+4", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_6"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_5", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">("Move telescope #5 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_7"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">Alt+5", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_6", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_8"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">("Move telescope #6 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td> </td><td class="rblock"><span class="insert">Alt+6", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">n_9"), SIGNAL(triggered()), this, <span class="delete">SLOT(moveTelescopeToSelected()));</span></td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_7", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">("Move telescope #7 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Alt+7", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_8", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">("Move telescope #8 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Alt+8", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               gui-&gt;addGuiActions("actionSlew_Telescope_To_Direction_9", N_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">("Move telescope #9 to the point currently in the center of the screen"), "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Alt+9", group, false, false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_1"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_2"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_3"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_4"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_5"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_6"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_7"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_8"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               connect(gui-&gt;getGuiActions("actionMove_Telescope_To_Selectio</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">n_9"), SIGNAL(triggered()), this, <span class="insert">SLOT(slewTelescopeToSelectedObject()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_1"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_2"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_3"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_4"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_5"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_6"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_7"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_8"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               connect(gui-&gt;getGuiActions("actionSlew_Telescope_To_Directio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">n_9"), SIGNAL(triggered()), this, SLOT(slewTelescopeToViewDirection()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               //Create and initialize <span class="delete">the telescope management window</span></td><td> </td><td class="rblock">               //Create and initialize <span class="insert">dialog windows</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeDialog = new TelescopeDialog();</td><td> </td><td class="right">               telescopeDialog = new TelescopeDialog();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               slewDialog = new SlewDialog();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #ifdef USE_TOGGLEABLE_TELESCOPE_WINDOW</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Think of a better keyboard shortcut</td><td> </td><td class="right">               //TODO: Think of a better keyboard shortcut</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">#ifdef COMPATIBILITY_001003</span></td><td> </td><td class="rblock">               <span class="insert">gui-&gt;addGuiActions("actionShow_Slew_Window", N_("Move a tele</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               gui-&gt;addGuiActions("actionShow_Telescopes_Window", N_("Teles</span></td><td> </td><td class="rblock"><span class="insert">scope to a given set of coordinates"),</span> "Ctrl+0", group, true, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">copes window"), "Alt+0", group, true, false);</span></td><td> </td><td class="rblock">               <span class="insert">connect(gui-&gt;getGuiActions("actionShow_Slew_Window"), SIGNAL</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #else</span></td><td> </td><td class="rblock"><span class="insert">(toggled(bool)), slewDialog,</span> SLOT(setVisible(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               gui-&gt;addGuiActions("actionShow_Telescopes_Window", N_("Teles</span></td><td> </td><td class="rblock">               <span class="insert">connect(slewDialog,</span> SIGNAL(visibleChanged(bool)), <span class="insert">gui-&gt;getGu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">copes window"),</span> "Ctrl+0", group, true, false);</td><td> </td><td class="rblock"><span class="insert">iActions("actionShow_Slew_Window"),</span> SLOT(setChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">#endif //COMPATIBILITY_001003</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               connect(gui-&gt;getGuiActions("actionShow_Telescopes_Window"), </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">SIGNAL(toggled(bool)), telescopeDialog,</span> SLOT(setVisible(bool)));</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">connect(telescopeDialog,</span> SIGNAL(visibleChanged(bool)), <span class="delete">gui-&gt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">getGuiActions("actionShow_Telescopes_Window"),</span> SLOT(setChecked(bool)));</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #ifdef USE_TOOLBAR_BUTTON</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Create toolbar button</td><td> </td><td class="right">               //Create toolbar button</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pixmapHover = new <span class="delete">QPixmap(":/graphicGui/gui/glow32x32.png");</span></td><td> </td><td class="rblock">               pixmapHover =   new <span class="insert">QPixmap(":/graphicGui/glow32x32.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pixmapOnIcon = new <span class="delete">QPixmap(":/telescopeControl/bt_TelescopeC</span></td><td> </td><td class="rblock">               pixmapOnIcon =  new <span class="insert">QPixmap(":/telescopeControl/button_Slew_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ontrol_on.png");</span></td><td> </td><td class="rblock"><span class="insert">Dialog_on.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pixmapOffIcon = new <span class="delete">QPixmap(":/telescopeControl/bt_Telescope</span></td><td> </td><td class="rblock">               pixmapOffIcon = new <span class="insert">QPixmap(":/telescopeControl/button_Slew_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Control_off.png");</span></td><td> </td><td class="rblock"><span class="insert">Dialog_off.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               toolbarButton = new StelButton(NULL, *pixmapOnIcon, *pixmapO</td><td> </td><td class="rblock">               toolbarButton = new StelButton(NULL, *pixmapOnIcon, *pixmapO</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ffIcon, *pixmapHover, <span class="delete">gui-&gt;getGuiActions("actionShow_Telescopes_Window"));</span></td><td> </td><td class="rblock">ffIcon, *pixmapHover, <span class="insert">gui-&gt;getGuiActions("actionShow_Slew_Window"));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td> </td><td class="right">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">#endif //USE_TOOLBAR_BUTTON</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #endif //USE_TOGGLEABLE_TELESCOPE_WINDOW</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch (std::runtime_error &amp;e)</td><td> </td><td class="right">       catch (std::runtime_error &amp;e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "TelescopeControl::init() error: " &lt;&lt; e.what()
;</td><td> </td><td class="right">               qWarning() &lt;&lt; "TelescopeControl::init() error: " &lt;&lt; e.what()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GETSTELMODULE(StelObjectMgr)-&gt;registerStelObjectMgr(this);</td><td> </td><td class="right">       GETSTELMODULE(StelObjectMgr)-&gt;registerStelObjectMgr(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Initialize style, as it is not called at startup:</td><td> </td><td class="right">       //Initialize style, as it is not called at startup:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">setStelStyle(*StelApp::getInstance().getCurrentStelStyle());</span></td><td> </td><td class="rblock">       <span class="insert">//(necessary to initialize the reticle/label/circle colors)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setStelStyle(StelApp::getInstance().getCurrentStelStyle());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::deinit()</td><td> </td><td class="right">void TelescopeControl::deinit()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Destroy all clients first in order to avoid displaying a TCP error</td><td> </td><td class="right">       //Destroy all clients first in order to avoid displaying a TCP error</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       deleteAllTelescopes();</td><td> </td><td class="right">       deleteAllTelescopes();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QHash&lt;int, QProcess*&gt;::const_iterator iterator = telescopeServerProc
ess.constBegin();</td><td> </td><td class="right">       QHash&lt;int, QProcess*&gt;::const_iterator iterator = telescopeServerProc
ess.constBegin();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while(iterator != telescopeServerProcess.constEnd())</td><td> </td><td class="right">       while(iterator != telescopeServerProcess.constEnd())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int slotNumber = iterator.key();</td><td> </td><td class="right">               int slotNumber = iterator.key();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               #ifdef WIN32</td><td> </td><td class="rblock">               #ifdef <span class="insert">Q_OS_</span>WIN32</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeServerProcess[slotNumber]-&gt;close();</td><td> </td><td class="right">               telescopeServerProcess[slotNumber]-&gt;close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               #else</td><td> </td><td class="right">               #else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeServerProcess[slotNumber]-&gt;terminate();</td><td> </td><td class="right">               telescopeServerProcess[slotNumber]-&gt;terminate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               #endif</td><td> </td><td class="right">               #endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeServerProcess[slotNumber]-&gt;waitForFinished();</td><td> </td><td class="right">               telescopeServerProcess[slotNumber]-&gt;waitForFinished();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete telescopeServerProcess[slotNumber];</td><td> </td><td class="right">               delete telescopeServerProcess[slotNumber];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "TelescopeControl::deinit(): Server process at s
lot" &lt;&lt; slotNumber &lt;&lt; "terminated successfully.";</td><td> </td><td class="right">               qDebug() &lt;&lt; "TelescopeControl::deinit(): Server process at s
lot" &lt;&lt; slotNumber &lt;&lt; "terminated successfully.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ++iterator;</td><td> </td><td class="right">               ++iterator;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Decide if it should be saved on change</td><td> </td><td class="right">       //TODO: Decide if it should be saved on change</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Save the configuration on exit</td><td> </td><td class="right">       //Save the configuration on exit</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       saveConfiguration();</td><td> </td><td class="right">       saveConfiguration();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::update(double deltaTime)</td><td> </td><td class="right">void TelescopeControl::update(double deltaTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       labelFader.update((int)(deltaTime*1000));</td><td> </td><td class="right">       labelFader.update((int)(deltaTime*1000));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       reticleFader.update((int)(deltaTime*1000));</td><td> </td><td class="right">       reticleFader.update((int)(deltaTime*1000));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       circleFader.update((int)(deltaTime*1000));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // communicate with the telescopes:</td><td> </td><td class="right">       // communicate with the telescopes:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       communicate();</td><td> </td><td class="right">       communicate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::draw(StelCore* core)</td><td> </td><td class="right">void TelescopeControl::draw(StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelNavigator* nav = core-&gt;getNavigator();</td><td> </td><td class="right">       StelNavigator* nav = core-&gt;getNavigator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(prj);</td><td> </td><td class="right">       StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sPainter.setFont(labelFont);</td><td> </td><td class="right">       sPainter.setFont(labelFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 264</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 289</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       reticleTexture-&gt;bind();</td><td> </td><td class="right">       reticleTexture-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td> </td><td class="right">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const TelescopeClientP&amp; telescope, telescopeClients)</td><td> </td><td class="right">       foreach (const TelescopeClientP&amp; telescope, telescopeClients)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (telescope-&gt;isConnected() &amp;&amp; telescope-&gt;hasKnownPosition(
))</td><td> </td><td class="right">               if (telescope-&gt;isConnected() &amp;&amp; telescope-&gt;hasKnownPosition(
))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d XY;</td><td> </td><td class="right">                       Vec3d XY;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (prj-&gt;projectCheck(telescope-&gt;getJ2000EquatorialP
os(nav), XY))</td><td> </td><td class="right">                       if (prj-&gt;projectCheck(telescope-&gt;getJ2000EquatorialP
os(nav), XY))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //Telescope circles appear synchronously wit
h markers</td><td> </td><td class="right">                               //Telescope circles appear synchronously wit
h markers</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (<span class="delete">reti</span>cleFader.getInterstate() &gt;= 0)</td><td> </td><td class="rblock">                               if (<span class="insert">cir</span>cleFader.getInterstate() &gt;= 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       glColor4f(circleColor[0], circleColo
r[1], circleColor[2], <span class="delete">reti</span>cleFader.getInterstate());</td><td> </td><td class="rblock">                                       glColor4f(circleColor[0], circleColo
r[1], circleColor[2], <span class="insert">cir</span>cleFader.getInterstate());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       glDisable(GL_TEXTURE_2D);</td><td> </td><td class="right">                                       glDisable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       foreach (double circle, telescope-&gt;g
etOculars())</td><td> </td><td class="right">                                       foreach (double circle, telescope-&gt;g
etOculars())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               sPainter.drawCircle(XY[0], X
Y[1], 0.5 * prj-&gt;getPixelPerRadAtCenter() * (M_PI/180) * (circle));</td><td> </td><td class="right">                                               sPainter.drawCircle(XY[0], X
Y[1], 0.5 * prj-&gt;getPixelPerRadAtCenter() * (M_PI/180) * (circle));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       glEnable(GL_TEXTURE_2D);</td><td> </td><td class="right">                                       glEnable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               <span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (reticleFader.getInterstate() &gt;= 0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       glColor4f(reticleColor[0], reticleCo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lor[1], reticleColor[2], reticleFader.getInterstate());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       sPainter.drawSprite2dMode(XY[0],XY[1
],15.f);</td><td> </td><td class="right">                                       sPainter.drawSprite2dMode(XY[0],XY[1
],15.f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (labelFader.getInterstate() &gt;= 0)</td><td> </td><td class="right">                               if (labelFader.getInterstate() &gt;= 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       glColor4f(labelColor[0], labelColor[
1], labelColor[2], labelFader.getInterstate());</td><td> </td><td class="right">                                       glColor4f(labelColor[0], labelColor[
1], labelColor[2], labelFader.getInterstate());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //TODO: Different position of the la
bel if circles are shown?</td><td> </td><td class="right">                                       //TODO: Different position of the la
bel if circles are shown?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //TODO: Remove magic number (text sp
acing)</td><td> </td><td class="right">                                       //TODO: Remove magic number (text sp
acing)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       sPainter.drawText(XY[0], XY[1], tele
scope-&gt;getNameI18n(), 0, 6 + 10, -4, false);</td><td> </td><td class="right">                                       sPainter.drawText(XY[0], XY[1], tele
scope-&gt;getNameI18n(), 0, 6 + 10, -4, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //Same position as the other objects
: doesn't work, telescope label overlaps object label</td><td> </td><td class="right">                                       //Same position as the other objects
: doesn't work, telescope label overlaps object label</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //sPainter.drawText(XY[0], XY[1], sc
ope-&gt;getNameI18n(), 0, 10, 10, false);</td><td> </td><td class="right">                                       //sPainter.drawText(XY[0], XY[1], sc
ope-&gt;getNameI18n(), 0, 10, 10, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       reticleTexture-&gt;bind();</td><td> </td><td class="right">                                       reticleTexture-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(GETSTELMODULE(StelObjectMgr)-&gt;getFlagSelectedObjectPointer())</td><td> </td><td class="right">       if(GETSTELMODULE(StelObjectMgr)-&gt;getFlagSelectedObjectPointer())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               drawPointer(prj, nav, sPainter);</td><td> </td><td class="right">               drawPointer(prj, nav, sPainter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void TelescopeControl::setStelStyle(const <span class="delete">StelStyle&amp; style</span>)</td><td> </td><td class="rblock">void TelescopeControl::setStelStyle(const <span class="insert">QString&amp; section</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if<span class="delete">(style.confSectionName</span> == "night_color")</td><td> </td><td class="rblock">       if<span class="insert"> (section</span> == "night_color")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setLabelColor(labelNightColor);</td><td> </td><td class="right">               setLabelColor(labelNightColor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               setReticleColor(reticleNightColor);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setCircleColor(circleNightColor);</td><td> </td><td class="right">               setCircleColor(circleNightColor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setLabelColor(labelNormalColor);</td><td> </td><td class="right">               setLabelColor(labelNormalColor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               setReticleColor(reticleNormalColor);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setCircleColor(circleNormalColor);</td><td> </td><td class="right">               setCircleColor(circleNormalColor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">telescopeDialog-&gt;setStelStyle(style);</span></td><td> </td><td class="rblock">       <span class="insert">telescopeDialog-&gt;updateStyle();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       slewDialog-&gt;updateStyle();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double TelescopeControl::getCallOrder(StelModuleActionName actionName) cons
t</td><td> </td><td class="right">double TelescopeControl::getCallOrder(StelModuleActionName actionName) cons
t</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Remove magic number (call order offset)</td><td> </td><td class="right">       //TODO: Remove magic number (call order offset)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (actionName == StelModule::ActionDraw)</td><td> </td><td class="right">       if (actionName == StelModule::ActionDraw)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return StelApp::getInstance().getModuleMgr().getModule("Mete
orMgr")-&gt;getCallOrder(actionName) + 2.;</td><td> </td><td class="right">               return StelApp::getInstance().getModuleMgr().getModule("Mete
orMgr")-&gt;getCallOrder(actionName) + 2.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 0.;</td><td> </td><td class="right">       return 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Methods inherited from the StelObjectModule class</td><td> </td><td class="right">// Methods inherited from the StelObjectModule class</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//</td><td> </td><td class="right">//</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QList&lt;StelObjectP&gt; TelescopeControl::searchAround(const Vec3d&amp; vv, double l
imitFov, const StelCore* core) const</td><td> </td><td class="right">QList&lt;StelObjectP&gt; TelescopeControl::searchAround(const Vec3d&amp; vv, double l
imitFov, const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;StelObjectP&gt; result;</td><td> </td><td class="right">       QList&lt;StelObjectP&gt; result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!getFlagTelescopes())</td><td> </td><td class="rblock">       if (!getFlagTelescope<span class="insert">Reticle</span>s())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return result;</td><td> </td><td class="right">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d v(vv);</td><td> </td><td class="right">       Vec3d v(vv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       v.normalize();</td><td> </td><td class="right">       v.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double cosLimFov = cos(limitFov * M_PI/180.);</td><td> </td><td class="right">       double cosLimFov = cos(limitFov * M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const TelescopeClientP&amp; telescope, telescopeClients)</td><td> </td><td class="right">       foreach (const TelescopeClientP&amp; telescope, telescopeClients)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (telescope-&gt;getJ2000EquatorialPos(core-&gt;getNavigator()).d
ot(v) &gt;= cosLimFov)</td><td> </td><td class="right">               if (telescope-&gt;getJ2000EquatorialPos(core-&gt;getNavigator()).d
ot(v) &gt;= cosLimFov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       result.append(qSharedPointerCast&lt;StelObject&gt;(telesco
pe));</td><td> </td><td class="right">                       result.append(qSharedPointerCast&lt;StelObject&gt;(telesco
pe));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 384</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 416</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               result.erase(result.begin() + maxNbItem, result.end());</td><td> </td><td class="right">               result.erase(result.begin() + maxNbItem, result.end());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::configureGui(bool show)</td><td> </td><td class="right">bool TelescopeControl::configureGui(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(show)</td><td> </td><td class="right">       if(show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">#ifdef USE_TOGGLEABLE_TELESCOPE_WINDOW</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.getGui());</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               gui-&gt;getGuiActions("actionShow_Telescopes_Window")-&gt;setCheck</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ed(true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeDialog-&gt;setVisible(true);</td><td> </td><td class="right">               telescopeDialog-&gt;setVisible(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               #endif //USE_TOGGLEABLE_TELESCOPE_WINDOW</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Misc methods (from TelescopeMgr; TODO: Better categorization)</td><td> </td><td class="right">// Misc methods (from TelescopeMgr; TODO: Better categorization)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::setFontSize(int fontSize)</td><td> </td><td class="right">void TelescopeControl::setFontSize(int fontSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        labelFont.setPixelSize(fontSize);</td><td> </td><td class="right">        labelFont.setPixelSize(fontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void TelescopeControl::<span class="delete">moveTelescopeToSelected(void</span>)</td><td> </td><td class="rblock">void TelescopeControl::<span class="insert">slewTelescopeToSelectedObject(</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">StelObjectMgr* omgr = GETSTELMODULE(StelObjectMgr);</span></td><td> </td><td class="rblock">       <span class="insert">// Find out for which telescope is the command</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(omgr-&gt;getSelectedObject().isEmpty())</span></td><td> </td><td class="rblock">       if <span class="insert">(sender() == NULL)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       int slotNumber = sender()-&gt;objectName().right(1).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(sender() == NULL)</span></td><td> </td><td class="rblock">       <span class="insert">// Find out the coordinates of the target</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelObjectMgr* omgr = GETSTELMODULE(StelObjectMgr);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       if <span class="insert">(omgr-&gt;getSelectedObject().isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelObjectP selectObject = omgr-&gt;getSelectedObject().at(0);</td><td> </td><td class="right">       StelObjectP selectObject = omgr-&gt;getSelectedObject().at(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!selectObject)  // should never happen</td><td> </td><td class="right">       if (!selectObject)  // should never happen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Vec3d <span class="delete">objectPos</span> = <span class="delete">selectObject-&gt;getJ2000EquatorialPos(StelApp::getIn</span></td><td> </td><td class="rblock">       Vec3d <span class="insert">objectPosition</span> = <span class="insert">selectObject-&gt;getJ2000EquatorialPos(StelApp::</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">stance().getCore()-&gt;getNavigator());</span></td><td> </td><td class="rblock"><span class="insert">getInstance().getCore()-&gt;getNavigator());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int <span class="delete">telNum</span> = sender()-&gt;objectName().right(1).toInt();</td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">telescopeGoto(telNum, objectPos);</span></td><td> </td><td class="rblock"><span class="insert">       telescopeGoto(slotNumber, objectPosition);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void TelescopeControl::slewTelescopeToViewDirection()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // Find out for which telescope is the command</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (sender() == NULL)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       int <span class="insert">slotNumber</span> = sender()-&gt;objectName().right(1).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// Find out the coordinates of the target</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Vec3d centerPosition = GETSTELMODULE(StelMovementMgr)-&gt;getViewDirect</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ionJ2000();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       telescopeGoto(slotNumber, centerPosition);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::drawPointer(const StelProjectorP&amp; prj, const StelNav
igator * nav, StelPainter&amp; sPainter)</td><td> </td><td class="right">void TelescopeControl::drawPointer(const StelProjectorP&amp; prj, const StelNav
igator * nav, StelPainter&amp; sPainter)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #ifndef COMPATIBILITY_001002</td><td> </td><td class="right">       #ifndef COMPATIBILITY_001002</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Leaves this whole routine empty if this is the backport version.</td><td> </td><td class="right">       //Leaves this whole routine empty if this is the backport version.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Otherwise, there will be two concentric selection markers drawn ar
ound the telescope pointer.</td><td> </td><td class="right">       //Otherwise, there will be two concentric selection markers drawn ar
ound the telescope pointer.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //In 0.10.3, the plug-in unloads the module that draws the surplus m
arker.</td><td> </td><td class="right">       //In 0.10.3, the plug-in unloads the module that draws the surplus m
arker.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Telescope");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Telescope");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!newSelected.empty())</td><td> </td><td class="right">       if (!newSelected.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelObjectP obj = newSelected[0];</td><td> </td><td class="right">               const StelObjectP obj = newSelected[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d pos = obj-&gt;getJ2000EquatorialPos(nav);</td><td> </td><td class="right">               Vec3d pos = obj-&gt;getJ2000EquatorialPos(nav);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d screenpos;</td><td> </td><td class="right">               Vec3d screenpos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Compute 2D pos and return if outside screen</td><td> </td><td class="right">               // Compute 2D pos and return if outside screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!prj-&gt;project(pos, screenpos))</td><td> </td><td class="right">               if (!prj-&gt;project(pos, screenpos))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const Vec3<span class="delete">d</span>&amp; c(obj-&gt;getInfoColor());</td><td> </td><td class="rblock">               const Vec3<span class="insert">f</span>&amp; c(obj-&gt;getInfoColor());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter.setColor(c[0], c[1], c[2]);</td><td> </td><td class="right">               sPainter.setColor(c[0], c[1], c[2]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectionTexture-&gt;bind();</td><td> </td><td class="right">               selectionTexture-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glEnable(GL_TEXTURE_2D);</td><td> </td><td class="right">               glEnable(GL_TEXTURE_2D);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glEnable(GL_BLEND);</td><td> </td><td class="right">               glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal
 transparency mode</td><td> </td><td class="right">               glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal
 transparency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter.drawSprite2dMode(screenpos[0], screenpos[1], 25., S
telApp::getInstance().getTotalRunTime() * 40.);</td><td> </td><td class="right">               sPainter.drawSprite2dMode(screenpos[0], screenpos[1], 25., S
telApp::getInstance().getTotalRunTime() * 40.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #endif //COMPATIBILITY_001002</td><td> </td><td class="right">       #endif //COMPATIBILITY_001002</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 512</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 555</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: I don't like how this turned out</td><td> </td><td class="right">       //TODO: I don't like how this turned out</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(serverExecutablesDirectoryPath.isEmpty())</td><td> </td><td class="right">       if(serverExecutablesDirectoryPath.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //As StelFileMgr is quite limited, use Qt's handy methods (I love Qt
!)</td><td> </td><td class="right">       //As StelFileMgr is quite limited, use Qt's handy methods (I love Qt
!)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Get all executable files with names beginning with "TelescopeServe
r" in this directory</td><td> </td><td class="right">       //Get all executable files with names beginning with "TelescopeServe
r" in this directory</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QDir serverDirectory(serverExecutablesDirectoryPath);</td><td> </td><td class="right">       QDir serverDirectory(serverExecutablesDirectoryPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!serverDirectory.exists())</td><td> </td><td class="right">       if(!serverDirectory.exists())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qWarning() &lt;&lt; "TelescopeControl: <span class="delete">Can't load telescope server
 executables: Can't find telescope server directory</span>.";</td><td> </td><td class="rblock">               qWarning() &lt;&lt; "TelescopeControl: <span class="insert">No telescope server directo
ry has been found</span>.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;QFileInfo&gt; telescopeServerExecutables = serverDirectory.entryI
nfoList(QStringList("TelescopeServer*"), (QDir::Files|QDir::Executable|QDir
::CaseSensitive), QDir::Name);</td><td> </td><td class="right">       QList&lt;QFileInfo&gt; telescopeServerExecutables = serverDirectory.entryI
nfoList(QStringList("TelescopeServer*"), (QDir::Files|QDir::Executable|QDir
::CaseSensitive), QDir::Name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!telescopeServerExecutables.isEmpty())</td><td> </td><td class="right">       if(!telescopeServerExecutables.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach(QFileInfo telescopeServerExecutable, telescopeServer
Executables)</td><td> </td><td class="right">               foreach(QFileInfo telescopeServerExecutable, telescopeServer
Executables)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopeServers.append(telescopeServerExecutable.ba
seName());//This strips the ".exe" suffix on Windows</td><td> </td><td class="right">                       telescopeServers.append(telescopeServerExecutable.ba
seName());//This strips the ".exe" suffix on Windows</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 539</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 582</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Methods for reading from and writing to the configuration file</td><td> </td><td class="right">// Methods for reading from and writing to the configuration file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::loadConfiguration()</td><td> </td><td class="right">void TelescopeControl::loadConfiguration()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* settings = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* settings = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(settings);</td><td> </td><td class="right">       Q_ASSERT(settings);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;beginGroup("TelescopeControl");</td><td> </td><td class="right">       settings-&gt;beginGroup("TelescopeControl");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Load display flags</td><td> </td><td class="right">       //Load display flags</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">setFlagTelescopes(settings-&gt;value("flag_telescope_circles", true).to</span></td><td> </td><td class="rblock">       <span class="insert">setFlagTelescopeReticles(settings-&gt;value("flag_telescope_reticles", </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Bool());</span></td><td> </td><td class="rblock"><span class="insert">true).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       setFlagTelescopeName(settings-&gt;value("flag_telescope_labels", true).</span></td><td> </td><td class="rblock"><span class="insert">       setFlagTelescopeLabels(settings-&gt;value("flag_telescope_labels", true</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">toBool());</span></td><td> </td><td class="rblock"><span class="insert">).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagTelescopeCircles(settings-&gt;value("flag_telescope_circles", tr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ue).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Load font size</td><td> </td><td class="right">       //Load font size</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       #ifdef WIN32</td><td> </td><td class="rblock">       #ifdef <span class="insert">Q_OS_</span>WIN32</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFontSize(settings-&gt;value("telescope_labels_font_size", 13).toInt(
)); //Windows Qt bug workaround</td><td> </td><td class="right">       setFontSize(settings-&gt;value("telescope_labels_font_size", 13).toInt(
)); //Windows Qt bug workaround</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #else</td><td> </td><td class="right">       #else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFontSize(settings-&gt;value("telescope_labels_font_size", 12).toInt(
));</td><td> </td><td class="right">       setFontSize(settings-&gt;value("telescope_labels_font_size", 12).toInt(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #endif</td><td> </td><td class="right">       #endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Load colours</td><td> </td><td class="right">       //Load colours</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">circleNormalColor</span> = <span class="delete">StelUtils::strToVec3f(settings-&gt;value("color_tel</span></td><td> </td><td class="rblock">       <span class="insert">reticleNormalColor</span> = <span class="insert">StelUtils::strToVec3f(settings-&gt;value("color_te</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">escope_circles",</span> "0.6,0.4,0").toString());</td><td> </td><td class="rblock"><span class="insert">lescope_reticles",</span> "0.6,0.4,0").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">circleNightColor</span> = <span class="delete">StelUtils::strToVec3f(settings-&gt;value("night_colo</span></td><td> </td><td class="rblock">       <span class="insert">reticleNightColor</span> = <span class="insert">StelUtils::strToVec3f(settings-&gt;value("night_col</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">r_telescope_circles", "0.5,0,0").toString());;</span></td><td> </td><td class="rblock"><span class="insert">or_telescope_reticles", "0.5,0,0").toString());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       labelNormalColor = StelUtils::strToVec3f(settings-&gt;value("color_tele
scope_labels", "0.6,0.4,0").toString());</td><td> </td><td class="right">       labelNormalColor = StelUtils::strToVec3f(settings-&gt;value("color_tele
scope_labels", "0.6,0.4,0").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       labelNightColor = StelUtils::strToVec3f(settings-&gt;value("night_color
_telescope_labels", "0.5,0,0").toString());</td><td> </td><td class="right">       labelNightColor = StelUtils::strToVec3f(settings-&gt;value("night_color
_telescope_labels", "0.5,0,0").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">circleNormalColor = StelUtils::strToVec3f(settings-&gt;value("color_tel</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">escope_circles", "0.6,0.4,0").toString());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       circleNightColor = StelUtils::strToVec3f(settings-&gt;value("night_colo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">r_telescope_circles", "0.5,0,0").toString());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Load server executables flag and directory</td><td> </td><td class="right">       //Load server executables flag and directory</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       useServerExecutables = settings-&gt;value("flag_use_server_executables"
, false).toBool();</td><td> </td><td class="right">       useServerExecutables = settings-&gt;value("flag_use_server_executables"
, false).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       serverExecutablesDirectoryPath = settings-&gt;value("server_executables
_path").toString();</td><td> </td><td class="right">       serverExecutablesDirectoryPath = settings-&gt;value("server_executables
_path").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //If no directory is specified in the configuration file, try to fin
d the default one</td><td> </td><td class="right">       //If no directory is specified in the configuration file, try to fin
d the default one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(serverExecutablesDirectoryPath.isEmpty() || !QDir(serverExecutabl
esDirectoryPath).exists())</td><td> </td><td class="right">       if(serverExecutablesDirectoryPath.isEmpty() || !QDir(serverExecutabl
esDirectoryPath).exists())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Find out if the default server directory exists</td><td> </td><td class="right">               //Find out if the default server directory exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString serverDirectoryPath;</td><td> </td><td class="right">               QString serverDirectoryPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               try</td><td> </td><td class="right">               try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       serverDirectoryPath = StelFileMgr::findFile("servers
", StelFileMgr::Directory);</td><td> </td><td class="right">                       serverDirectoryPath = StelFileMgr::findFile("servers
", StelFileMgr::Directory);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               catch(std::runtime_error &amp;e)</td><td> </td><td class="right">               catch(std::runtime_error &amp;e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">qDebug() &lt;&lt; "TelescopeControl: No telescope servers 
</span>directory detected.";</td><td> </td><td class="rblock">                       <span class="insert">//qDebug() &lt;&lt; "TelescopeControl: No telescope server
s </span>directory detected.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       useServerExecutables = false;</td><td> </td><td class="right">                       useServerExecutables = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       serverDirectoryPath = StelFileMgr::getUserDir() + "/
servers";</td><td> </td><td class="right">                       serverDirectoryPath = StelFileMgr::getUserDir() + "/
servers";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(!serverDirectoryPath.isEmpty())</td><td> </td><td class="right">               if(!serverDirectoryPath.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       serverExecutablesDirectoryPath = serverDirectoryPath
;</td><td> </td><td class="right">                       serverExecutablesDirectoryPath = serverDirectoryPath
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Load logging flag</td><td> </td><td class="right">       //Load logging flag</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 594</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 640</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::saveConfiguration()</td><td> </td><td class="right">void TelescopeControl::saveConfiguration()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* settings = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* settings = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(settings);</td><td> </td><td class="right">       Q_ASSERT(settings);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;beginGroup("TelescopeControl");</td><td> </td><td class="right">       settings-&gt;beginGroup("TelescopeControl");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Save display flags</td><td> </td><td class="right">       //Save display flags</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">settings-&gt;setValue("flag_telescope_circles", getFlagTelescopes());</span></td><td> </td><td class="rblock">       <span class="insert">settings-&gt;setValue("flag_telescope_reticles", getFlagTelescopeReticl</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       settings-&gt;setValue("flag_telescope_labels", <span class="delete">getFlagTelescopeName());</span></td><td> </td><td class="rblock"><span class="insert">es());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       settings-&gt;setValue("flag_telescope_labels", <span class="insert">getFlagTelescopeLabels()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       settings-&gt;setValue("flag_telescope_circles", getFlagTelescopeCircles</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Save colours</td><td> </td><td class="right">       //Save colours</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">settings-&gt;setValue("color_telescope_circles", QString("%1,%2,%3").ar</span></td><td> </td><td class="rblock">       <span class="insert">settings-&gt;setValue("color_telescope_reticles", QString("%1,%2,%3").a</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">g(circleNormalColor[0],</span> 0, 'f', <span class="delete">2).arg(circleNormalColor[1],</span> 0, 'f', <span class="delete">2).arg</span></td><td> </td><td class="rblock"><span class="insert">rg(reticleNormalColor[0],</span> 0, 'f', <span class="insert">2).arg(reticleNormalColor[1],</span> 0, 'f', <span class="insert">2).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(circleNormalColor[2],</span> 0, 'f', 2));</td><td> </td><td class="rblock"><span class="insert">arg(reticleNormalColor[2],</span> 0, 'f', 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">settings-&gt;setValue("night_color_telescope_circles", QString("%1,%2,%</span></td><td> </td><td class="rblock">       <span class="insert">settings-&gt;setValue("night_color_telescope_reticles", QString("%1,%2,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3").arg(circleNightColor[0],</span> 0, 'f', <span class="delete">2).arg(circleNightColor[1],</span> 0, 'f', <span class="delete">2)</span></td><td> </td><td class="rblock"><span class="insert">%3").arg(reticleNightColor[0],</span> 0, 'f', <span class="insert">2).arg(reticleNightColor[1],</span> 0, 'f',</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.arg(circleNightColor[2],</span> 0, 'f', 2));</td><td> </td><td class="rblock"> <span class="insert">2).arg(reticleNightColor[2],</span> 0, 'f', 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("color_telescope_labels", QString("%1,%2,%3").arg
(labelNormalColor[0], 0, 'f', 2).arg(labelNormalColor[1], 0, 'f', 2).arg(la
belNormalColor[2], 0, 'f', 2));</td><td> </td><td class="right">       settings-&gt;setValue("color_telescope_labels", QString("%1,%2,%3").arg
(labelNormalColor[0], 0, 'f', 2).arg(labelNormalColor[1], 0, 'f', 2).arg(la
belNormalColor[2], 0, 'f', 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("night_color_telescope_labels", QString("%1,%2,%3
").arg(labelNightColor[0], 0, 'f', 2).arg(labelNightColor[1], 0, 'f', 2).ar
g(labelNightColor[2], 0, 'f', 2));</td><td> </td><td class="right">       settings-&gt;setValue("night_color_telescope_labels", QString("%1,%2,%3
").arg(labelNightColor[0], 0, 'f', 2).arg(labelNightColor[1], 0, 'f', 2).ar
g(labelNightColor[2], 0, 'f', 2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">settings-&gt;setValue("color_telescope_circles", QString("%1,%2,%3").ar</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">g(circleNormalColor[0], 0, 'f', 2).arg(circleNormalColor[1], 0, 'f', 2).arg</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">(circleNormalColor[2], 0, 'f', 2));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       settings-&gt;setValue("night_color_telescope_circles", QString("%1,%2,%</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">3").arg(circleNightColor[0], 0, 'f', 2).arg(circleNightColor[1], 0, 'f', 2)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.arg(circleNightColor[2], 0, 'f', 2));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Save telescope server executables flag and directory</td><td> </td><td class="right">       //Save telescope server executables flag and directory</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("flag_use_server_executables", useServerExecutabl
es);</td><td> </td><td class="right">       settings-&gt;setValue("flag_use_server_executables", useServerExecutabl
es);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(useServerExecutables)</td><td> </td><td class="right">       if(useServerExecutables)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               settings-&gt;setValue("server_executables_path", serverExecutab
lesDirectoryPath);</td><td> </td><td class="right">               settings-&gt;setValue("server_executables_path", serverExecutab
lesDirectoryPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               settings-&gt;remove("server_executables_path");</td><td> </td><td class="right">               settings-&gt;remove("server_executables_path");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 633</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 682</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Open/create the JSON file</td><td> </td><td class="right">               //Open/create the JSON file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString telescopesJsonPath = StelFileMgr::findFile("modules/
TelescopeControl", (StelFileMgr::Flags)(StelFileMgr::Directory|StelFileMgr:
:Writable)) + "/telescopes.json";</td><td> </td><td class="right">               QString telescopesJsonPath = StelFileMgr::findFile("modules/
TelescopeControl", (StelFileMgr::Flags)(StelFileMgr::Directory|StelFileMgr:
:Writable)) + "/telescopes.json";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QFile telescopesJsonFile(telescopesJsonPath);</td><td> </td><td class="right">               QFile telescopesJsonFile(telescopesJsonPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(!telescopesJsonFile.open(QFile::WriteOnly|QFile::Text))</td><td> </td><td class="right">               if(!telescopesJsonFile.open(QFile::WriteOnly|QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "TelescopeControl: Telescopes can not 
be saved. A file can not be open for writing:" &lt;&lt; telescopesJsonPath;</td><td> </td><td class="right">                       qWarning() &lt;&lt; "TelescopeControl: Telescopes can not 
be saved. A file can not be open for writing:" &lt;&lt; telescopesJsonPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">//Add the version:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescopeDescriptions.insert("version", QString(PLUGIN_VERSI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ON));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Convert the tree to JSON</td><td> </td><td class="right">               //Convert the tree to JSON</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelJsonParser::write(telescopeDescriptions, &amp;telescopesJson
File);</td><td> </td><td class="right">               StelJsonParser::write(telescopeDescriptions, &amp;telescopesJson
File);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopesJsonFile.flush();//Is this necessary?</td><td> </td><td class="right">               telescopesJsonFile.flush();//Is this necessary?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopesJsonFile.close();</td><td> </td><td class="right">               telescopesJsonFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch(std::runtime_error &amp;e)</td><td> </td><td class="right">       catch(std::runtime_error &amp;e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "TelescopeControl: Error saving telescopes: " 
&lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "TelescopeControl: Error saving telescopes: " 
&lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 682</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 734</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopesJsonFile.close();</td><td> </td><td class="right">                       telescopesJsonFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //File contains any telescopes?</td><td> </td><td class="right">               //File contains any telescopes?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(map.isEmpty())</td><td> </td><td class="right">               if(map.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopeDescriptions = result;</td><td> </td><td class="right">                       telescopeDescriptions = result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">QString version = map.value("version", "0.0.0").toString();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if(version &lt; QString(PLUGIN_VERSION))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QString newName = telescopesJsonPath + ".backup." + </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QDateTime::currentDateTime().toString("yyyy-MM-dd-hh-mm-ss");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if(telescopesJsonFile.rename(newName))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "TelescopeControl: The existin</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">g version of telescopes.json is obsolete. Backing it up as" &lt;&lt; newName;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "TelescopeControl: A blank tel</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">escopes.json file will have to be created.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               telescopeDescriptions = result;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "TelescopeControl: The existin</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">g version of telescopes.json is obsolete. Unable to rename.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               telescopeDescriptions = result;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               map.remove("version");//Otherwise it will try to read it as </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">a telescope</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Make sure that there are no telescope clients yet</td><td> </td><td class="right">               //Make sure that there are no telescope clients yet</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               deleteAllTelescopes();</td><td> </td><td class="right">               deleteAllTelescopes();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Read telescopes, if any</td><td> </td><td class="right">               //Read telescopes, if any</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int telescopesCount = 0;</td><td> </td><td class="right">               int telescopesCount = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QMapIterator&lt;QString, QVariant&gt; node(map);</td><td> </td><td class="right">               QMapIterator&lt;QString, QVariant&gt; node(map);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bool ok;</td><td> </td><td class="right">               bool ok;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               while(node.hasNext())</td><td> </td><td class="right">               while(node.hasNext())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       node.next();</td><td> </td><td class="right">                       node.next();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString key = node.key();</td><td> </td><td class="right">                       QString key = node.key();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //If this is not a valid slot number, remove the nod
e</td><td> </td><td class="right">                       //If this is not a valid slot number, remove the nod
e</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int slot = key.toInt(&amp;ok);</td><td> </td><td class="right">                       int slot = key.toInt(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if(!ok || <span class="delete">slot &lt; MIN_SLOT_NUMBER || slot &gt; MAX_SLOT_
NUMBER</span>)</td><td> </td><td class="rblock">                       if(!ok || <span class="insert">!isValidSlotNumber(slot)</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qDebug() &lt;&lt; "TelescopeControl::loadTelescope
s(): Deleted node unrecogised as slot:" &lt;&lt; key;</td><td> </td><td class="right">                               qDebug() &lt;&lt; "TelescopeControl::loadTelescope
s(): Deleted node unrecogised as slot:" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               map.remove(key);</td><td> </td><td class="right">                               map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QVariantMap telescope = node.value().toMap();</td><td> </td><td class="right">                       QVariantMap telescope = node.value().toMap();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//If some of the essential parameters is missing, re</span></td><td> </td><td class="rblock">                       <span class="insert">//Essential parameters: Name and connection type</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">move the node</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //TODO: More validation?</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Validation: Name</td><td> </td><td class="right">                       //Validation: Name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString name = telescope.value("name").toString();</td><td> </td><td class="right">                       QString name = telescope.value("name").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if(name.isEmpty())</td><td> </td><td class="right">                       if(name.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qDebug() &lt;&lt; "TelescopeControl: Unable to loa
d telescope: No name specified at slot" &lt;&lt; key;</td><td> </td><td class="right">                               qDebug() &lt;&lt; "TelescopeControl: Unable to loa
d telescope: No name specified at slot" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               map.remove(key);</td><td> </td><td class="right">                               map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//Validation: Protocol</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //QString protocol = telescope.value("protocol").toS</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">tring(); //Returns an empty string if this key doesn't exist</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //if(protocol.isEmpty())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //      qDebug() &lt;&lt; "TelescopeControl: No protocol s</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">pecified at slot" &lt;&lt; key;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //      map.remove(key);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //      continue;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Validation: Connection</td><td> </td><td class="right">                       //Validation: Connection</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString connection = telescope.value("connection").t
oString();</td><td> </td><td class="right">                       QString connection = telescope.value("connection").t
oString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if(connection.isEmpty() || <span class="delete">(connection != "internal"
 &amp;&amp; connection != "local" &amp;&amp; connection != "remote"</span>))</td><td> </td><td class="rblock">                       if(connection.isEmpty() || <span class="insert">!connectionTypeNames.valu
es().contains(connection</span>))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qDebug() &lt;&lt; "TelescopeControl: Unable to loa
d telescope: No valid connection type at slot" &lt;&lt; key;</td><td> </td><td class="right">                               qDebug() &lt;&lt; "TelescopeControl: Unable to loa
d telescope: No valid connection type at slot" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               map.remove(key);</td><td> </td><td class="right">                               map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       ConnectionType connectionType = connectionTypeNames.
key(connection);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//Validation: Host name</span></td><td> </td><td class="rblock">                       QString <span class="insert">hostName("localhost");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       QString <span class="delete">hostName</span> = <span class="delete">telescope.value("host_name").toSt</span></td><td> </td><td class="rblock"><span class="insert">                       int portTCP</span> = <span class="insert">0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ring();</span></td><td> </td><td class="rblock"><span class="insert">                       int delay = 0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if(hostName.isEmpty())</span></td><td> </td><td class="rblock"><span class="insert">                       QString deviceModelName;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       {</span></td><td> </td><td class="rblock"><span class="insert">                       QString portSerial;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               qDebug() &lt;&lt; "TelescopeControl::loadTelescope</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">s(): No host name at slot" &lt;&lt; key;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               map.remove(key);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               continue;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//Validation: TCP port</span></td><td> </td><td class="rblock">                       <span class="insert">if (connectionType == ConnectionInternal)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       int portTCP = telescope.value("tcp_port").toInt();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if(!telescope.contains("tcp_port") || portTCP &lt; 0 ||</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> portTCP &gt; 65535) //TODO: remove magic number</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">qDebug() &lt;&lt; "TelescopeControl: Unable to loa</span></td><td> </td><td class="rblock">                               <span class="insert">//Serial</span> port <span class="insert">and device model</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">d telescope: No valid TCP</span> port <span class="delete">at slot" &lt;&lt; key;</span></td><td> </td><td class="rblock"><span class="insert">                               deviceModelName = telescope.value("device_mo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               map.remove(key);</span></td><td> </td><td class="rblock"><span class="insert">del").toString();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               continue;</span></td><td> </td><td class="rblock"><span class="insert">                               portSerial = telescope.value("serial_port").</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"><span class="insert">toString();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//Validation: Delay</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       int delay = telescope.value("delay", 0).toInt();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if(delay &lt;= 0 || delay &gt; 10000000)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               qDebug() &lt;&lt; "TelescopeControl: Unable to loa</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">d telescope: No valid delay at slot" &lt;&lt; key;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               map.remove(key);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               continue;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //Validation: Connect at startup</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       bool connectAtStartup = telescope.value("connect_at_</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">startup", false).toBool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       //Validation: Parameters needed only for telescopes </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">launched by Stellarium</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       QString deviceModelName = telescope.value("device_mo</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">del").toString();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       QString portSerial = telescope.value("serial_port").</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">toString();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if(connection == "internal")</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //Validation: Telescope server</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(deviceModelName.isEmpty())</td><td> </td><td class="right">                               if(deviceModelName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "TelescopeControl: Unabl
e to load telescope: No device model specified at slot" &lt;&lt; key;</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "TelescopeControl: Unabl
e to load telescope: No device model specified at slot" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       map.remove(key);</td><td> </td><td class="right">                                       map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //Do we have this server?</td><td> </td><td class="right">                               //Do we have this server?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(!deviceModels.contains(deviceModelName))</td><td> </td><td class="right">                               if(!deviceModels.contains(deviceModelName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "TelescopeControl: Una
ble to load telescope at slot" &lt;&lt; slot &lt;&lt; "because the specified device mod
el is missing:" &lt;&lt; deviceModelName;</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "TelescopeControl: Una
ble to load telescope at slot" &lt;&lt; slot &lt;&lt; "because the specified device mod
el is missing:" &lt;&lt; deviceModelName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       map.remove(key);</td><td> </td><td class="right">                                       map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">//Validation: Serial port</span></td><td> </td><td class="rblock">                               if(portSerial.isEmpty() || <span class="insert">!portSerial.start</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //int portNumber;</span></td><td> </td><td class="rblock"><span class="insert">sWith(SERIAL_PORT_PREFIX))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //bool isNumber = false;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if(portSerial.isEmpty()</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                  || <span class="delete">!portSerial.startsWith(SERIAL_PORT_PRE</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">FIX)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //TODO: Validation for Windows!</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //   || (portNumber = portSerial.right(portS</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">erial.length() - SERIAL_PORT_PREFIX.length()).toInt(&amp;isNumber)) &lt; MIN_SERIA</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">L_PORT_NUMBER</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //   || !isNumber</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //   || portNumber &gt; MAX_SERIAL_PORT_NUMBER</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               //TODO: More validation?</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                 )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "TelescopeControl: Unabl
e to load telescope: No valid serial port specified at slot" &lt;&lt; key;</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "TelescopeControl: Unabl
e to load telescope: No valid serial port specified at slot" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       map.remove(key);</td><td> </td><td class="right">                                       map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">if (connectionType == ConnectionRemote)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               //Validation: Host name</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               hostName = telescope.value("host_name").toSt</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ring();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if(hostName.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       qDebug() &lt;&lt; "TelescopeControl::loadT</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">elescopes(): No host name at slot" &lt;&lt; key;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       map.remove(key);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (connectionType != ConnectionVirtual)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               //Validation: TCP port</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               portTCP = telescope.value("tcp_port").toInt(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if(!telescope.contains("tcp_port") || !isVal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">idPort(portTCP))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       qDebug() &lt;&lt; "TelescopeControl: Unabl</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e to load telescope: No valid TCP port at slot" &lt;&lt; key;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       map.remove(key);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               //Validation: Delay</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               delay = telescope.value("delay", 0).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if(!isValidDelay(delay))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       qDebug() &lt;&lt; "TelescopeControl: Unabl</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e to load telescope: No valid delay at slot" &lt;&lt; key;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       map.remove(key);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       //Connect at startup</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       bool connectAtStartup = telescope.value("connect_at_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">startup", false).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Validation: FOV circles</td><td> </td><td class="right">                       //Validation: FOV circles</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QVariantList parsedJsonCircles = telescope.value("ci
rcles").toList();</td><td> </td><td class="right">                       QVariantList parsedJsonCircles = telescope.value("ci
rcles").toList();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QList&lt;double&gt; internalCircles;</td><td> </td><td class="right">                       QList&lt;double&gt; internalCircles;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for(int i = 0; i&lt; parsedJsonCircles.size(); i++)</td><td> </td><td class="right">                       for(int i = 0; i&lt; parsedJsonCircles.size(); i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(i &gt;= MAX_CIRCLE_COUNT)</td><td> </td><td class="right">                               if(i &gt;= MAX_CIRCLE_COUNT)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               internalCircles.append(parsedJsonCircles.val
ue(i, -1.0).toDouble());</td><td> </td><td class="right">                               internalCircles.append(parsedJsonCircles.val
ue(i, -1.0).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if(internalCircles.isEmpty())</td><td> </td><td class="right">                       if(internalCircles.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 833</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 897</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               for(int i = 0; i &lt; internalCircles.size(); i
++)</td><td> </td><td class="right">                               for(int i = 0; i &lt; internalCircles.size(); i
++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       newJsonCircles.append(internalCircle
s.at(i));</td><td> </td><td class="right">                                       newJsonCircles.append(internalCircle
s.at(i));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               telescope.insert("circles", newJsonCircles);</td><td> </td><td class="right">                               telescope.insert("circles", newJsonCircles);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               map.insert(key, telescope);</td><td> </td><td class="right">                               map.insert(key, telescope);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Initialize a telescope client for this slot</td><td> </td><td class="right">                       //Initialize a telescope client for this slot</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //TODO: Improve the flow of control</td><td> </td><td class="right">                       //TODO: Improve the flow of control</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if(connectAtStartup)</td><td> </td><td class="right">                       if(connectAtStartup)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">//Use a sever</span> if <span class="delete">necessary</span></td><td> </td><td class="rblock">                               if <span class="insert">(connectionType</span> == <span class="insert">ConnectionInternal)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               if(connection</span> == <span class="delete">"internal")</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       //Use a sever if necessary</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if(deviceModels[deviceModelName].use
Executable)</td><td> </td><td class="right">                                       if(deviceModels[deviceModelName].use
Executable)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               if(startClientAtSlot(slot, <span class="delete">n
</span>ame, hostName, portTCP, delay, internalCircles))</td><td> </td><td class="rblock">                                               if(startClientAtSlot(slot, <span class="insert">c
onnectionType, n</span>ame, hostName, portTCP, delay, internalCircles))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               {</td><td> </td><td class="right">                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       if(!startServerAtSlo
t(slot, deviceModelName, portTCP, portSerial))</td><td> </td><td class="right">                                                       if(!startServerAtSlo
t(slot, deviceModelName, portTCP, portSerial))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       {</td><td> </td><td class="right">                                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               stopClientAt
Slot(slot);</td><td> </td><td class="right">                                                               stopClientAt
Slot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               qDebug() &lt;&lt; 
"TelescopeControl: Unable to launch a telescope server at slot" &lt;&lt; slot;</td><td> </td><td class="right">                                                               qDebug() &lt;&lt; 
"TelescopeControl: Unable to launch a telescope server at slot" &lt;&lt; slot;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       }</td><td> </td><td class="right">                                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               }</td><td> </td><td class="right">                                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               else</td><td> </td><td class="right">                                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               {</td><td> </td><td class="right">                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       qDebug() &lt;&lt; "Telesco
peControl: Unable to create a telescope client at slot" &lt;&lt; slot;</td><td> </td><td class="right">                                                       qDebug() &lt;&lt; "Telesco
peControl: Unable to create a telescope client at slot" &lt;&lt; slot;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       continue;</td><td> </td><td class="right">                                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               }</td><td> </td><td class="right">                                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       else</td><td> </td><td class="right">                                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               addLogAtSlot(slot);</td><td> </td><td class="right">                                               addLogAtSlot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               logAtSlot(slot);</td><td> </td><td class="right">                                               logAtSlot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               if(!startClientAtSlot(slot, 
<span class="delete">name, QString(), 0, delay, internalCircles, deviceModelName</span>, portSerial))</td><td> </td><td class="rblock">                                               if(!startClientAtSlot(slot, 
<span class="insert">connectionType, name, QString(), 0, delay, internalCircles, deviceModelName
</span>, portSerial))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               {</td><td> </td><td class="right">                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       qDebug() &lt;&lt; "Telesco
peControl: Unable to create a telescope client at slot" &lt;&lt; slot;</td><td> </td><td class="right">                                                       qDebug() &lt;&lt; "Telesco
peControl: Unable to create a telescope client at slot" &lt;&lt; slot;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       continue;</td><td> </td><td class="right">                                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               }</td><td> </td><td class="right">                                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       if(!startClientAtSlot(slot, <span class="delete">name, ho
</span>stName, portTCP, delay, internalCircles))</td><td> </td><td class="rblock">                                       if(!startClientAtSlot(slot, <span class="insert">connecti
onType, name, ho</span>stName, portTCP, delay, internalCircles))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               qDebug() &lt;&lt; "TelescopeContro
l: Unable to create a telescope client at slot" &lt;&lt; slot;</td><td> </td><td class="right">                                               qDebug() &lt;&lt; "TelescopeContro
l: Unable to create a telescope client at slot" &lt;&lt; slot;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               continue;</td><td> </td><td class="right">                                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //If this line is reached, the telescope at this slo
t has been loaded successfully</td><td> </td><td class="right">                       //If this line is reached, the telescope at this slo
t has been loaded successfully</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopesCount++;</td><td> </td><td class="right">                       telescopesCount++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 892</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 956</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch(std::runtime_error &amp;e)</td><td> </td><td class="right">       catch(std::runtime_error &amp;e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "TelescopeControl: Error loading telescopes: "
 &lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "TelescopeControl: Error loading telescopes: "
 &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeDescriptions = result;</td><td> </td><td class="right">       telescopeDescriptions = result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::addTelescopeAtSlot(int slot, <span class="delete">QString name, QString h
ost, int portTCP, int delay, bool connectAtStartup, QList&lt;double&gt; circles, 
</span>QString deviceModelName, QString portSerial)</td><td> </td><td class="rblock">bool TelescopeControl::addTelescopeAtSlot(int slot, <span class="insert">ConnectionType connecti
onType, QString name, QString host, int portTCP, int delay, bool connectAtS
tartup, QList&lt;double&gt; circles, </span>QString deviceModelName, QString portSerial)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(!isValidSlotNumber(slot))</td><td> </td><td class="rblock">       if(!isValidSlotNumber(slot)<span class="insert"> || name.isEmpty() || connectionType &lt;= C
onnectionNA || connectionType &gt;= ConnectionCount</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Create a new map node and fill it with parameters</td><td> </td><td class="right">       //Create a new map node and fill it with parameters</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVariantMap telescope;</td><td> </td><td class="right">       QVariantMap telescope;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescope.insert("name", name);</td><td> </td><td class="right">       telescope.insert("name", name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if(!deviceModelName.isEmpty())</span></td><td> </td><td class="rblock">       <span class="insert">telescope.insert("connection", connectionTypeNames.value(connectionT</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ype));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (connectionType == ConnectionRemote)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">telescope.insert("connection", "internal");</span></td><td> </td><td class="rblock">               <span class="insert">//TODO: Add more validation!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (host.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescope.insert("host_name", host);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">else if(host != "localhost")</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">if(connectionType == ConnectionInternal)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">telescope.insert("connection", "remote");</span></td><td> </td><td class="rblock">               <span class="insert">if (!deviceModels.contains(deviceModelName))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescope.insert("device_model", deviceModelName);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (portSerial.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescope.insert("serial_port", portSerial);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">else</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">if (connectionType != ConnectionVirtual)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">telescope.insert("connection", "local");</span></td><td> </td><td class="rblock">               <span class="insert">if (!isValidPort(portTCP))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescope.insert("tcp_port", portTCP);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (!isValidDelay(delay))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescope.insert("delay", delay);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">telescope.insert("host_name", host);</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       telescope.insert("tcp_port", portTCP);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       telescope.insert("delay", delay);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescope.insert("connect_at_startup", connectAtStartup);</td><td> </td><td class="right">       telescope.insert("connect_at_startup", connectAtStartup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!circles.isEmpty())</td><td> </td><td class="right">       if(!circles.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QVariantList circleList;</td><td> </td><td class="right">               QVariantList circleList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               for(int i = 0; i &lt; circles.size(); i++)</td><td> </td><td class="right">               for(int i = 0; i &lt; circles.size(); i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       circleList.append(circles[i]);</td><td> </td><td class="right">                       circleList.append(circles[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("circles", circleList);</td><td> </td><td class="right">               telescope.insert("circles", circleList);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if(!deviceModelName.isEmpty())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               telescope.insert("device_model", deviceModelName);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               telescope.insert("serial_port", portSerial);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeDescriptions.insert(QString::number(slot), telescope);</td><td> </td><td class="right">       telescopeDescriptions.insert(QString::number(slot), telescope);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::getTelescopeAtSlot(int slot, <span class="delete">QString&amp; name, QString&amp;
 host, int&amp; portTCP, int&amp; delay, bool&amp; connectAtStartup, QList&lt;double&gt;&amp; cir
cles, QString&amp; deviceModelName, QString&amp; po</span>rtSerial)</td><td> </td><td class="rblock">bool TelescopeControl::getTelescopeAtSlot(int slot, <span class="insert">ConnectionType&amp; connect
ionType, QString&amp; name, QString&amp; host, int&amp; portTCP, int&amp; delay, bool&amp; conn
ectAtStartup, QList&lt;double&gt;&amp; circles, QString&amp; deviceModelName, QString&amp; po
</span>rtSerial)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slot))</td><td> </td><td class="right">       if(!isValidSlotNumber(slot))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Read the node at that slot</td><td> </td><td class="right">       //Read the node at that slot</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVariantMap telescope = telescopeDescriptions.value(QString::number(
slot)).toMap();</td><td> </td><td class="right">       QVariantMap telescope = telescopeDescriptions.value(QString::number(
slot)).toMap();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(telescope.isEmpty())</td><td> </td><td class="right">       if(telescope.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeDescriptions.remove(QString::number(slot));</td><td> </td><td class="right">               telescopeDescriptions.remove(QString::number(slot));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 966</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1041</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connectAtStartup = telescope.value("connect_at_startup", false).toBo
ol();</td><td> </td><td class="right">       connectAtStartup = telescope.value("connect_at_startup", false).toBo
ol();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVariantList circleList = telescope.value("circles").toList();</td><td> </td><td class="right">       QVariantList circleList = telescope.value("circles").toList();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!circleList.isEmpty() &amp;&amp; circleList.size() &lt;= MAX_CIRCLE_COUNT)</td><td> </td><td class="right">       if(!circleList.isEmpty() &amp;&amp; circleList.size() &lt;= MAX_CIRCLE_COUNT)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               for(int i = 0; i &lt; circleList.size(); i++)</td><td> </td><td class="right">               for(int i = 0; i &lt; circleList.size(); i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       circles.append(circleList.value(i, -1.0).toDouble())
;</td><td> </td><td class="right">                       circles.append(circleList.value(i, -1.0).toDouble())
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString connection = telescope.value("connection").toString();</td><td> </td><td class="right">       QString connection = telescope.value("connection").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if(connection</span> == <span class="delete">"internal")</span></td><td> </td><td class="rblock">       <span class="insert">connectionType = connectionTypeNames.key(connection, ConnectionVirtu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">al);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(connectionType</span> == <span class="insert">ConnectionInternal)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               deviceModelName = telescope.value("device_model").toString()
;</td><td> </td><td class="right">               deviceModelName = telescope.value("device_model").toString()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               portSerial = telescope.value("serial_port").toString();</td><td> </td><td class="right">               portSerial = telescope.value("serial_port").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::removeTelescopeAtSlot(int slot)</td><td> </td><td class="right">bool TelescopeControl::removeTelescopeAtSlot(int slot)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 993</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1069</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::startTelescopeAtSlot(int slot)</td><td> </td><td class="right">bool TelescopeControl::startTelescopeAtSlot(int slot)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slot))</td><td> </td><td class="right">       if(!isValidSlotNumber(slot))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Read the telescope properties</td><td> </td><td class="right">       //Read the telescope properties</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString name;</td><td> </td><td class="right">       QString name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString host;</td><td> </td><td class="right">       QString host;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       ConnectionType connectionType;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int portTCP;</td><td> </td><td class="right">       int portTCP;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int delay;</td><td> </td><td class="right">       int delay;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool connectAtStartup;</td><td> </td><td class="right">       bool connectAtStartup;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;double&gt; circles;</td><td> </td><td class="right">       QList&lt;double&gt; circles;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString deviceModelName;</td><td> </td><td class="right">       QString deviceModelName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString portSerial;</td><td> </td><td class="right">       QString portSerial;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(!getTelescopeAtSlot(slot, <span class="delete">name, host, portTCP, delay, connectAtSt
</span>artup, circles, deviceModelName, portSerial))</td><td> </td><td class="rblock">       if(!getTelescopeAtSlot(slot, <span class="insert">connectionType, name, host, portTCP, de
lay, connectAtSt</span>artup, circles, deviceModelName, portSerial))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Add debug</td><td> </td><td class="right">               //TODO: Add debug</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(<span class="delete">!deviceModelName.isEmpty(</span>))</td><td> </td><td class="rblock">       if(<span class="insert">connectionType == ConnectionInternal &amp;&amp; !deviceModelName.isEmpty(
</span>))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(deviceModels[deviceModelName].useExecutable)</td><td> </td><td class="right">               if(deviceModels[deviceModelName].useExecutable)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (startClientAtSlot(slot, <span class="delete">name, host, portTCP, del
</span>ay, circles))</td><td> </td><td class="rblock">                       if (startClientAtSlot(slot, <span class="insert">connectionType, name, ho
st, portTCP, del</span>ay, circles))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(!startServerAtSlot(slot, deviceModelName,
 portTCP, portSerial))</td><td> </td><td class="right">                               if(!startServerAtSlot(slot, deviceModelName,
 portTCP, portSerial))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //If a server can't be started, remo
ve the client too</td><td> </td><td class="right">                                       //If a server can't be started, remo
ve the client too</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       stopClientAtSlot(slot);</td><td> </td><td class="right">                                       stopClientAtSlot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return false;</td><td> </td><td class="right">                                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               emit clientConnected(slot, name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               return true;</td><td> </td><td class="right">                               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       addLogAtSlot(slot);</td><td> </td><td class="right">                       addLogAtSlot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       logAtSlot(slot);</td><td> </td><td class="right">                       logAtSlot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (startClientAtSlot(slot, <span class="delete">name, QString(), 0, dela
</span>y, circles, deviceModelName, portSerial))</td><td> </td><td class="rblock">                       if (startClientAtSlot(slot, <span class="insert">connectionType, name, QS
tring(), 0, dela</span>y, circles, deviceModelName, portSerial))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               emit clientConnected(slot, name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               return true;</td><td> </td><td class="right">                               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (startClientAtSlot(slot, <span class="delete">name, host, portTCP, delay, circ
</span>les))</td><td> </td><td class="rblock">               if (startClientAtSlot(slot, <span class="insert">connectionType, name, host, port
TCP, delay, circ</span>les))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       emit clientConnected(slot, name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return true;</td><td> </td><td class="right">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::stopTelescopeAtSlot(int slot)</td><td> </td><td class="right">bool TelescopeControl::stopTelescopeAtSlot(int slot)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1083</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 1163</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return allStoppedSuccessfully;</td><td> </td><td class="right">       return allStoppedSuccessfully;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::isValidSlotNumber(int slot)</td><td> </td><td class="right">bool TelescopeControl::isValidSlotNumber(int slot)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return ((slot &lt; MIN_SLOT_NUMBER || slot &gt;  MAX_SLOT_NUMBER) ? false 
: true);</td><td> </td><td class="right">       return ((slot &lt; MIN_SLOT_NUMBER || slot &gt;  MAX_SLOT_NUMBER) ? false 
: true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::startServerAtSlot(int slotNumber, QString deviceMode</td><td> </td><td class="rblock">bool <span class="insert">TelescopeControl::isValidPort(uint port)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">lName, int <span class="delete">tcpPort,</span> QString <span class="delete">serialPort)</span></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //Check if the port number is in IANA's allowed range</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return (port &gt; 1023 &amp;&amp; port &lt;= 65535);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool TelescopeControl::isValidDelay(int delay)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return (delay &gt; 0 &amp;&amp; delay &lt;= MICROSECONDS_FROM_SECONDS(10));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool</span> TelescopeControl::startServerAtSlot(int slotNumber, QString deviceMode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">lName, int <span class="insert">portTCP,</span> QString <span class="insert">portSerial)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validate</td><td> </td><td class="right">       //Validate</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(!isValidSlotNumber(slotNumber) || <span class="delete">tcpPort &lt; 0 || tcpPort &gt; 65535)
 //TODO: remove magic number</span></td><td> </td><td class="rblock">       if(!isValidSlotNumber(slotNumber) || <span class="insert">!isValidPort(portTCP))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Validate the serial port? (Is this method going to be public
?)</td><td> </td><td class="right">       //TODO: Validate the serial port? (Is this method going to be public
?)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!deviceModels.contains(deviceModelName))</td><td> </td><td class="right">       if(!deviceModels.contains(deviceModelName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Add debug</td><td> </td><td class="right">               //TODO: Add debug</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString slotName = QString::number(slotNumber);</td><td> </td><td class="right">       QString slotName = QString::number(slotNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1113</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 1204</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               try</td><td> </td><td class="right">               try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       serverExecutablePath = StelFileMgr::findFile(serverE
xecutablesDirectoryPath + TELESCOPE_SERVER_PATH.arg(serverName), StelFileMg
r::File);</td><td> </td><td class="right">                       serverExecutablePath = StelFileMgr::findFile(serverE
xecutablesDirectoryPath + TELESCOPE_SERVER_PATH.arg(serverName), StelFileMg
r::File);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               catch (std::runtime_error&amp; e)</td><td> </td><td class="right">               catch (std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qDebug() &lt;&lt; "TelescopeControl: Error starting telesc
ope server: Can't find executable:" &lt;&lt; serverExecutablePath;</td><td> </td><td class="right">                       qDebug() &lt;&lt; "TelescopeControl: Error starting telesc
ope server: Can't find executable:" &lt;&lt; serverExecutablePath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               #ifdef WIN32</td><td> </td><td class="rblock">               #ifdef <span class="insert">Q_OS_</span>WIN32</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString serialPortName;</td><td> </td><td class="right">               QString serialPortName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if(serialPort.right(serialPort.size()</span> - SERIAL_PORT_PREFIX.s</td><td> </td><td class="rblock">               <span class="insert">if(portSerial.right(portSerial.size()</span> - SERIAL_PORT_PREFIX.s</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ize()).toInt() &gt; 9)</td><td> </td><td class="rblock">ize()).toInt() &gt; 9)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       serialPortName = "\\\\.\\" + <span class="delete">serialPort</span> + ":";//"\\.</td><td> </td><td class="rblock">                       serialPortName = "\\\\.\\" + <span class="insert">portSerial</span> + ":";//"\\.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">\COMxx", not sure if it will work</td><td> </td><td class="rblock">\COMxx", not sure if it will work</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       serialPortName = <span class="delete">serialPort</span> + ":";</td><td> </td><td class="rblock">                       serialPortName = <span class="insert">portSerial</span> + ":";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               #else</td><td> </td><td class="right">               #else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               QString serialPortName = <span class="delete">serialPort;</span></td><td> </td><td class="rblock">               QString serialPortName = <span class="insert">portSerial;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               #endif <span class="delete">//WIN32</span></td><td> </td><td class="rblock">               #endif <span class="insert">//Q_OS_WIN32</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QStringList serverArguments;</td><td> </td><td class="right">               QStringList serverArguments;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               serverArguments &lt;&lt; QString::number(<span class="delete">tcpPort</span>) &lt;&lt; serialPortNam
e;</td><td> </td><td class="rblock">               serverArguments &lt;&lt; QString::number(<span class="insert">portTCP</span>) &lt;&lt; serialPortNam
e;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(useTelescopeServerLogs)</td><td> </td><td class="right">               if(useTelescopeServerLogs)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       serverArguments &lt;&lt; QString(StelFileMgr::getUserDir()
 + "/log_TelescopeServer" + slotName + ".txt");</td><td> </td><td class="right">                       serverArguments &lt;&lt; QString(StelFileMgr::getUserDir()
 + "/log_TelescopeServer" + slotName + ".txt");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "TelescopeControl: Starting tellescope server at
 slot" &lt;&lt; slotName &lt;&lt; "with path" &lt;&lt; serverExecutablePath &lt;&lt; "and arguments
" &lt;&lt; serverArguments.join(" ");</td><td> </td><td class="right">               qDebug() &lt;&lt; "TelescopeControl: Starting tellescope server at
 slot" &lt;&lt; slotName &lt;&lt; "with path" &lt;&lt; serverExecutablePath &lt;&lt; "and arguments
" &lt;&lt; serverArguments.join(" ");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Starting the new process</td><td> </td><td class="right">               //Starting the new process</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeServerProcess.insert(slotNumber, new QProcess());</td><td> </td><td class="right">               telescopeServerProcess.insert(slotNumber, new QProcess());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //telescopeServerProcess[slotNumber]-&gt;setStandardOutputFile(
StelFileMgr::getUserDir() + "/log_TelescopeServer" + slotName + ".txt");//I
n case the server does not accept logfiles</td><td> </td><td class="right">               //telescopeServerProcess[slotNumber]-&gt;setStandardOutputFile(
StelFileMgr::getUserDir() + "/log_TelescopeServer" + slotName + ".txt");//I
n case the server does not accept logfiles</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeServerProcess[slotNumber]-&gt;start(serverExecutablePa
th, serverArguments);</td><td> </td><td class="right">               telescopeServerProcess[slotNumber]-&gt;start(serverExecutablePa
th, serverArguments);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //return telescopeServerProcess[slotNumber]-&gt;waitForStarted(
);</td><td> </td><td class="right">               //return telescopeServerProcess[slotNumber]-&gt;waitForStarted(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 1151</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 1242</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::stopServerAtSlot(int slotNumber)</td><td> </td><td class="right">bool TelescopeControl::stopServerAtSlot(int slotNumber)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validate</td><td> </td><td class="right">       //Validate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slotNumber) || !telescopeServerProcess.contain
s(slotNumber))</td><td> </td><td class="right">       if(!isValidSlotNumber(slotNumber) || !telescopeServerProcess.contain
s(slotNumber))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Stop/close the process</td><td> </td><td class="right">       //Stop/close the process</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       #ifdef WIN32</td><td> </td><td class="rblock">       #ifdef <span class="insert">Q_OS_</span>WIN32</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess[slotNumber]-&gt;close();</td><td> </td><td class="right">       telescopeServerProcess[slotNumber]-&gt;close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #else</td><td> </td><td class="right">       #else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess[slotNumber]-&gt;terminate();</td><td> </td><td class="right">       telescopeServerProcess[slotNumber]-&gt;terminate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       #endif //WIN32</td><td> </td><td class="rblock">       #endif //<span class="insert">Q_OS_</span>WIN32</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess[slotNumber]-&gt;waitForFinished();</td><td> </td><td class="right">       telescopeServerProcess[slotNumber]-&gt;waitForFinished();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete telescopeServerProcess[slotNumber];</td><td> </td><td class="right">       delete telescopeServerProcess[slotNumber];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess.remove(slotNumber);</td><td> </td><td class="right">       telescopeServerProcess.remove(slotNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::startClientAtSlot(int slotNumber, <span class="delete">QString name, QStr
ing host, int portTCP, int delay, QList&lt;double&gt; circles, QString deviceMode
</span>lName, QString portSerial)</td><td> </td><td class="rblock">bool TelescopeControl::startClientAtSlot(int slotNumber, <span class="insert">ConnectionType con
nectionType, QString name, QString host, int portTCP, int delay, QList&lt;doub
le&gt; circles, QString deviceMode</span>lName, QString portSerial)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slotNumber))</td><td> </td><td class="right">       if(!isValidSlotNumber(slotNumber))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Check if it's not already running</td><td> </td><td class="right">       //Check if it's not already running</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Should it return, or should it remove the old one and proceed?</td><td> </td><td class="right">       //Should it return, or should it remove the old one and proceed?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(telescopeClients.contains(slotNumber))</td><td> </td><td class="right">       if(telescopeClients.contains(slotNumber))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Add debug. Update logic?</td><td> </td><td class="right">               //TODO: Add debug. Update logic?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString initString;</td><td> </td><td class="right">       QString initString;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if(!deviceModelName.isEmpty() &amp;&amp; !portSerial.isEmpty()</span>)</td><td> </td><td class="rblock">       <span class="insert">switch (connectionType</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               initString = QString("%1:%2:%3:%4").arg(name, <span class="delete">deviceModels[d</span></td><td> </td><td class="rblock">       <span class="insert">case ConnectionVirtual:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eviceModelName].server,</span> portSerial, QString::number(delay));</td><td> </td><td class="rblock"><span class="insert">               initString = QString("%1:%2").arg(name, "TelescopeServerDumm</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">}</span></td><td> </td><td class="rblock"><span class="insert">y");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       else</span></td><td> </td><td class="rblock"><span class="insert">               break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               initString = QString("%1:TCP:%2:%3:%4").arg(name, <span class="delete">host, QStr</span></td><td> </td><td class="rblock"><span class="insert">       case ConnectionInternal:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ing::number(portTCP),</span> QString::number(delay));</td><td> </td><td class="rblock"><span class="insert">               if(!deviceModelName.isEmpty() &amp;&amp; !portSerial.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       initString = QString("%1:%2:%3:%4").arg(name, <span class="insert">device</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Models[deviceModelName].server,</span> portSerial, QString::number(delay));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       case ConnectionLocal:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (isValidPort(portTCP))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       initString = QString("%1:TCP:%2:%3:%4").arg(name, "l</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ocalhost", QString::number(portTCP), QString::number(delay));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       case ConnectionRemote:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       default:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (isValidPort(portTCP) &amp;&amp; !host.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       initString = QString("%1:TCP:%2:%3:%4").arg(name, <span class="insert">ho</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">st, QString::number(portTCP),</span> QString::number(delay));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">qDebug() &lt;&lt; "initString:" &lt;&lt; initString;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TelescopeClient* newTelescope = TelescopeClient::create(initString);</td><td> </td><td class="right">       TelescopeClient* newTelescope = TelescopeClient::create(initString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (newTelescope)</td><td> </td><td class="right">       if (newTelescope)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Add FOV circles to the client if there are any specified</td><td> </td><td class="right">               //Add FOV circles to the client if there are any specified</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(!circles.isEmpty() &amp;&amp; circles.size() &lt;= MAX_CIRCLE_COUNT)</td><td> </td><td class="right">               if(!circles.isEmpty() &amp;&amp; circles.size() &lt;= MAX_CIRCLE_COUNT)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (int i = 0; i &lt; circles.size(); ++i)</td><td> </td><td class="right">                       for (int i = 0; i &lt; circles.size(); ++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               newTelescope-&gt;addOcular(circles[i]);</td><td> </td><td class="right">                               newTelescope-&gt;addOcular(circles[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeClients.insert(slotNumber, TelescopeClientP(newTele
scope));</td><td> </td><td class="right">               telescopeClients.insert(slotNumber, TelescopeClientP(newTele
scope));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return true;</td><td> </td><td class="right">               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l19" /><small>skipping to change at</small><em> line 1226</em></th><th> </th><th><a name="part-r19" /><small>skipping to change at</small><em> line 1332</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Telescope");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Telescope");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!newSelected.isEmpty())</td><td> </td><td class="right">       if(!newSelected.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GETSTELMODULE(StelObjectMgr)-&gt;unSelect();</td><td> </td><td class="right">               GETSTELMODULE(StelObjectMgr)-&gt;unSelect();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeClients.remove(slotNumber);</td><td> </td><td class="right">       telescopeClients.remove(slotNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //This is not needed by every client</td><td> </td><td class="right">       //This is not needed by every client</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       removeLogAtSlot(slotNumber);</td><td> </td><td class="right">       removeLogAtSlot(slotNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       emit clientDisconnected(slotNumber);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::loadDeviceModels()</td><td> </td><td class="right">void TelescopeControl::loadDeviceModels()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">qDebug() &lt;&lt; "TelescopeControl: Loading device model descriptions..."
</span>;</td><td> </td><td class="rblock">       <span class="insert">//qDebug() &lt;&lt; "TelescopeControl: Loading device model descriptions..
."</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Make sure that the device models file exists</td><td> </td><td class="right">       //Make sure that the device models file exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool useDefaultList = false;</td><td> </td><td class="right">       bool useDefaultList = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString deviceModelsJsonPath = StelFileMgr::findFile("modules/Telesc
opeControl", (StelFileMgr::Flags)(StelFileMgr::Directory|StelFileMgr::Writa
ble)) + "/device_models.json";</td><td> </td><td class="right">       QString deviceModelsJsonPath = StelFileMgr::findFile("modules/Telesc
opeControl", (StelFileMgr::Flags)(StelFileMgr::Directory|StelFileMgr::Writa
ble)) + "/device_models.json";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!QFileInfo(deviceModelsJsonPath).exists())</td><td> </td><td class="right">       if(!QFileInfo(deviceModelsJsonPath).exists())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(!restoreDeviceModelsListTo(deviceModelsJsonPath))</td><td> </td><td class="right">               if(!restoreDeviceModelsListTo(deviceModelsJsonPath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "TelescopeControl: Unable to find" &lt;&lt; 
deviceModelsJsonPath;</td><td> </td><td class="right">                       qWarning() &lt;&lt; "TelescopeControl: Unable to find" &lt;&lt; 
deviceModelsJsonPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       useDefaultList = true;</td><td> </td><td class="right">                       useDefaultList = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l20" /><small>skipping to change at</small><em> line 1306</em></th><th> </th><th><a name="part-r20" /><small>skipping to change at</small><em> line 1413</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Compile a list of the available telescope server executables</td><td> </td><td class="right">       //Compile a list of the available telescope server executables</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       loadTelescopeServerExecutables();</td><td> </td><td class="right">       loadTelescopeServerExecutables();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(telescopeServers.isEmpty())</td><td> </td><td class="right">       if(telescopeServers.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //deviceModels = QHash&lt;QString, DeviceModel&gt;();</td><td> </td><td class="right">               //deviceModels = QHash&lt;QString, DeviceModel&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //return;</td><td> </td><td class="right">               //return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0103" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qWarning() &lt;&lt; "TelescopeControl: <span class="delete">No external telescope serve
rs found, trying to use embedded servers..</span>.";</td><td> </td><td class="rblock">               qWarning() &lt;&lt; "TelescopeControl: <span class="insert">Only embedded telescope ser
vers are available</span>.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Clear the list of device models - it may not be empty.</td><td> </td><td class="right">       //Clear the list of device models - it may not be empty.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       deviceModels.clear();</td><td> </td><td class="right">       deviceModels.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Cicle the list of telescope deifinitions</td><td> </td><td class="right">       //Cicle the list of telescope deifinitions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for(int i = 0; i &lt; deviceModelsList.size(); i++)</td><td> </td><td class="right">       for(int i = 0; i &lt; deviceModelsList.size(); i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QVariantMap model = deviceModelsList.at(i).toMap();</td><td> </td><td class="right">               QVariantMap model = deviceModelsList.at(i).toMap();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(model.isEmpty())</td><td> </td><td class="right">               if(model.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l21" /><small>skipping to change at</small><em> line 1335</em></th><th> </th><th><a name="part-r21" /><small>skipping to change at</small><em> line 1442</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(deviceModels.contains(name))</td><td> </td><td class="right">               if(deviceModels.contains(name))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "TelescopeControl: Skipping device mod
el: Duplicate name:" &lt;&lt; name;</td><td> </td><td class="right">                       qWarning() &lt;&lt; "TelescopeControl: Skipping device mod
el: Duplicate name:" &lt;&lt; name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       continue;</td><td> </td><td class="right">                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Telescope server</td><td> </td><td class="right">               //Telescope server</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString server = model.value("server").toString();</td><td> </td><td class="right">               QString server = model.value("server").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0104" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               bool useExecutable = <span class="delete">true;</span></td><td> </td><td class="rblock">               <span class="insert">//The default behaviour is to use embedded servers:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               bool useExecutable = <span class="insert">false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(server.isEmpty())</td><td> </td><td class="right">               if(server.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0105" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//TODO: Add warning</span></td><td> </td><td class="rblock">                       <span class="insert">qWarning() &lt;&lt; "TelescopeControl: Skipping device mod
el: No server specified for" &lt;&lt; name;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       continue;</td><td> </td><td class="right">                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0106" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if(<span class="delete">!telescopeServers.contains(server) || !useServerExecutabl
</span>es)</td><td> </td><td class="rblock">               if(<span class="insert">useServerExecutabl</span>es)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0107" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if(<span class="delete">EMBEDDED_TELESCOPE_SERVERS</span>.contains(server))</td><td> </td><td class="rblock">                       if(<span class="insert">telescopeServers</span>.contains(server))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0108" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               qDebug() &lt;&lt; "TelescopeControl: Using <span class="delete">embedde</span></td><td> </td><td class="rblock">                               qDebug() &lt;&lt; "TelescopeControl: Using <span class="insert">telesco</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">d</span> telescope server for" &lt;&lt; name;</td><td> </td><td class="rblock"><span class="insert">pe server executable for" &lt;&lt; name;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               useExecutable = true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       else if(EMBEDDED_TELESCOPE_SERVERS.contains(server))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "TelescopeControl: No external</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"> telescope server <span class="insert">executable found</span> for" <span class="insert">&lt;&lt; name;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "TelescopeControl: Using embed</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ded telescope server" &lt;&lt; server &lt;&lt; "for"</span> &lt;&lt; name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               useExecutable = false;</td><td> </td><td class="right">                               useExecutable = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0109" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               qWarning() &lt;&lt; "TelescopeControl: Skipping de
vice model: No server<span class="delete"> found:" &lt;&lt; server</span>;</td><td> </td><td class="rblock">                               qWarning() &lt;&lt; "TelescopeControl: Skipping de
vice model: No server<span class="insert">" &lt;&lt; server &lt;&lt; "found for" &lt;&lt; name</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0110" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if(!EMBEDDED_TELESCOPE_SERVERS.contains(server))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "TelescopeControl: Skipping de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">vice model: No server" &lt;&lt; server &lt;&lt; "found for" &lt;&lt; name;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       //else: everything is OK, using embedded server</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Description and default connection delay</td><td> </td><td class="right">               //Description and default connection delay</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString description = model.value("description", "No descrip
tion is available.").toString();</td><td> </td><td class="right">               QString description = model.value("description", "No descrip
tion is available.").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int delay = model.value("default_delay", DEFAULT_DELAY).toIn
t();</td><td> </td><td class="right">               int delay = model.value("default_delay", DEFAULT_DELAY).toIn
t();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Add this to the main list</td><td> </td><td class="right">               //Add this to the main list</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               DeviceModel newDeviceModel = {name, description, server, del
ay, useExecutable};</td><td> </td><td class="right">               DeviceModel newDeviceModel = {name, description, server, del
ay, useExecutable};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               deviceModels.insert(name, newDeviceModel);</td><td> </td><td class="right">               deviceModels.insert(name, newDeviceModel);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0111" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">qDebug() &lt;&lt; "TelescopeControl: Adding device model:" &lt;&lt; name
</span> &lt;&lt; description &lt;&lt; server &lt;&lt; delay;</td><td> </td><td class="rblock">               <span class="insert">//qDebug() &lt;&lt; "TelescopeControl: Adding device model:" &lt;&lt; na
me</span> &lt;&lt; description &lt;&lt; server &lt;&lt; delay;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const QHash&lt;QString, DeviceModel&gt;&amp; TelescopeControl::getDeviceModels()</td><td> </td><td class="right">const QHash&lt;QString, DeviceModel&gt;&amp; TelescopeControl::getDeviceModels()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return deviceModels;</td><td> </td><td class="right">       return deviceModels;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0112" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QHash&lt;int, QString&gt; TelescopeControl::getConnectedClientsNames()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QHash&lt;int, QString&gt; connectedClientsNames;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (telescopeClients.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return connectedClientsNames;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       foreach (const int slotNumber, telescopeClients.keys())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (telescopeClients.value(slotNumber)-&gt;isConnected())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       connectedClientsNames.insert(slotNumber, telescopeCl</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ients.value(slotNumber)-&gt;getNameI18n());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return connectedClientsNames;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::restoreDeviceModelsListTo(QString deviceModelsListPa
th)</td><td> </td><td class="right">bool TelescopeControl::restoreDeviceModelsListTo(QString deviceModelsListPa
th)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile defaultFile(":/telescopeControl/device_models.json");</td><td> </td><td class="right">       QFile defaultFile(":/telescopeControl/device_models.json");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!defaultFile.copy(deviceModelsListPath))</td><td> </td><td class="right">       if (!defaultFile.copy(deviceModelsListPath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "TelescopeControl: Unable to copy the default 
device models list to" &lt;&lt; deviceModelsListPath;</td><td> </td><td class="right">               qWarning() &lt;&lt; "TelescopeControl: Unable to copy the default 
device models list to" &lt;&lt; deviceModelsListPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile newCopy(deviceModelsListPath);</td><td> </td><td class="right">       QFile newCopy(deviceModelsListPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       newCopy.setPermissions(newCopy.permissions() | QFile::WriteOwner);</td><td> </td><td class="right">       newCopy.setPermissions(newCopy.permissions() | QFile::WriteOwner);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "TelescopeControl: The default device models list has be
en copied to" &lt;&lt; deviceModelsListPath;</td><td> </td><td class="right">       qDebug() &lt;&lt; "TelescopeControl: The default device models list has be
en copied to" &lt;&lt; deviceModelsListPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0113" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">const <span class="delete">QString&amp; TelescopeControl::getModuleStyleSheet(const QString&amp; styleMo
deNam</span>e)</td><td> </td><td class="rblock">const <span class="insert">StelStyle TelescopeControl::getModuleStyleSheet(const StelStyle&amp; styl
</span>e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0114" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return <span class="delete">moduleStyleSheet[styleModeName];</span></td><td> </td><td class="rblock">       <span class="insert">StelStyle pluginStyle(style);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (style.confSectionName == "color")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               pluginStyle.qtStyleSheet.append(*normalStyleSheet);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               pluginStyle.qtStyleSheet.append(*nightStyleSheet);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       return <span class="insert">pluginStyle;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const QString&amp; TelescopeControl::getServerExecutablesDirectoryPath()</td><td> </td><td class="right">const QString&amp; TelescopeControl::getServerExecutablesDirectoryPath()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return serverExecutablesDirectoryPath;</td><td> </td><td class="right">       return serverExecutablesDirectoryPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::setServerExecutablesDirectoryPath(const QString&amp; new
Path)</td><td> </td><td class="right">bool TelescopeControl::setServerExecutablesDirectoryPath(const QString&amp; new
Path)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Reuse code.</td><td> </td><td class="right">       //TODO: Reuse code.</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 114 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>245 lines changed or deleted</i></th><th><i> </i></th><th><i>436 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
