<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelSphereGeometry.hpp - StelSphereGeometry.hpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelSphereGeometry.hpp&nbsp;</th><th> </th><th>&nbsp;StelSphereGeometry.hpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 140</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 140</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @enum SphericalRegionType define types for all supported regions
.</td><td> </td><td class="right">       //! @enum SphericalRegionType define types for all supported regions
.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       enum SphericalRegionType</td><td> </td><td class="right">       enum SphericalRegionType</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Point = 0,</td><td> </td><td class="right">               Point = 0,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Cap = 1,</td><td> </td><td class="right">               Cap = 1,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               AllSky = 2,</td><td> </td><td class="right">               AllSky = 2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Polygon = 3,</td><td> </td><td class="right">               Polygon = 3,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ConvexPolygon = 4,</td><td> </td><td class="right">               ConvexPolygon = 4,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               Empty = <span class="delete">5</span></td><td> </td><td class="rblock">               Empty = <span class="insert">5,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               Invalid = 6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual ~SphericalRegion() {;}</td><td> </td><td class="right">       virtual ~SphericalRegion() {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionType getType() const = 0;</td><td> </td><td class="right">       virtual SphericalRegionType getType() const = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Return the octahedron contour representation of the polygon.</td><td> </td><td class="right">       //! Return the octahedron contour representation of the polygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! It can be used for safe computation of intersection/union in the
 general case.</td><td> </td><td class="right">       //! It can be used for safe computation of intersection/union in the
 general case.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual OctahedronPolygon getOctahedronPolygon() const =0;</td><td> </td><td class="right">       virtual OctahedronPolygon getOctahedronPolygon() const =0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 202</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 203</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Returns whether a SphericalRegion is contained into this region.</td><td> </td><td class="right">       //! Returns whether a SphericalRegion is contained into this region.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! A default potentially very slow implementation is provided for e
ach cases.</td><td> </td><td class="right">       //! A default potentially very slow implementation is provided for e
ach cases.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool contains(const SphericalRegion* r) const;</td><td> </td><td class="right">       bool contains(const SphericalRegion* r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool contains(const SphericalRegionP r) const {return contains(r.dat
a());}</td><td> </td><td class="right">       bool contains(const SphericalRegionP r) const {return contains(r.dat
a());}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const Vec3d&amp; p) const {return getOctahedronPol
ygon().contains(p);}</td><td> </td><td class="right">       virtual bool contains(const Vec3d&amp; p) const {return getOctahedronPol
ygon().contains(p);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalCap&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalCap&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPoint&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalPoint&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const AllSkySphericalRegion&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const AllSkySphericalRegion&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool contains(const EmptySphericalRegion&amp;<span class="delete"> r</span>) const {return false;}</td><td> </td><td class="rblock">       bool contains(const EmptySphericalRegion&amp;) const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Returns whether a SphericalRegion intersects with this region.</td><td> </td><td class="right">       //! Returns whether a SphericalRegion intersects with this region.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! A default potentially very slow implementation is provided for e
ach cases.</td><td> </td><td class="right">       //! A default potentially very slow implementation is provided for e
ach cases.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool intersects(const SphericalRegion* r) const;</td><td> </td><td class="right">       bool intersects(const SphericalRegion* r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool intersects(const SphericalRegionP r) const {return intersects(r
.data());}</td><td> </td><td class="right">       bool intersects(const SphericalRegionP r) const {return intersects(r
.data());}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool intersects(const Vec3d&amp; p) const {return contains(p);}</td><td> </td><td class="right">       bool intersects(const Vec3d&amp; p) const {return contains(p);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalCap&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalCap&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPoint&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalPoint&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const AllSkySphericalRegion&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const AllSkySphericalRegion&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool intersects(const EmptySphericalRegion&amp;<span class="delete"> r</span>) const {return false;}</td><td> </td><td class="rblock">       bool intersects(const EmptySphericalRegion&amp;) const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Return a new SphericalRegion consisting of the intersection of t
his and the given region.</td><td> </td><td class="right">       //! Return a new SphericalRegion consisting of the intersection of t
his and the given region.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! A default potentially very slow implementation is provided for e
ach cases.</td><td> </td><td class="right">       //! A default potentially very slow implementation is provided for e
ach cases.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalRegionP getIntersection(const SphericalRegion* r) const;</td><td> </td><td class="right">       SphericalRegionP getIntersection(const SphericalRegion* r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalRegionP getIntersection(const SphericalRegionP r) const {re
turn getIntersection(r.data());}</td><td> </td><td class="right">       SphericalRegionP getIntersection(const SphericalRegionP r) const {re
turn getIntersection(r.data());}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionP getIntersection(const SphericalPolygon&amp; r) 
const;</td><td> </td><td class="right">       virtual SphericalRegionP getIntersection(const SphericalPolygon&amp; r) 
const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionP getIntersection(const SphericalConvexPolygo
n&amp; r) const;</td><td> </td><td class="right">       virtual SphericalRegionP getIntersection(const SphericalConvexPolygo
n&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionP getIntersection(const SphericalCap&amp; r) cons
t;</td><td> </td><td class="right">       virtual SphericalRegionP getIntersection(const SphericalCap&amp; r) cons
t;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionP getIntersection(const SphericalPoint&amp; r) co
nst;</td><td> </td><td class="right">       virtual SphericalRegionP getIntersection(const SphericalPoint&amp; r) co
nst;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionP getIntersection(const AllSkySphericalRegion
&amp; r) const;</td><td> </td><td class="right">       virtual SphericalRegionP getIntersection(const AllSkySphericalRegion
&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 295</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 296</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool isEmpty() const {return d&gt;=1.;}</td><td> </td><td class="right">       virtual bool isEmpty() const {return d&gt;=1.;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Return a point located inside the SphericalCap.</td><td> </td><td class="right">       //! Return a point located inside the SphericalCap.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual Vec3d getPointInside() const {return n;}</td><td> </td><td class="right">       virtual Vec3d getPointInside() const {return n;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Return itself.</td><td> </td><td class="right">       //! Return itself.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalCap getBoundingCap() const {return *this;}</td><td> </td><td class="right">       virtual SphericalCap getBoundingCap() const {return *this;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Contain and intersect</td><td> </td><td class="right">       // Contain and intersect</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const Vec3d &amp;v) const {Q_ASSERT(d==0 || std::f
abs(v.lengthSquared()-1.)&lt;0.0000001);return (v*n&gt;=d);}</td><td> </td><td class="right">       virtual bool contains(const Vec3d &amp;v) const {Q_ASSERT(d==0 || std::f
abs(v.lengthSquared()-1.)&lt;0.0000001);return (v*n&gt;=d);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       virtual bool contains(const Vec3f &amp;v) const {Q_ASSERT(d==0 || std::f
abs(v.lengthSquared()-1.f)&lt;0.0000001f);return (v[0]*n[0]+v[1]*n[1]+v[2]*n[2
]&gt;=d);}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalCap&amp; h) const</td><td> </td><td class="right">       virtual bool contains(const SphericalCap&amp; h) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double a = n*h.n-d*h.d;</td><td> </td><td class="right">               const double a = n*h.n-d*h.d;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return d&lt;=h.d &amp;&amp; ( a&gt;=1. || (a&gt;=0. &amp;&amp; a*a &gt;= (1.-d*d)*(1.-h.
d*h.d)));</td><td> </td><td class="right">               return d&lt;=h.d &amp;&amp; ( a&gt;=1. || (a&gt;=0. &amp;&amp; a*a &gt;= (1.-d*d)*(1.-h.
d*h.d)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const AllSkySphericalRegion&amp;<span class="delete"> r) const {return 
d&lt;</span>=-1;}</td><td> </td><td class="rblock">       virtual bool contains(const AllSkySphericalRegion&amp;<span class="insert">) const {return d&lt;
</span>=-1;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Returns whether a SphericalCap intersects with this one.</td><td> </td><td class="right">       //! Returns whether a SphericalCap intersects with this one.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! I managed to make it without sqrt or acos, so it is very fast!</td><td> </td><td class="right">       //! I managed to make it without sqrt or acos, so it is very fast!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @see http://f4bien.blogspot.com/2009/05/spherical-geometry-optim
isations.html for detailed explanations.</td><td> </td><td class="right">       //! @see http://f4bien.blogspot.com/2009/05/spherical-geometry-optim
isations.html for detailed explanations.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalCap&amp; h) const</td><td> </td><td class="right">       virtual bool intersects(const SphericalCap&amp; h) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double a = d*h.d - n*h.n;</td><td> </td><td class="right">               const double a = d*h.d - n*h.n;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return d+h.d&lt;=0. || a&lt;=0. || (a&lt;=1. &amp;&amp; a*a &lt;= (1.-d*d)*(1.-h
.d*h.d));</td><td> </td><td class="right">               return d+h.d&lt;=0. || a&lt;=0. || (a&lt;=1. &amp;&amp; a*a &lt;= (1.-d*d)*(1.-h
.d*h.d));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="delete"> poly) const {re
turn </span>d&lt;=1.;}</td><td> </td><td class="rblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="insert">) const {return 
</span>d&lt;=1.;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is {"type": "CAP", "center": [ra, dec], "radius": rad
ius}, with ra dec in degree in ICRS frame</td><td> </td><td class="right">       //! The format is {"type": "CAP", "center": [ra, dec], "radius": rad
ius}, with ra dec in degree in ICRS frame</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! and radius in degree (between 0 and 180 deg)</td><td> </td><td class="right">       //! and radius in degree (between 0 and 180 deg)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; n &lt;&lt; d;}</td><td> </td><td class="right">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; n &lt;&lt; d;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ////////////////////////////////////////////////////////////////////</td><td> </td><td class="right">       ////////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Methods specific to SphericalCap</td><td> </td><td class="right">       // Methods specific to SphericalCap</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 425</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 427</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool isEmpty() const {return false;}</td><td> </td><td class="right">       virtual bool isEmpty() const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual Vec3d getPointInside() const {return n;}</td><td> </td><td class="right">       virtual Vec3d getPointInside() const {return n;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalCap getBoundingCap() const {return SphericalCap(n, 
1);}</td><td> </td><td class="right">       virtual SphericalCap getBoundingCap() const {return SphericalCap(n, 
1);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is {"type": "POINT", "pos": [ra, dec]}, with ra dec i
n degree in ICRS frame.</td><td> </td><td class="right">       //! The format is {"type": "POINT", "pos": [ra, dec]}, with ra dec i
n degree in ICRS frame.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; n;}</td><td> </td><td class="right">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; n;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Contain and intersect</td><td> </td><td class="right">       // Contain and intersect</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const Vec3d&amp; p) const {return n==p;}</td><td> </td><td class="right">       virtual bool contains(const Vec3d&amp; p) const {return n==p;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalPolygon&amp; r)</span> const {return <span class="delete">false</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalPolygon&amp;)</span> const {return <span class="insert">false;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;}</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalConvexPolygon&amp;)</span> const {return <span class="insert">f</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalConvexPolygon&amp; r)</span> const {return</td><td> </td><td class="rblock"><span class="insert">alse;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> <span class="delete">false;}</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalCap&amp;)</span> const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalCap&amp; c)</span> const {return false;}</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPoint&amp; r) const {return n==r.n;
}</td><td> </td><td class="right">       virtual bool contains(const SphericalPoint&amp; r) const {return n==r.n;
}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">AllSkySphericalRegion&amp; r)</span> const {return </td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">AllSkySphericalRegion&amp;)</span> const {return <span class="insert">fa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">false;}</span></td><td> </td><td class="rblock"><span class="insert">lse;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalPolygon&amp; r)</span> const;</td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalPolygon&amp;)</span> const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalConvexPolygon&amp; r)</span> const;</td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalConvexPolygon&amp;)</span> const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalCap&amp; r) const {return r.conta
ins(n);}</td><td> </td><td class="right">       virtual bool intersects(const SphericalCap&amp; r) const {return r.conta
ins(n);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPoint&amp; r) const {return n==r.
n;}</td><td> </td><td class="right">       virtual bool intersects(const SphericalPoint&amp; r) const {return n==r.
n;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="delete"> r) const {retur
n </span>true;}</td><td> </td><td class="rblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="insert">) const {return 
</span>true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Deserialize the region. This method must allow as fast as possib
le deserialization.</td><td> </td><td class="right">       //! Deserialize the region. This method must allow as fast as possib
le deserialization.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static SphericalRegionP deserialize(QDataStream&amp; in);</td><td> </td><td class="right">       static SphericalRegionP deserialize(QDataStream&amp; in);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The unit vector of the point direction.</td><td> </td><td class="right">       //! The unit vector of the point direction.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d n;</td><td> </td><td class="right">       Vec3d n;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! @class AllSkySphericalRegion</td><td> </td><td class="right">//! @class AllSkySphericalRegion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Special SphericalRegion for the whole sphere.</td><td> </td><td class="right">//! Special SphericalRegion for the whole sphere.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 459</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 461</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionType getType() const {return SphericalRegion:
:AllSky;}</td><td> </td><td class="right">       virtual SphericalRegionType getType() const {return SphericalRegion:
:AllSky;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual OctahedronPolygon getOctahedronPolygon() const {return Octah
edronPolygon::getAllSkyOctahedronPolygon();}</td><td> </td><td class="right">       virtual OctahedronPolygon getOctahedronPolygon() const {return Octah
edronPolygon::getAllSkyOctahedronPolygon();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual double getArea() const {return 4.*M_PI;}</td><td> </td><td class="right">       virtual double getArea() const {return 4.*M_PI;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool isEmpty() const {return false;}</td><td> </td><td class="right">       virtual bool isEmpty() const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual Vec3d getPointInside() const {return Vec3d(1,0,0);}</td><td> </td><td class="right">       virtual Vec3d getPointInside() const {return Vec3d(1,0,0);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalCap getBoundingCap() const {return SphericalCap(Vec
3d(1,0,0), -2);}</td><td> </td><td class="right">       virtual SphericalCap getBoundingCap() const {return SphericalCap(Vec
3d(1,0,0), -2);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is {"type": "ALLSKY"}</td><td> </td><td class="right">       //! The format is {"type": "ALLSKY"}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual void serialize(QDataStream&amp;<span class="delete"> out</span>) const {;}</td><td> </td><td class="rblock">       virtual void serialize(QDataStream&amp;) const {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Contain and intersect</td><td> </td><td class="right">       // Contain and intersect</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">Vec3d&amp; p)</span> const {return true;}</td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">Vec3d&amp;)</span> const {return true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalPolygon&amp; r)</span> const {return <span class="delete">true;</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalPolygon&amp;)</span> const {return <span class="insert">true;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalConvexPolygon&amp;)</span> const {return <span class="insert">t</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalConvexPolygon&amp; r)</span> const {return</td><td> </td><td class="rblock"><span class="insert">rue;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> <span class="delete">true;}</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalCap&amp;)</span> const {return true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalCap&amp; r)</span> const {return true;}</td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalPoint&amp;)</span> const {return true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalPoint&amp; r)</span> const {return true;}</td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">AllSkySphericalRegion&amp;)</span> const {return <span class="insert">tr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">AllSkySphericalRegion&amp; r)</span> const {return </td><td> </td><td class="rblock"><span class="insert">ue;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">true;}</span></td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalPolygon&amp;)</span> const {return <span class="insert">true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalPolygon&amp; r)</span> const {return <span class="delete">tru</span></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e;}</span></td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalConvexPolygon&amp;)</span> const <span class="insert">{return</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalConvexPolygon&amp; r)</span> const <span class="delete">{retu</span></td><td> </td><td class="rblock"> true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rn</span> true;}</td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalCap&amp;)</span> const {return true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalCap&amp; r)</span> const {return true;}</td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalPoint&amp;)</span> const {return <span class="insert">true;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalPoint&amp; r)</span> const {return <span class="delete">true;</span></td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">AllSkySphericalRegion&amp;)</span> const <span class="insert">{return</span> </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock">true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">AllSkySphericalRegion&amp; r)</span> const <span class="delete">{retur</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">n</span> true;}</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static const SphericalRegionP staticInstance;</td><td> </td><td class="right">       static const SphericalRegionP staticInstance;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! @class AllSkySphericalRegion</td><td> </td><td class="right">//! @class AllSkySphericalRegion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Special SphericalRegion for the whole sphere.</td><td> </td><td class="right">//! Special SphericalRegion for the whole sphere.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class EmptySphericalRegion : public SphericalRegion</td><td> </td><td class="right">class EmptySphericalRegion : public SphericalRegion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Avoid name hiding when overloading the virtual methods.</td><td> </td><td class="right">       // Avoid name hiding when overloading the virtual methods.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 501</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 503</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionType getType() const {return SphericalRegion:
:Empty;}</td><td> </td><td class="right">       virtual SphericalRegionType getType() const {return SphericalRegion:
:Empty;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual OctahedronPolygon getOctahedronPolygon() const {return Octah
edronPolygon::getEmptyOctahedronPolygon();}</td><td> </td><td class="right">       virtual OctahedronPolygon getOctahedronPolygon() const {return Octah
edronPolygon::getEmptyOctahedronPolygon();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual double getArea() const {return 0.;}</td><td> </td><td class="right">       virtual double getArea() const {return 0.;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool isEmpty() const {return true;}</td><td> </td><td class="right">       virtual bool isEmpty() const {return true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual Vec3d getPointInside() const {return Vec3d(1,0,0);}</td><td> </td><td class="right">       virtual Vec3d getPointInside() const {return Vec3d(1,0,0);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalCap getBoundingCap() const {return SphericalCap(Vec
3d(1,0,0), 2);}</td><td> </td><td class="right">       virtual SphericalCap getBoundingCap() const {return SphericalCap(Vec
3d(1,0,0), 2);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is {"type": "EMPTY"}</td><td> </td><td class="right">       //! The format is {"type": "EMPTY"}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual void serialize(QDataStream&amp;<span class="delete"> out</span>) const {;}</td><td> </td><td class="rblock">       virtual void serialize(QDataStream&amp;) const {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Contain and intersect</td><td> </td><td class="right">       // Contain and intersect</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">Vec3d&amp; p)</span> const {return false;}</td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">Vec3d&amp;)</span> const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalPolygon&amp; r)</span> const {return <span class="delete">false</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalPolygon&amp;)</span> const {return <span class="insert">false;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;}</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalConvexPolygon&amp;)</span> const {return <span class="insert">f</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalConvexPolygon&amp; r)</span> const {return</td><td> </td><td class="rblock"><span class="insert">alse;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> <span class="delete">false;}</span></td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalCap&amp;)</span> const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalCap&amp; r)</span> const {return false;}</td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">SphericalPoint&amp;)</span> const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">SphericalPoint&amp; r)</span> const {return false;}</td><td> </td><td class="rblock">       virtual bool contains(const <span class="insert">AllSkySphericalRegion&amp;)</span> const {return <span class="insert">fa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const <span class="delete">AllSkySphericalRegion&amp; r)</span> const {return </td><td> </td><td class="rblock"><span class="insert">lse;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">false;}</span></td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalPolygon&amp;)</span> const {return <span class="insert">false</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalPolygon&amp; r)</span> const {return <span class="delete">fal</span></td><td> </td><td class="rblock"><span class="insert">;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">se;}</span></td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalConvexPolygon&amp;)</span> const <span class="insert">{return</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalConvexPolygon&amp; r)</span> const <span class="delete">{retu</span></td><td> </td><td class="rblock"> false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rn</span> false;}</td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalCap&amp;)</span> const {return false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalCap&amp; r)</span> const {return false;}</td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">SphericalPoint&amp;)</span> const {return <span class="insert">false;}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">SphericalPoint&amp; r)</span> const {return <span class="delete">false</span></td><td> </td><td class="rblock">       virtual bool intersects(const <span class="insert">AllSkySphericalRegion&amp;)</span> const <span class="insert">{return</span> </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;}</span></td><td> </td><td class="rblock">false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const <span class="delete">AllSkySphericalRegion&amp; r)</span> const <span class="delete">{retur</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">n</span> false;}</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static const SphericalRegionP staticInstance;</td><td> </td><td class="right">       static const SphericalRegionP staticInstance;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! @class SphericalPolygonBase</td><td> </td><td class="right">//! @class SphericalPolygonBase</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Abstract class defining default implementations for some spherical geom
etry methods.</td><td> </td><td class="right">//! Abstract class defining default implementations for some spherical geom
etry methods.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! All methods are reentrant.</td><td> </td><td class="right">//! All methods are reentrant.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class SphericalPolygon : public SphericalRegion</td><td> </td><td class="right">class SphericalPolygon : public SphericalRegion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 545</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 547</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Constructor from one contour.</td><td> </td><td class="right">       //! Constructor from one contour.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalPolygon(const QVector&lt;Vec3d&gt;&amp; contour) : octahedronPolygon(
contour) {;}</td><td> </td><td class="right">       SphericalPolygon(const QVector&lt;Vec3d&gt;&amp; contour) : octahedronPolygon(
contour) {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalPolygon(const OctahedronPolygon&amp; octContour) : octahedronPo
lygon(octContour) {;}</td><td> </td><td class="right">       SphericalPolygon(const OctahedronPolygon&amp; octContour) : octahedronPo
lygon(octContour) {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalPolygon(const QList&lt;OctahedronPolygon&gt;&amp; octContours) : octa
hedronPolygon(octContours) {;}</td><td> </td><td class="right">       SphericalPolygon(const QList&lt;OctahedronPolygon&gt;&amp; octContours) : octa
hedronPolygon(octContours) {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionType getType() const {return SphericalRegion:
:Polygon;}</td><td> </td><td class="right">       virtual SphericalRegionType getType() const {return SphericalRegion:
:Polygon;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual OctahedronPolygon getOctahedronPolygon() const {return octah
edronPolygon;}</td><td> </td><td class="right">       virtual OctahedronPolygon getOctahedronPolygon() const {return octah
edronPolygon;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is</td><td> </td><td class="right">       //! The format is</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! @code<span class="delete"> {"worldCoords": [[[ra,dec], [ra,dec], [ra,dec], [ra,dec]],
 [[ra,dec], [ra,dec], [ra,dec]],[...]]} </span>@endcode</td><td> </td><td class="rblock">       //! @code<span class="insert">["worldCoords": [[[ra,dec], [ra,dec], [ra,dec], [ra,dec]], 
[[ra,dec], [ra,dec], [ra,dec]],[...]]]</span>@endcode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td> </td><td class="right">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual void serialize(QDataStream&amp; out) const;</td><td> </td><td class="right">       virtual void serialize(QDataStream&amp; out) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalCap getBoundingCap() const;</td><td> </td><td class="right">       virtual SphericalCap getBoundingCap() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const Vec3d&amp; p) const {return octahedronPolygo
n.contains(p);}</td><td> </td><td class="right">       virtual bool contains(const Vec3d&amp; p) const {return octahedronPolygo
n.contains(p);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPolygon&amp; r) const {return octah
edronPolygon.contains(r.octahedronPolygon);}</td><td> </td><td class="right">       virtual bool contains(const SphericalPolygon&amp; r) const {return octah
edronPolygon.contains(r.octahedronPolygon);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalCap&amp; r) const {return octahedro
nPolygon.contains(r.getOctahedronPolygon());}</td><td> </td><td class="right">       virtual bool contains(const SphericalCap&amp; r) const {return octahedro
nPolygon.contains(r.getOctahedronPolygon());}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPoint&amp; r) const {return octahed
ronPolygon.contains(r.n);}</td><td> </td><td class="right">       virtual bool contains(const SphericalPoint&amp; r) const {return octahed
ronPolygon.contains(r.n);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const AllSkySphericalRegion&amp; r) const {return 
octahedronPolygon.contains(r.getOctahedronPolygon());}</td><td> </td><td class="right">       virtual bool contains(const AllSkySphericalRegion&amp; r) const {return 
octahedronPolygon.contains(r.getOctahedronPolygon());}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPolygon&amp; r) const {return oct
ahedronPolygon.intersects(r.octahedronPolygon);}</td><td> </td><td class="right">       virtual bool intersects(const SphericalPolygon&amp; r) const {return oct
ahedronPolygon.intersects(r.octahedronPolygon);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalCap&amp; r) const {return r.inter
sects(*this);}</td><td> </td><td class="right">       virtual bool intersects(const SphericalCap&amp; r) const {return r.inter
sects(*this);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPoint&amp; r) const {return octah
edronPolygon.contains(r.n);}</td><td> </td><td class="right">       virtual bool intersects(const SphericalPoint&amp; r) const {return octah
edronPolygon.contains(r.n);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="delete"> r) const {retur
n </span>!isEmpty();}</td><td> </td><td class="rblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="insert">) const {return 
</span>!isEmpty();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalRegionP getIntersection(const SphericalPoint&amp; r) co
nst {return contains(r.n) ? SphericalRegionP(new SphericalPoint(r)) : Empty
SphericalRegion::staticInstance;}</td><td> </td><td class="right">       virtual SphericalRegionP getIntersection(const SphericalPoint&amp; r) co
nst {return contains(r.n) ? SphericalRegionP(new SphericalPoint(r)) : Empty
SphericalRegion::staticInstance;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual SphericalRegionP getIntersection(const AllSkySphericalRegion
&amp; <span class="delete">r) const {return SphericalRegionP(new SphericalPolygon(octahedronPolygon)
)</span>;}</td><td> </td><td class="rblock">       virtual SphericalRegionP getIntersection(const AllSkySphericalRegion
&amp; <span class="insert">) const {return SphericalRegionP(new SphericalPolygon(octahedronPolygon))
</span>;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual SphericalRegionP getUnion(const <span class="delete">SphericalPoint&amp; r)</span> const <span class="delete">{re</span></td><td> </td><td class="rblock">       virtual SphericalRegionP getUnion(const <span class="insert">SphericalPoint&amp;)</span> const <span class="insert">{retu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">turn</span> SphericalRegionP(new SphericalPolygon(octahedronPolygon));}</td><td> </td><td class="rblock"><span class="insert">rn</span> SphericalRegionP(new SphericalPolygon(octahedronPolygon));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual SphericalRegionP getUnion(const <span class="delete">EmptySphericalRegion&amp; r) con</span></td><td> </td><td class="rblock">       virtual SphericalRegionP getUnion(const <span class="insert">EmptySphericalRegion&amp;) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">st</span> {return SphericalRegionP(new SphericalPolygon(octahedronPolygon));}</td><td> </td><td class="rblock"> {return SphericalRegionP(new SphericalPolygon(octahedronPolygon));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual SphericalRegionP getSubtraction(const <span class="delete">SphericalPoint&amp; r) con</span></td><td> </td><td class="rblock">       virtual SphericalRegionP getSubtraction(const <span class="insert">SphericalPoint&amp;) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">st</span> {return SphericalRegionP(new SphericalPolygon(octahedronPolygon));}</td><td> </td><td class="rblock"> {return SphericalRegionP(new SphericalPolygon(octahedronPolygon));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual SphericalRegionP getSubtraction(const <span class="delete">EmptySphericalRegion&amp; </span></td><td> </td><td class="rblock">       virtual SphericalRegionP getSubtraction(const <span class="insert">EmptySphericalRegion&amp;)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">r)</span> const {return SphericalRegionP(new <span class="delete">SphericalPolygon(octahedronPolygon));</span></td><td> </td><td class="rblock"> const {return SphericalRegionP(new <span class="insert">SphericalPolygon(octahedronPolygon));}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ////////////////////////////////////////////////////////////////////</td><td> </td><td class="right">       ////////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Methods specific to SphericalPolygon</td><td> </td><td class="right">       // Methods specific to SphericalPolygon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Set the contours defining the SphericalPolygon.</td><td> </td><td class="right">       //! Set the contours defining the SphericalPolygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param contours the list of contours defining the polygon area. 
The contours are combined using</td><td> </td><td class="right">       //! @param contours the list of contours defining the polygon area. 
The contours are combined using</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! the positive winding rule, meaning that the polygon is the union
 of the positive contours minus the negative ones.</td><td> </td><td class="right">       //! the positive winding rule, meaning that the polygon is the union
 of the positive contours minus the negative ones.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setContours(const QVector&lt;QVector&lt;Vec3d&gt; &gt;&amp; contours) {octahedr
onPolygon = OctahedronPolygon(contours);}</td><td> </td><td class="right">       void setContours(const QVector&lt;QVector&lt;Vec3d&gt; &gt;&amp; contours) {octahedr
onPolygon = OctahedronPolygon(contours);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Set a single contour defining the SphericalPolygon.</td><td> </td><td class="right">       //! Set a single contour defining the SphericalPolygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! @param contour<span class="delete">s</span> a contour defining the polygon area.</td><td> </td><td class="rblock">       //! @param contour a contour defining the polygon area.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setContour(const QVector&lt;Vec3d&gt;&amp; contour) {octahedronPolygon = 
OctahedronPolygon(contour);}</td><td> </td><td class="right">       void setContour(const QVector&lt;Vec3d&gt;&amp; contour) {octahedronPolygon = 
OctahedronPolygon(contour);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Return the list of closed contours defining the polygon boundari
es.</td><td> </td><td class="right">       //! Return the list of closed contours defining the polygon boundari
es.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVector&lt;QVector&lt;Vec3d&gt; &gt; getClosedOutlineContours() const {Q_ASSERT(
0); return QVector&lt;QVector&lt;Vec3d&gt; &gt;();}</td><td> </td><td class="right">       QVector&lt;QVector&lt;Vec3d&gt; &gt; getClosedOutlineContours() const {Q_ASSERT(
0); return QVector&lt;QVector&lt;Vec3d&gt; &gt;();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Deserialize the region. This method must allow as fast as possib
le deserialization.</td><td> </td><td class="right">       //! Deserialize the region. This method must allow as fast as possib
le deserialization.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static SphericalRegionP deserialize(QDataStream&amp; in);</td><td> </td><td class="right">       static SphericalRegionP deserialize(QDataStream&amp; in);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Create a new SphericalRegionP which is the union of all the pass
ed ones.</td><td> </td><td class="right">       //! Create a new SphericalRegionP which is the union of all the pass
ed ones.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static SphericalRegionP multiUnion(const QList&lt;SphericalRegionP&gt;&amp; re
gions);</td><td> </td><td class="right">       static SphericalRegionP multiUnion(const QList&lt;SphericalRegionP&gt;&amp; re
gions);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 630</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 632</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual OctahedronPolygon getOctahedronPolygon() const {return Octah
edronPolygon(contour);}</td><td> </td><td class="right">       virtual OctahedronPolygon getOctahedronPolygon() const {return Octah
edronPolygon(contour);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual StelVertexArray getFillVertexArray() const {return StelVerte
xArray(contour, StelVertexArray::TriangleFan);}</td><td> </td><td class="right">       virtual StelVertexArray getFillVertexArray() const {return StelVerte
xArray(contour, StelVertexArray::TriangleFan);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual StelVertexArray getOutlineVertexArray() const {return StelVe
rtexArray(contour, StelVertexArray::LineLoop);}</td><td> </td><td class="right">       virtual StelVertexArray getOutlineVertexArray() const {return StelVe
rtexArray(contour, StelVertexArray::LineLoop);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual double getArea() const;</td><td> </td><td class="right">       virtual double getArea() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool isEmpty() const {return contour.isEmpty();}</td><td> </td><td class="right">       virtual bool isEmpty() const {return contour.isEmpty();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual Vec3d getPointInside() const;</td><td> </td><td class="right">       virtual Vec3d getPointInside() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual SphericalCap getBoundingCap() const {return cachedBoundingCa
p;}</td><td> </td><td class="right">       virtual SphericalCap getBoundingCap() const {return cachedBoundingCa
p;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVector&lt;SphericalCap&gt; getBoundingSphericalCaps() const;</td><td> </td><td class="right">       QVector&lt;SphericalCap&gt; getBoundingSphericalCaps() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is</td><td> </td><td class="right">       //! The format is</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! @code<span class="delete"> {"type": "CVXPOLYGON", "worldCoords": [[[ra,dec], [ra,dec]
, [ra,dec], [ra,dec]], [[ra,dec], [ra,dec], [ra,dec]],[...]]} </span>@endcode</td><td> </td><td class="rblock">       //! @code<span class="insert">{"type": "CVXPOLYGON", "worldCoords": [[[ra,dec], [ra,dec],
 [ra,dec], [ra,dec]], [[ra,dec], [ra,dec], [ra,dec]],[...]]}</span>@endcode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td> </td><td class="right">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; contour;}</td><td> </td><td class="right">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; contour;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Contain and intersect</td><td> </td><td class="right">       // Contain and intersect</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const Vec3d&amp; p) const;</td><td> </td><td class="right">       virtual bool contains(const Vec3d&amp; p) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalCap&amp; r) const;</td><td> </td><td class="right">       virtual bool contains(const SphericalCap&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool contains(const SphericalPoint&amp; r) const {return contain
s(r.n);}</td><td> </td><td class="right">       virtual bool contains(const SphericalPoint&amp; r) const {return contain
s(r.n);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool contains(const AllSkySphericalRegion&amp;<span class="delete"> r) const {return 
fa</span>lse;}</td><td> </td><td class="rblock">       virtual bool contains(const AllSkySphericalRegion&amp;<span class="insert">) const {return fa
</span>lse;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalCap&amp; r) const {if (!cachedBou
ndingCap.intersects(r)) return false; return r.intersects(*this);}</td><td> </td><td class="right">       virtual bool intersects(const SphericalCap&amp; r) const {if (!cachedBou
ndingCap.intersects(r)) return false; return r.intersects(*this);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td> </td><td class="right">       virtual bool intersects(const SphericalConvexPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual bool intersects(const SphericalPoint&amp; r) const {return conta
ins(r.n);}</td><td> </td><td class="right">       virtual bool intersects(const SphericalPoint&amp; r) const {return conta
ins(r.n);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="delete"> r) const {retur
n </span>true;}</td><td> </td><td class="rblock">       virtual bool intersects(const AllSkySphericalRegion&amp;<span class="insert">) const {return 
</span>true;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ////////////////////////// TODO</td><td> </td><td class="right">       ////////////////////////// TODO</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getIntersection(const SphericalPolygon&amp; r) 
const;</td><td> </td><td class="right">//     virtual SphericalRegionP getIntersection(const SphericalPolygon&amp; r) 
const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getIntersection(const SphericalConvexPolygo
n&amp; r) const;</td><td> </td><td class="right">//     virtual SphericalRegionP getIntersection(const SphericalConvexPolygo
n&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getIntersection(const SphericalCap&amp; r) cons
t;</td><td> </td><td class="right">//     virtual SphericalRegionP getIntersection(const SphericalCap&amp; r) cons
t;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getIntersection(const SphericalPoint&amp; r) co
nst;</td><td> </td><td class="right">//     virtual SphericalRegionP getIntersection(const SphericalPoint&amp; r) co
nst;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getIntersection(const AllSkySphericalRegion
&amp; r) const;</td><td> </td><td class="right">//     virtual SphericalRegionP getIntersection(const AllSkySphericalRegion
&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getUnion(const SphericalPolygon&amp; r) const;</td><td> </td><td class="right">//     virtual SphericalRegionP getUnion(const SphericalPolygon&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getUnion(const SphericalConvexPolygon&amp; r) c
onst;</td><td> </td><td class="right">//     virtual SphericalRegionP getUnion(const SphericalConvexPolygon&amp; r) c
onst;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     virtual SphericalRegionP getUnion(const SphericalCap&amp; r) const;</td><td> </td><td class="right">//     virtual SphericalRegionP getUnion(const SphericalCap&amp; r) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 698</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 700</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Cache the bounding cap.</td><td> </td><td class="right">       //! Cache the bounding cap.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalCap cachedBoundingCap;</td><td> </td><td class="right">       SphericalCap cachedBoundingCap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Update the bounding cap from the vertex list.</td><td> </td><td class="right">       //! Update the bounding cap from the vertex list.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void updateBoundingCap();</td><td> </td><td class="right">       void updateBoundingCap();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Computes whether the passed points are all outside of at least o
ne SphericalCap defining the polygon boundary.</td><td> </td><td class="right">       //! Computes whether the passed points are all outside of at least o
ne SphericalCap defining the polygon boundary.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param thisContour the vertices defining the contour.</td><td> </td><td class="right">       //! @param thisContour the vertices defining the contour.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param nbThisContour nb of vertice of the contour.</td><td> </td><td class="right">       //! @param nbThisContour nb of vertice of the contour.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param points the points to test.</td><td> </td><td class="right">       //! @param points the points to test.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! @param <span class="delete">p</span>oints the number of points to test.</td><td> </td><td class="rblock">       //! @param <span class="insert">nbP</span>oints the number of points to test.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static bool areAllPointsOutsideOneSide(const Vec3d* thisContour, int
 nbThisContour, const Vec3d* points, int nbPoints);</td><td> </td><td class="right">       static bool areAllPointsOutsideOneSide(const Vec3d* thisContour, int
 nbThisContour, const Vec3d* points, int nbPoints);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Computes whether the passed points are all outside of at least o
ne SphericalCap defining the polygon boundary.</td><td> </td><td class="right">       //! Computes whether the passed points are all outside of at least o
ne SphericalCap defining the polygon boundary.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool areAllPointsOutsideOneSide(const QVector&lt;Vec3d&gt;&amp; points) const</td><td> </td><td class="right">       bool areAllPointsOutsideOneSide(const QVector&lt;Vec3d&gt;&amp; points) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return areAllPointsOutsideOneSide(contour.constData(), conto
ur.size(), points.constData(), points.size());</td><td> </td><td class="right">               return areAllPointsOutsideOneSide(contour.constData(), conto
ur.size(), points.constData(), points.size());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool containsConvexContour(const Vec3d* vertice, int nbVertex) const
;</td><td> </td><td class="right">       bool containsConvexContour(const Vec3d* vertice, int nbVertex) const
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 725</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 727</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @struct TextureVertex</td><td> </td><td class="right">       //! @struct TextureVertex</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! A container for 3D vertex + associated texture coordinates</td><td> </td><td class="right">       //! A container for 3D vertex + associated texture coordinates</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       struct TextureVertex</td><td> </td><td class="right">       struct TextureVertex</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d vertex;</td><td> </td><td class="right">               Vec3d vertex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec2f texCoord;</td><td> </td><td class="right">               Vec2f texCoord;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalTexturedPolygon() {;}</td><td> </td><td class="right">       SphericalTexturedPolygon() {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Constructor from a list of contours.</td><td> </td><td class="right">       //! Constructor from a list of contours.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       SphericalTexturedPolygon(const QVector&lt;QVector&lt;TextureVertex&gt; &gt;&amp; con
tours) {Q_ASSERT(0);}</td><td> </td><td class="rblock">       SphericalTexturedPolygon(const QVector&lt;QVector&lt;TextureVertex&gt; &gt;&amp; con
tours) {Q_<span class="insert">UNUSED(contours); Q_</span>ASSERT(0);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Constructor from one contour.</td><td> </td><td class="right">       //! Constructor from one contour.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       SphericalTexturedPolygon(const QVector&lt;TextureVertex&gt;&amp; contour) {Q_<span class="delete">A
</span>SSERT(0);}</td><td> </td><td class="rblock">       SphericalTexturedPolygon(const QVector&lt;TextureVertex&gt;&amp; contour) {Q_<span class="insert">U
NUSED(contour); Q_A</span>SSERT(0);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Return an openGL compatible array of texture coords to be used u
sing vertex arrays.</td><td> </td><td class="right">       //! Return an openGL compatible array of texture coords to be used u
sing vertex arrays.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual StelVertexArray getFillVertexArray() const {Q_ASSERT(0); ret
urn StelVertexArray();}</td><td> </td><td class="right">       virtual StelVertexArray getFillVertexArray() const {Q_ASSERT(0); ret
urn StelVertexArray();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is:</td><td> </td><td class="right">       //! The format is:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! <span class="delete">@code {"worldCoords":</span> [[[ra,dec], [ra,dec], [ra,dec], [ra,dec]],</td><td> </td><td class="rblock">       //! <span class="insert">@code{"worldCoords":</span> [[[ra,dec], [ra,dec], [ra,dec], [ra,dec]], </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> [[ra,dec], [ra,dec], [ra,dec]],[...]],</td><td> </td><td class="rblock">[[ra,dec], [ra,dec], [ra,dec]],[...]],</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! "textureCoords": [[[u,v],[u,v],[u,v],[u,v]], [[u,v],[u,v],[u,v]]</td><td> </td><td class="rblock">       //! "textureCoords": [[[u,v],[u,v],[u,v],[u,v]], [[u,v],[u,v],[u,v]]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">, <span class="delete">[...]]}</span></td><td> </td><td class="rblock">, <span class="insert">[...]]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! }@endcode</td><td> </td><td class="right">       //! }@endcode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! textureCoords is a list of texture coordinates in the u,v textur
e space (between 0 and 1).</td><td> </td><td class="right">       //! textureCoords is a list of texture coordinates in the u,v textur
e space (between 0 and 1).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td> </td><td class="right">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! There must be one texture coordinate for each vertex.</td><td> </td><td class="right">       //! There must be one texture coordinate for each vertex.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       virtual void serialize(QDataStream&amp; out) const {Q_<span class="delete">ASS</span>ERT(0);}</td><td> </td><td class="rblock">       virtual void serialize(QDataStream&amp; out) const {Q_<span class="insert">UNUSED(out); Q_ASS
</span>ERT(0);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ////////////////////////////////////////////////////////////////////</td><td> </td><td class="right">       ////////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Methods specific to SphericalTexturedPolygon</td><td> </td><td class="right">       // Methods specific to SphericalTexturedPolygon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Set the contours defining the SphericalPolygon.</td><td> </td><td class="right">       //! Set the contours defining the SphericalPolygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! @param contours the list of contours defining the polygon <span class="delete">area.</span></td><td> </td><td class="rblock">       //! @param contours the list of contours defining the polygon <span class="insert">area u</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //! @param windingRule</span> the winding <span class="delete">rule to use. Default value is Win</span></td><td> </td><td class="rblock"><span class="insert">sing</span> the <span class="insert">WindingPositive</span> winding <span class="insert">rule.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dingPositive, meaning that the</span></td><td> </td><td class="rblock">       void setContours(const QVector&lt;QVector&lt;TextureVertex&gt; &gt;&amp; contours) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //! polygon is the union of the positive contours minus the negative</span></td><td> </td><td class="rblock"><span class="insert">Q_UNUSED(contours);</span> Q_ASSERT(0);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> ones.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       void setContours(const QVector&lt;QVector&lt;TextureVertex&gt; &gt;&amp; contours) {</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Q_ASSERT(0);}</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Set a single contour defining the SphericalPolygon.</td><td> </td><td class="right">       //! Set a single contour defining the SphericalPolygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param contour a contour defining the polygon area.</td><td> </td><td class="right">       //! @param contour a contour defining the polygon area.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       void setContour(const QVector&lt;TextureVertex&gt;&amp; contour) {Q_<span class="delete">ASSERT(0);
</span>}</td><td> </td><td class="rblock">       void setContour(const QVector&lt;TextureVertex&gt;&amp; contour) {Q_<span class="insert">UNUSED(con
tour); Q_ASSERT(0);</span>}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">private:</td><td> </td><td class="right">private:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! A list of uv textures coordinates corresponding to the triangle 
vertices.</td><td> </td><td class="right">       //! A list of uv textures coordinates corresponding to the triangle 
vertices.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! There should be 1 uv position per vertex.</td><td> </td><td class="right">       //! There should be 1 uv position per vertex.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVector&lt;Vec2f&gt; textureCoords;</td><td> </td><td class="right">       QVector&lt;Vec2f&gt; textureCoords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Q_DECLARE_TYPEINFO(SphericalTexturedPolygon::TextureVertex, Q_PRIMITIVE_TYP</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">E);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! @class SphericalTexturedConvexPolygon</td><td> </td><td class="right">//! @class SphericalTexturedConvexPolygon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Extension of SphericalConvexPolygon for textured polygon.</td><td> </td><td class="right">//! Extension of SphericalConvexPolygon for textured polygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class SphericalTexturedConvexPolygon : public SphericalConvexPolygon</td><td> </td><td class="right">class SphericalTexturedConvexPolygon : public SphericalConvexPolygon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Default constructor.</td><td> </td><td class="right">       //! Default constructor.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalTexturedConvexPolygon() {;}</td><td> </td><td class="right">       SphericalTexturedConvexPolygon() {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Constructor from one contour.</td><td> </td><td class="right">       //! Constructor from one contour.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SphericalTexturedConvexPolygon(const QVector&lt;Vec3d&gt;&amp; contour, const 
QVector&lt;Vec2f&gt;&amp; texCoord) {setContour(contour, texCoord);}</td><td> </td><td class="right">       SphericalTexturedConvexPolygon(const QVector&lt;Vec3d&gt;&amp; contour, const 
QVector&lt;Vec2f&gt;&amp; texCoord) {setContour(contour, texCoord);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 789</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 791</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! This method is not optimized for SphericalConvexPolygon instance
s.</td><td> </td><td class="right">       //! This method is not optimized for SphericalConvexPolygon instance
s.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual StelVertexArray getFillVertexArray() const {return StelVerte
xArray(contour, StelVertexArray::TriangleFan, textureCoords);}</td><td> </td><td class="right">       virtual StelVertexArray getFillVertexArray() const {return StelVerte
xArray(contour, StelVertexArray::TriangleFan, textureCoords);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Set a single contour defining the SphericalPolygon.</td><td> </td><td class="right">       //! Set a single contour defining the SphericalPolygon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param acontour a contour defining the polygon area.</td><td> </td><td class="right">       //! @param acontour a contour defining the polygon area.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! @param texCoord a list of texture coordinates matching the verti
ces of the contour.</td><td> </td><td class="right">       //! @param texCoord a list of texture coordinates matching the verti
ces of the contour.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual void setContour(const QVector&lt;Vec3d&gt;&amp; acontour, const QVecto
r&lt;Vec2f&gt;&amp; texCoord) {SphericalConvexPolygon::setContour(acontour); textureC
oords=texCoord;}</td><td> </td><td class="right">       virtual void setContour(const QVector&lt;Vec3d&gt;&amp; acontour, const QVecto
r&lt;Vec2f&gt;&amp; texCoord) {SphericalConvexPolygon::setContour(acontour); textureC
oords=texCoord;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td> </td><td class="right">       //! Serialize the region into a QVariant map matching the JSON forma
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! The format is:</td><td> </td><td class="right">       //! The format is:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! <span class="delete">@code {"type":</span> "CVXPOLYGON", "worldCoords": [[[ra,dec], <span class="delete">[ra,dec]</span></td><td> </td><td class="rblock">       //! <span class="insert">@code{"type":</span> "CVXPOLYGON", "worldCoords": [[[ra,dec], <span class="insert">[ra,dec],</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> [ra,dec], [ra,dec]], [[ra,dec], [ra,dec], [ra,dec]],[...]],</td><td> </td><td class="rblock"> [ra,dec], [ra,dec]], [[ra,dec], [ra,dec], [ra,dec]],[...]],</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //! "textureCoords": [[[u,v],[u,v],[u,v],[u,v]], [[u,v],[u,v],[u,v]]</td><td> </td><td class="rblock">       //! "textureCoords": [[[u,v],[u,v],[u,v],[u,v]], [[u,v],[u,v],[u,v]]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">, <span class="delete">[...]]}</span></td><td> </td><td class="rblock">, <span class="insert">[...]]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! }@endcode</td><td> </td><td class="right">       //! }@endcode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! textureCoords is a list of texture coordinates in the u,v textur
e space (between 0 and 1).</td><td> </td><td class="right">       //! textureCoords is a list of texture coordinates in the u,v textur
e space (between 0 and 1).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td> </td><td class="right">       //! worldCoords is a list of closed contours, with each points defin
ed by ra dec in degree in the ICRS frame.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! There must be one texture coordinate for each vertex.</td><td> </td><td class="right">       //! There must be one texture coordinate for each vertex.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual QVariantMap toQVariant() const;</td><td> </td><td class="right">       virtual QVariantMap toQVariant() const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; contour &lt;&lt; te
xtureCoords;}</td><td> </td><td class="right">       virtual void serialize(QDataStream&amp; out) const {out &lt;&lt; contour &lt;&lt; te
xtureCoords;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">protected:</td><td> </td><td class="right">protected:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //! A list of uv textures coordinates corresponding to the triangle 
vertices.</td><td> </td><td class="right">       //! A list of uv textures coordinates corresponding to the triangle 
vertices.</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 31 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>89 lines changed or deleted</i></th><th><i> </i></th><th><i>85 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
