<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelSkyDrawer.cpp - StelSkyDrawer.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelSkyDrawer.cpp&nbsp;</th><th> </th><th>&nbsp;StelSkyDrawer.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 51</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 51</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMovementMgr.hpp"</td><td> </td><td class="right">#include "StelMovementMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QStringList&gt;</td><td> </td><td class="right">#include &lt;QStringList&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QtGlobal&gt;</td><td> </td><td class="right">#include &lt;QtGlobal&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// The 0.025 corresponds to the maximum eye resolution in degree</td><td> </td><td class="right">// The 0.025 corresponds to the maximum eye resolution in degree</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#define EYE_RESOLUTION (0.25)</td><td> </td><td class="rblock">#define EYE_RESOLUTION (0.25<span class="insert">f</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#define MAX_LINEAR_RADIUS 8.f</td><td> </td><td class="right">#define MAX_LINEAR_RADIUS 8.f</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">StelSkyDrawer::StelSkyDrawer(StelCore* acore) : core(acore), <span class="delete">starsShaderPro
</span>gram(NULL)</td><td> </td><td class="rblock">StelSkyDrawer::StelSkyDrawer(StelCore* acore) : core(acore), <span class="insert">flagHasAtmosph
ere(true), starsShaderPro</span>gram(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       eye = core-&gt;getToneReproducer();</td><td> </td><td class="right">       eye = core-&gt;getToneReproducer();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       inScale = 1.;</td><td> </td><td class="rblock">       inScale = 1.<span class="insert">f</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bortleScaleIndex = 3;</td><td> </td><td class="right">       bortleScaleIndex = 3;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       limitMagnitude = -100.f;</td><td> </td><td class="right">       limitMagnitude = -100.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       limitLuminance = 0;</td><td> </td><td class="right">       limitLuminance = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       oldLum=-1.f;</td><td> </td><td class="right">       oldLum=-1.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       maxLum = 0.f;</td><td> </td><td class="right">       maxLum = 0.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMaxAdaptFov(180.f);</td><td> </td><td class="right">       setMaxAdaptFov(180.f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMinAdaptFov(0.1f);</td><td> </td><td class="right">       setMinAdaptFov(0.1f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       starAbsoluteScaleF = 1.f;</td><td> </td><td class="right">       starAbsoluteScaleF = 1.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       starRelativeScale = 1.f;</td><td> </td><td class="right">       starRelativeScale = 1.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       starLinearScale = 19.569f;</td><td> </td><td class="right">       starLinearScale = 19.569f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       initColorTableFromConfigFile(conf);</td><td> </td><td class="right">       initColorTableFromConfigFile(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       setTwinkleAmount(conf-&gt;value("stars/star_twinkle_amount",0.3).to<span class="delete">Doub
le</span>());</td><td> </td><td class="rblock">       setTwinkleAmount(conf-&gt;value("stars/star_twinkle_amount",0.3).to<span class="insert">Floa
t</span>());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagTwinkle(conf-&gt;value("stars/flag_star_twinkle",true).toBool())
;</td><td> </td><td class="right">       setFlagTwinkle(conf-&gt;value("stars/flag_star_twinkle",true).toBool())
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPointStar(conf-&gt;value("stars/flag_point_star",false).toBool()
);</td><td> </td><td class="right">       setFlagPointStar(conf-&gt;value("stars/flag_point_star",false).toBool()
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">setMaxAdaptFov(conf-&gt;value("stars/mag_converter_max_fov",70.0).toDou</span></td><td> </td><td class="rblock">       <span class="insert">setMaxAdaptFov(conf-&gt;value("stars/mag_converter_max_fov",70.0).toFlo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ble());</span></td><td> </td><td class="rblock"><span class="insert">at());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       setMinAdaptFov(conf-&gt;value("stars/mag_converter_min_fov",0.1).toDoub</span></td><td> </td><td class="rblock"><span class="insert">       setMinAdaptFov(conf-&gt;value("stars/mag_converter_min_fov",0.1).toFloa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">le());</span></td><td> </td><td class="rblock"><span class="insert">t());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLuminanceAdaptation(conf-&gt;value("viewing/use_luminance_adapta
tion",true).toBool());</td><td> </td><td class="right">       setFlagLuminanceAdaptation(conf-&gt;value("viewing/use_luminance_adapta
tion",true).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool ok=true;</td><td> </td><td class="right">       bool ok=true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setBortleScale(conf-&gt;value("stars/init_bortle_scale",3).toInt(&amp;ok));</td><td> </td><td class="right">       setBortleScale(conf-&gt;value("stars/init_bortle_scale",3).toInt(&amp;ok));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               conf-&gt;setValue("stars/init_bortle_scale",3);</td><td> </td><td class="right">               conf-&gt;setValue("stars/init_bortle_scale",3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setBortleScale(3);</td><td> </td><td class="right">               setBortleScale(3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ok = true;</td><td> </td><td class="right">               ok = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       setRelativeStarScale(conf-&gt;value("stars/relative_scale",1.0).to<span class="delete">Doubl
e</span>(&amp;ok));</td><td> </td><td class="rblock">       setRelativeStarScale(conf-&gt;value("stars/relative_scale",1.0).to<span class="insert">Float
</span>(&amp;ok));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               conf-&gt;setValue("stars/relative_scale",1.0);</td><td> </td><td class="right">               conf-&gt;setValue("stars/relative_scale",1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setRelativeStarScale(1.0);</td><td> </td><td class="right">               setRelativeStarScale(1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ok = true;</td><td> </td><td class="right">               ok = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       setAbsoluteStarScale(conf-&gt;value("stars/absolute_scale",1.0).to<span class="delete">Doubl
e</span>(&amp;ok));</td><td> </td><td class="rblock">       setAbsoluteStarScale(conf-&gt;value("stars/absolute_scale",1.0).to<span class="insert">Float
</span>(&amp;ok));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               conf-&gt;setValue("stars/absolute_scale",1.0);</td><td> </td><td class="right">               conf-&gt;setValue("stars/absolute_scale",1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setAbsoluteStarScale(1.0);</td><td> </td><td class="right">               setAbsoluteStarScale(1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ok = true;</td><td> </td><td class="right">               ok = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Initialize buffers for use by gl vertex array</td><td> </td><td class="right">       // Initialize buffers for use by gl vertex array</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       nbPointSources = 0;</td><td> </td><td class="right">       nbPointSources = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       maxPointSources = 1000;</td><td> </td><td class="right">       maxPointSources = 1000;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 145</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 145</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (useShader)</td><td> </td><td class="right">       if (useShader)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete starsShaderProgram;</td><td> </td><td class="right">               delete starsShaderProgram;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Init parameters from config file</td><td> </td><td class="right">// Init parameters from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelSkyDrawer::init()</td><td> </td><td class="right">void StelSkyDrawer::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Stel<span class="delete">App</span>::makeMainGLContextCurrent();</td><td> </td><td class="rblock">       Stel<span class="insert">Painter</span>::makeMainGLContextCurrent();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load star texture no mipmap:</td><td> </td><td class="right">       // Load star texture no mipmap:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       texHalo = StelApp::getInstance().getTextureManager().createTexture("</td><td> </td><td class="rblock">       texHalo = StelApp::getInstance().getTextureManager().createTexture("</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">star16x16.png");</span></td><td> </td><td class="rblock"><span class="insert">textures/star16x16.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       texBigHalo = StelApp::getInstance().getTextureManager().createTextur</td><td> </td><td class="rblock">       texBigHalo = StelApp::getInstance().getTextureManager().createTextur</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e("haloLune.png");</span></td><td> </td><td class="rblock"><span class="insert">e("textures/haloLune.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       texSunHalo = StelApp::getInstance().getTextureManager().createTextur</td><td> </td><td class="rblock">       texSunHalo = StelApp::getInstance().getTextureManager().createTextur</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e("halo.png");</span></td><td> </td><td class="rblock"><span class="insert">e("textures/halo.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       useShader = StelApp::getInstance().getUseGLShaders()<span class="delete"> &amp;&amp; (QGLFormat::
openGLVersionFlags().testFlag(QGLFormat::OpenGL_Version_2_1) || QGLFormat::
openGLVersionFlags().testFlag(QGLFormat::OpenGL_ES_Version_2_0))</span>;</td><td> </td><td class="rblock">       useShader = StelApp::getInstance().getUseGLShaders();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (useShader)</td><td> </td><td class="right">       if (useShader)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Use vertex shader for stars rendering";</td><td> </td><td class="right">               qDebug() &lt;&lt; "Use vertex shader for stars rendering";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QGLShader* vShader = new QGLShader(QGLShader::Vertex);</td><td> </td><td class="right">               QGLShader* vShader = new QGLShader(QGLShader::Vertex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               vShader-&gt;compileSourceCode(</td><td> </td><td class="right">               vShader-&gt;compileSourceCode(</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               "uniform mediump mat4 projec
tionMatrix;\n"</td><td> </td><td class="right">                                               "uniform mediump mat4 projec
tionMatrix;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               "attribute mediump vec2 skyV
ertex;\n"</td><td> </td><td class="right">                                               "attribute mediump vec2 skyV
ertex;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               "attribute mediump vec3 star
Color;\n"</td><td> </td><td class="right">                                               "attribute mediump vec3 star
Color;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               "attribute mediump vec2 star
Size;\n"</td><td> </td><td class="right">                                               "attribute mediump vec2 star
Size;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               "varying mediump vec4 outCol
or;\n"</td><td> </td><td class="right">                                               "varying mediump vec4 outCol
or;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 207</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 207</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!starsShaderProgram-&gt;log().isEmpty())</td><td> </td><td class="right">               if (!starsShaderProgram-&gt;log().isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Warnings while linking shader: " &lt;&lt; s
tarsShaderProgram-&gt;log();</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Warnings while linking shader: " &lt;&lt; s
tarsShaderProgram-&gt;log();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               maxPointSources*=6;</td><td> </td><td class="right">               maxPointSources*=6;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       update(0);</td><td> </td><td class="right">       update(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void StelSkyDrawer::update(double<span class="delete"> deltaTime</span>)</td><td> </td><td class="rblock">void StelSkyDrawer::update(double)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float fov = core-&gt;getMovementMgr()-&gt;getCurrentFov();</td><td> </td><td class="right">       float fov = core-&gt;getMovementMgr()-&gt;getCurrentFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (fov &gt; maxAdaptFov)</td><td> </td><td class="right">       if (fov &gt; maxAdaptFov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fov = maxAdaptFov;</td><td> </td><td class="right">               fov = maxAdaptFov;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (fov &lt; minAdaptFov)</td><td> </td><td class="right">               if (fov &lt; minAdaptFov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fov = minAdaptFov;</td><td> </td><td class="right">                       fov = minAdaptFov;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // This factor is fully arbitrary. It corresponds to the collecting 
area x exposure time of the instrument</td><td> </td><td class="right">       // This factor is fully arbitrary. It corresponds to the collecting 
area x exposure time of the instrument</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // It is based on a power law, so that it varies progressively with 
the FOV to smoothly switch from human</td><td> </td><td class="right">       // It is based on a power law, so that it varies progressively with 
the FOV to smoothly switch from human</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // vision to binocculares/telescope. Use a max of 0.7 because after 
that the atmosphere starts to glow too much!</td><td> </td><td class="right">       // vision to binocculares/telescope. Use a max of 0.7 because after 
that the atmosphere starts to glow too much!</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       float powFactor = std::pow(60.<span class="delete">/qMax(0.7f,fov), 0.8</span>);</td><td> </td><td class="rblock">       float powFactor = std::pow(60.<span class="insert">f/qMax(0.7f,fov), 0.8f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       eye-&gt;setInputScale(inScale*powFactor);</td><td> </td><td class="right">       eye-&gt;setInputScale(inScale*powFactor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set the fov factor for point source luminance computation</td><td> </td><td class="right">       // Set the fov factor for point source luminance computation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // the division by powFactor should in principle not be here, but it
 doesn't look nice if removed</td><td> </td><td class="right">       // the division by powFactor should in principle not be here, but it
 doesn't look nice if removed</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       lnfovFactor = std::log(1.<span class="delete">/50.*2025000.f* 60.f*60.f / (fov*fov) / (EY
E_RESOLUTION*EYE_RESOLUTION)/powFactor/1.4</span>);</td><td> </td><td class="rblock">       lnfovFactor = std::log(1.<span class="insert">f/50.f*2025000.f* 60.f*60.f / (fov*fov) / (
EYE_RESOLUTION*EYE_RESOLUTION)/powFactor/1.4f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Precompute</td><td> </td><td class="right">       // Precompute</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       starLinearScale = std::pow(35.f*2.0f*starAbsoluteScaleF, 1.40f/2.f*s
tarRelativeScale);</td><td> </td><td class="right">       starLinearScale = std::pow(35.f*2.0f*starAbsoluteScaleF, 1.40f/2.f*s
tarRelativeScale);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // update limit mag</td><td> </td><td class="right">       // update limit mag</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       limitMagnitude = computeLimitMagnitude();</td><td> </td><td class="right">       limitMagnitude = computeLimitMagnitude();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // update limit luminance</td><td> </td><td class="right">       // update limit luminance</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       limitLuminance = computeLimitLuminance();</td><td> </td><td class="right">       limitLuminance = computeLimitLuminance();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 452</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 452</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glDrawArrays(GL_TRIANGLES, 0, nbPointSources*6);</td><td> </td><td class="right">               glDrawArrays(GL_TRIANGLES, 0, nbPointSources*6);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glDisableClientState(GL_VERTEX_ARRAY);</td><td> </td><td class="right">               glDisableClientState(GL_VERTEX_ARRAY);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glDisableClientState(GL_COLOR_ARRAY);</td><td> </td><td class="right">               glDisableClientState(GL_COLOR_ARRAY);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glDisableClientState(GL_TEXTURE_COORD_ARRAY);</td><td> </td><td class="right">               glDisableClientState(GL_TEXTURE_COORD_ARRAY);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       nbPointSources = 0;</td><td> </td><td class="right">       nbPointSources = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">static Vec3<span class="delete">d</span> win;</td><td> </td><td class="rblock">static Vec3<span class="insert">f</span> win;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Draw a point source halo.</td><td> </td><td class="right">// Draw a point source halo.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool StelSkyDrawer::drawPointSource(StelPainter* sPainter, const Vec3<span class="delete">d</span>&amp; v, 
const float rcMag[2], const Vec3f&amp; color, bool checkInScreen)</td><td> </td><td class="rblock">bool StelSkyDrawer::drawPointSource(StelPainter* sPainter, const Vec3<span class="insert">f</span>&amp; v, 
const float rcMag[2], const Vec3f&amp; color, bool checkInScreen)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(sPainter);</td><td> </td><td class="right">       Q_ASSERT(sPainter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (rcMag[0]&lt;=0.f)</td><td> </td><td class="right">       if (rcMag[0]&lt;=0.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!(checkInScreen ? sPainter-&gt;getProjector()-&gt;projectCheck(v, win)
 : sPainter-&gt;getProjector()-&gt;project(v, win)))</td><td> </td><td class="right">       if (!(checkInScreen ? sPainter-&gt;getProjector()-&gt;projectCheck(v, win)
 : sPainter-&gt;getProjector()-&gt;project(v, win)))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const <span class="delete">double</span> radius = rcMag[0];</td><td> </td><td class="rblock">       const <span class="insert">float</span> radius = rcMag[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Random coef for star twinkling</td><td> </td><td class="right">       // Random coef for star twinkling</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const float tw = <span class="delete">flagStarTwinkle ? (1.f-twinkleAmount*rand()/RAND_MA
X)*rcMag[1] : 1.f*</span>rcMag[1];</td><td> </td><td class="rblock">       const float tw = <span class="insert">(flagStarTwinkle &amp;&amp; flagHasAtmosphere) ? (1.f-twink
leAmount*rand()/RAND_MAX)*rcMag[1] : </span>rcMag[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // If the rmag is big, draw a big halo</td><td> </td><td class="right">       // If the rmag is big, draw a big halo</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (radius&gt;MAX_LINEAR_RADIUS+5.f)</td><td> </td><td class="right">       if (radius&gt;MAX_LINEAR_RADIUS+5.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               float cmag = qMin(rcMag[1],(float)(radius-(MAX_LINEAR_RADIUS
+5.))/30.f);</td><td> </td><td class="rblock">               float cmag = qMin(rcMag[1],(float)(radius-(MAX_LINEAR_RADIUS
+5.<span class="insert">f</span>))/30.f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float rmag = 150.f;</td><td> </td><td class="right">               float rmag = 150.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (cmag&gt;1.f)</td><td> </td><td class="right">               if (cmag&gt;1.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       cmag = 1.f;</td><td> </td><td class="right">                       cmag = 1.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               texBigHalo-&gt;bind();</td><td> </td><td class="right">               texBigHalo-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter-&gt;enableTexture2d(true);</td><td> </td><td class="right">               sPainter-&gt;enableTexture2d(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glBlendFunc(GL_ONE, GL_ONE);</td><td> </td><td class="right">               glBlendFunc(GL_ONE, GL_ONE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               glEnable(GL_BLEND);</td><td> </td><td class="right">               glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter-&gt;setColor(color[0]*cmag, color[1]*cmag, color[2]*cm
ag);</td><td> </td><td class="right">               sPainter-&gt;setColor(color[0]*cmag, color[1]*cmag, color[2]*cm
ag);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter-&gt;drawSprite2dMode(win[0], win[1], rmag);</td><td> </td><td class="right">               sPainter-&gt;drawSprite2dMode(win[0], win[1], rmag);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#ifndef USE_OPENGL_ES2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (useShader)</td><td> </td><td class="right">       if (useShader)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#endif</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Use point based rendering</td><td> </td><td class="right">               // Use point based rendering</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               verticesGrid[nbPointSources].set(win[0], win[1]);</td><td> </td><td class="right">               verticesGrid[nbPointSources].set(win[0], win[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">colorGrid[nbPointSources]=color;</span></td><td> </td><td class="rblock">               <span class="insert">colorGrid[nbPointSources].set(color[0]*tw, color[1]*tw, colo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               colorGrid[nbPointSources]*=tw;</span></td><td> </td><td class="rblock"><span class="insert">r[2]*tw);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               textureGrid[nbPointSources][0]=radius;</td><td> </td><td class="right">               textureGrid[nbPointSources][0]=radius;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#ifndef USE_OPENGL_ES2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagPointStar)</td><td> </td><td class="right">               if (flagPointStar)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Draw the star rendered as GLpoint. This may be fa
ster but it is not so nice</td><td> </td><td class="right">                       // Draw the star rendered as GLpoint. This may be fa
ster but it is not so nice</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       sPainter-&gt;setColor(color[0]*tw, color[1]*tw, color[2
]*tw);</td><td> </td><td class="right">                       sPainter-&gt;setColor(color[0]*tw, color[1]*tw, color[2
]*tw);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       sPainter-&gt;drawPoint2d(win[0], win[1]);</td><td> </td><td class="right">                       sPainter-&gt;drawPoint2d(win[0], win[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 522</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 524</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       win*=tw;</td><td> </td><td class="right">                       win*=tw;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3f* cv = &amp;(colorGrid[nbPointSources*6]);</td><td> </td><td class="right">                       Vec3f* cv = &amp;(colorGrid[nbPointSources*6]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       *cv = win; ++cv;</td><td> </td><td class="right">                       *cv = win; ++cv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       *cv = win; ++cv;</td><td> </td><td class="right">                       *cv = win; ++cv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       *cv = win; ++cv;</td><td> </td><td class="right">                       *cv = win; ++cv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       *cv = win; ++cv;</td><td> </td><td class="right">                       *cv = win; ++cv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       *cv = win; ++cv;</td><td> </td><td class="right">                       *cv = win; ++cv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       *cv = win; ++cv;</td><td> </td><td class="right">                       *cv = win; ++cv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#endif</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ++nbPointSources;</td><td> </td><td class="right">       ++nbPointSources;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (nbPointSources&gt;=maxPointSources)</td><td> </td><td class="right">       if (nbPointSources&gt;=maxPointSources)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Flush the buffer (draw all buffered stars)</td><td> </td><td class="right">               // Flush the buffer (draw all buffered stars)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               postDrawPointSource(sPainter);</td><td> </td><td class="right">               postDrawPointSource(sPainter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Terminate drawing of a 3D model, draw the halo</td><td> </td><td class="right">// Terminate drawing of a 3D model, draw the halo</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void StelSkyDrawer::postDrawSky3dModel(StelPainter* painter, const Vec3<span class="delete">d&amp; v
, double</span> illuminatedArea, float mag, const Vec3f&amp; color)</td><td> </td><td class="rblock">void StelSkyDrawer::postDrawSky3dModel(StelPainter* painter, const Vec3<span class="insert">f&amp; v
, float</span> illuminatedArea, float mag, const Vec3f&amp; color)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const float pixPerRad = painter-&gt;getProjector()-&gt;getPixelPerRadAtCen
ter();</td><td> </td><td class="right">       const float pixPerRad = painter-&gt;getProjector()-&gt;getPixelPerRadAtCen
ter();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Assume a disk shape</td><td> </td><td class="right">       // Assume a disk shape</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float pixRadius = std::sqrt(illuminatedArea/(60.*60.)*M_PI/180.*M_PI
/180.*(pixPerRad*pixPerRad))/M_PI;</td><td> </td><td class="right">       float pixRadius = std::sqrt(illuminatedArea/(60.*60.)*M_PI/180.*M_PI
/180.*(pixPerRad*pixPerRad))/M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool noStarHalo = false;</td><td> </td><td class="right">       bool noStarHalo = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (mag&lt;-15.f)</td><td> </td><td class="right">       if (mag&lt;-15.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Sun, halo size varies in function of the magnitude becaus
e sun as seen from pluto should look dimmer</td><td> </td><td class="right">               // Sun, halo size varies in function of the magnitude becaus
e sun as seen from pluto should look dimmer</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 596</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 599</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pixRadius&gt;tStart &amp;&amp; pixRadius&lt;tStop)</td><td> </td><td class="right">       if (pixRadius&gt;tStart &amp;&amp; pixRadius&lt;tStop)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rcm[1]=(tStop-pixRadius)/(tStop-tStart);</td><td> </td><td class="right">               rcm[1]=(tStop-pixRadius)/(tStop-tStart);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (truncated &amp;&amp; flagLuminanceAdaptation)</td><td> </td><td class="right">       if (truncated &amp;&amp; flagLuminanceAdaptation)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float wl = findWorldLumForMag(mag, rcm[0]);</td><td> </td><td class="right">               float wl = findWorldLumForMag(mag, rcm[0]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (wl&gt;0)</td><td> </td><td class="right">               if (wl&gt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const <span class="delete">double</span> f = <span class="delete">core-&gt;getMovementMgr()-&gt;getCurrentF</span></td><td> </td><td class="rblock">                       const <span class="insert">float</span> f = <span class="insert">core-&gt;getMovementMgr()-&gt;getCurrentFo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ov();</span></td><td> </td><td class="rblock"><span class="insert">v();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       reportLuminanceInFov(qMin(700., qMin((double)wl/50, </span></td><td> </td><td class="rblock"><span class="insert">                       reportLuminanceInFov(qMin(700.f, qMin(wl/50, (60.f*6</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(60.*60.)/(f*f)*6.)));</span></td><td> </td><td class="rblock"><span class="insert">0.f)/(f*f)*6.f)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!noStarHalo)</td><td> </td><td class="right">       if (!noStarHalo)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               preDrawPointSource(painter);</td><td> </td><td class="right">               preDrawPointSource(painter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               drawPointSource(painter, v,rcm,color);</td><td> </td><td class="right">               drawPointSource(painter, v,rcm,color);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               postDrawPointSource(painter);</td><td> </td><td class="right">               postDrawPointSource(painter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagStarTwinkle=save;</td><td> </td><td class="right">       flagStarTwinkle=save;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 658</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 661</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       eye-&gt;setWorldAdaptationLuminance(saveLum);      // restore</td><td> </td><td class="right">       eye-&gt;setWorldAdaptationLuminance(saveLum);      // restore</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return curLum;</td><td> </td><td class="right">       return curLum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Report that an object of luminance lum is currently displayed</td><td> </td><td class="right">// Report that an object of luminance lum is currently displayed</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void StelSkyDrawer::reportLuminanceInFov(<span class="delete">double</span> lum, bool fastAdaptation)</td><td> </td><td class="rblock">void StelSkyDrawer::reportLuminanceInFov(<span class="insert">float</span> lum, bool fastAdaptation)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (lum &gt; maxLum)</td><td> </td><td class="right">       if (lum &gt; maxLum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (oldLum&lt;0)</td><td> </td><td class="right">               if (oldLum&lt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       oldLum=lum;</td><td> </td><td class="right">                       oldLum=lum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Use a log law for smooth transitions</td><td> </td><td class="right">               // Use a log law for smooth transitions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (fastAdaptation==true &amp;&amp; lum&gt;oldLum)</td><td> </td><td class="right">               if (fastAdaptation==true &amp;&amp; lum&gt;oldLum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       maxLum = lum;</td><td> </td><td class="right">                       maxLum = lum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 841</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 844</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.774609,0.624412),</td><td> </td><td class="right">       Vec3f(1.000000,0.774609,0.624412),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.774315,0.627647),</td><td> </td><td class="right">       Vec3f(1.000000,0.774315,0.627647),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.774020,0.630883),</td><td> </td><td class="right">       Vec3f(1.000000,0.774020,0.630883),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.773726,0.634118),</td><td> </td><td class="right">       Vec3f(1.000000,0.773726,0.634118),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.773432,0.637353),</td><td> </td><td class="right">       Vec3f(1.000000,0.773432,0.637353),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.773138,0.640588),</td><td> </td><td class="right">       Vec3f(1.000000,0.773138,0.640588),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.772843,0.643824),</td><td> </td><td class="right">       Vec3f(1.000000,0.772843,0.643824),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f(1.000000,0.772549,0.647059),</td><td> </td><td class="right">       Vec3f(1.000000,0.772549,0.647059),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">static <span class="delete">double Gamma(double gamma,double</span> x)</td><td> </td><td class="rblock">static <span class="insert">float Gamma(float gamma, float</span> x)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return ((x&lt;=0.<span class="delete">0) ? 0.0 : exp(gamma*</span>log(x)));</td><td> </td><td class="rblock">       return ((x&lt;=0.<span class="insert">f) ? 0.f : std::exp(gamma*std::</span>log(x)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">static Vec3f Gamma(<span class="delete">double</span> gamma,const Vec3f &amp;x)</td><td> </td><td class="rblock">static Vec3f Gamma(<span class="insert">float</span> gamma,const Vec3f &amp;x)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return Vec3f(Gamma(gamma,x[0]),Gamma(gamma,x[1]),Gamma(gamma,x[2]));</td><td> </td><td class="right">       return Vec3f(Gamma(gamma,x[0]),Gamma(gamma,x[1]),Gamma(gamma,x[2]));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Load B-V conversion parameters from config file</td><td> </td><td class="right">// Load B-V conversion parameters from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelSkyDrawer::initColorTableFromConfigFile(QSettings* conf)</td><td> </td><td class="right">void StelSkyDrawer::initColorTableFromConfigFile(QSettings* conf)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       std::map&lt;float,Vec3f&gt; color_map;</td><td> </td><td class="right">       std::map&lt;float,Vec3f&gt; color_map;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (float bV=-0.5f;bV&lt;=4.0f;bV+=0.01)</td><td> </td><td class="right">       for (float bV=-0.5f;bV&lt;=4.0f;bV+=0.01)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 29 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>37 lines changed or deleted</i></th><th><i> </i></th><th><i>41 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
