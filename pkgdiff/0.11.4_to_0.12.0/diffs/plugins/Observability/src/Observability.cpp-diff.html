<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: Observability.cpp - Observability.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;Observability.cpp&nbsp;</th><th> </th><th>&nbsp;Observability.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 22</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 22</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * GNU General Public License for more details.</td><td> </td><td class="right"> * GNU General Public License for more details.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * You should have received a copy of the GNU General Public License</td><td> </td><td class="right"> * You should have received a copy of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * along with this program; if not, write to the Free Software</td><td> </td><td class="right"> * along with this program; if not, write to the Free Software</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td> </td><td class="right"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QPixmap&gt;</td><td> </td><td class="right">#include &lt;QPixmap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QTimer&gt;</td><td> </td><td class="right">#include &lt;QTimer&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include &lt;QtOpenGL&gt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QString&gt;</td><td> </td><td class="right">#include &lt;QString&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QAction&gt;</td><td> </td><td class="right">#include &lt;QAction&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QKeyEvent&gt;</td><td> </td><td class="right">#include &lt;QKeyEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QtNetwork&gt;</td><td> </td><td class="right">#include &lt;QtNetwork&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QKeyEvent&gt;</td><td> </td><td class="right">#include &lt;QKeyEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMouseEvent&gt;</td><td> </td><td class="right">#include &lt;QMouseEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "renderer/StelRenderer.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelIniParser.hpp"</td><td> </td><td class="right">#include "StelIniParser.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StarMgr.hpp"</td><td> </td><td class="right">#include "StarMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObject.hpp"</td><td> </td><td class="right">#include "StelObject.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObserver.hpp"</td><td> </td><td class="right">#include "StelObserver.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGui.hpp"</td><td> </td><td class="right">#include "StelGui.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGuiItems.hpp"</td><td> </td><td class="right">#include "StelGuiItems.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMovementMgr.hpp"</td><td> </td><td class="right">#include "StelMovementMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelVertexArray.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelPainter.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "ZoneArray.hpp"</td><td> </td><td class="right">#include "ZoneArray.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyDrawer.hpp"</td><td> </td><td class="right">#include "StelSkyDrawer.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Observability.hpp"</td><td> </td><td class="right">#include "Observability.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "ObservabilityDialog.hpp"</td><td> </td><td class="right">#include "ObservabilityDialog.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "SolarSystem.hpp"</td><td> </td><td class="right">#include "SolarSystem.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFader.hpp"</td><td> </td><td class="right">#include "StelFader.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelModule* ObservabilityStelPluginInterface::getStelModule() const</td><td> </td><td class="right">StelModule* ObservabilityStelPluginInterface::getStelModule() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 95</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 93</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Rad2Hr = 12./3.1415927;  // Convert hours into radians</td><td> </td><td class="right">       Rad2Hr = 12./3.1415927;  // Convert hours into radians</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       UA = 1.4958e+8;         // Astronomical Unit in Km.</td><td> </td><td class="right">       UA = 1.4958e+8;         // Astronomical Unit in Km.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TFrac = 0.9972677595628414;  // Convert sidereal time into Solar tim
e</td><td> </td><td class="right">       TFrac = 0.9972677595628414;  // Convert sidereal time into Solar tim
e</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       JDsec = 1./86400.;      // A second in days.</td><td> </td><td class="right">       JDsec = 1./86400.;      // A second in days.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       halfpi = 1.57079632675; // pi/2</td><td> </td><td class="right">       halfpi = 1.57079632675; // pi/2</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       MoonT = 29.530588; // Moon synodic period (used as first estimate of
 Full Moon).</td><td> </td><td class="right">       MoonT = 29.530588; // Moon synodic period (used as first estimate of
 Full Moon).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       RefFullMoon = 2451564.696; // Reference Julian date of a Full Moon.</td><td> </td><td class="right">       RefFullMoon = 2451564.696; // Reference Julian date of a Full Moon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       MoonPerilune = 0.0024236308; // Smallest Earth-Moon distance (in AU)
.</td><td> </td><td class="right">       MoonPerilune = 0.0024236308; // Smallest Earth-Moon distance (in AU)
.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       nextFullMoon = 0.0;</td><td> </td><td class="right">       nextFullMoon = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       prevFullMoon = 0.0;</td><td> </td><td class="right">       prevFullMoon = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       RefracHoriz = 0.0;   // Geometric altitude at refraction-corrected h
orizon.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selName = "";</td><td> </td><td class="right">       selName = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////</td><td> </td><td class="right">////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Read configuration:</td><td> </td><td class="right">// Read configuration:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Setup defaults if not present</td><td> </td><td class="right">       // Setup defaults if not present</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/font_size"))</span></td><td> </td><td class="rblock">       <span class="insert">conf-&gt;beginGroup("Observability");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/font_size",</span> 15);</td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("font_size"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("font_size",</span> 15);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/font_color"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("font_color"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/font_color",</span> "0,0.5,1");</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("font_color",</span> "0,0.5,1");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/show_AcroCos"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("show_AcroCos"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/show_AcroCos",</span> true);</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("show_AcroCos",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/show_Good_Nights"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("show_Good_Nights"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/show_Good_Nights",</span> true);</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("show_Good_Nights",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/show_Best_Night"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("show_Best_Night"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/show_Best_Night",</span> true);</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("show_Best_Night",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/show_Today"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("show_Today"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/show_Today",</span> true);</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("show_Today",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/Sun_Altitude"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("Sun_Altitude"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/Sun_Altitude",</span> 12);</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("Sun_Altitude",</span> 12);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!conf-&gt;contains("Observability/show_FullMoon"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("Horizon_Altitude"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               conf-&gt;setValue("Observability/show_FullMoon", true);</span></td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("Horizon_Altitude", 0);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">//</span>     if <span class="delete">(!conf-&gt;contains("Observability/show_Crescent"))</span></td><td> </td><td class="rblock">       if <span class="insert">(!conf-&gt;contains("show_FullMoon"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">//             conf-&gt;setValue("Observability/show_Crescent",</span> true);</td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("show_FullMoon",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     if <span class="delete">(!conf-&gt;contains("Observability/show_SuperMoon"))</span></td><td> </td><td class="rblock">//     if <span class="insert">(!conf-&gt;contains("show_Crescent"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//             <span class="delete">conf-&gt;setValue("Observability/show_SuperMoon",</span> true);</td><td> </td><td class="rblock">//             <span class="insert">conf-&gt;setValue("show_Crescent", true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     if (!conf-&gt;contains("show_SuperMoon"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//             conf-&gt;setValue("show_SuperMoon",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load settings from main config file</td><td> </td><td class="right">       // Load settings from main config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fontSize = <span class="delete">conf-&gt;value("Observability/font_size",15).toInt();</span></td><td> </td><td class="rblock">       fontSize = <span class="insert">conf-&gt;value("font_size",15).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       iAltitude = <span class="delete">conf-&gt;value("Observability/Sun_Altitude",12).toInt();</span></td><td> </td><td class="rblock">       iAltitude = <span class="insert">conf-&gt;value("Sun_Altitude",12).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       iHorizAltitude = conf-&gt;value("Horizon_Altitude",0).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       AstroTwiAlti = -((double) iAltitude)/Rad2Deg ;</td><td> </td><td class="right">       AstroTwiAlti = -((double) iAltitude)/Rad2Deg ;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       HorizAlti = ((double) iHorizAltitude)/Rad2Deg ;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       font.setPixelSize(fontSize);</td><td> </td><td class="right">       font.setPixelSize(fontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QString fontColorStr = conf-&gt;value("<span class="delete">Observability/font_color", "0,0.
5,1").toString</span>();</td><td> </td><td class="rblock">       QString fontColorStr = conf-&gt;value("<span class="insert">font_color", "0,0.5,1").toString
</span>();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fontColor = StelUtils::strToVec3f(fontColorStr);</td><td> </td><td class="right">       fontColor = StelUtils::strToVec3f(fontColorStr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_AcroCos = <span class="delete">conf-&gt;value("Observability/show_AcroCos", true).toBoo</span></td><td> </td><td class="rblock">       show_AcroCos = <span class="insert">conf-&gt;value("show_AcroCos", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">l();</span></td><td> </td><td class="rblock">       show_Good_Nights = <span class="insert">conf-&gt;value("show_Good_Nights", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_Good_Nights = <span class="delete">conf-&gt;value("Observability/show_Good_Nights", tru</span></td><td> </td><td class="rblock">       show_Best_Night = <span class="insert">conf-&gt;value("show_Best_Night", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e).toBool();</span></td><td> </td><td class="rblock">       show_Today = <span class="insert">conf-&gt;value("show_Today",</span> true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_Best_Night = <span class="delete">conf-&gt;value("Observability/show_Best_Night", true)</span></td><td> </td><td class="rblock">       show_FullMoon = <span class="insert">conf-&gt;value("show_FullMoon", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.toBool();</span></td><td> </td><td class="rblock">//     show_Crescent = <span class="insert">conf-&gt;value("show_Crescent", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_Today = <span class="delete">conf-&gt;value("Observability/show_Today",</span> true).toBool();</td><td> </td><td class="rblock">//     show_SuperMoon = <span class="insert">conf-&gt;value("show_SuperMoon", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_FullMoon = <span class="delete">conf-&gt;value("Observability/show_FullMoon", true).toB</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     show_Crescent = <span class="delete">conf-&gt;value("Observability/show_Crescent", true).toB</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     show_SuperMoon = <span class="delete">conf-&gt;value("Observability/show_SuperMoon", true).t</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">oBool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       conf-&gt;endGroup();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/////////////////////////////////</td><td> </td><td class="right">/////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Dummy initial values for parameters and data vectors:</td><td> </td><td class="right">       // Dummy initial values for parameters and data vectors:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       mylat = 1000.; mylon = 1000.;</td><td> </td><td class="right">       mylat = 1000.; mylon = 1000.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       myJD = 0.0;</td><td> </td><td class="right">       myJD = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currYear = 0;</td><td> </td><td class="right">       currYear = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       isStar = true;</td><td> </td><td class="right">       isStar = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       isMoon = false;</td><td> </td><td class="right">       isMoon = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       isSun = false;</td><td> </td><td class="right">       isSun = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       isScreen = true;</td><td> </td><td class="right">       isScreen = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 216</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 222</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "init called for Observability";</td><td> </td><td class="right">       qDebug() &lt;&lt; "init called for Observability";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try</td><td> </td><td class="right">       try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()
.getGui());</td><td> </td><td class="right">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()
.getGui());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               GlowIcon = new QPixmap(":/graphicGui/glow32x32.png");</td><td> </td><td class="right">               GlowIcon = new QPixmap(":/graphicGui/glow32x32.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               OnIcon = new QPixmap(":/observability/bt_observab_on.png");</td><td> </td><td class="right">               OnIcon = new QPixmap(":/observability/bt_observab_on.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               OffIcon = new QPixmap(":/observability/bt_observab_off.png")
;</td><td> </td><td class="right">               OffIcon = new QPixmap(":/observability/bt_observab_off.png")
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">gui-&gt;addGuiActions("actionShow_Observability",N_("Observabil</span></td><td> </td><td class="rblock">               <span class="insert">gui-&gt;getGuiAction("actionShow_Observability")-&gt;setChecked(fl</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ity"),"",N_("Plugin Key Bindings"),true, false);</span></td><td> </td><td class="rblock"><span class="insert">agShowObservability);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               gui-&gt;getGuiActions("actionShow_Observability")-&gt;setChecked(f</span></td><td> </td><td class="rblock">               toolbarButton = new StelButton(NULL, *OnIcon, *OffIcon, *Glo</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">lagShowObservability);</span></td><td> </td><td class="rblock">wIcon, <span class="insert">gui-&gt;getGuiAction("actionShow_Observability"));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               toolbarButton = new StelButton(NULL, *OnIcon, *OffIcon, *Glo</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">wIcon, <span class="delete">gui-&gt;getGuiActions("actionShow_Observability"));</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td> </td><td class="right">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">connect(gui-&gt;getGuiActions("actionShow_Observability"), SIGN</span></td><td> </td><td class="rblock">               <span class="insert">connect(gui-&gt;getGuiAction("actionShow_Observability"), SIGNA</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">AL(toggled(bool)),</span> this, SLOT(enableObservability(bool)));</td><td> </td><td class="rblock"><span class="insert">L(toggled(bool)),</span> this, SLOT(enableObservability(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">               <span class="insert">connect(gui-&gt;getGuiAction("actionShow_Observability_ConfigDi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">gui-&gt;addGuiActions("actionShow_Observability_ConfigDialog", </span></td><td> </td><td class="rblock"><span class="insert">alog"),</span> SIGNAL(toggled(bool)), configDialog, SLOT(setVisible(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">N_("Observability configuration window"), "",N_("Plugin Key Bindings"), tru</span></td><td> </td><td class="rblock">               connect(configDialog, SIGNAL(visibleChanged(bool)), gui-&gt;get</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e);</span></td><td> </td><td class="rblock"><span class="insert">GuiAction("actionShow_Observability_ConfigDialog"), SLOT(setChecked(bool)))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               connect(gui-&gt;getGuiActions("actionShow_Observability_ConfigD</span></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ialog"),</span> SIGNAL(toggled(bool)), configDialog, SLOT(setVisible(bool)));</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               connect(configDialog, SIGNAL(visibleChanged(bool)), gui-&gt;get</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">GuiActions("actionShow_Observability_ConfigDialog"), SLOT(setChecked(bool))</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch (std::exception &amp;e)</td><td> </td><td class="right">       catch (std::exception &amp;e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING: unable create toolbar button for Obs
ervability plugin (or load gonfig GUI). " &lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING: unable create toolbar button for Obs
ervability plugin (or load gonfig GUI). " &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/////////////////////////////////////////////</td><td> </td><td class="right">/////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// MAIN CODE:</td><td> </td><td class="right">// MAIN CODE:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Observability::draw(StelCore* core)</td><td> </td><td class="rblock">void Observability::draw(StelCore* core<span class="insert">, StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!flagShowObservability) return; // Button is off.</td><td> </td><td class="right">       if (!flagShowObservability) return; // Button is off.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/////////////////////////////////////////////////////////////////</td><td> </td><td class="right">/////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// PRELIMINARS:</td><td> </td><td class="right">// PRELIMINARS:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool locChanged, yearChanged;</td><td> </td><td class="right">       bool locChanged, yearChanged;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelObjectP selectedObject;</td><td> </td><td class="right">       StelObjectP selectedObject;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet* currPlanet;</td><td> </td><td class="right">       Planet* currPlanet;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       PlanetP Object, parent;</td><td> </td><td class="right">       PlanetP Object, parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Only execute plugin if we are on Earth.</td><td> </td><td class="right">// Only execute plugin if we are on Earth.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (core-&gt;getCurrentLocation().planetName != "Earth") {return;};</td><td> </td><td class="right">       if (core-&gt;getCurrentLocation().planetName != "Earth") {return;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set the painter:</td><td> </td><td class="right">// Set the painter:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">StelPainter paintresult(core-&gt;getProjection2d());</span></td><td> </td><td class="rblock">       <span class="insert">StelProjectorP projector = core-&gt;getProjection2d();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       paintresult.setColor(fontColor[0],fontColor[1],fontColor[2],1);</span></td><td> </td><td class="rblock"><span class="insert">       renderer-&gt;setGlobalColor(fontColor[0],fontColor[1],fontColor[2],1);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       font.setPixelSize(fontSize);</td><td> </td><td class="right">       font.setPixelSize(fontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">paintresult.</span>setFont(font);</td><td> </td><td class="rblock">       <span class="insert">renderer-&gt;</span>setFont(font);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get current date, location, and check if there is something selected.</td><td> </td><td class="right">// Get current date, location, and check if there is something selected.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currlat = (core-&gt;getCurrentLocation().latitude)/Rad2Deg;</td><td> </td><td class="right">       double currlat = (core-&gt;getCurrentLocation().latitude)/Rad2Deg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currlon = (core-&gt;getCurrentLocation().longitude)/Rad2Deg;</td><td> </td><td class="right">       double currlon = (core-&gt;getCurrentLocation().longitude)/Rad2Deg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currheight = (6371.+(core-&gt;getCurrentLocation().altitude)/100
0.)/UA;</td><td> </td><td class="right">       double currheight = (6371.+(core-&gt;getCurrentLocation().altitude)/100
0.)/UA;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currJD = core-&gt;getJDay();</td><td> </td><td class="right">       double currJD = core-&gt;getJDay();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currJDint;</td><td> </td><td class="right">       double currJDint;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     GMTShift = StelUtils::getGMTShiftFromQT(currJD)/24.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GMTShift = StelApp::getInstance().getLocaleMgr().getGMTShift(currJD)
/24.0;</td><td> </td><td class="right">       GMTShift = StelApp::getInstance().getLocaleMgr().getGMTShift(currJD)
/24.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     qDebug() &lt;&lt; QString("%1%2 ").arg(GMTShift);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currLocalT = 24.*modf(currJD + GMTShift,&amp;currJDint);</td><td> </td><td class="right">       double currLocalT = 24.*modf(currJD + GMTShift,&amp;currJDint);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int auxm, auxd, auxy;</td><td> </td><td class="right">       int auxm, auxd, auxy;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelUtils::getDateFromJulianDay(currJD,&amp;auxy,&amp;auxm,&amp;auxd);</td><td> </td><td class="right">       StelUtils::getDateFromJulianDay(currJD,&amp;auxy,&amp;auxm,&amp;auxd);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool isSource = StelApp::getInstance().getStelObjectMgr().getWasSele
cted();</td><td> </td><td class="right">       bool isSource = StelApp::getInstance().getStelObjectMgr().getWasSele
cted();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool show_Year = show_Best_Night || show_Good_Nights || show_AcroCos
;</td><td> </td><td class="right">       bool show_Year = show_Best_Night || show_Good_Nights || show_AcroCos
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 298</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 305</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               locChanged = false;}</td><td> </td><td class="right">               locChanged = false;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else {</td><td> </td><td class="right">       else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               locChanged = true;</td><td> </td><td class="right">               locChanged = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               mylat = currlat; mylon = currlon;</td><td> </td><td class="right">               mylat = currlat; mylon = currlon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double temp1 = currheight*std::cos(currlat);</td><td> </td><td class="right">               double temp1 = currheight*std::cos(currlat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObserverLoc[0] = temp1*std::cos(currlon);</td><td> </td><td class="right">               ObserverLoc[0] = temp1*std::cos(currlon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObserverLoc[1] = temp1*std::sin(currlon);</td><td> </td><td class="right">               ObserverLoc[1] = temp1*std::sin(currlon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObserverLoc[2] = currheight*std::sin(currlat);</td><td> </td><td class="right">               ObserverLoc[2] = currheight*std::sin(currlat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Add refraction, if necessary:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Vec3d TempRefr;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       TempRefr[0] = std::cos(HorizAlti);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       TempRefr[1] = 0.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       TempRefr[2] = std::sin(HorizAlti);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Vec3d CorrRefr = core-&gt;altAzToEquinoxEqu(TempRefr,StelCore::Refracti</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">onAuto);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       TempRefr = core-&gt;equinoxEquToAltAz(CorrRefr,StelCore::RefractionOff)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double RefracAlt = std::asin(TempRefr[2]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (std::abs(RefracHoriz-RefracAlt)&gt;2.91e-4)  // Diference larger th</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">an 1 arcminute.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {   // Configuration for refraction changed notably:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               RefracHoriz = RefracAlt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               configChanged = true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               souChanged = true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       };</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// If we have changed latitude (or year), we update the vector of Sun's hou
r</td><td> </td><td class="right">// If we have changed latitude (or year), we update the vector of Sun's hou
r</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// angles at twilight, and re-compute Sun/Moon ephemeris (if selected):</td><td> </td><td class="right">// angles at twilight, and re-compute Sun/Moon ephemeris (if selected):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (locChanged || yearChanged || configChanged)</td><td> </td><td class="right">       if (locChanged || yearChanged || configChanged)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               SunHTwi();</td><td> </td><td class="right">               SunHTwi();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lastJDMoon = 0.0;</td><td> </td><td class="right">               lastJDMoon = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 402</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 425</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               souChanged=true;</td><td> </td><td class="right">               souChanged=true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               configChanged=false;</td><td> </td><td class="right">               configChanged=false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/////////////////////////////////////////////////////////////////</td><td> </td><td class="right">/////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/////////////////////////////////////////////////////////////////</td><td> </td><td class="right">/////////////////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// NOW WE COMPUTE RISE/SET/TRANSIT TIMES FOR THE CURRENT DAY:</td><td> </td><td class="right">// NOW WE COMPUTE RISE/SET/TRANSIT TIMES FOR THE CURRENT DAY:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double currH = HourAngle(mylat,alti,selDec);</td><td> </td><td class="right">       double currH = HourAngle(mylat,alti,selDec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       horizH = HourAngle(mylat,<span class="delete">0.0</span>,selDec);</td><td> </td><td class="rblock">       horizH = HourAngle(mylat,<span class="insert">RefracHoriz</span>,selDec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString RS1, RS2, Cul; // strings with Rise/Set/Culmination times</td><td> </td><td class="right">       QString RS1, RS2, Cul; // strings with Rise/Set/Culmination times</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double Rise, Set; // Actual Rise/Set times (in GMT).</td><td> </td><td class="right">       double Rise, Set; // Actual Rise/Set times (in GMT).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int d1,m1,s1,d2,m2,s2,dc,mc,sc; // Integers for the time spans in hh
:mm:ss.</td><td> </td><td class="right">       int d1,m1,s1,d2,m2,s2,dc,mc,sc; // Integers for the time spans in hh
:mm:ss.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool solvedMoon = false; // Check if solutions were found for Sun, M
oon, or planet.</td><td> </td><td class="right">       bool solvedMoon = false; // Check if solutions were found for Sun, M
oon, or planet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool transit = false; // Is the source above the horizon? Did it cul
minate?</td><td> </td><td class="right">       bool transit = false; // Is the source above the horizon? Did it cul
minate?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int ephHour, ephMinute, ephSecond;  // Local time for selected ephem
eris</td><td> </td><td class="right">       int ephHour, ephMinute, ephSecond;  // Local time for selected ephem
eris</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (show_Today) {  // We show ephemeris for today (i.e., rise, set, 
and transit times).</td><td> </td><td class="right">       if (show_Today) {  // We show ephemeris for today (i.e., rise, set, 
and transit times).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 482</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 505</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               SetTime = QString("%1:%2").arg(ephHour).arg(
ephMinute,2,10,QLatin1Char('0'));</td><td> </td><td class="right">                               SetTime = QString("%1:%2").arg(ephHour).arg(
ephMinute,2,10,QLatin1Char('0'));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                double2hms(toUnsignedRA(currLocalT+TFrac*Ri
se+12.),ephHour,ephMinute,ephSecond);</td><td> </td><td class="right">                                double2hms(toUnsignedRA(currLocalT+TFrac*Ri
se+12.),ephHour,ephMinute,ephSecond);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               RiseTime = QString("%1:%2").arg(ephHour).arg
(ephMinute,2,10,QLatin1Char('0'));</td><td> </td><td class="right">                               RiseTime = QString("%1:%2").arg(ephHour).arg
(ephMinute,2,10,QLatin1Char('0'));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               RS1 = q_("Set at %1 (%2 ago)").arg(SetTime).
arg(RS1);</td><td> </td><td class="right">                               RS1 = q_("Set at %1 (%2 ago)").arg(SetTime).
arg(RS1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               RS2 = q_("Rises at %1 (in %2)").arg(RiseTime
).arg(RS2);</td><td> </td><td class="right">                               RS2 = q_("Rises at %1 (in %2)").arg(RiseTime
).arg(RS2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else { // The source is either circumpolar or never rises:</td><td> </td><td class="right">               else { // The source is either circumpolar or never rises:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       (alti&gt;<span class="delete">0.0)? RS1 = q_("Circumpolar."): RS1 = q_("No r
</span>ise.");</td><td> </td><td class="rblock">                       (alti&gt;<span class="insert">RefracHoriz)? RS1 = q_("Circumpolar."): RS1 = 
q_("No r</span>ise.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       RS2 = "";</td><td> </td><td class="right">                       RS2 = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     Culmination:</td><td> </td><td class="right">//     Culmination:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (isStar)</td><td> </td><td class="right">       if (isStar)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               culmAlt = std::abs(mylat-selDec); // 90.-altitude at transit
.</td><td> </td><td class="right">               culmAlt = std::abs(mylat-selDec); // 90.-altitude at transit
.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               transit = LocPos[1]&lt;0.0;</td><td> </td><td class="right">               transit = LocPos[1]&lt;0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(culmAlt&lt;halfpi)</span> { // Source can be observed.</td><td> </td><td class="rblock">       if <span class="insert">(culmAlt&lt;halfpi-RefracHoriz)</span> { // Source can be observed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               double altiAtCulmi = <span class="delete">Rad2Deg*(halfpi-culmAlt);</span></td><td> </td><td class="rblock">               double altiAtCulmi = <span class="insert">Rad2Deg*(halfpi-culmAlt-RefracHoriz);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double2hms(TFrac*currH,dc,mc,sc);</td><td> </td><td class="right">               double2hms(TFrac*currH,dc,mc,sc);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//             String with the time span for culmination:</td><td> </td><td class="right">//             String with the time span for culmination:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Cul = (dc==0)?"":QString("%1%2 ").arg(dc).arg(q_("h")); Cul 
+= (mc==0)?"":QString("%1%2 ").arg(mc).arg(q_("m")); Cul += QString("%1%2")
.arg(sc).arg(q_("s"));</td><td> </td><td class="right">               Cul = (dc==0)?"":QString("%1%2 ").arg(dc).arg(q_("h")); Cul 
+= (mc==0)?"":QString("%1%2 ").arg(mc).arg(q_("m")); Cul += QString("%1%2")
.arg(sc).arg(q_("s"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (transit==false) {</td><td> </td><td class="right">               if (transit==false) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        double2hms(toUnsignedRA(currLocalT+TFrac*currH+12.)
,ephHour,ephMinute,ephSecond); // Local time at transit.</td><td> </td><td class="right">                        double2hms(toUnsignedRA(currLocalT+TFrac*currH+12.)
,ephHour,ephMinute,ephSecond); // Local time at transit.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       CulmTime = QString("%1:%2").arg(ephHour).arg(ephMinu
te,2,10,QLatin1Char('0'));</td><td> </td><td class="right">                       CulmTime = QString("%1:%2").arg(ephHour).arg(ephMinu
te,2,10,QLatin1Char('0'));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Cul = q_("Culminates at %1 (in %2) at %3 deg.").arg(
CulmTime).arg(Cul).arg(altiAtCulmi,0,'f',1);}</td><td> </td><td class="right">                       Cul = q_("Culminates at %1 (in %2) at %3 deg.").arg(
CulmTime).arg(Cul).arg(altiAtCulmi,0,'f',1);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else {</td><td> </td><td class="right">               else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 530</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 553</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (isSun)</td><td> </td><td class="right">       if (isSun)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bestNight=""; ObsRange = "";</td><td> </td><td class="right">               bestNight=""; ObsRange = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (!isMoon &amp;&amp; show_Year) {</td><td> </td><td class="right">       else if (!isMoon &amp;&amp; show_Year) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (isStar==false &amp;&amp; (souChanged || yearChanged)) { // Objec
t moves.</td><td> </td><td class="right">               if (isStar==false &amp;&amp; (souChanged || yearChanged)) { // Objec
t moves.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       PlanetRADec(core);} // Re-compute ephemeris.</td><td> </td><td class="right">                       PlanetRADec(core);} // Re-compute ephemeris.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else { // Object is fixed on the sky.</td><td> </td><td class="right">               else { // Object is fixed on the sky.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       double auxH = HourAngle(mylat,<span class="delete">0.0</span>,selDec);</td><td> </td><td class="rblock">                       double auxH = HourAngle(mylat,<span class="insert">RefracHoriz</span>,selDec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double auxSidT1 = toUnsignedRA(selRA - auxH);</td><td> </td><td class="right">                       double auxSidT1 = toUnsignedRA(selRA - auxH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double auxSidT2 = toUnsignedRA(selRA + auxH);</td><td> </td><td class="right">                       double auxSidT2 = toUnsignedRA(selRA + auxH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (int i=0;i&lt;nDays;i++) {</td><td> </td><td class="right">                       for (int i=0;i&lt;nDays;i++) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ObjectH0[i] = auxH;</td><td> </td><td class="right">                               ObjectH0[i] = auxH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ObjectRA[i] = selRA;</td><td> </td><td class="right">                               ObjectRA[i] = selRA;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ObjectDec[i] = selDec;</td><td> </td><td class="right">                               ObjectDec[i] = selDec;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ObjectSidT[0][i] = auxSidT1;</td><td> </td><td class="right">                               ObjectSidT[0][i] = auxSidT1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ObjectSidT[1][i] = auxSidT2;</td><td> </td><td class="right">                               ObjectSidT[1][i] = auxSidT2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Determine source observability (only if something changed):</td><td> </td><td class="right">// Determine source observability (only if something changed):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if ((souChanged || locChanged || yearChanged)) {</td><td> </td><td class="right">               if ((souChanged || locChanged || yearChanged)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       bestNight=""; ObsRange = "";</td><td> </td><td class="right">                       bestNight=""; ObsRange = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (culmAlt&gt;=halfpi<span class="delete">) { // Source cannot </span>be seen.</td><td> </td><td class="rblock">                       if (culmAlt&gt;=halfpi<span class="insert">-RefracHoriz) { // Source cannot 
</span>be seen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ObsRange = q_("Source is not observable.");</td><td> </td><td class="right">                               ObsRange = q_("Source is not observable.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               AcroCos = q_("No Acronychal nor Cosmical ris
e/set.");</td><td> </td><td class="right">                               AcroCos = q_("No Acronychal nor Cosmical ris
e/set.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else { // Source can be seen.</td><td> </td><td class="right">                       else { // Source can be seen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////</td><td> </td><td class="right">///////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - Part 1. Determine the best observing night (i.e., opposition to the Su
n):</td><td> </td><td class="right">// - Part 1. Determine the best observing night (i.e., opposition to the Su
n):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (show_Best_Night) {</td><td> </td><td class="right">                               if (show_Best_Night) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int selday = 0;</td><td> </td><td class="right">                                       int selday = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double deltaPhs = -1.0; // Initial d
ummy value</td><td> </td><td class="right">                                       double deltaPhs = -1.0; // Initial d
ummy value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 583</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 606</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////</td><td> </td><td class="right">///////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - Part 2. Determine Acronychal and Cosmical rise and set:</td><td> </td><td class="right">// - Part 2. Determine Acronychal and Cosmical rise and set:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (show_AcroCos) {</td><td> </td><td class="right">                               if (show_AcroCos) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int selRise, selSet, selRise2, selSe
t2; // days of year for Acronical and Cosmical rise/set.</td><td> </td><td class="right">                                       int selRise, selSet, selRise2, selSe
t2; // days of year for Acronical and Cosmical rise/set.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int Acro = CheckAcro(selRise,selSet,
selRise2,selSet2);</td><td> </td><td class="right">                                       int Acro = CheckAcro(selRise,selSet,
selRise2,selSet2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       QString AcroRiseStr, AcroSetStr;</td><td> </td><td class="right">                                       QString AcroRiseStr, AcroSetStr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       QString CosmRiseStr, CosmSetStr;</td><td> </td><td class="right">                                       QString CosmRiseStr, CosmSetStr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       AcroRiseStr = (selRise&gt;0)?CalenDate(</td><td> </td><td class="rblock">                                       AcroRiseStr = (selRise&gt;0)?CalenDate(</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">selRise):q_("N/A");</span></td><td> </td><td class="rblock"><span class="insert">selRise):q_("None");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       AcroSetStr = (selSet&gt;0)?CalenDate(se</td><td> </td><td class="rblock">                                       AcroSetStr = (selSet&gt;0)?CalenDate(se</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">lSet):q_("N/A");</span></td><td> </td><td class="rblock"><span class="insert">lSet):q_("None");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       CosmRiseStr = (selRise2&gt;0)?CalenDate</td><td> </td><td class="rblock">                                       CosmRiseStr = (selRise2&gt;0)?CalenDate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(selRise2):q_("N/A");</span></td><td> </td><td class="rblock"><span class="insert">(selRise2):q_("None");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       CosmSetStr = (selSet2&gt;0)?CalenDate(s</td><td> </td><td class="rblock">                                       CosmSetStr = (selSet2&gt;0)?CalenDate(s</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">elSet2):q_("N/A");</span></td><td> </td><td class="rblock"><span class="insert">elSet2):q_("None");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       AcroCos = (Acro==3 || Acro==1)?QStri
ng("%1: %2/%3.").arg(q_("Acronychal rise/set")).arg(AcroRiseStr).arg(AcroSe
tStr):q_("No Acronychal rise/set.");</td><td> </td><td class="right">                                       AcroCos = (Acro==3 || Acro==1)?QStri
ng("%1: %2/%3.").arg(q_("Acronychal rise/set")).arg(AcroRiseStr).arg(AcroSe
tStr):q_("No Acronychal rise/set.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       AcroCos += (Acro==3 || Acro==2)?QStr
ing(" %1: %2/%3.").arg(q_("Cosmical rise/set")).arg(CosmRiseStr).arg(CosmSe
tStr):QString(" %1").arg(q_("No Cosmical rise/set."));</td><td> </td><td class="right">                                       AcroCos += (Acro==3 || Acro==2)?QStr
ing(" %1: %2/%3.").arg(q_("Cosmical rise/set")).arg(CosmRiseStr).arg(CosmSe
tStr):QString(" %1").arg(q_("No Cosmical rise/set."));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               };</td><td> </td><td class="right">                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////</td><td> </td><td class="right">////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - Part 3. Determine range of good nights</td><td> </td><td class="right">// - Part 3. Determine range of good nights</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// (i.e., above horizon before/after twilight):</td><td> </td><td class="right">// (i.e., above horizon before/after twilight):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 656</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 679</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }; // Comes from show_Good_Nights==True"</td><td> </td><td class="right">                               }; // Comes from show_Good_Nights==True"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }; // Comes from the "else" of "culmAlt&gt;=..."</td><td> </td><td class="right">                       }; // Comes from the "else" of "culmAlt&gt;=..."</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };// Comes from  "souChanged || ..."</td><td> </td><td class="right">               };// Comes from  "souChanged || ..."</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }; // Comes from the "else" with "!isMoon"</td><td> </td><td class="right">       }; // Comes from the "else" with "!isMoon"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Print all results:</td><td> </td><td class="right">// Print all results:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int spacing = (int) (1.3* ( (double) fontSize));  // between lines</td><td> </td><td class="right">       int spacing = (int) (1.3* ( (double) fontSize));  // between lines</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int spacing2 = 6*fontSize;  // between daily and yearly results</td><td> </td><td class="right">       int spacing2 = 6*fontSize;  // between daily and yearly results</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int yLine = <span class="delete">8*fontSize+80;</span></td><td> </td><td class="rblock">       int yLine = <span class="insert">8*fontSize+110;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int xLine = <span class="delete">50;</span></td><td> </td><td class="rblock">       int xLine = <span class="insert">80;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (show_Today)</td><td> </td><td class="right">       if (show_Today)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">paintresult.drawText(xLine, yLine,q_("TODAY:"));</span></td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;drawText(TextParams(xLine, yLine,q_("TODAY:")));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               paintresult.drawText(xLine+fontSize,</span> yLine-spacing, <span class="delete">RS2);</span></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;drawText(TextParams(xLine+fontSize,</span> yLine-spacing,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               paintresult.drawText(xLine+fontSize, yLine-spacing*2, RS1);</span></td><td> </td><td class="rblock"> <span class="insert">RS2));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               paintresult.drawText(xLine+fontSize, yLine-spacing*3, Cul);</span></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;drawText(TextParams(xLine+fontSize, yLine-spacing*</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2, RS1));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;drawText(TextParams(xLine+fontSize, yLine-spacing*</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">3, Cul));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               yLine -= spacing2;</td><td> </td><td class="right">               yLine -= spacing2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if ((isMoon &amp;&amp; show_FullMoon) || (!isSun &amp;&amp; !isMoon &amp;&amp; show_Year))</td><td> </td><td class="right">       if ((isMoon &amp;&amp; show_FullMoon) || (!isSun &amp;&amp; !isMoon &amp;&amp; show_Year))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">paintresult.drawText(xLine,yLine,q_("THIS YEAR:"))</span>;</td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;drawText(TextParams(xLine,yLine,q_("THIS YEAR:")))
</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show_Best_Night || show_FullMoon)</td><td> </td><td class="right">               if (show_Best_Night || show_FullMoon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yLine -= spacing;</td><td> </td><td class="right">                       yLine -= spacing;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">paintresult.drawText(xLine+fontSize, yLine, bestNigh
t</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xLine+fontSize, yLine,
 bestNight)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show_Good_Nights)</td><td> </td><td class="right">               if (show_Good_Nights)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yLine -= spacing;</td><td> </td><td class="right">                       yLine -= spacing;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">paintresult.drawText(xLine+fontSize, yLine, ObsRange
</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xLine+fontSize, yLine,
 ObsRange)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show_AcroCos)</td><td> </td><td class="right">               if (show_AcroCos)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yLine -= spacing;</td><td> </td><td class="right">                       yLine -= spacing;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">paintresult.drawText(xLine+fontSize, yLine, AcroCos)
</span>;</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xLine+fontSize, yLine,
 AcroCos))</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// END OF MAIN CODE</td><td> </td><td class="right">// END OF MAIN CODE</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////</td><td> </td><td class="right">///////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////</td><td> </td><td class="right">//////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 811</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 834</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Returns the RA and Dec of the selected planet</td><td> </td><td class="right">// Returns the RA and Dec of the selected planet</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//for each day of the current year:</td><td> </td><td class="right">//for each day of the current year:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::PlanetRADec(StelCore *core)</td><td> </td><td class="right">void Observability::PlanetRADec(StelCore *core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double TempH;</td><td> </td><td class="right">       double TempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Compute planet's position for each day of the current year:</td><td> </td><td class="right">// Compute planet's position for each day of the current year:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i=0;i&lt;nDays;i++) {</td><td> </td><td class="right">       for (int i=0;i&lt;nDays;i++) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               getPlanetCoords(core,yearJD[i],ObjectRA[i],ObjectDec[i],fals
e);</td><td> </td><td class="right">               getPlanetCoords(core,yearJD[i],ObjectRA[i],ObjectDec[i],fals
e);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               TempH = HourAngle(mylat,<span class="delete">0.0</span>,ObjectDec[i]);</td><td> </td><td class="rblock">               TempH = HourAngle(mylat,<span class="insert">RefracHoriz</span>,ObjectDec[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObjectH0[i] = TempH;</td><td> </td><td class="right">               ObjectH0[i] = TempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObjectSidT[0][i] = toUnsignedRA(ObjectRA[i]-TempH);</td><td> </td><td class="right">               ObjectSidT[0][i] = toUnsignedRA(ObjectRA[i]-TempH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObjectSidT[1][i] = toUnsignedRA(ObjectRA[i]+TempH);</td><td> </td><td class="right">               ObjectSidT[1][i] = toUnsignedRA(ObjectRA[i]+TempH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Return the planet to its current time:</td><td> </td><td class="right">// Return the planet to its current time:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       getPlanetCoords(core,myJD,ObjectRA[0],ObjectDec[0],true);</td><td> </td><td class="right">       getPlanetCoords(core,myJD,ObjectRA[0],ObjectDec[0],true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 864</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 887</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////</td><td> </td><td class="right">///////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Computes Sun's Sidereal Times at twilight and culmination:</td><td> </td><td class="right">// Computes Sun's Sidereal Times at twilight and culmination:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::SunHTwi()</td><td> </td><td class="right">void Observability::SunHTwi()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double TempH, TempH00;</td><td> </td><td class="right">       double TempH, TempH00;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i=0; i&lt;nDays; i++) {</td><td> </td><td class="right">       for (int i=0; i&lt;nDays; i++) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               TempH = HourAngle(mylat,AstroTwiAlti,SunDec[i]);</td><td> </td><td class="right">               TempH = HourAngle(mylat,AstroTwiAlti,SunDec[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               TempH00 = HourAngle(mylat,<span class="delete">0.0</span>,SunDec[i]);</td><td> </td><td class="rblock">               TempH00 = HourAngle(mylat,<span class="insert">RefracHoriz</span>,SunDec[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (TempH&gt;0.0) {</td><td> </td><td class="right">               if (TempH&gt;0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       SunSidT[0][i] = toUnsignedRA(SunRA[i]-TempH*(1.00278
));</td><td> </td><td class="right">                       SunSidT[0][i] = toUnsignedRA(SunRA[i]-TempH*(1.00278
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       SunSidT[1][i] = toUnsignedRA(SunRA[i]+TempH*(1.00278
));}</td><td> </td><td class="right">                       SunSidT[1][i] = toUnsignedRA(SunRA[i]+TempH*(1.00278
));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else {</td><td> </td><td class="right">               else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       SunSidT[0][i] = -1000.0;</td><td> </td><td class="right">                       SunSidT[0][i] = -1000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       SunSidT[1][i] = -1000.0;};</td><td> </td><td class="right">                       SunSidT[1][i] = -1000.0;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (TempH00&gt;0.0) {</td><td> </td><td class="right">               if (TempH00&gt;0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       SunSidT[2][i] = toUnsignedRA(SunRA[i]+TempH00);</td><td> </td><td class="right">                       SunSidT[2][i] = toUnsignedRA(SunRA[i]+TempH00);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       SunSidT[3][i] = toUnsignedRA(SunRA[i]-TempH00);}</td><td> </td><td class="right">                       SunSidT[3][i] = toUnsignedRA(SunRA[i]-TempH00);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else {</td><td> </td><td class="right">               else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 996</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1019</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Just return the sign of a double</td><td> </td><td class="right">// Just return the sign of a double</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Observability::sign(double d)</td><td> </td><td class="right">double Observability::sign(double d)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return (d&lt;0.0)?-1.0:1.0;</td><td> </td><td class="right">       return (d&lt;0.0)?-1.0:1.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////</td><td> </td><td class="right">//////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////</td><td> </td><td class="right">//////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the coordinates of Sun or Moon for a given JD:</td><td> </td><td class="right">// Get the coordinates of Sun or Moon for a given JD:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// getBack controls whether Earth and Moon must be returned to their origin
al positions after computation.</td><td> </td><td class="right">// getBack controls whether Earth and Moon must be returned to their origin
al positions after computation.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Observability::getSunMoonCoords(StelCore *core, double JD, double &amp;RAS
un, double &amp;DecSun, double &amp;RAMoon, double &amp;DecMoon, <span class="delete">bool getBack) //, Vec3
</span>d &amp;AltAzVector)</td><td> </td><td class="rblock">void Observability::getSunMoonCoords(StelCore *core, double JD, double &amp;RAS
un, double &amp;DecSun, double &amp;RAMoon, double &amp;DecMoon, <span class="insert">double &amp;EclLon, bool g
etBack) //, Vec3</span>d &amp;AltAzVector)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (getBack) // Return the Moon and Earth to their current position:</td><td> </td><td class="right">       if (getBack) // Return the Moon and Earth to their current position:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myEarth-&gt;computePosition(JD);</td><td> </td><td class="right">               myEarth-&gt;computePosition(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myEarth-&gt;computeTransMatrix(JD);</td><td> </td><td class="right">               myEarth-&gt;computeTransMatrix(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myMoon-&gt;computePosition(JD);</td><td> </td><td class="right">               myMoon-&gt;computePosition(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myMoon-&gt;computeTransMatrix(JD);</td><td> </td><td class="right">               myMoon-&gt;computeTransMatrix(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1026</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1049</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Moon coordinates:</td><td> </td><td class="right">// Moon coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               currSidT = myEarth-&gt;getSiderealTime(JD)/Rad2Deg;</td><td> </td><td class="right">               currSidT = myEarth-&gt;getSiderealTime(JD)/Rad2Deg;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               RotObserver = (Mat4d::zrotation(currSidT))*ObserverLoc;</td><td> </td><td class="right">               RotObserver = (Mat4d::zrotation(currSidT))*ObserverLoc;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               LocTrans = (core-&gt;matVsop87ToJ2000)*(Mat4d::translation(-Pos
0));</td><td> </td><td class="right">               LocTrans = (core-&gt;matVsop87ToJ2000)*(Mat4d::translation(-Pos
0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myMoon-&gt;computePosition(JD);</td><td> </td><td class="right">               myMoon-&gt;computePosition(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myMoon-&gt;computeTransMatrix(JD);</td><td> </td><td class="right">               myMoon-&gt;computeTransMatrix(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Pos1 = myMoon-&gt;getHeliocentricEclipticPos();</td><td> </td><td class="right">               Pos1 = myMoon-&gt;getHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Pos2 = (core-&gt;j2000ToEquinoxEqu(LocTrans*Pos1))-RotObserver;</td><td> </td><td class="right">               Pos2 = (core-&gt;j2000ToEquinoxEqu(LocTrans*Pos1))-RotObserver;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                <span class="insert">EclLon = Pos1[0]*Pos0[1] - Pos1[1]*Pos0[0];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               toRADec(Pos2,RAMoon,DecMoon);</td><td> </td><td class="right">               toRADec(Pos2,RAMoon,DecMoon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////</td><td> </td><td class="right">//////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the Observer-to-Moon distance JD:</td><td> </td><td class="right">// Get the Observer-to-Moon distance JD:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// getBack controls whether Earth and Moon must be returned to their origin
al positions after computation.</td><td> </td><td class="right">// getBack controls whether Earth and Moon must be returned to their origin
al positions after computation.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::getMoonDistance(StelCore *core, double JD, double &amp;Dist
ance, bool getBack)</td><td> </td><td class="right">void Observability::getMoonDistance(StelCore *core, double JD, double &amp;Dist
ance, bool getBack)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1107</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1132</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Solves Moon's, Sun's, or Planet's ephemeris by bissection. Returns JD:</td><td> </td><td class="right">// Solves Moon's, Sun's, or Planet's ephemeris by bissection. Returns JD:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool Observability::SolarSystemSolve(StelCore* core, int Kind)</td><td> </td><td class="right">bool Observability::SolarSystemSolve(StelCore* core, int Kind)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int Niter = 100;</td><td> </td><td class="right">       int Niter = 100;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int i;</td><td> </td><td class="right">       int i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       double Hhoriz, RA, Dec, RAS, DecS, TempH, jd1, tempEphH, currSidT;</td><td> </td><td class="rblock">       double Hhoriz, RA, Dec, RAS, DecS, TempH, jd1, tempEphH, currSidT<span class="insert">, E
clLon</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d Observer;</td><td> </td><td class="right">       Vec3d Observer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Hhoriz = HourAngle(mylat,<span class="delete">0.0</span>,selDec);</td><td> </td><td class="rblock">       Hhoriz = HourAngle(mylat,<span class="insert">RefracHoriz</span>,selDec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool raises = Hhoriz &gt; 0.0;</td><td> </td><td class="right">       bool raises = Hhoriz &gt; 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Only recompute ephemeris from second to second (at least)</td><td> </td><td class="right">// Only recompute ephemeris from second to second (at least)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// or if the source has changed (i.e., Sun &lt;-&gt; Moon). This saves resources:</td><td> </td><td class="right">// or if the source has changed (i.e., Sun &lt;-&gt; Moon). This saves resources:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (std::abs(myJD-lastJDMoon)&gt;JDsec || LastObject!=Kind || souChange
d)</td><td> </td><td class="right">       if (std::abs(myJD-lastJDMoon)&gt;JDsec || LastObject!=Kind || souChange
d)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//             qDebug() &lt;&lt; q_("%1  %2   %3   %4").arg(Kind).arg(LastObject)
.arg(myJD,0,'f',5).arg(lastJDMoon,0,'f',5);</td><td> </td><td class="right">//             qDebug() &lt;&lt; q_("%1  %2   %3   %4").arg(Kind).arg(LastObject)
.arg(myJD,0,'f',5).arg(lastJDMoon,0,'f',5);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               LastObject = Kind;</td><td> </td><td class="right">               LastObject = Kind;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1149</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1174</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {   // Planet position:</td><td> </td><td class="right">               {   // Planet position:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               myPlanet-&gt;computePosition(myJD);</td><td> </td><td class="right">                               myPlanet-&gt;computePosition(myJD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               myPlanet-&gt;computeTransMatrix(myJD);</td><td> </td><td class="right">                               myPlanet-&gt;computeTransMatrix(myJD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Pos1 = myPlanet-&gt;getHeliocentricEclipticPos(
);</td><td> </td><td class="right">                               Pos1 = myPlanet-&gt;getHeliocentricEclipticPos(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               LocTrans = (core-&gt;matVsop87ToJ2000)*(Mat4d::
translation(-Pos0));</td><td> </td><td class="right">                               LocTrans = (core-&gt;matVsop87ToJ2000)*(Mat4d::
translation(-Pos0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Pos2 = core-&gt;j2000ToEquinoxEqu(LocTrans*Pos1);</td><td> </td><td class="right">                       Pos2 = core-&gt;j2000ToEquinoxEqu(LocTrans*Pos1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               toRADec(Pos2,RA,Dec);</td><td> </td><td class="right">               toRADec(Pos2,RA,Dec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d MoonAltAz = core-&gt;equinoxEquToAltAz(Pos2,StelCore::Ref
ractionOff);</td><td> </td><td class="right">               Vec3d MoonAltAz = core-&gt;equinoxEquToAltAz(Pos2,StelCore::Ref
ractionOff);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               raised = MoonAltAz[2] &gt; <span class="delete">0.0</span>;</td><td> </td><td class="rblock">               raised = MoonAltAz[2] &gt; <span class="insert">RefracHoriz</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Initial guesses of rise/set/transit times.</td><td> </td><td class="right">// Initial guesses of rise/set/transit times.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// They are called 'Moon', but are also used for the Sun or planet:</td><td> </td><td class="right">// They are called 'Moon', but are also used for the Sun or planet:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double Hcurr = -HourAngle(mylat,alti,selDec)*sign(LocPos[1])
;</td><td> </td><td class="right">               double Hcurr = -HourAngle(mylat,alti,selDec)*sign(LocPos[1])
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double SidT = toUnsignedRA(selRA + Hcurr);</td><td> </td><td class="right">               double SidT = toUnsignedRA(selRA + Hcurr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               MoonCulm = -Hcurr;</td><td> </td><td class="right">               MoonCulm = -Hcurr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               MoonRise = (-Hhoriz-Hcurr);</td><td> </td><td class="right">               MoonRise = (-Hhoriz-Hcurr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               MoonSet = (Hhoriz-Hcurr);</td><td> </td><td class="right">               MoonSet = (Hhoriz-Hcurr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1177</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 1202</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Rise time:</td><td> </td><td class="right">// Rise time:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       tempEphH = MoonRise*TFrac;</td><td> </td><td class="right">                       tempEphH = MoonRise*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonRise = myJD + (MoonRise/24.);</td><td> </td><td class="right">                       MoonRise = myJD + (MoonRise/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (i=0; i&lt;Niter; i++)</td><td> </td><td class="right">                       for (i=0; i&lt;Niter; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get modified coordinates:</td><td> </td><td class="right">       // Get modified coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               jd1 = MoonRise;</td><td> </td><td class="right">                               jd1 = MoonRise;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (Kind&lt;3)</td><td> </td><td class="right">                               if (Kind&lt;3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       getSunMoonCoords(core,jd1,RAS,DecS,R
A,Dec,false);</td><td> </td><td class="rblock">                                       getSunMoonCoords(core,jd1,RAS,DecS,R
A,Dec,<span class="insert">EclLon,</span>false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else</td><td> </td><td class="right">                               } else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       getPlanetCoords(core,jd1,RA,Dec,fals
e);</td><td> </td><td class="right">                                       getPlanetCoords(core,jd1,RA,Dec,fals
e);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               };</td><td> </td><td class="right">                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (Kind==1) {RA = RAS; Dec = DecS;};</td><td> </td><td class="right">                               if (Kind==1) {RA = RAS; Dec = DecS;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Current hour angle at mod. coordinates:</td><td> </td><td class="right">       // Current hour angle at mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr = toUnsignedRA(SidT-RA);</td><td> </td><td class="right">                               Hcurr = toUnsignedRA(SidT-RA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr -= (raised)?0.0:24.;</td><td> </td><td class="right">                               Hcurr -= (raised)?0.0:24.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr -= (Hcurr&gt;12.)?24.0:0.0;</td><td> </td><td class="right">                               Hcurr -= (Hcurr&gt;12.)?24.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // H at horizon for mod. coordinates:</td><td> </td><td class="right">       // H at horizon for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               Hhoriz = HourAngle(mylat,<span class="delete">0.0</span>,Dec);</td><td> </td><td class="rblock">                               Hhoriz = HourAngle(mylat,<span class="insert">RefracHoriz</span>,Dec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute eph. times for mod. coordinates:</td><td> </td><td class="right">       // Compute eph. times for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               TempH = (-Hhoriz-Hcurr)*TFrac;</td><td> </td><td class="right">                               TempH = (-Hhoriz-Hcurr)*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (raised==false) TempH += (TempH&lt;0.0)?24.0
:0.0;</td><td> </td><td class="right">                               if (raised==false) TempH += (TempH&lt;0.0)?24.0
:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Check convergence:</td><td> </td><td class="right">                       // Check convergence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (std::abs(TempH-tempEphH)&lt;JDsec) break;</td><td> </td><td class="right">                               if (std::abs(TempH-tempEphH)&lt;JDsec) break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Update rise-time estimate:</td><td> </td><td class="right">                       // Update rise-time estimate:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               tempEphH = TempH;</td><td> </td><td class="right">                               tempEphH = TempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               MoonRise = myJD + (tempEphH/24.);</td><td> </td><td class="right">                               MoonRise = myJD + (tempEphH/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set time:</td><td> </td><td class="right">// Set time:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       tempEphH = MoonSet;</td><td> </td><td class="right">                       tempEphH = MoonSet;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonSet = myJD + (MoonSet/24.);</td><td> </td><td class="right">                       MoonSet = myJD + (MoonSet/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (i=0; i&lt;Niter; i++)</td><td> </td><td class="right">                       for (i=0; i&lt;Niter; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get modified coordinates:</td><td> </td><td class="right">       // Get modified coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               jd1 = MoonSet;</td><td> </td><td class="right">                               jd1 = MoonSet;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (Kind&lt;3)</td><td> </td><td class="right">                               if (Kind&lt;3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       getSunMoonCoords(core,jd1,RAS,DecS,R
A,Dec,false);</td><td> </td><td class="rblock">                                       getSunMoonCoords(core,jd1,RAS,DecS,R
A,Dec,<span class="insert">EclLon,</span>false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else</td><td> </td><td class="right">                               } else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       getPlanetCoords(core,jd1,RA,Dec,fals
e);</td><td> </td><td class="right">                                       getPlanetCoords(core,jd1,RA,Dec,fals
e);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               };</td><td> </td><td class="right">                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (Kind==1) {RA = RAS; Dec = DecS;};</td><td> </td><td class="right">                               if (Kind==1) {RA = RAS; Dec = DecS;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Current hour angle at mod. coordinates:</td><td> </td><td class="right">       // Current hour angle at mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr = toUnsignedRA(SidT-RA);</td><td> </td><td class="right">                               Hcurr = toUnsignedRA(SidT-RA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr -= (raised)?24.:0.;</td><td> </td><td class="right">                               Hcurr -= (raised)?24.:0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr += (Hcurr&lt;-12.)?24.0:0.0;</td><td> </td><td class="right">                               Hcurr += (Hcurr&lt;-12.)?24.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // H at horizon for mod. coordinates:</td><td> </td><td class="right">       // H at horizon for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               Hhoriz = HourAngle(mylat,<span class="delete">0.0</span>,Dec);</td><td> </td><td class="rblock">                               Hhoriz = HourAngle(mylat,<span class="insert">RefracHoriz</span>,Dec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute eph. times for mod. coordinates:</td><td> </td><td class="right">       // Compute eph. times for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               TempH = (Hhoriz-Hcurr)*TFrac;</td><td> </td><td class="right">                               TempH = (Hhoriz-Hcurr)*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (raised==false) TempH -= (TempH&gt;0.0)?24.0
:0.0;</td><td> </td><td class="right">                               if (raised==false) TempH -= (TempH&gt;0.0)?24.0
:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Check convergence:</td><td> </td><td class="right">               // Check convergence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (std::abs(TempH-tempEphH)&lt;JDsec) break;</td><td> </td><td class="right">                               if (std::abs(TempH-tempEphH)&lt;JDsec) break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Update set-time estimate:</td><td> </td><td class="right">               // Update set-time estimate:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               tempEphH = TempH;</td><td> </td><td class="right">                               tempEphH = TempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               MoonSet = myJD + (tempEphH/24.);</td><td> </td><td class="right">                               MoonSet = myJD + (tempEphH/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1252</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 1277</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               tempEphH = MoonCulm;</td><td> </td><td class="right">               tempEphH = MoonCulm;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               MoonCulm = myJD + (MoonCulm/24.);</td><td> </td><td class="right">               MoonCulm = myJD + (MoonCulm/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               for (i=0; i&lt;Niter; i++)</td><td> </td><td class="right">               for (i=0; i&lt;Niter; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get modified coordinates:</td><td> </td><td class="right">       // Get modified coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       jd1 = MoonCulm;</td><td> </td><td class="right">                       jd1 = MoonCulm;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (Kind&lt;3)</td><td> </td><td class="right">                               if (Kind&lt;3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       getSunMoonCoords(core,jd1,RAS,DecS,R
A,Dec,false);</td><td> </td><td class="rblock">                                       getSunMoonCoords(core,jd1,RAS,DecS,R
A,Dec,<span class="insert">EclLon,</span>false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else</td><td> </td><td class="right">                               } else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       getPlanetCoords(core,jd1,RA,Dec,fals
e);</td><td> </td><td class="right">                                       getPlanetCoords(core,jd1,RA,Dec,fals
e);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               };</td><td> </td><td class="right">                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (Kind==1) {RA = RAS; Dec = DecS;};</td><td> </td><td class="right">                       if (Kind==1) {RA = RAS; Dec = DecS;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Current hour angle at mod. coordinates:</td><td> </td><td class="right">       // Current hour angle at mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Hcurr = toUnsignedRA(SidT-RA);</td><td> </td><td class="right">                       Hcurr = toUnsignedRA(SidT-RA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Hcurr += (LocPos[1]&lt;0.0)?24.0:-24.0;</td><td> </td><td class="right">                       Hcurr += (LocPos[1]&lt;0.0)?24.0:-24.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 1276</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 1301</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       TempH = -Hcurr*TFrac;</td><td> </td><td class="right">                       TempH = -Hcurr*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Check convergence:</td><td> </td><td class="right">       // Check convergence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (std::abs(TempH-tempEphH)&lt;JDsec) break;</td><td> </td><td class="right">                       if (std::abs(TempH-tempEphH)&lt;JDsec) break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       tempEphH = TempH;</td><td> </td><td class="right">                       tempEphH = TempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonCulm = myJD + (tempEphH/24.);</td><td> </td><td class="right">                       MoonCulm = myJD + (tempEphH/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       culmAlt = std::abs(mylat-Dec); // 90 - altitude at t
ransit.</td><td> </td><td class="right">                       culmAlt = std::abs(mylat-Dec); // 90 - altitude at t
ransit.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//             qDebug() &lt;&lt; q_("%1").arg(MoonCulm,0,'f',5);</td><td> </td><td class="right">//             qDebug() &lt;&lt; q_("%1").arg(MoonCulm,0,'f',5);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">lastJDMoon = myJD;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }; // Comes from if (std::abs(myJD-lastJDMoon)&gt;JDsec || LastObject!=
Kind)</td><td> </td><td class="right">       }; // Comes from if (std::abs(myJD-lastJDMoon)&gt;JDsec || LastObject!=
Kind)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Find out the days of Full Moon:</td><td> </td><td class="right">// Find out the days of Full Moon:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (Kind==2 &amp;&amp; show_FullMoon) // || show_SuperMoon))</td><td> </td><td class="right">       if (Kind==2 &amp;&amp; show_FullMoon) // || show_SuperMoon))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Only estimate date of Full Moon if we have changed Lunar month:</td><td> </td><td class="right">       // Only estimate date of Full Moon if we have changed Lunar month:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (myJD &gt; nextFullMoon || myJD &lt; prevFullMoon)</td><td> </td><td class="right">               if (myJD &gt; nextFullMoon || myJD &lt; prevFullMoon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l19" /><small>skipping to change at</small><em> line 1297</em></th><th> </th><th><a name="part-r19" /><small>skipping to change at</small><em> line 1324</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double nT;</td><td> </td><td class="right">                       double nT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double dT = std::modf((myJD-RefFullMoon)/MoonT,&amp;nT);</td><td> </td><td class="right">                       double dT = std::modf((myJD-RefFullMoon)/MoonT,&amp;nT);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (dT&gt;0.5) {nT += 1.0;};</td><td> </td><td class="right">                       if (dT&gt;0.5) {nT += 1.0;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (dT&lt;-0.5) {nT -= 1.0;};</td><td> </td><td class="right">                       if (dT&lt;-0.5) {nT -= 1.0;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double TempFullMoon = RefFullMoon + nT*MoonT;</td><td> </td><td class="right">                       double TempFullMoon = RefFullMoon + nT*MoonT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Improve the estimate iteratively (Secant method over Lunar-phase 
vs. time):</td><td> </td><td class="right">       // Improve the estimate iteratively (Secant method over Lunar-phase 
vs. time):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       dT = 0.1/1440.; // 6 seconds. Our time span for the 
finite-difference derivative estimate.</td><td> </td><td class="right">                       dT = 0.1/1440.; // 6 seconds. Our time span for the 
finite-difference derivative estimate.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       double Deriv1, Deriv2; // Variables for temporal use</td><td> </td><td class="rblock"><span class="insert">//</span>                     double Deriv1, Deriv2; // Variables for temporal use</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">.</td><td> </td><td class="rblock">.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       double Sec1, Sec2, <span class="delete">SecMed,</span> Temp1, Temp2; // <span class="delete">Variable</span></td><td> </td><td class="rblock">                       double Sec1, Sec2, Temp1, Temp2; // <span class="insert">Variables</span> for <span class="insert">te</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">s</span> for <span class="delete">temporal</span> use.</td><td> </td><td class="rblock"><span class="insert">mporal</span> use.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double iniEst1, iniEst2;  // JD values that MUST inc
lude the solution within them.</td><td> </td><td class="right">                       double iniEst1, iniEst2;  // JD values that MUST inc
lude the solution within them.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       double Phase1<span class="delete">, Phase2, PhaseMed</span>;</td><td> </td><td class="rblock">                       double Phase1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (int j=0; j&lt;2; j++)</td><td> </td><td class="right">                       for (int j=0; j&lt;2; j++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       { // Two steps: one for the previos Full Moon and th
e other for the next one.</td><td> </td><td class="right">                       { // Two steps: one for the previos Full Moon and th
e other for the next one.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               iniEst1 =  TempFullMoon - 0.25*MoonT;</td><td> </td><td class="right">                               iniEst1 =  TempFullMoon - 0.25*MoonT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               iniEst2 =  TempFullMoon + 0.25*MoonT;</td><td> </td><td class="right">                               iniEst2 =  TempFullMoon + 0.25*MoonT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Sec1 = iniEst1; // TempFullMoon - 0.05*MoonT
; // Initial estimates of Full-Moon dates</td><td> </td><td class="right">                               Sec1 = iniEst1; // TempFullMoon - 0.05*MoonT
; // Initial estimates of Full-Moon dates</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Sec2 = iniEst2; // TempFullMoon + 0.05*MoonT
;</td><td> </td><td class="right">                               Sec2 = iniEst2; // TempFullMoon + 0.05*MoonT
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               <span class="insert">getSunMoonCoords(core,Sec1,RAS,DecS,RA,Dec,E</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">clLon,false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               Temp1 = EclLon; //Lambda(RA,Dec,RAS,DecS);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               getSunMoonCoords(core,Sec2,RAS,DecS,RA,Dec,E</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">clLon,false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               Temp2 = EclLon; //Lambda(RA,Dec,RAS,DecS);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               for (int i=0; i&lt;100; i++) // A limit of 100 
iterations.</td><td> </td><td class="right">                               for (int i=0; i&lt;100; i++) // A limit of 100 
iterations.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">getSunMoonCoords(core,Sec1+dT/2.,RAS</span></td><td> </td><td class="rblock">                                        Phase1 = <span class="insert">(Sec2-Sec1)/(Temp1-Temp2)*</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,DecS,RA,Dec,false);</span></td><td> </td><td class="rblock"><span class="insert">Temp1+Sec1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Temp1 = Lambda(RA,Dec,RAS,DecS);</span></td><td> </td><td class="rblock"><span class="insert">                                       getSunMoonCoords(core,Phase1,RAS,Dec</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       getSunMoonCoords(core,Sec1-dT/2.,RAS</span></td><td> </td><td class="rblock"><span class="insert">S,RA,Dec,EclLon,false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,DecS,RA,Dec,false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Temp2 = Lambda(RA,Dec,RAS,DecS);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Deriv1 = (Temp1-Temp2)/dT;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       Phase1 =  <span class="delete">(Temp1+Temp2)/2.;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       getSunMoonCoords(core,Sec2+dT/2.,RAS</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,DecS,RA,Dec,false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Temp1 = Lambda(RA,Dec,RAS,DecS);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       getSunMoonCoords(core,Sec2-dT/2.,RAS</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,DecS,RA,Dec,false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Temp2 = Lambda(RA,Dec,RAS,DecS);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Deriv2 = (Temp1-Temp2)/dT;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Phase2 =  (Temp1+Temp2)/2.;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       SecMed = (Sec2+Sec1)/2.;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       getSunMoonCoords(core,SecMed+dT/2.,R</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">AS,DecS,RA,Dec,false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Temp1 = Lambda(RA,Dec,RAS,DecS);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       getSunMoonCoords(core,SecMed-dT/2.,R</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">AS,DecS,RA,Dec,false);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       Temp2 = Lambda(RA,Dec,RAS,DecS);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">//      DerivMed</span> = <span class="delete">(Temp1-Temp2)/dT;</span></td><td> </td><td class="rblock">                                        <span class="insert">if (Temp1*EclLon &lt; 0.0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       PhaseMed</span> =  <span class="delete">(Temp1+Temp2)/2.;</span></td><td> </td><td class="rblock"><span class="insert">                                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               Sec2</span> = <span class="insert">Phase1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               Temp2</span> = <span class="insert">EclLon;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       } else {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               Sec1 = Phase1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               Temp1 = EclLon;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">Temp1 = Sec2 - Deriv2*(Sec2-Sec1)/(D
eriv2-Deriv1)</span>;</td><td> </td><td class="rblock">                                       <span class="insert">}</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       // <span class="delete">Force the solution to fall within</span></td><td> </td><td class="rblock">                               //      <span class="insert">qDebug() &lt;&lt; QString("%1 %2 %3 %4 ").</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> the range of good possible solutions:</span></td><td> </td><td class="rblock"><span class="insert">arg(Sec1).arg(Sec2).arg(Temp1).arg(Temp2);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       if <span class="delete">(Temp1</span> &lt; <span class="delete">iniEst1 || Temp1 &gt; iniEs</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">t2)</span></td><td> </td><td class="rblock">                                       if <span class="insert">(std::abs(Sec2-Sec1)</span> &lt; <span class="insert">10.*dT)  /</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       {</span></td><td> </td><td class="rblock"><span class="insert">/ 1 minute accuracy; convergence.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               if (Phase1&gt;Phase2)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                       Sec2 = (Phase2 &gt; Pha</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">seMed)?Sec2:SecMed;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               } else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                       Sec1 = Sec2;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                       Sec2 = (Phase1&gt;Phase</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Med)?Sec1:SecMed;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               };</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       } else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               <span class="delete">Sec1</span> = <span class="delete">Sec2; Sec2 = Temp1;</span></td><td> </td><td class="rblock">                                               <span class="insert">TempFullMoon</span> = <span class="insert">(Sec1+Sec2)/2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               //              qDebug() &lt;&lt; QString("%1%2 ")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.arg(TempFullMoon);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       };</td><td> </td><td class="right">                                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">if (std::abs(Sec2-Sec1) &lt; 10.*dT) {T</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">empFullMoon = Temp1; break;}  // 1 minute accuracy. Convergence.</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               };</td><td> </td><td class="right">                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (TempFullMoon &gt; myJD)</td><td> </td><td class="right">                               if (TempFullMoon &gt; myJD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       nextFullMoon = TempFullMoon;</td><td> </td><td class="right">                                       nextFullMoon = TempFullMoon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       TempFullMoon -= MoonT;</td><td> </td><td class="right">                                       TempFullMoon -= MoonT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else</td><td> </td><td class="right">                               } else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       prevFullMoon = TempFullMoon;</td><td> </td><td class="right">                                       prevFullMoon = TempFullMoon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       TempFullMoon += MoonT;</td><td> </td><td class="right">                                       TempFullMoon += MoonT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l20" /><small>skipping to change at</small><em> line 1426</em></th><th> </th><th><a name="part-r20" /><small>skipping to change at</small><em> line 1435</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bestNight = "";</td><td> </td><td class="right">               bestNight = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ObsRange = "";</td><td> </td><td class="right">               ObsRange = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               AcroCos = "";</td><td> </td><td class="right">               AcroCos = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Return the Moon and Earth to its current position:</td><td> </td><td class="right">// Return the Moon and Earth to its current position:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (Kind&lt;3)</td><td> </td><td class="right">       if (Kind&lt;3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               getSunMoonCoords(core,myJD,RAS,DecS,RA,Dec,true);</td><td> </td><td class="rblock">               getSunMoonCoords(core,myJD,RAS,DecS,RA,Dec,<span class="insert">EclLon,</span>true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else</td><td> </td><td class="right">       } else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                getPlanetCoords(core,myJD,RA,Dec,true);</td><td> </td><td class="right">                getPlanetCoords(core,myJD,RA,Dec,true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">lastJDMoon = myJD;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return raises;</td><td> </td><td class="right">       return raises;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////////</td><td> </td><td class="right">//////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///  STUFF FOR THE GUI CONFIG</td><td> </td><td class="right">///  STUFF FOR THE GUI CONFIG</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool Observability::configureGui(bool show)</td><td> </td><td class="right">bool Observability::configureGui(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (show)</td><td> </td><td class="right">       if (show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()
.getGui());</td><td> </td><td class="right">               StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance()
.getGui());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               gui-&gt;getGuiAction<span class="delete">s("actionShow_Observability_ConfigDialog")-
&gt;</span>setChecked(true);</td><td> </td><td class="rblock">               gui-&gt;getGuiAction<span class="insert">("actionShow_Observability_ConfigDialog")-&gt;
</span>setChecked(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::restoreDefaults(void)</td><td> </td><td class="right">void Observability::restoreDefaults(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       restoreDefaultConfigIni();</td><td> </td><td class="right">       restoreDefaultConfigIni();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       readSettingsFromConfig();</td><td> </td><td class="right">       readSettingsFromConfig();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::restoreDefaultConfigIni(void)</td><td> </td><td class="right">void Observability::restoreDefaultConfigIni(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">conf-&gt;beginGroup("Observability");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // delete all existing settings...</td><td> </td><td class="right">       // delete all existing settings...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       conf-&gt;remove("");</td><td> </td><td class="right">       conf-&gt;remove("");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set defaults</td><td> </td><td class="right">       // Set defaults</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/font_size",</span> 15);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("font_size",</span> 15);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/Sun_Altitude",</span> 12);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("Sun_Altitude",</span> 12);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/font_color",</span> "0,0.5,1");</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("Horizon_Altitude", 0);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_AcroCos",</span> true);</td><td> </td><td class="rblock"><span class="insert">       conf-&gt;setValue("font_color",</span> "0,0.5,1");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_Good_Nights",</span> true);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_AcroCos",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_Best_Night",</span> true);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_Good_Nights",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_Today",</span> true);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_Best_Night",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_FullMoon",</span> true);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_Today",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     <span class="delete">conf-&gt;setValue("Observability/show_Crescent",</span> true);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_FullMoon",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     <span class="delete">conf-&gt;setValue("Observability/show_SuperMoon",</span> true);</td><td> </td><td class="rblock">//     <span class="insert">conf-&gt;setValue("show_Crescent",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">//     <span class="insert">conf-&gt;setValue("show_SuperMoon",</span> true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">conf-&gt;endGroup();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::readSettingsFromConfig(void)</td><td> </td><td class="right">void Observability::readSettingsFromConfig(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">conf-&gt;beginGroup("Observability");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load settings from main config file</td><td> </td><td class="right">       // Load settings from main config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fontSize = conf-&gt;value("<span class="delete">Observability/</span>font_size",15).toInt();</td><td> </td><td class="rblock">       fontSize = conf-&gt;value("font_size",15).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       font.setPixelSize(fontSize);</td><td> </td><td class="right">       font.setPixelSize(fontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fontColor = <span class="delete">StelUtils::strToVec3f(conf-&gt;value("Observability/font_co</span></td><td> </td><td class="rblock">       fontColor = <span class="insert">StelUtils::strToVec3f(conf-&gt;value("font_color", "0,0.5,1</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">lor", "0,0.5,1").toString());</span></td><td> </td><td class="rblock"><span class="insert">").toString());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_AcroCos = <span class="delete">conf-&gt;value("Observability/show_AcroCos", true).toBoo</span></td><td> </td><td class="rblock">       show_AcroCos = <span class="insert">conf-&gt;value("show_AcroCos", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">l();</span></td><td> </td><td class="rblock">       show_Good_Nights = <span class="insert">conf-&gt;value("show_Good_Nights", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_Good_Nights = <span class="delete">conf-&gt;value("Observability/show_Good_Nights", tru</span></td><td> </td><td class="rblock">       show_Best_Night = <span class="insert">conf-&gt;value("show_Best_Night", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e).toBool();</span></td><td> </td><td class="rblock">       show_Today = <span class="insert">conf-&gt;value("show_Today",</span> true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_Best_Night = <span class="delete">conf-&gt;value("Observability/show_Best_Night", true)</span></td><td> </td><td class="rblock">       show_FullMoon = <span class="insert">conf-&gt;value("show_FullMoon", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.toBool();</span></td><td> </td><td class="rblock">//     show_Crescent = <span class="insert">conf-&gt;value("show_Crescent", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_Today = <span class="delete">conf-&gt;value("Observability/show_Today",</span> true).toBool();</td><td> </td><td class="rblock">//     show_SuperMoon = <span class="insert">conf-&gt;value("show_SuperMoon", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       show_FullMoon = <span class="delete">conf-&gt;value("Observability/show_FullMoon", true).toB</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     show_Crescent = <span class="delete">conf-&gt;value("Observability/show_Crescent", true).toB</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     show_SuperMoon = <span class="delete">conf-&gt;value("Observability/show_SuperMoon", true).t</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">oBool();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       iAltitude = conf-&gt;value("<span class="delete">Observability/</span>Sun_Altitude", 12).toInt();</td><td> </td><td class="rblock">       iAltitude = conf-&gt;value("Sun_Altitude", 12).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       AstroTwiAlti  = -((double)iAltitude)/Rad2Deg ;</td><td> </td><td class="right">       AstroTwiAlti  = -((double)iAltitude)/Rad2Deg ;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">iHorizAltitude = conf-&gt;value("Horizon_Altitude", 0).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       HorizAlti = ((double)iHorizAltitude)/Rad2Deg ;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       conf-&gt;endGroup();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::saveSettingsToConfig(void)</td><td> </td><td class="right">void Observability::saveSettingsToConfig(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString fontColorStr = QString("%1,%2,%3").arg(fontColor[0],0,'f',2)
.arg(fontColor[1],0,'f',2).arg(fontColor[2],0,'f',2);</td><td> </td><td class="right">       QString fontColorStr = QString("%1,%2,%3").arg(fontColor[0],0,'f',2)
.arg(fontColor[1],0,'f',2).arg(fontColor[2],0,'f',2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set updated values</td><td> </td><td class="right">       // Set updated values</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/font_size",</span> fontSize);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;beginGroup("Observability");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/Sun_Altitude",</span> iAltitude);</td><td> </td><td class="rblock"><span class="insert">       conf-&gt;setValue("font_size",</span> fontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/font_color",</span> fontColorStr);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("Sun_Altitude",</span> iAltitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_AcroCos",</span> show_AcroCos);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("Horizon_Altitude", iHorizAltitude);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_Good_Nights",</span> show_Good_Nights);</td><td> </td><td class="rblock"><span class="insert">       conf-&gt;setValue("font_color",</span> fontColorStr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_Best_Night",</span> show_Best_Night);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_AcroCos",</span> show_AcroCos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_Today",</span> show_Today);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_Good_Nights",</span> show_Good_Nights);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">conf-&gt;setValue("Observability/show_FullMoon",</span> show_FullMoon);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_Best_Night",</span> show_Best_Night);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     <span class="delete">conf-&gt;setValue("Observability/show_Crescent",</span> show_Crescent);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_Today",</span> show_Today);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">//     <span class="delete">conf-&gt;setValue("Observability/show_SuperMoon",</span> show_SuperMoon);</td><td> </td><td class="rblock">       <span class="insert">conf-&gt;setValue("show_FullMoon",</span> show_FullMoon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">//     <span class="insert">conf-&gt;setValue("show_Crescent",</span> show_Crescent);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">//     <span class="insert">conf-&gt;setValue("show_SuperMoon",</span> show_SuperMoon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">conf-&gt;endGroup();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::setShow(int output, bool setVal)</td><td> </td><td class="right">void Observability::setShow(int output, bool setVal)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       switch(output)</td><td> </td><td class="right">       switch(output)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 1: {show_Today = setVal; break;}</td><td> </td><td class="right">               case 1: {show_Today = setVal; break;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 2: {show_AcroCos = setVal; break;}</td><td> </td><td class="right">               case 2: {show_AcroCos = setVal; break;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 3: {show_Good_Nights = setVal; break;}</td><td> </td><td class="right">               case 3: {show_Good_Nights = setVal; break;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 4: {show_Best_Night = setVal; break;}</td><td> </td><td class="right">               case 4: {show_Best_Night = setVal; break;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l21" /><small>skipping to change at</small><em> line 1561</em></th><th> </th><th><a name="part-r21" /><small>skipping to change at</small><em> line 1582</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int Observability::getFontSize(void)</td><td> </td><td class="right">int Observability::getFontSize(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return fontSize;</td><td> </td><td class="right">       return fontSize;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int Observability::getSunAltitude(void)</td><td> </td><td class="right">int Observability::getSunAltitude(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return iAltitude;</td><td> </td><td class="right">       return iAltitude;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">int Observability::getHorizAltitude(void)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return iHorizAltitude;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::setFontColor(int color, int value)</td><td> </td><td class="right">void Observability::setFontColor(int color, int value)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float fValue = (float)(value) / 100.;</td><td> </td><td class="right">       float fValue = (float)(value) / 100.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fontColor[color] = fValue;</td><td> </td><td class="right">       fontColor[color] = fValue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::setFontSize(int value)</td><td> </td><td class="right">void Observability::setFontSize(int value)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fontSize = value;</td><td> </td><td class="right">       fontSize = value;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::setSunAltitude(int value)</td><td> </td><td class="right">void Observability::setSunAltitude(int value)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       AstroTwiAlti  = -((double) value)/Rad2Deg ;</td><td> </td><td class="right">       AstroTwiAlti  = -((double) value)/Rad2Deg ;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       iAltitude = value;</td><td> </td><td class="right">       iAltitude = value;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       configChanged = true;</td><td> </td><td class="right">       configChanged = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void Observability::setHorizAltitude(int value)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       HorizAlti = ((double) value)/Rad2Deg ;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       iHorizAltitude = value;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       configChanged = true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///  END OF STUFF FOR THE GUI CONFIG.</td><td> </td><td class="right">///  END OF STUFF FOR THE GUI CONFIG.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////</td><td> </td><td class="right">///////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Enable the Observability:</td><td> </td><td class="right">// Enable the Observability:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::enableObservability(bool b)</td><td> </td><td class="right">void Observability::enableObservability(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagShowObservability = b;</td><td> </td><td class="right">       flagShowObservability = b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 76 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>191 lines changed or deleted</i></th><th><i> </i></th><th><i>212 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
