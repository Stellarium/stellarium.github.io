<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: Oculars.cpp - Oculars.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;Oculars.cpp&nbsp;</th><th> </th><th>&nbsp;Oculars.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 32</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 32</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "GridLinesMgr.hpp"</td><td> </td><td class="right">#include "GridLinesMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "LabelMgr.hpp"</td><td> </td><td class="right">#include "LabelMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMovementMgr.hpp"</td><td> </td><td class="right">#include "StelMovementMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#include "Stel<span class="delete">Painte</span>r.hpp"</td><td> </td><td class="rblock">#include "Stel<span class="insert">ShortcutMg</span>r.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGui.hpp"</td><td> </td><td class="right">#include "StelGui.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGuiItems.hpp"</td><td> </td><td class="right">#include "StelGuiItems.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMainWindow.hpp"</td><td> </td><td class="right">#include "StelMainWindow.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "SkyGui.hpp"</td><td> </td><td class="right">#include "SkyGui.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "renderer/GenericVertexTypes.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "renderer/StelGeometryBuilder.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "renderer/StelRenderer.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QAction&gt;</td><td> </td><td class="right">#include &lt;QAction&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QGraphicsWidget&gt;</td><td> </td><td class="right">#include &lt;QGraphicsWidget&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QKeyEvent&gt;</td><td> </td><td class="right">#include &lt;QKeyEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMenu&gt;</td><td> </td><td class="right">#include &lt;QMenu&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMouseEvent&gt;</td><td> </td><td class="right">#include &lt;QMouseEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QtNetwork&gt;</td><td> </td><td class="right">#include &lt;QtNetwork&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QPixmap&gt;</td><td> </td><td class="right">#include &lt;QPixmap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSignalMapper&gt;</td><td> </td><td class="right">#include &lt;QSignalMapper&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;cmath&gt;</td><td> </td><td class="right">#include &lt;cmath&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#if defined(__APPLE__) &amp;&amp; defined(__MACH__)</span></td><td> </td><td class="rblock">#ifdef <span class="insert">Q_OS_MAC</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include &lt;OpenGL/glu.h&gt;        /* Header File For The GLU Library */</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#else</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include &lt;GL/glu.h&gt;    /* Header File For The GLU Library */</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#endif</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#ifdef <span class="delete">Q_WS_MAC</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">extern void qt_set_sequence_auto_mnemonic(bool b);</td><td> </td><td class="right">extern void qt_set_sequence_auto_mnemonic(bool b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static QSettings *settings; //!&lt; The settings as read in from the ini file.</td><td> </td><td class="right">static QSettings *settings; //!&lt; The settings as read in from the ini file.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ********************************************************************* */</td><td> </td><td class="right">/* ********************************************************************* */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#if 0</td><td> </td><td class="right">#if 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark -</td><td> </td><td class="right">#pragma mark -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark StelModuleMgr Methods</td><td> </td><td class="right">#pragma mark StelModuleMgr Methods</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 137</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 134</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopesSignalMapper = new QSignalMapper(this);</td><td> </td><td class="right">       telescopesSignalMapper = new QSignalMapper(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedCCDIndex = -1;</td><td> </td><td class="right">       selectedCCDIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedOcularIndex = -1;</td><td> </td><td class="right">       selectedOcularIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selectedTelescopeIndex = -1;</td><td> </td><td class="right">       selectedTelescopeIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       usageMessageLabelID = -1;</td><td> </td><td class="right">       usageMessageLabelID = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("Oculars");</td><td> </td><td class="right">       setObjectName("Oculars");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#ifdef Q_<span class="delete">W</span>S_MAC</td><td> </td><td class="rblock">#ifdef Q_<span class="insert">O</span>S_MAC</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qt_set_sequence_auto_mnemonic(true);</td><td> </td><td class="right">       qt_set_sequence_auto_mnemonic(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Oculars::~Oculars()</td><td> </td><td class="right">Oculars::~Oculars()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete ocularDialog;</td><td> </td><td class="right">       delete ocularDialog;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ocularDialog = NULL;</td><td> </td><td class="right">       ocularDialog = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (guiPanel)</td><td> </td><td class="right">       if (guiPanel)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete guiPanel;</td><td> </td><td class="right">               delete guiPanel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 229</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 226</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               settings-&gt;setValue(prefix + "vFlip", telescope-&gt;isVFlipped()
);</td><td> </td><td class="right">               settings-&gt;setValue(prefix + "vFlip", telescope-&gt;isVFlipped()
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               index++;</td><td> </td><td class="right">               index++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("ocular_count", oculars.count());</td><td> </td><td class="right">       settings-&gt;setValue("ocular_count", oculars.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("telescope_count", telescopes.count());</td><td> </td><td class="right">       settings-&gt;setValue("telescope_count", telescopes.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;setValue("ccd_count", ccds.count());</td><td> </td><td class="right">       settings-&gt;setValue("ccd_count", ccds.count());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       settings-&gt;sync();</td><td> </td><td class="right">       settings-&gt;sync();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Draw any parts on the screen which are for our module</td><td> </td><td class="right">//! Draw any parts on the screen which are for our module</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Oculars::draw(StelCore* core)</td><td> </td><td class="rblock">void Oculars::draw(StelCore* core<span class="insert">, StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagShowTelrad) {</td><td> </td><td class="right">       if (flagShowTelrad) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               paintTelrad();</td><td> </td><td class="rblock">               paintTelrad(<span class="insert">renderer</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else if (flagShowOculars){</td><td> </td><td class="right">       } else if (flagShowOculars){</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Ensure there is a selected ocular &amp; telescope</td><td> </td><td class="right">               // Ensure there is a selected ocular &amp; telescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (selectedCCDIndex &gt; ccds.count()) {</td><td> </td><td class="right">               if (selectedCCDIndex &gt; ccds.count()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars: the selected sensor index of
 "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars: the selected sensor index of
 "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                 &lt;&lt; <span class="delete">selectedCCDIndex</span> &lt;&lt; " <span class="delete">i</span></td><td> </td><td class="rblock">                                                                &lt;&lt; <span class="insert">selected</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">s</span> greater than the sensor count of "</td><td> </td><td class="rblock"><span class="insert">CCDIndex</span> &lt;&lt; " <span class="insert">is</span> greater than the sensor count of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; <span class="delete">ccds.count()</span> &lt;&lt; ". Module disabled!";</td><td> </td><td class="rblock">                                                                &lt;&lt; <span class="insert">ccds.cou</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">nt()</span> &lt;&lt; ". Module disabled!";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (selectedOcularIndex &gt; oculars.count()) {</td><td> </td><td class="right">               if (selectedOcularIndex &gt; oculars.count()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars: the selected ocular index of
 "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars: the selected ocular index of
 "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                 &lt;&lt; <span class="delete">selectedOcularIndex</span> &lt;&lt; </td><td> </td><td class="rblock">                                                                &lt;&lt; <span class="insert">selected</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">" is greater than the ocular count of "</td><td> </td><td class="rblock"><span class="insert">OcularIndex</span> &lt;&lt; " is greater than the ocular count of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; <span class="delete">oculars.count()</span> &lt;&lt; ". Module disabled!";</td><td> </td><td class="rblock">                                                                &lt;&lt; <span class="insert">oculars.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">count()</span> &lt;&lt; ". Module disabled!";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else if (selectedTelescopeIndex &gt; telescopes.count()) {</td><td> </td><td class="right">               else if (selectedTelescopeIndex &gt; telescopes.count()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars: the selected telescope index
 of "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars: the selected telescope index
 of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                 &lt;&lt; <span class="delete">selectedTelescopeIndex</span> </td><td> </td><td class="rblock">                                                                &lt;&lt; <span class="insert">selected</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">&lt;&lt; " is greater than the telescope count of "</td><td> </td><td class="rblock"><span class="insert">TelescopeIndex</span> &lt;&lt; " is greater than the telescope count of "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; <span class="delete">telescopes.count()</span> &lt;&lt; ". Module disabled!";</td><td> </td><td class="rblock">                                                                &lt;&lt; <span class="insert">telescop</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">es.count()</span> &lt;&lt; ". Module disabled!";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ready = false;</td><td> </td><td class="right">                       ready = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (ready) {</td><td> </td><td class="right">               if (ready) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (selectedOcularIndex &gt; -1) {</td><td> </td><td class="right">                       if (selectedOcularIndex &gt; -1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               paintOcularMask();</td><td> </td><td class="rblock">                               paintOcularMask(<span class="insert">renderer</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (flagShowCrosshairs)  {</td><td> </td><td class="right">                               if (flagShowCrosshairs)  {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       paintCrosshairs();</td><td> </td><td class="rblock">                                       paintCrosshairs(<span class="insert">renderer</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (guiPanelEnabled)</td><td> </td><td class="right">                       if (guiPanelEnabled)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Reset the state to allow the panel to be 
painted normally</td><td> </td><td class="right">                               // Reset the state to allow the panel to be 
painted normally</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">glDisable(GL_TEXTURE_2D);</span></td><td> </td><td class="rblock">                               <span class="insert">renderer-&gt;setBlendMode(BlendMode_Alpha);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_A</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">LPHA);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glEnable(GL_BLEND);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Paint the information in the upper-right 
hand corner</td><td> </td><td class="right">                               // Paint the information in the upper-right 
hand corner</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               paintText(core);</td><td> </td><td class="rblock">                               paintText(core<span class="insert">, renderer</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else if (flagShowCCD) {</td><td> </td><td class="right">       } else if (flagShowCCD) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               paintCCDBounds();</td><td> </td><td class="rblock">               paintCCDBounds(<span class="insert">renderer</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (guiPanelEnabled)</td><td> </td><td class="right">               if (guiPanelEnabled)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Reset the state to allow the panel to be painted 
normally</td><td> </td><td class="right">                       // Reset the state to allow the panel to be painted 
normally</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">glDisable(GL_TEXTURE_2D);</span></td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;setBlendMode(BlendMode_Alpha);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       glEnable(GL_BLEND);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Paint the information in the upper-right hand cor
ner</td><td> </td><td class="right">                       // Paint the information in the upper-right hand cor
ner</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       paintText(core);</td><td> </td><td class="rblock">                       paintText(core<span class="insert">, renderer</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Determine which "layer" the plugin's drawing will happen on.</td><td> </td><td class="right">//! Determine which "layer" the plugin's drawing will happen on.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Oculars::getCallOrder(StelModuleActionName actionName) const</td><td> </td><td class="right">double Oculars::getCallOrder(StelModuleActionName actionName) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TODO; this really doesn't seem to have any effect.  I've tried ev
erything from -100 to +100,</td><td> </td><td class="right">       // TODO; this really doesn't seem to have any effect.  I've tried ev
erything from -100 to +100,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //              and a calculated value.  It all seems to work the sa
me regardless.</td><td> </td><td class="right">       //              and a calculated value.  It all seems to work the sa
me regardless.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double order = 1000.0;</td><td> </td><td class="right">       double order = 1000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 529</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 522</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text)) {</td><td> </td><td class="right">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               normalStyleSheet = styleSheetFile.readAll();</td><td> </td><td class="right">               normalStyleSheet = styleSheetFile.readAll();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.close();</td><td> </td><td class="right">       styleSheetFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.setFileName(":/ocular/nightStyle.css");</td><td> </td><td class="right">       styleSheetFile.setFileName(":/ocular/nightStyle.css");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text)) {</td><td> </td><td class="right">       if(styleSheetFile.open(QFile::ReadOnly|QFile::Text)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               nightStyleSheet = styleSheetFile.readAll();</td><td> </td><td class="right">               nightStyleSheet = styleSheetFile.readAll();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       styleSheetFile.close();</td><td> </td><td class="right">       styleSheetFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(&amp;StelApp::getInstance(), SIGNAL(colorSchemeChanged(const QSt
ring&amp;)),</td><td> </td><td class="right">       connect(&amp;StelApp::getInstance(), SIGNAL(colorSchemeChanged(const QSt
ring&amp;)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                         <span class="delete">this, SLOT(setStelStyle(const QStrin</span>g&amp;)));</td><td> </td><td class="rblock">                         <span class="insert">              this, SLOT(setStelStyle(const QStrin
</span>g&amp;)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()),</td><td> </td><td class="right">       connect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               this, SLOT(retranslateGui()));</td><td> </td><td class="rblock">               <span class="insert">                        </span>this, SLOT(retranslateGui()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::setStelStyle(const QString&amp;)</td><td> </td><td class="right">void Oculars::setStelStyle(const QString&amp;)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(ocularDialog) {</td><td> </td><td class="right">       if(ocularDialog) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ocularDialog-&gt;updateStyle();</td><td> </td><td class="right">               ocularDialog-&gt;updateStyle();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ********************************************************************* */</td><td> </td><td class="right">/* ********************************************************************* */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 763</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 756</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Toggle the ocular view on &amp; off. To toggle on, we want to ensure 
there is a selected object.</td><td> </td><td class="right">       // Toggle the ocular view on &amp; off. To toggle on, we want to ensure 
there is a selected object.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!flagShowOculars &amp;&amp; requireSelection &amp;&amp; !StelApp::getInstance().
getStelObjectMgr().getWasSelected() ) {</td><td> </td><td class="right">       if (!flagShowOculars &amp;&amp; requireSelection &amp;&amp; !StelApp::getInstance().
getStelObjectMgr().getWasSelected() ) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (usageMessageLabelID == -1) {</td><td> </td><td class="right">               if (usageMessageLabelID == -1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFontMetrics metrics(font);</td><td> </td><td class="right">                       QFontMetrics metrics(font);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString labelText = q_("Please select an object befo
re switching to ocular view.");</td><td> </td><td class="right">                       QString labelText = q_("Please select an object befo
re switching to ocular view.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelProjector::StelProjectorParams projectorParams =
 core-&gt;getCurrentStelProjectorParams();</td><td> </td><td class="right">                       StelProjector::StelProjectorParams projectorParams =
 core-&gt;getCurrentStelProjectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int xPosition = projectorParams.viewportCenter[0];</td><td> </td><td class="right">                       int xPosition = projectorParams.viewportCenter[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       xPosition = xPosition - 0.5 * (metrics.width(labelTe
xt));</td><td> </td><td class="right">                       xPosition = xPosition - 0.5 * (metrics.width(labelTe
xt));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int yPosition = projectorParams.viewportCenter[1];</td><td> </td><td class="right">                       int yPosition = projectorParams.viewportCenter[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition = yPosition - 0.5 * (metrics.height());</td><td> </td><td class="right">                       yPosition = yPosition - 0.5 * (metrics.height());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">const char *tcolor;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (StelApp::getInstance().getVisionModeNight())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               tcolor = "#C40303";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               tcolor = "#99FF99";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       usageMessageLabelID = labelManager-&gt;labelScreen(labe
lText, xPosition, yPosition,</td><td> </td><td class="right">                       usageMessageLabelID = labelManager-&gt;labelScreen(labe
lText, xPosition, yPosition,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                       <span class="delete">    
                                                                           
 true, font.pixelSize(), "#99FF99"</span>);</td><td> </td><td class="rblock">                                                                       <span class="insert">true
, font.pixelSize(), tcolor</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // we didn't accept the new status - make sure the toolbar b
utton reflects this</td><td> </td><td class="right">               // we didn't accept the new status - make sure the toolbar b
utton reflects this</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               disconnect(actionShowOcular, SIGNAL(toggled(bool)),</td><td> </td><td class="right">               disconnect(actionShowOcular, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                          <span class="delete">this, SLOT(enableOc</span>ular(bool)));</td><td> </td><td class="rblock">                          <span class="insert">                              this, SLOT(enableOc
</span>ular(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               actionShowOcular-&gt;setChecked(false);</td><td> </td><td class="right">               actionShowOcular-&gt;setChecked(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               connect(actionShowOcular, SIGNAL(toggled(bool)),</td><td> </td><td class="right">               connect(actionShowOcular, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">this, SLOT(enableOcular(bool</span>)));</td><td> </td><td class="rblock">                       <span class="insert">                        this, SLOT(enableOcular(bool
</span>)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else {</td><td> </td><td class="right">       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (selectedOcularIndex != -1) {</td><td> </td><td class="right">               if (selectedOcularIndex != -1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // remove the usage label if it is being displayed.</td><td> </td><td class="right">                       // remove the usage label if it is being displayed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hideUsageMessageIfDisplayed();</td><td> </td><td class="right">                       hideUsageMessageIfDisplayed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagShowOculars = enableOcularMode;</td><td> </td><td class="right">                       flagShowOculars = enableOcularMode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       zoom(false);</td><td> </td><td class="right">                       zoom(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //BM: I hope this is the right place...</td><td> </td><td class="right">                       //BM: I hope this is the right place...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (guiPanel)</td><td> </td><td class="right">                       if (guiPanel)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               guiPanel-&gt;showOcularGui();</td><td> </td><td class="right">                               guiPanel-&gt;showOcularGui();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 887</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 885</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td> </td><td class="right">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addSeparator();</td><td> </td><td class="right">                       popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QAction* action = popup-&gt;addAction(q_("Toggle &amp;crosshair"));</td><td> </td><td class="right">               QAction* action = popup-&gt;addAction(q_("Toggle &amp;crosshair"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setCheckable(true);</td><td> </td><td class="right">               action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setChecked(flagShowCrosshairs);</td><td> </td><td class="right">               action-&gt;setChecked(flagShowCrosshairs);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               connect(action, SIGNAL(toggled(bool)),</td><td> </td><td class="right">               connect(action, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">actionShowCrosshairs, SLOT(s</span>etChecked(bool)));</td><td> </td><td class="rblock">                       <span class="insert">                        actionShowCrosshairs, SLOT(s
</span>etChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else {</td><td> </td><td class="right">       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We are not in ocular mode</td><td> </td><td class="right">               // We are not in ocular mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We want to show the CCD's, and if a CCD is selected, the 
telescopes</td><td> </td><td class="right">               // We want to show the CCD's, and if a CCD is selected, the 
telescopes</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //(as a CCD requires a telescope) and the general menu items
.</td><td> </td><td class="right">               //(as a CCD requires a telescope) and the general menu items
.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QAction* action = new QAction(q_("Configure &amp;Oculars"), popu
p);</td><td> </td><td class="right">               QAction* action = new QAction(q_("Configure &amp;Oculars"), popu
p);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setCheckable(true);</td><td> </td><td class="right">               action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               action-&gt;setChecked(ocularDialog-&gt;visible());</td><td> </td><td class="right">               action-&gt;setChecked(ocularDialog-&gt;visible());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               connect(action, SIGNAL(triggered(bool)),</td><td> </td><td class="right">               connect(action, SIGNAL(triggered(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">ocularDialog, SLOT(setVisibl</span>e(bool)));</td><td> </td><td class="rblock">                       <span class="insert">                        ocularDialog, SLOT(setVisibl
</span>e(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               popup-&gt;addAction(action);</td><td> </td><td class="right">               popup-&gt;addAction(action);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               popup-&gt;addSeparator();</td><td> </td><td class="right">               popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!flagShowTelrad) {</td><td> </td><td class="right">               if (!flagShowTelrad) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;CCD")
);</td><td> </td><td class="right">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;CCD")
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setChecked(flagShowCCD);</td><td> </td><td class="right">                       action-&gt;setChecked(flagShowCCD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       connect(action, SIGNAL(toggled(bool)),</td><td> </td><td class="right">                       connect(action, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">actionShowSensor, SL</span>OT(setChecked(bool)));</td><td> </td><td class="rblock">                               <span class="insert">                        actionShowSensor, SL
</span>OT(setChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!flagShowCCD) {</td><td> </td><td class="right">               if (!flagShowCCD) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;Telra
d"));</td><td> </td><td class="right">                       QAction* action = popup-&gt;addAction(q_("Toggle &amp;Telra
d"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       action-&gt;setChecked(flagShowTelrad);</td><td> </td><td class="right">                       action-&gt;setChecked(flagShowTelrad);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       connect(action, SIGNAL(toggled(bool)),</td><td> </td><td class="right">                       connect(action, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">actionShowTelrad, SL</span>OT(setChecked(bool)));</td><td> </td><td class="rblock">                               <span class="insert">                        actionShowTelrad, SL
</span>OT(setChecked(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               popup-&gt;addSeparator();</td><td> </td><td class="right">               popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; selectedTelescop
eIndex &gt; -1)</td><td> </td><td class="right">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; selectedTelescop
eIndex &gt; -1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addAction(q_("&amp;Previous CCD"), this, SLOT(dec
rementCCDIndex()));</td><td> </td><td class="right">                       popup-&gt;addAction(q_("&amp;Previous CCD"), this, SLOT(dec
rementCCDIndex()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addAction(q_("&amp;Next CCD"), this, SLOT(increme
ntCCDIndex()));</td><td> </td><td class="right">                       popup-&gt;addAction(q_("&amp;Next CCD"), this, SLOT(increme
ntCCDIndex()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = new QMenu(q_("&amp;Select CCD"), popup)
;</td><td> </td><td class="right">                       QMenu* submenu = new QMenu(q_("&amp;Select CCD"), popup)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (int index = 0; index &lt; ccds.count(); ++index)</td><td> </td><td class="right">                       for (int index = 0; index &lt; ccds.count(); ++index)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 946</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 944</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action-&gt;setCheckable(true);</td><td> </td><td class="right">                                       action-&gt;setCheckable(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       action-&gt;setChecked(true);</td><td> </td><td class="right">                                       action-&gt;setChecked(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ccdsSignalMapper-&gt;setMapping(action, QString
("%1").arg(index));</td><td> </td><td class="right">                               ccdsSignalMapper-&gt;setMapping(action, QString
("%1").arg(index));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       submenu = new QMenu(q_("&amp;Rotate CCD"), popup);</td><td> </td><td class="right">                       submenu = new QMenu(q_("&amp;Rotate CCD"), popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QAction* rotateAction = NULL;</td><td> </td><td class="right">                       QAction* rotateAction = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;1: -90")
 + QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;1: -90")
 + QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-90"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-90"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;2: -45")
 + QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;2: -45")
 + QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-45"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-45"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;3: -15")
 + QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;3: -15")
 + QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-15"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-15"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;4: -5") 
+ QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;4: -5") 
+ QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-5"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-5"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;5: -1") 
+ QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;5: -1") 
+ QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-1"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("-1"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;6: +1") 
+ QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;6: +1") 
+ QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("1"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("1"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;7: +5") 
+ QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;7: +5") 
+ QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("5"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("5"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;8: +15")
 + QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;8: +15")
 + QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("15"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("15"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;9: +45")
 + QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;9: +45")
 + QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("45"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("45"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(QString("&amp;0: +90")
 + QChar(0x00B0),</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(QString("&amp;0: +90")
 + QChar(0x00B0),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
                                     ccdRotationSignalMapper, SLOT(map()));</td><td> </td><td class="rblock">                                                                           
                                     <span class="insert">                                      
         </span>ccdRotationSignalMapper, SLOT(map()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("90"));</td><td> </td><td class="right">                       ccdRotationSignalMapper-&gt;setMapping(rotateAction, QS
tring("90"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotateAction = submenu-&gt;addAction(q_("&amp;Reset rotatio
n"), this, SLOT(ccdRotationReset()));</td><td> </td><td class="right">                       rotateAction = submenu-&gt;addAction(q_("&amp;Reset rotatio
n"), this, SLOT(ccdRotationReset()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addSeparator();</td><td> </td><td class="right">                       popup-&gt;addSeparator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; telescopes.count
() &gt; 1)</td><td> </td><td class="right">               if (flagShowCCD &amp;&amp; selectedCCDIndex &gt; -1 &amp;&amp; telescopes.count
() &gt; 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td> </td><td class="right">                       QMenu* submenu = addTelescopeSubmenu(popup);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       popup-&gt;addMenu(submenu);</td><td> </td><td class="right">                       popup-&gt;addMenu(submenu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 1089</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 1087</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::toggleCCD(bool show)</td><td> </td><td class="right">void Oculars::toggleCCD(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //If there are no sensors...</td><td> </td><td class="right">       //If there are no sensors...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (ccds.isEmpty() || telescopes.isEmpty())</td><td> </td><td class="right">       if (ccds.isEmpty() || telescopes.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: BM: Make this an on-screen message and/or disable th
e button</td><td> </td><td class="right">               //TODO: BM: Make this an on-screen message and/or disable th
e button</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //if there are no sensors.</td><td> </td><td class="right">               //if there are no sensors.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show)</td><td> </td><td class="right">               if (show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars plugin: Unable to display a s
ensor boundary:"</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars plugin: Unable to display a s
ensor boundary:"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                  <span class="delete">&lt;&lt; "No sensors or telescopes are defined.
</span>";</td><td> </td><td class="rblock">                                  <span class="insert">                              &lt;&lt; "No sens
ors or telescopes are defined.</span>";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagShowCCD = false;</td><td> </td><td class="right">               flagShowCCD = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selectedCCDIndex = -1;</td><td> </td><td class="right">               selectedCCDIndex = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               show = false;</td><td> </td><td class="right">               show = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (actionShowSensor-&gt;isChecked())</td><td> </td><td class="right">               if (actionShowSensor-&gt;isChecked())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       actionShowSensor-&gt;setChecked(false);</td><td> </td><td class="right">                       actionShowSensor-&gt;setChecked(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (show)</td><td> </td><td class="right">       if (show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //Mutually exclusive with the ocular mode</td><td> </td><td class="right">               //Mutually exclusive with the ocular mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 1187</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 1185</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ********************************************************************* */</td><td> </td><td class="right">/* ********************************************************************* */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#if 0</td><td> </td><td class="right">#if 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark -</td><td> </td><td class="right">#pragma mark -</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#pragma mark Private Methods</td><td> </td><td class="right">#pragma mark Private Methods</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/* ********************************************************************* */</td><td> </td><td class="right">/* ********************************************************************* */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::initializeActivationActions()</td><td> </td><td class="right">void Oculars::initializeActivationActions()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">// TRANSLATORS: Title of a group of key bindings in the Help window</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       QString group = N_("Plugin Key Bindings");</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //Bogdan: Temporary, for consistency and to avoid confusing the tran</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">slators</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //TODO: Fix this when the key bindings feature is implemented</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //QString group = N_("Oculars Plugin");</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui(
));</td><td> </td><td class="right">       StelGui* gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(gui);</td><td> </td><td class="right">       Q_ASSERT(gui);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">StelShortcutMgr* shMgr = StelApp::getInstance().getStelShortcutManag</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">er();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //This action needs to be connected to the enableOcular() slot after</td><td> </td><td class="right">       //This action needs to be connected to the enableOcular() slot after</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //the necessary button is created to prevent the button from being c
hecked</td><td> </td><td class="right">       //the necessary button is created to prevent the button from being c
hecked</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //the first time this action is checked. See:</td><td> </td><td class="right">       //the first time this action is checked. See:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //http://doc.qt.nokia.com/4.7/signalsandslots.html#signals</td><td> </td><td class="right">       //http://doc.qt.nokia.com/4.7/signalsandslots.html#signals</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">QString shortcutStr = settings-&gt;value("bindings/toggle_oculars", "Ct</span></td><td> </td><td class="rblock">       actionShowOcular = <span class="insert">shMgr-&gt;getGuiAction("actionShow_Ocular");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rl+O").toString();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowOcular = <span class="delete">gui-&gt;addGuiActions("actionShow_Ocular",</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             N_("Ocular view"),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             shortcutStr,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             group,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionShowOcular-&gt;setChecked(flagShowOculars);</td><td> </td><td class="right">       actionShowOcular-&gt;setChecked(flagShowOculars);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Make a toolbar button</td><td> </td><td class="right">       // Make a toolbar button</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try {</td><td> </td><td class="right">       try {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pxmapGlow = new QPixmap(":/graphicGui/glow32x32.png");</td><td> </td><td class="right">               pxmapGlow = new QPixmap(":/graphicGui/glow32x32.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pxmapOnIcon = new QPixmap(":/ocular/bt_ocular_on.png");</td><td> </td><td class="right">               pxmapOnIcon = new QPixmap(":/ocular/bt_ocular_on.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               pxmapOffIcon = new QPixmap(":/ocular/bt_ocular_off.png");</td><td> </td><td class="right">               pxmapOffIcon = new QPixmap(":/ocular/bt_ocular_off.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               toolbarButton = new StelButton(NULL,</td><td> </td><td class="right">               toolbarButton = new StelButton(NULL,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    *pxmapOnIcon,</td><td> </td><td class="rblock">                                                             *pxmapOnIcon,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    *pxmapOffIcon,</td><td> </td><td class="rblock">                                                             *pxmapOffIcon,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    *pxmapGlow,</td><td> </td><td class="rblock">                                                             *pxmapGlow,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    <span class="delete">actionShowOcular);</span></td><td> </td><td class="rblock">                                                             <span class="insert">actionShowOcul</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ar);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td> </td><td class="right">               gui-&gt;getButtonBar()-&gt;addButton(toolbarButton, "065-pluginsGr
oup");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } catch (std::runtime_error&amp; e) {</td><td> </td><td class="right">       } catch (std::runtime_error&amp; e) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING: unable create toolbar button for Ocu
lars plugin: " &lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING: unable create toolbar button for Ocu
lars plugin: " &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(actionShowOcular, SIGNAL(toggled(bool)),</td><td> </td><td class="right">       connect(actionShowOcular, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               this, SLOT(enableOcular(bool)));</td><td> </td><td class="rblock">               <span class="insert">                        </span>this, SLOT(enableOcular(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">shortcutStr = settings-&gt;value("bindings/popup_navigator", "Alt+O").t</span></td><td> </td><td class="rblock">       actionMenu = <span class="insert">shMgr-&gt;getGuiAction("actionShow_Ocular_Menu");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">oString();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionMenu = <span class="delete">gui-&gt;addGuiActions("actionShow_Ocular_Menu",</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       N_("Oculars popup menu"),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       shortcutStr,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       group,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(actionMenu, SIGNAL(toggled(bool)),</td><td> </td><td class="right">       connect(actionMenu, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               this, SLOT(displayPopupMenu()));</td><td> </td><td class="rblock">               <span class="insert">                        </span>this, SLOT(displayPopupMenu()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowCrosshairs = <span class="delete">gui-&gt;addGuiActions("actionShow_Ocular_Crossha</span></td><td> </td><td class="rblock">       actionShowCrosshairs = <span class="insert">shMgr-&gt;getGuiAction("actionShow_Ocular_Crossh</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">irs",</span></td><td> </td><td class="rblock"><span class="insert">airs");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                 N_("Crosshairs"),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                 QString(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                 group,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                 true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(actionShowCrosshairs, SIGNAL(toggled(bool)),</td><td> </td><td class="right">       connect(actionShowCrosshairs, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               this, SLOT(toggleCrosshairs(bool)));</td><td> </td><td class="rblock">               <span class="insert">                        </span>this, SLOT(toggleCrosshairs(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowSensor = <span class="delete">gui-&gt;addGuiActions("actionShow_Sensor",</span></td><td> </td><td class="rblock">       actionShowSensor = <span class="insert">shMgr-&gt;getGuiAction("actionShow_Sensor");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             N_("Image sensor frame"),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             QString(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             group,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(actionShowSensor, SIGNAL(toggled(bool)),</td><td> </td><td class="right">       connect(actionShowSensor, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       this, SLOT(toggleCCD(bool)));</td><td> </td><td class="rblock">                       <span class="insert">                </span>this, SLOT(toggleCCD(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionShowTelrad = <span class="delete">gui-&gt;addGuiActions("actionShow_Telrad",</span></td><td> </td><td class="rblock">       actionShowTelrad = <span class="insert">shMgr-&gt;getGuiAction("actionShow_Telrad");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             N_("Telrad sight"),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             QString(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             group,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                             true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(actionShowTelrad, SIGNAL(toggled(bool)),</td><td> </td><td class="right">       connect(actionShowTelrad, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               this, SLOT(toggleTelrad(bool)));</td><td> </td><td class="rblock">               <span class="insert">                        </span>this, SLOT(toggleTelrad(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       actionConfiguration = <span class="delete">gui-&gt;addGuiActions("actionOpen_Oculars_Configu</span></td><td> </td><td class="rblock">       actionConfiguration = <span class="insert">shMgr-&gt;getGuiAction("actionOpen_Oculars_Config</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ration",</span></td><td> </td><td class="rblock"><span class="insert">uration");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                N_("Oculars plugin configur</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ation"),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                QString(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                group,</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                true);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(actionConfiguration, SIGNAL(toggled(bool)),</td><td> </td><td class="right">       connect(actionConfiguration, SIGNAL(toggled(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">ocularDialog, SLOT(setVisible(bool))</span>);</td><td> </td><td class="rblock">               <span class="insert">                        ocularDialog, SLOT(setVisible(bool))
</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(ocularDialog, SIGNAL(visibleChanged(bool)),</td><td> </td><td class="right">       connect(ocularDialog, SIGNAL(visibleChanged(bool)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">actionConfiguration, SLOT(setChecked</span>(bool)));</td><td> </td><td class="rblock">               <span class="insert">                        actionConfiguration, SLOT(setChecked
</span>(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedCCDChanged()), this, SLOT(instrumentCha
nged()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedCCDChanged()), this, SLOT(instrumentCha
nged()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedCCDChanged()), this, SLOT(setScreenFOVF
orCCD()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedCCDChanged()), this, SLOT(setScreenFOVF
orCCD()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedOcularChanged()), this, SLOT(instrument
Changed()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedOcularChanged()), this, SLOT(instrument
Changed()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedTelescopeChanged()), this, SLOT(instrum
entChanged()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedTelescopeChanged()), this, SLOT(instrum
entChanged()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(this, SIGNAL(selectedTelescopeChanged()), this, SLOT(setScre
enFOVForCCD()));</td><td> </td><td class="right">       connect(this, SIGNAL(selectedTelescopeChanged()), this, SLOT(setScre
enFOVForCCD()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(ocularDialog, SIGNAL(requireSelectionChanged(bool)), this, S
LOT(setRequireSelection(bool)));</td><td> </td><td class="right">       connect(ocularDialog, SIGNAL(requireSelectionChanged(bool)), this, S
LOT(setRequireSelection(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(ocularDialog, SIGNAL(scaleImageCircleChanged(bool)), this, S
LOT(setScaleImageCircle(bool)));</td><td> </td><td class="right">       connect(ocularDialog, SIGNAL(scaleImageCircleChanged(bool)), this, S
LOT(setScaleImageCircle(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(ccdRotationSignalMapper, SIGNAL(mapped(QString)), this, SLOT
(rotateCCD(QString)));</td><td> </td><td class="right">       connect(ccdRotationSignalMapper, SIGNAL(mapped(QString)), this, SLOT
(rotateCCD(QString)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1294</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1263</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool binocularFound = false;</td><td> </td><td class="right">       bool binocularFound = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (Ocular* ocular, oculars) {</td><td> </td><td class="right">       foreach (Ocular* ocular, oculars) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (ocular-&gt;isBinoculars()) {</td><td> </td><td class="right">               if (ocular-&gt;isBinoculars()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       binocularFound = true;</td><td> </td><td class="right">                       binocularFound = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return binocularFound;</td><td> </td><td class="right">       return binocularFound;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Oculars::paintCCDBounds()</td><td> </td><td class="rblock">void Oculars::paintCCDBounds(<span class="insert">StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glDisable(GL_BLEND);</span></td><td> </td><td class="rblock">       <span class="insert">renderer-&gt;setBlendMode(BlendMode_None);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glColor3f(0.f,0.f,0.f);</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glPushMatrix();</span></td><td> </td><td class="rblock"><span class="insert">       StelVertexBuffer&lt;VertexP2&gt;* vertices =</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glTranslated(params.viewportCenter[0], params.viewportCenter[1], 0.0</span></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;createVertexBuffer&lt;VertexP2&gt;(PrimitiveType_LineStr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);</span></td><td> </td><td class="rblock"><span class="insert">ip);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glRotated(ccdRotationAngle, 0.0, 0.0, 1.0);</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       GLdouble</span> screenFOV = params.fov;</td><td> </td><td class="rblock"><span class="insert">       double</span> screenFOV = params.fov;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">const Vec2f offset = Vec2f(params.viewportCenter[0], params.viewport</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Center[1]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // draw sensor rectangle</td><td> </td><td class="right">       // draw sensor rectangle</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(selectedCCDIndex != -1) {</td><td> </td><td class="right">       if(selectedCCDIndex != -1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               CCD *ccd = ccds[selectedCCDIndex];</td><td> </td><td class="right">               CCD *ccd = ccds[selectedCCDIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (ccd) {</td><td> </td><td class="right">               if (ccd) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">glColor4f(0.77, 0.14, 0.16, 0.5</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;setGlobalColor(0.77f, 0.14f, 0.16f, 0.5f</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Telescope *telescope = telescopes[selectedTelescopeI
ndex];</td><td> </td><td class="right">                       Telescope *telescope = telescopes[selectedTelescopeI
ndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       double ccdXRatio = <span class="delete">ccd-&gt;getActualFOVx(telescope)</span> / <span class="delete">s</span></td><td> </td><td class="rblock">                       <span class="insert">const</span> double ccdXRatio = <span class="insert">ccd-&gt;getActualFOVx(telescop</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">creenFOV;</span></td><td> </td><td class="rblock"><span class="insert">e)</span> / <span class="insert">screenFOV;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       double ccdYRatio = <span class="delete">ccd-&gt;getActualFOVy(telescope)</span> / <span class="delete">s</span></td><td> </td><td class="rblock"><span class="insert">                       const</span> double ccdYRatio = <span class="insert">ccd-&gt;getActualFOVy(telescop</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">creenFOV;</span></td><td> </td><td class="rblock"><span class="insert">e)</span> / <span class="insert">screenFOV;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // As the FOV is based on the narrow aspect of the s
creen, we need to calculate</td><td> </td><td class="right">                       // As the FOV is based on the narrow aspect of the s
creen, we need to calculate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // height &amp; width based soley off of that dimension.</td><td> </td><td class="right">                       // height &amp; width based soley off of that dimension.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int aspectIndex = 2;</td><td> </td><td class="right">                       int aspectIndex = 2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (params.viewportXywh[2] &gt; params.viewportXywh[3])
 {</td><td> </td><td class="right">                       if (params.viewportXywh[2] &gt; params.viewportXywh[3])
 {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               aspectIndex = 3;</td><td> </td><td class="right">                               aspectIndex = 3;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       float <span class="delete">width</span> = <span class="delete">params.viewportXywh[aspectIndex]</span> * <span class="delete">ccd</span></td><td> </td><td class="rblock">                       <span class="insert">const</span> float <span class="insert">halfWidth</span>  = <span class="insert">0.5f</span> * <span class="insert">(params.viewportXywh</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">YRatio;</span></td><td> </td><td class="rblock"><span class="insert">[aspectIndex] * ccdYRatio);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       float <span class="delete">height</span> = <span class="delete">params.viewportXywh[aspectIndex]</span> * <span class="delete">cc</span></td><td> </td><td class="rblock"><span class="insert">                       const float halfHeight = 0.5f * (params.viewportXywh</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dXRatio;</span></td><td> </td><td class="rblock"><span class="insert">[aspectIndex] * ccdXRatio);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (halfWidth &gt; 0.0 &amp;&amp; halfHeight &gt; 0.0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const float s = sin(-ccdRotationAngle * M_PI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> / 180.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const float c = cos(-ccdRotationAngle * M_PI</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> / 180.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const float cosHalfWidth  = c * halfWidth;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const float sinHalfWidth  = s * halfWidth;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const float cosHalfHeight = c * halfHeight;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const</span> float <span class="insert">sinHalfHeight</span> = <span class="insert">s</span> * <span class="insert">halfHeight;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const Vec2f v1 = Vec2f(-cosHalfWidth - sinHa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lfHeight, -sinHalfWidth + cosHalfHeight);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const Vec2f v2 = Vec2f(cosHalfWidth  - sinHa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lfHeight, sinHalfWidth  + cosHalfHeight);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const Vec2f v3 = Vec2f(cosHalfWidth  + sinHa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lfHeight, sinHalfWidth  - cosHalfHeight);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               const Vec2f v4 = Vec2f(-cosHalfWidth + sinHa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lfHeight, -sinHalfWidth - cosHalfHeight);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               vertices-&gt;addVertex(VertexP2(offset + v1));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               vertices-&gt;addVertex(VertexP2(offset + v2));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               vertices-&gt;addVertex(VertexP2(offset + v3));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               vertices-&gt;addVertex(VertexP2(offset + v4));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               vertices-&gt;addVertex(VertexP2(offset + v1));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               vertices-&gt;lock();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">if (width &gt; 0.0 &amp;&amp; height &gt; 0.0) {</span></td><td> </td><td class="rblock">                               <span class="insert">renderer-&gt;drawVertexBuffer(vertices);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glBegin(GL_LINE_LOOP);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glVertex2f(-width / 2.0, height / 2.0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glVertex2f(width / 2.0, height / 2.0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glVertex2f(width / 2.0, -height / 2.0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glVertex2f(-width / 2.0, -height / 2.0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               glEnd();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">       <span class="insert">delete vertices;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glPopMatrix();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Oculars::paintCrosshairs()</td><td> </td><td class="rblock">void Oculars::paintCrosshairs(<span class="insert">StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP projector = StelApp::getInstance().getCore()-&gt;g
etProjection(StelCore::FrameEquinoxEqu);</td><td> </td><td class="right">       const StelProjectorP projector = StelApp::getInstance().getCore()-&gt;g
etProjection(StelCore::FrameEquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Center of screen</td><td> </td><td class="right">       // Center of screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec2i centerScreen(projector-&gt;getViewportPosX()+projector-&gt;getViewpo
rtWidth()/2,</td><td> </td><td class="right">       Vec2i centerScreen(projector-&gt;getViewportPosX()+projector-&gt;getViewpo
rtWidth()/2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                          <span class="delete">projector-&gt;getViewportPosY()+proj</span></td><td> </td><td class="rblock">                       <span class="insert">projector-&gt;getViewportPosY()+projector-&gt;getViewportH</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ector-&gt;getViewportHeight()/2);</span></td><td> </td><td class="rblock"><span class="insert">eight()/2);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       GLdouble</span> length = 0.5 * params.viewportFovDiameter;</td><td> </td><td class="rblock"><span class="insert">       double</span> length = 0.5 * params.viewportFovDiameter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // See if we need to scale the length</td><td> </td><td class="right">       // See if we need to scale the length</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (useMaxEyepieceAngle &amp;&amp; oculars[selectedOcularIndex]-&gt;appearentFO
V() &gt; 0.0) {</td><td> </td><td class="right">       if (useMaxEyepieceAngle &amp;&amp; oculars[selectedOcularIndex]-&gt;appearentFO
V() &gt; 0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               length = oculars[selectedOcularIndex]-&gt;appearentFOV() * leng
th / maxEyepieceAngle;</td><td> </td><td class="right">               length = oculars[selectedOcularIndex]-&gt;appearentFOV() * leng
th / maxEyepieceAngle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the lines</td><td> </td><td class="right">       // Draw the lines</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">StelPainter painter(projector);</span></td><td> </td><td class="rblock">       <span class="insert">renderer-&gt;setGlobalColor(0.77f, 0.14f, 0.16f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       painter.setColor(0.77, 0.14, 0.16, 1);</span></td><td> </td><td class="rblock"><span class="insert">       StelVertexBuffer&lt;VertexP2&gt;* vertices =</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]</span></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;createVertexBuffer&lt;VertexP2&gt;(PrimitiveType_Lines);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> centerScreen[1] + <span class="delete">length);</span></td><td> </td><td class="rblock"><span class="insert">       const VertexP2 center(centerScreen[0], centerScreen[1]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]</span></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(center);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> centerScreen[1] - <span class="delete">length);</span></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(VertexP2(centerScreen[0],</span> centerScreen[1] + <span class="insert">leng</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]</span></td><td> </td><td class="rblock"><span class="insert">th));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> + length, <span class="delete">centerScreen[1]);</span></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(center);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       painter.drawLine2d(centerScreen[0], centerScreen[1], centerScreen[0]</span></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(VertexP2(centerScreen[0],</span> centerScreen[1] - <span class="insert">leng</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> - length, <span class="delete">centerScreen[1]);</span></td><td> </td><td class="rblock"><span class="insert">th));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(center);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(VertexP2(centerScreen[0]</span> + length, <span class="insert">centerScreen[</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1]));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(center);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;addVertex(VertexP2(centerScreen[0]</span> - length, <span class="insert">centerScreen[</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1]));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       vertices-&gt;lock();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       renderer-&gt;drawVertexBuffer(vertices);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       delete vertices;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Oculars::paintTelrad()</td><td> </td><td class="rblock">void Oculars::paintTelrad(<span class="insert">StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!flagShowOculars) {</td><td> </td><td class="right">       if (!flagShowOculars) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelProjectorP projector = StelApp::getInstance().getC
ore()-&gt;getProjection(StelCore::FrameEquinoxEqu);</td><td> </td><td class="right">               const StelProjectorP projector = StelApp::getInstance().getC
ore()-&gt;getProjection(StelCore::FrameEquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // prevent unused warnings -MNG</td><td> </td><td class="right">               // prevent unused warnings -MNG</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">               // StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // StelProjector::StelProjectorParams params = core-&gt;getCurr
entStelProjectorParams();</td><td> </td><td class="right">               // StelProjector::StelProjectorParams params = core-&gt;getCurr
entStelProjectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">// StelPainter drawing</span></td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;setGlobalColor(0.77f, 0.14f, 0.16f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               StelPainter painter(projector);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               painter.setColor(0.77, 0.14, 0.16, 1.0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec2i centerScreen(projector-&gt;getViewportPosX()+projector-&gt;g
etViewportWidth()/2,</td><td> </td><td class="right">               Vec2i centerScreen(projector-&gt;getViewportPosX()+projector-&gt;g
etViewportWidth()/2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                  <span class="delete">projector-&gt;getViewportPos</span></td><td> </td><td class="rblock">                                  <span class="insert">projector-&gt;getViewportPosY()+projector-&gt;g</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Y()+projector-&gt;getViewportHeight()/2);</span></td><td> </td><td class="rblock"><span class="insert">etViewportHeight()/2);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5</span> * <span class="delete">p</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rojector-&gt;getPixelPerRadAtCenter() * (M_PI/180) * (0.5));</span></td><td> </td><td class="rblock"><span class="insert">               // Generate and draw the circles.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p</span></td><td> </td><td class="rblock"><span class="insert">               StelVertexBuffer&lt;VertexP2&gt;* circle =</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rojector-&gt;getPixelPerRadAtCenter() * (M_PI/180) * (2.0));</span></td><td> </td><td class="rblock"><span class="insert">                       renderer-&gt;createVertexBuffer&lt;VertexP2&gt;(PrimitiveType</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               painter.drawCircle(centerScreen[0], centerScreen[1], 0.5 * p</span></td><td> </td><td class="rblock"><span class="insert">_LineStrip);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rojector-&gt;getPixelPerRadAtCenter() * (M_PI/180) * (4.0));</span></td><td> </td><td class="rblock"><span class="insert">               const float baseRadius = 0.5f * projector-&gt;getPixelPerRadAtC</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">enter() * (M_PI / 180.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               StelGeometryBuilder().buildCircle(circle, centerScreen[0], c</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">enterScreen[1], baseRadius * 0.5f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;drawVertexBuffer(circle);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               circle-&gt;unlock();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               circle-&gt;clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               StelGeometryBuilder().buildCircle(circle, centerScreen[0], c</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">enterScreen[1], baseRadius</span> * <span class="insert">2.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;drawVertexBuffer(circle);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">circle-&gt;unlock();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               circle-&gt;clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               StelGeometryBuilder().buildCircle(circle, centerScreen[0], c</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">enterScreen[1], baseRadius * 4.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;drawVertexBuffer(circle);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               delete circle;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Oculars::paintOcularMask()</td><td> </td><td class="rblock">void Oculars::paintOcularMask(<span class="insert">StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams params = core-&gt;getCurrentStelProj
ectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glDisable(GL_BLEND);</span></td><td> </td><td class="rblock">       <span class="insert">renderer-&gt;setBlendMode(BlendMode_None);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glColor3f(0.f,0.f,0.f);</span></td><td> </td><td class="rblock"><span class="insert">       renderer-&gt;setGlobalColor(0.0f, 0.0f, 0.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glPushMatrix();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glTranslated(params.viewportCenter[0], params.viewportCenter[1], 0.0</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       GLUquadricObj *quadric = gluNewQuadric();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       GLdouble inner = 0.5 * params.viewportFovDiameter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float inner = 0.5f * params.viewportFovDiameter;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // See if we need to scale the mask</td><td> </td><td class="right">       // See if we need to scale the mask</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (useMaxEyepieceAngle &amp;&amp; oculars[selectedOcularIndex]-&gt;appearentFO
V() &gt; 0.0 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBinoculars()) {</td><td> </td><td class="right">       if (useMaxEyepieceAngle &amp;&amp; oculars[selectedOcularIndex]-&gt;appearentFO
V() &gt; 0.0 &amp;&amp; !oculars[selectedOcularIndex]-&gt;isBinoculars()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               inner = oculars[selectedOcularIndex]-&gt;appearentFOV() * inner
 / maxEyepieceAngle;</td><td> </td><td class="right">               inner = oculars[selectedOcularIndex]-&gt;appearentFOV() * inner
 / maxEyepieceAngle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">const float outer = params.viewportXywh[2] + params.viewportXywh[3];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       const Vec2f offset(params.viewportCenter[0], params.viewportCenter[1</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">GLdouble outer</span> = <span class="delete">params.viewportXywh[2] + params.viewportXywh[3];</span></td><td> </td><td class="rblock">       <span class="insert">StelGeometryRing* disc</span> =</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Draw the mask</span></td><td> </td><td class="rblock">               <span class="insert">StelGeometryBuilder().buildRing2D(RingParams(inner, outer).r</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       gluDisk(quadric, inner, outer, 256, 1);</span></td><td> </td><td class="rblock"><span class="insert">esolution(128, 1), offset);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       disc-&gt;draw(renderer);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // the gray circle</td><td> </td><td class="right">       // the gray circle</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glColor3f(0.15f,0.15f,0.15f);</span></td><td> </td><td class="rblock">       <span class="insert">renderer-&gt;setGlobalColor(0.15f, 0.15f, 0.15f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       gluDisk(quadric, inner</span> - <span class="delete">1.0, inner, 256, 1);</span></td><td> </td><td class="rblock"><span class="insert">       disc-&gt;setInnerOuterRadius(inner</span> - <span class="insert">1.0f, inner);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       gluDeleteQuadric(quadric);</span></td><td> </td><td class="rblock"><span class="insert">       disc-&gt;draw(renderer);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glPopMatrix();</span></td><td> </td><td class="rblock"><span class="insert">       delete disc;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void Oculars::paintText(const StelCore* core)</td><td> </td><td class="rblock">void Oculars::paintText(const StelCore* core<span class="insert">, StelRenderer* renderer</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameAltAz)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameAltAz)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       StelPainter painter(prj);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the current instruments</td><td> </td><td class="right">       // Get the current instruments</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CCD *ccd = NULL;</td><td> </td><td class="right">       CCD *ccd = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(selectedCCDIndex != -1) {</td><td> </td><td class="right">       if(selectedCCDIndex != -1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ccd = ccds[selectedCCDIndex];</td><td> </td><td class="right">               ccd = ccds[selectedCCDIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Ocular *ocular = oculars[selectedOcularIndex];</td><td> </td><td class="right">       Ocular *ocular = oculars[selectedOcularIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Telescope *telescope = telescopes[selectedTelescopeIndex];</td><td> </td><td class="right">       Telescope *telescope = telescopes[selectedTelescopeIndex];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // set up <span class="delete">the color and the GL state</span></td><td> </td><td class="rblock">       // set up <span class="insert">drawing</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       painter.setColor(0.8, 0.48, 0.0, 1);</span></td><td> </td><td class="rblock"><span class="insert">       if (StelApp::getInstance().getVisionModeNight())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glDisable(GL_TEXTURE_2D);</span></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;setGlobalColor(0.8f, 0.0f, 0.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</span></td><td> </td><td class="rblock"><span class="insert">       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_BLEND);</span></td><td> </td><td class="rblock"><span class="insert">               renderer-&gt;setGlobalColor(0.8f, 0.48f, 0.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       renderer-&gt;setBlendMode(BlendMode_Alpha);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the X &amp; Y positions, and the line height</td><td> </td><td class="right">       // Get the X &amp; Y positions, and the line height</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">painter.</span>setFont(font);</td><td> </td><td class="rblock">       <span class="insert">renderer-&gt;</span>setFont(font);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString widthString = "MMMMMMMMMMMMMMMMMMM";</td><td> </td><td class="right">       QString widthString = "MMMMMMMMMMMMMMMMMMM";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">float insetFromRHS = painter.getFontMetrics(</span>).width(widthString);</td><td> </td><td class="rblock">       <span class="insert">const float insetFromRHS = QFontMetrics(font</span>).width(widthString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjector::StelProjectorParams projectorParams = core-&gt;getCurren
tStelProjectorParams();</td><td> </td><td class="right">       StelProjector::StelProjectorParams projectorParams = core-&gt;getCurren
tStelProjectorParams();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int xPosition = projectorParams.viewportXywh[2];</td><td> </td><td class="right">       int xPosition = projectorParams.viewportXywh[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       xPosition -= insetFromRHS;</td><td> </td><td class="right">       xPosition -= insetFromRHS;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int yPosition = projectorParams.viewportXywh[3];</td><td> </td><td class="right">       int yPosition = projectorParams.viewportXywh[3];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       yPosition -= 40;</td><td> </td><td class="right">       yPosition -= 40;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const int lineHeight = <span class="delete">painter.getFontMetrics(</span>).height();</td><td> </td><td class="rblock">       const int lineHeight = <span class="insert">QFontMetrics(font</span>).height();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The Ocular</td><td> </td><td class="right">       // The Ocular</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagShowOculars) {</td><td> </td><td class="right">       if (flagShowOculars) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString ocularNumberLabel;</td><td> </td><td class="right">               QString ocularNumberLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString name = ocular-&gt;name();</td><td> </td><td class="right">               QString name = ocular-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (name.isEmpty())</td><td> </td><td class="right">               if (name.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ocularNumberLabel = QString(q_("Ocular #%1"))</td><td> </td><td class="right">                       ocularNumberLabel = QString(q_("Ocular #%1"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">    </span>.arg(selectedOcularIndex);</td><td> </td><td class="rblock">                                       .arg(selectedOcularIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ocularNumberLabel = QString(q_("Ocular #%1: %2"))</td><td> </td><td class="right">                       ocularNumberLabel = QString(q_("Ocular #%1: %2"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                           .arg(selectedOcularIndex)</td><td> </td><td class="rblock">                                       .arg(selectedOcularIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                           .arg(name);</td><td> </td><td class="rblock">                                       .arg(name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // The name of the ocular could be really long.</td><td> </td><td class="right">               // The name of the ocular could be really long.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (name.length() &gt; widthString.length()) {</td><td> </td><td class="right">               if (name.length() &gt; widthString.length()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       xPosition -= (insetFromRHS / 2.0);</td><td> </td><td class="right">                       xPosition -= (insetFromRHS / 2.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">painter.drawText(xPosition, yPosition, ocularNumberLabel</span>);</td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, ocularNu
mberLabel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               yPosition-=lineHeight;</td><td> </td><td class="right">               yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!ocular-&gt;isBinoculars()) {</td><td> </td><td class="right">               if (!ocular-&gt;isBinoculars()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString eFocalLength = QVariant(ocular-&gt;effectiveFoc
alLength()).toString();</td><td> </td><td class="right">                       QString eFocalLength = QVariant(ocular-&gt;effectiveFoc
alLength()).toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // TRANSLATORS: FL = Focal length</td><td> </td><td class="right">                       // TRANSLATORS: FL = Focal length</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString eFocalLengthLabel = QString(q_("Ocular FL: %
1 mm")).arg(eFocalLength);</td><td> </td><td class="right">                       QString eFocalLengthLabel = QString(q_("Ocular FL: %
1 mm")).arg(eFocalLength);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">painter.drawText(xPosition, yPosition, eFocalLengthL
abel</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, 
eFocalLengthLabel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString ocularFov = QString::number(ocular-&gt;appearen
tFOV());</td><td> </td><td class="right">                       QString ocularFov = QString::number(ocular-&gt;appearen
tFOV());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ocularFov.append(QChar(0x00B0));//Degree sign</td><td> </td><td class="right">                       ocularFov.append(QChar(0x00B0));//Degree sign</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // TRANSLATORS: aFOV = apparent field of view</td><td> </td><td class="right">                       // TRANSLATORS: aFOV = apparent field of view</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString ocularFOVLabel = QString(q_("Ocular aFOV: %1
"))</td><td> </td><td class="right">                       QString ocularFOVLabel = QString(q_("Ocular aFOV: %1
"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                .arg(ocularFov);</td><td> </td><td class="rblock">                                                .arg(ocularFov);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">painter.drawText(xPosition,</span> yPosition, <span class="delete">ocularFOVLabe</span></td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xPosition,</span> yPosition, </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">l);</span></td><td> </td><td class="rblock"><span class="insert">ocularFOVLabel));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // The telescope</td><td> </td><td class="right">                       // The telescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString telescopeNumberLabel;</td><td> </td><td class="right">                       QString telescopeNumberLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString telescopeName = telescope-&gt;name();</td><td> </td><td class="right">                       QString telescopeName = telescope-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (telescopeName.isEmpty())</td><td> </td><td class="right">                       if (telescopeName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               telescopeNumberLabel = QString(q_("Telescope
 #%1"))</td><td> </td><td class="right">                               telescopeNumberLabel = QString(q_("Telescope
 #%1"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               <span class="delete">       .arg(selectedTelescop
eIndex)</span>;</td><td> </td><td class="rblock">                                               <span class="insert">.arg(selectedTelescopeIndex)
</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               telescopeNumberLabel = QString(q_("Telescope
 #%1: %2"))</td><td> </td><td class="right">                               telescopeNumberLabel = QString(q_("Telescope
 #%1: %2"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                      <span class="delete">.arg(selectedTelescop</span></td><td> </td><td class="rblock">                                               <span class="insert">.arg(selectedTelescopeIndex)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eIndex)</span></td><td> </td><td class="rblock">                                               .arg(telescopeName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                      .arg(telescopeName);</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">painter.drawText(xPosition, yPosition, telescopeNumb
erLabel</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, 
telescopeNumberLabel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // General info</td><td> </td><td class="right">                       // General info</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double magnification = ((int)(ocular-&gt;magnification(
telescope) * 10.0)) / 10.0;</td><td> </td><td class="right">                       double magnification = ((int)(ocular-&gt;magnification(
telescope) * 10.0)) / 10.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString magString = QString::number(magnification);</td><td> </td><td class="right">                       QString magString = QString::number(magnification);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       magString.append(QChar(0x00D7));//Multiplication sig
n</td><td> </td><td class="right">                       magString.append(QChar(0x00D7));//Multiplication sig
n</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString magnificationLabel = QString(q_("Magnificati
on: %1"))</td><td> </td><td class="right">                       QString magnificationLabel = QString(q_("Magnificati
on: %1"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    .arg(magString);</td><td> </td><td class="right">                                                    .arg(magString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">painter.drawText(xPosition, yPosition, magnification
Label</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, 
magnificationLabel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yPosition-=lineHeight;</td><td> </td><td class="right">                       yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double fov = ((int)(ocular-&gt;actualFOV(telescope) * 1
0000.00)) / 10000.0;</td><td> </td><td class="right">                       double fov = ((int)(ocular-&gt;actualFOV(telescope) * 1
0000.00)) / 10000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString fovString = QString::number(fov);</td><td> </td><td class="right">                       QString fovString = QString::number(fov);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fovString.append(QChar(0x00B0));//Degree sign</td><td> </td><td class="right">                       fovString.append(QChar(0x00B0));//Degree sign</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString fovLabel = QString(q_("FOV: %1")).arg(fovStr
ing);</td><td> </td><td class="right">                       QString fovLabel = QString(q_("FOV: %1")).arg(fovStr
ing);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">painter.drawText(xPosition, yPosition, fovLabel</span>);</td><td> </td><td class="rblock">                       <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, 
fovLabel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The CCD</td><td> </td><td class="right">       // The CCD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagShowCCD) {</td><td> </td><td class="right">       if (flagShowCCD) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString ccdSensorLabel, ccdInfoLabel;</td><td> </td><td class="right">               QString ccdSensorLabel, ccdInfoLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double fovX = ((int)(ccd-&gt;getActualFOVx(telescope) * 1000.0)
) / 1000.0;</td><td> </td><td class="right">               double fovX = ((int)(ccd-&gt;getActualFOVx(telescope) * 1000.0)
) / 1000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double fovY = ((int)(ccd-&gt;getActualFOVy(telescope) * 1000.0)
) / 1000.0;</td><td> </td><td class="right">               double fovY = ((int)(ccd-&gt;getActualFOVy(telescope) * 1000.0)
) / 1000.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ccdInfoLabel = QString(q_("Dimensions: %1")).arg(getDimensio
nsString(fovX, fovY));</td><td> </td><td class="right">               ccdInfoLabel = QString(q_("Dimensions: %1")).arg(getDimensio
nsString(fovX, fovY));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString name = ccd-&gt;name();</td><td> </td><td class="right">               QString name = ccd-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (name.isEmpty())</td><td> </td><td class="right">               if (name.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdSensorLabel = QString(q_("Sensor #%1")).arg(selec
tedCCDIndex);</td><td> </td><td class="right">                       ccdSensorLabel = QString(q_("Sensor #%1")).arg(selec
tedCCDIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ccdSensorLabel = QString(q_("Sensor #%1: %2"))</td><td> </td><td class="right">                       ccdSensorLabel = QString(q_("Sensor #%1: %2"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                        .arg(selectedCCDIndex)</td><td> </td><td class="rblock">                                       .arg(selectedCCDIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                        .arg(name);</td><td> </td><td class="rblock">                                       .arg(name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">painter.drawText(xPosition, yPosition, ccdSensorLabel</span>);</td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, ccdSenso
rLabel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               yPosition-=lineHeight;</td><td> </td><td class="right">               yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">painter.drawText(xPosition, yPosition, ccdInfoLabel</span>);</td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, ccdInfoL
abel)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               yPosition-=lineHeight;</td><td> </td><td class="right">               yPosition-=lineHeight;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // The telescope</td><td> </td><td class="right">               // The telescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString telescopeNumberLabel;</td><td> </td><td class="right">               QString telescopeNumberLabel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString telescopeName = telescope-&gt;name();</td><td> </td><td class="right">               QString telescopeName = telescope-&gt;name();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (telescopeName.isEmpty())</td><td> </td><td class="right">               if (telescopeName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopeNumberLabel = QString(q_("Telescope #%1"))</td><td> </td><td class="right">                       telescopeNumberLabel = QString(q_("Telescope #%1"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">       </span>.arg(selectedTelescopeIndex);</td><td> </td><td class="rblock">                                       .arg(selectedTelescopeIndex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopeNumberLabel = QString(q_("Telescope #%1: %2
"))</td><td> </td><td class="right">                       telescopeNumberLabel = QString(q_("Telescope #%1: %2
"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              .arg(selectedTelescopeIndex)</td><td> </td><td class="rblock">                                       .arg(selectedTelescopeIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              .arg(telescopeName);</td><td> </td><td class="rblock">                                       .arg(telescopeName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">painter.drawText(xPosition, yPosition, telescopeNumberLabel)
</span>;</td><td> </td><td class="rblock">               <span class="insert">renderer-&gt;drawText(TextParams(xPosition, yPosition, telescop
eNumberLabel))</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::validateAndLoadIniFile()</td><td> </td><td class="right">void Oculars::validateAndLoadIniFile()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Insure the module directory exists</td><td> </td><td class="right">       // Insure the module directory exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelFileMgr::makeSureDirExistsAndIsWritable(StelFileMgr::getUserDir(
)+"/modules/Oculars");</td><td> </td><td class="right">       StelFileMgr::makeSureDirExistsAndIsWritable(StelFileMgr::getUserDir(
)+"/modules/Oculars");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelFileMgr::Flags flags = (StelFileMgr::Flags)(StelFileMgr::Directo
ry|StelFileMgr::Writable);</td><td> </td><td class="right">       StelFileMgr::Flags flags = (StelFileMgr::Flags)(StelFileMgr::Directo
ry|StelFileMgr::Writable);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString ocularIniPath = StelFileMgr::findFile("modules/Oculars/", fl
ags) + "ocular.ini";</td><td> </td><td class="right">       QString ocularIniPath = StelFileMgr::findFile("modules/Oculars/", fl
ags) + "ocular.ini";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // If the ini file does not already exist, create it from the resour
ce in the QT resource</td><td> </td><td class="right">       // If the ini file does not already exist, create it from the resour
ce in the QT resource</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!QFileInfo(ocularIniPath).exists()) {</td><td> </td><td class="right">       if(!QFileInfo(ocularIniPath).exists()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QFile src(":/ocular/default_ocular.ini");</td><td> </td><td class="right">               QFile src(":/ocular/default_ocular.ini");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!src.copy(ocularIniPath)) {</td><td> </td><td class="right">               if (!src.copy(ocularIniPath)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars::validateIniFile cannot copy 
default_ocular.ini resource to [non-existing] "</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars::validateIniFile cannot copy 
default_ocular.ini resource to [non-existing] "</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       + ocularIniPath;</td><td> </td><td class="rblock">                                       <span class="insert">                                    
    </span>+ ocularIniPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               } else {</td><td> </td><td class="right">               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qDebug() &lt;&lt; "Oculars::validateIniFile copied default
_ocular.ini to " &lt;&lt; ocularIniPath;</td><td> </td><td class="right">                       qDebug() &lt;&lt; "Oculars::validateIniFile copied default
_ocular.ini to " &lt;&lt; ocularIniPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // The resource is read only, and the new file inher
its this, so set write-able.</td><td> </td><td class="right">                       // The resource is read only, and the new file inher
its this, so set write-able.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFile dest(ocularIniPath);</td><td> </td><td class="right">                       QFile dest(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       dest.setPermissions(dest.permissions() | QFile::Writ
eOwner);</td><td> </td><td class="right">                       dest.setPermissions(dest.permissions() | QFile::Writ
eOwner);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else {</td><td> </td><td class="right">       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Oculars::validateIniFile ocular.ini exists at: 
" &lt;&lt; ocularIniPath &lt;&lt; ". Checking version...";</td><td> </td><td class="right">               qDebug() &lt;&lt; "Oculars::validateIniFile ocular.ini exists at: 
" &lt;&lt; ocularIniPath &lt;&lt; ". Checking version...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QSettings settings(ocularIniPath, QSettings::IniFormat);</td><td> </td><td class="right">               QSettings settings(ocularIniPath, QSettings::IniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double ocularsVersion = settings.value("oculars_version", "0
.0").toDouble();</td><td> </td><td class="right">               double ocularsVersion = settings.value("oculars_version", "0
.0").toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Oculars::validateIniFile found existing ini f
ile version " &lt;&lt; ocularsVersion;</td><td> </td><td class="right">               qWarning() &lt;&lt; "Oculars::validateIniFile found existing ini f
ile version " &lt;&lt; ocularsVersion;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (ocularsVersion &lt; MIN_OCULARS_INI_VERSION) {</td><td> </td><td class="right">               if (ocularsVersion &lt; MIN_OCULARS_INI_VERSION) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Oculars::validateIniFile existing ini
 file version " &lt;&lt; ocularsVersion</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Oculars::validateIniFile existing ini
 file version " &lt;&lt; ocularsVersion</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               <span class="delete">&lt;&lt; " too old to use; require
d version is " &lt;&lt; MIN_OCULARS_INI_VERSION &lt;&lt; ". Copying ov</span>er new one.";</td><td> </td><td class="rblock">                                               <span class="insert">                 &lt;&lt; " too ol
d to use; required version is " &lt;&lt; MIN_OCULARS_INI_VERSION &lt;&lt; ". Copying ov
</span>er new one.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // delete last "old" file, if it exists</td><td> </td><td class="right">                       // delete last "old" file, if it exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFile deleteFile(ocularIniPath + ".old");</td><td> </td><td class="right">                       QFile deleteFile(ocularIniPath + ".old");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       deleteFile.remove();</td><td> </td><td class="right">                       deleteFile.remove();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Rename the old one, and copy over a new one</td><td> </td><td class="right">                       // Rename the old one, and copy over a new one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QFile oldFile(ocularIniPath);</td><td> </td><td class="right">                       QFile oldFile(ocularIniPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (!oldFile.rename(ocularIniPath + ".old")) {</td><td> </td><td class="right">                       if (!oldFile.rename(ocularIniPath + ".old")) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "Oculars::validateIniFile cann
ot move ocular.ini resource to ocular.ini.old at path  " + ocularIniPath;</td><td> </td><td class="right">                               qWarning() &lt;&lt; "Oculars::validateIniFile cann
ot move ocular.ini resource to ocular.ini.old at path  " + ocularIniPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "Oculars::validateIniFile ocul
ar.ini resource renamed to ocular.ini.old at path  " + ocularIniPath;</td><td> </td><td class="right">                               qWarning() &lt;&lt; "Oculars::validateIniFile ocul
ar.ini resource renamed to ocular.ini.old at path  " + ocularIniPath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1669</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1672</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //reset to original state</td><td> </td><td class="right">               //reset to original state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               unzoomOcular();</td><td> </td><td class="right">               unzoomOcular();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Oculars::zoomOcular()</td><td> </td><td class="right">void Oculars::zoomOcular()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore *core = StelApp::getInstance().getCore();</td><td> </td><td class="right">       StelCore *core = StelApp::getInstance().getCore();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td> </td><td class="right">       StelMovementMgr *movementManager = core-&gt;getMovementMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GridLinesMgr *gridManager =</td><td> </td><td class="right">       GridLinesMgr *gridManager =</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">(GridLinesMgr *)StelApp::getInstance().getModuleMgr().getMod
</span>ule("GridLinesMgr");</td><td> </td><td class="rblock">               <span class="insert">        (GridLinesMgr *)StelApp::getInstance().getModuleMgr(
).getMod</span>ule("GridLinesMgr");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagAzimuthalGrid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagAzimuthalGrid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagGalacticGrid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagGalacticGrid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEquatorGrid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEquatorGrid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEquatorJ2000Grid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEquatorJ2000Grid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEquatorLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEquatorLine(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEclipticLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEclipticLine(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagEclipticJ2000Grid(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagEclipticJ2000Grid(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagMeridianLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagMeridianLine(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gridManager-&gt;setFlagHorizonLine(false);</td><td> </td><td class="right">       gridManager-&gt;setFlagHorizonLine(false);</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 98 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>214 lines changed or deleted</i></th><th><i> </i></th><th><i>226 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
