<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-80-generic #101-Ubuntu SMP Thu Jun 8 15:35:06 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: SolarSystemEditor.cpp - SolarSystemEditor.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;SolarSystemEditor.cpp&nbsp;</th><th> </th><th>&nbsp;SolarSystemEditor.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 57</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 57</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return new SolarSystemEditor();</td><td> </td><td class="right">       return new SolarSystemEditor();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelPluginInfo SolarSystemEditorStelPluginInterface::getPluginInfo() const</td><td> </td><td class="right">StelPluginInfo SolarSystemEditorStelPluginInterface::getPluginInfo() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Q_INIT_RESOURCE(solarSystemEditor);</td><td> </td><td class="right">       //Q_INIT_RESOURCE(solarSystemEditor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPluginInfo info;</td><td> </td><td class="right">       StelPluginInfo info;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.id = "SolarSystemEditor";</td><td> </td><td class="right">       info.id = "SolarSystemEditor";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.displayedName = N_("Solar System Editor");</td><td> </td><td class="right">       info.displayedName = N_("Solar System Editor");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       info.authors = "Bogdan Marinov";</td><td> </td><td class="rblock">       info.authors = "Bogdan Marinov<span class="insert">, Georg Zotti</span>";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.contact = "http://stellarium.org";</td><td> </td><td class="right">       info.contact = "http://stellarium.org";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.description = N_("An interface for adding asteroids and comets 
to Stellarium. It can download object lists from the Minor Planet Center's 
website and perform searches in its online database.");</td><td> </td><td class="right">       info.description = N_("An interface for adding asteroids and comets 
to Stellarium. It can download object lists from the Minor Planet Center's 
website and perform searches in its online database.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.version = SOLARSYSTEMEDITOR_VERSION;</td><td> </td><td class="right">       info.version = SOLARSYSTEMEDITOR_VERSION;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return info;</td><td> </td><td class="right">       return info;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">SolarSystemEditor::SolarSystemEditor()</span></td><td> </td><td class="rblock"><span class="insert">SolarSystemEditor::SolarSystemEditor():</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       isInitialized(false),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       mainWindow(Q_NULLPTR),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       solarSystemConfigurationFile(Q_NULLPTR)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("SolarSystemEditor");</td><td> </td><td class="right">       setObjectName("SolarSystemEditor");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">       <span class="insert">solarSystem</span> = GETSTELMODULE(SolarSystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">isInitialized = false;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       mainWindow = NULL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       solarSystemConfigurationFile = NULL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       solarSystemManager</span> = GETSTELMODULE(SolarSystem);</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //I really hope that the file manager is instantiated before this</td><td> </td><td class="right">       //I really hope that the file manager is instantiated before this</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       defaultSolarSystemFilePath      = QFileInfo(StelFileMgr::getInstalla</td><td> </td><td class="rblock">       <span class="insert">// GZ new: Not sure whether this should be major or minor here.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">tionDir() + <span class="delete">"/data/ssystem.ini").absoluteFilePath();</span></td><td> </td><td class="rblock">       defaultSolarSystemFilePath      = QFileInfo(StelFileMgr::getInstalla</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       customSolarSystemFilePath       = QFileInfo(StelFileMgr::getUserDir(</td><td> </td><td class="rblock">tionDir() + <span class="insert">"/data/ssystem_minor.ini").absoluteFilePath();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">) + <span class="delete">"/data/ssystem.ini").absoluteFilePath();</span></td><td> </td><td class="rblock">       customSolarSystemFilePath       = QFileInfo(StelFileMgr::getUserDir(</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">) + <span class="insert">"/data/ssystem_minor.ini").absoluteFilePath();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       majorSolarSystemFilePath        = QFileInfo(StelFileMgr::getInstalla</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tionDir() + "/data/ssystem_major.ini").absoluteFilePath();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SolarSystemEditor::~SolarSystemEditor()</td><td> </td><td class="right">SolarSystemEditor::~SolarSystemEditor()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (solarSystemConfigurationFile != <span class="delete">NULL</span>)</td><td> </td><td class="rblock">       if (solarSystemConfigurationFile != <span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete solarSystemConfigurationFile;</td><td> </td><td class="right">               delete solarSystemConfigurationFile;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystemEditor::init()</td><td> </td><td class="right">void SolarSystemEditor::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //Get a list of the "default" Solar System objects' names:</td><td> </td><td class="rblock">       //Get a list of the "default" <span class="insert">minor </span>Solar System objects' names:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Use it as validation for the loading of the plug-in</td><td> </td><td class="right">       //TODO: Use it as validation for the loading of the plug-in</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (QFile::exists(defaultSolarSystemFilePath))</td><td> </td><td class="rblock">       <span class="insert">// GZ TBD: Maybe only load the names from ssystem_major.ini, so that</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> even default minor bodies can be reduced by the user.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // The current solution loads the default major objects and thus pre</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">vents Pluto from deletion.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//</span>     if (QFile::exists(defaultSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//             // GZ We no longer prevent users from deleting minor bodies </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">even when they came in the default file!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//             //defaultSsoIdentifiers = listAllLoadedObjectsInFile(default</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">SolarSystemFilePath);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//             //TODO: Better error message</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//             qDebug() &lt;&lt; "SolarSystemEditor: Something is horribly wrong </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">with installdir (minor)" &lt;&lt; QDir::toNativeSeparators(StelFileMgr::getInstal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lationDir());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//             return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//     }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (QFile::exists(majorSolarSystemFilePath))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">defaultSsoIdentifiers = listAllLoadedObjectsInFile(defaultSo</span></td><td> </td><td class="rblock">               <span class="insert">//defaultSsoIdentifiers.unite(listAllLoadedObjectsInFile(maj</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">larSystemFilePath);</span></td><td> </td><td class="rblock"><span class="insert">orSolarSystemFilePath));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               defaultSsoIdentifiers=listAllLoadedObjectsInFile(majorSolarS</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ystemFilePath);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//TODO: Better error message</span></td><td> </td><td class="rblock">               qDebug() &lt;&lt; <span class="insert">"SolarSystemEditor: Something</span> is horribly <span class="insert">wrong </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; <span class="delete">"Something</span> is horribly <span class="delete">wrong:"</span> &lt;&lt; <span class="delete">QDir::toNative</span></td><td> </td><td class="rblock"><span class="insert">with installdir (major)"</span> &lt;&lt; <span class="insert">QDir::toNativeSeparators(StelFileMgr::getInstal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Separators(StelFileMgr::getInstallationDir());</span></td><td> </td><td class="rblock"><span class="insert">lationDir());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try</td><td> </td><td class="right">       try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               //Make sure that a user ssystem.ini actually exists</td><td> </td><td class="rblock">               //Make sure that a user ssystem<span class="insert">_minor</span>.ini actually exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!cloneSolarSystemConfigurationFile())</td><td> </td><td class="right">               if (!cloneSolarSystemConfigurationFile())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               mainWindow = new SolarSystemManagerWindow();</td><td> </td><td class="right">               mainWindow = new SolarSystemManagerWindow();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch (std::runtime_error &amp;e)</td><td> </td><td class="right">       catch (std::runtime_error &amp;e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "init() error: " &lt;&lt; e.what();</td><td> </td><td class="right">               qWarning() &lt;&lt; "init() error: " &lt;&lt; e.what();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()), this, SL
OT(updateI18n()));</td><td> </td><td class="right">       connect(&amp;StelApp::getInstance(), SIGNAL(languageChanged()), this, SL
OT(updateI18n()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       isInitialized = true;</td><td> </td><td class="right">       isInitialized = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // key bindings and other actions</td><td> </td><td class="right">       // key bindings and other actions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_MPC_Import", N_("Solar System Editor"), N_("Im
port orbital elements in MPC format..."), mainWindow, "newImportMPC()", "Ct
rl+Alt+S");</td><td> </td><td class="right">       addAction("actionShow_MPC_Import", N_("Solar System Editor"), N_("Im
port orbital elements in MPC format..."), mainWindow, "newImportMPC()", "Ct
rl+Alt+S");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">void SolarSystemEditor::deinit()</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">void SolarSystemEditor::update(double) //deltaTime</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">void SolarSystemEditor::draw(StelCore*) //core</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       //</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double SolarSystemEditor::getCallOrder(StelModuleActionName) const// action
Name</td><td> </td><td class="right">double SolarSystemEditor::getCallOrder(StelModuleActionName) const// action
Name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 0.;</td><td> </td><td class="right">       return 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystemEditor::configureGui(bool show)</td><td> </td><td class="right">bool SolarSystemEditor::configureGui(bool show)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //If the plug-in has failed to initialize, disable the button</td><td> </td><td class="right">       //If the plug-in has failed to initialize, disable the button</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Display a message in the window instead.</td><td> </td><td class="right">       //TODO: Display a message in the window instead.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!isInitialized)</td><td> </td><td class="right">       if (!isInitialized)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 194</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 193</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //solarSystemManager-&gt;reloadPlanets();</td><td> </td><td class="right">                       //solarSystemManager-&gt;reloadPlanets();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystemEditor::updateI18n()</td><td> </td><td class="right">void SolarSystemEditor::updateI18n()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //The Solar System MUST be translated before updating the window</td><td> </td><td class="right">       //The Solar System MUST be translated before updating the window</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Remove this if/when you merge this module in the Solar Syste
m module</td><td> </td><td class="right">       //TODO: Remove this if/when you merge this module in the Solar Syste
m module</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       solarSystem<span class="delete">Manager</span>-&gt;updateI18n();</td><td> </td><td class="rblock">       solarSystem-&gt;updateI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool SolarSystemEditor::cloneSolarSystemConfigurationFile()</td><td> </td><td class="rblock">bool SolarSystemEditor::cloneSolarSystemConfigurationFile()<span class="insert"> const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QDir userDataDirectory(StelFileMgr::getUserDir());</td><td> </td><td class="right">       QDir userDataDirectory(StelFileMgr::getUserDir());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!userDataDirectory.exists())</td><td> </td><td class="right">       if (!userDataDirectory.exists())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               q<span class="delete">Debug() &lt;&lt; "Unable to find user data directory:" &lt;&lt; QDir::t
</span>oNativeSeparators(userDataDirectory.absolutePath());</td><td> </td><td class="rblock">               q<span class="insert">Critical() &lt;&lt; "Unable to find user data directory:" &lt;&lt; QDir
::t</span>oNativeSeparators(userDataDirectory.absolutePath());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!userDataDirectory.exists("data") &amp;&amp; !userDataDirectory.mkdir("d
ata"))</td><td> </td><td class="right">       if (!userDataDirectory.exists("data") &amp;&amp; !userDataDirectory.mkdir("d
ata"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Unable to create a \"data\" subdirectory in" &lt;&lt;
 QDir::toNativeSeparators(userDataDirectory.absolutePath());</td><td> </td><td class="right">               qDebug() &lt;&lt; "Unable to create a \"data\" subdirectory in" &lt;&lt;
 QDir::toNativeSeparators(userDataDirectory.absolutePath());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "Using the ssystem<span class="delete">.ini file that already exists 
</span>in the user directory...";</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "Using the ssystem<span class="insert">_minor.ini file that already e
xists </span>in the user directory...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return true;</td><td> </td><td class="right">               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::exists(defaultSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::exists(defaultSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "Trying to copy ssystem<span class="delete">.ini to" &lt;&lt; QDir::toNativ
</span>eSeparators(customSolarSystemFilePath);</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "Trying to copy ssystem<span class="insert">_minor.ini to" &lt;&lt; QDir::t
oNativ</span>eSeparators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return QFile::copy(defaultSolarSystemFilePath, customSolarSy
stemFilePath);</td><td> </td><td class="right">               return QFile::copy(defaultSolarSystemFilePath, customSolarSy
stemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">qDebug()</span> &lt;&lt; <span class="delete">"This</span> should be <span class="delete">impossible.";</span></td><td> </td><td class="rblock">               <span class="insert">qCritical()</span> &lt;&lt; <span class="insert">"SolarSystemEditor: Cannot find default ssyst</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">em_minor.ini. This branch</span> should be <span class="insert">unreachable.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               Q_ASSERT(0);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool SolarSystemEditor::resetSolarSystemConfigurationFile()</td><td> </td><td class="rblock">bool SolarSystemEditor::resetSolarSystemConfigurationFile()<span class="insert"> const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!QFile::remove((customSolarSystemFilePath)))</td><td> </td><td class="right">               if (!QFile::remove((customSolarSystemFilePath)))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "Unable to delete" &lt;&lt; QDir::toNativeSe
parators(customSolarSystemFilePath)</td><td> </td><td class="right">                       qWarning() &lt;&lt; "Unable to delete" &lt;&lt; QDir::toNativeSe
parators(customSolarSystemFilePath)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                &lt;&lt; endl &lt;&lt; "Please remove the file manually
.";</td><td> </td><td class="right">                                &lt;&lt; endl &lt;&lt; "Please remove the file manually
.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 255</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 255</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (isInitialized)</td><td> </td><td class="right">       if (isInitialized)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (resetSolarSystemConfigurationFile())</td><td> </td><td class="right">               if (resetSolarSystemConfigurationFile())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Deselect all currently selected objects</td><td> </td><td class="right">                       //Deselect all currently selected objects</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelObjectMgr * objectManager = GETSTELMODULE(StelOb
jectMgr);</td><td> </td><td class="right">                       StelObjectMgr * objectManager = GETSTELMODULE(StelOb
jectMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //TODO</td><td> </td><td class="right">                       //TODO</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       objectManager-&gt;unSelect();</td><td> </td><td class="right">                       objectManager-&gt;unSelect();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       solarSystem<span class="delete">Manager</span>-&gt;reloadPlanets();</td><td> </td><td class="rblock">                       solarSystem-&gt;reloadPlanets();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit solarSystemChanged();</td><td> </td><td class="right">                       emit solarSystemChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystemEditor::copySolarSystemConfigurationFileTo(QString filePath
)</td><td> </td><td class="right">bool SolarSystemEditor::copySolarSystemConfigurationFileTo(QString filePath
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QFileInfo targetFile(filePath);</td><td> </td><td class="right">               QFileInfo targetFile(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 278</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 278</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystemEditor::replaceSolarSystemConfigurationFileWith(QString fil
ePath)</td><td> </td><td class="right">bool SolarSystemEditor::replaceSolarSystemConfigurationFileWith(QString fil
ePath)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(filePath))</td><td> </td><td class="right">       if (!QFile::exists(filePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//TODO: Message</span></td><td> </td><td class="rblock">               <span class="insert">qCritical() &lt;&lt; "SolarSystemEditor: Cannot replace, file not 
found: " &lt;&lt; filePath;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Is it a valid configuration file?</td><td> </td><td class="right">       //Is it a valid configuration file?</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QSettings settings(filePath, <span class="delete">QSettings::</span>IniFormat);</td><td> </td><td class="rblock">       QSettings settings(filePath, <span class="insert">Stel</span>IniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (settings.status() != QSettings::NoError)</td><td> </td><td class="right">       if (settings.status() != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               q<span class="delete">Warning() &lt;&lt; QDir::toNativeSeparators(filePath) &lt;&lt; "is not 
</span>a valid configuration file.";</td><td> </td><td class="rblock">               q<span class="insert">Critical() &lt;&lt; "SolarSystemEditor: " &lt;&lt; QDir::toNativeSepara
tors(filePath) &lt;&lt; "is not </span>a valid configuration file.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Remove the existingfile</td><td> </td><td class="right">       //Remove the existingfile</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(!QFile::remove(customSolarSystemFilePath))</td><td> </td><td class="right">               if(!QFile::remove(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//TODO: Message</span></td><td> </td><td class="rblock">                       <span class="insert">qCritical() &lt;&lt; "SolarSystemEditor: Cannot remove old
 file.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Copy the new file</td><td> </td><td class="right">       //Copy the new file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //If the copy fails, reset to the default configuration</td><td> </td><td class="right">       //If the copy fails, reset to the default configuration</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::copy(filePath, customSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::copy(filePath, customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               solarSystem<span class="delete">Manager</span>-&gt;reloadPlanets();</td><td> </td><td class="rblock">               solarSystem-&gt;reloadPlanets();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit solarSystemChanged();</td><td> </td><td class="right">               emit solarSystemChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return true;</td><td> </td><td class="right">               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//TODO: Message</span></td><td> </td><td class="rblock">               <span class="insert">qWarning() &lt;&lt; "SolarSystemEditor: Could not replace file. Re
storing default.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (cloneSolarSystemConfigurationFile())</td><td> </td><td class="right">               if (cloneSolarSystemConfigurationFile())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       solarSystem<span class="delete">Manager</span>-&gt;reloadPlanets();</td><td> </td><td class="rblock">                       solarSystem-&gt;reloadPlanets();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit solarSystemChanged();</td><td> </td><td class="right">                       emit solarSystemChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return true;</td><td> </td><td class="right">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">//TODO: Message</span></td><td> </td><td class="rblock">                       <span class="insert">qCritical() &lt;&lt; "SolarSystemEditor: Could neither rep
lace nor then restore default file. This comes unexpected.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">QHash&lt;QString,QString&gt; SolarSystemEditor::listAllLoadedObjectsInFile(QStrin</td><td> </td><td class="rblock"><span class="insert">bool SolarSystemEditor::addFromSolarSystemConfigurationFile(QString filePat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">g filePath)</td><td> </td><td class="rblock"><span class="insert">h)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (!QFile::exists(filePath))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qCritical() &lt;&lt; "SolarSystemEditor: Cannot add data from file</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">, file" &lt;&lt; filePath &lt;&lt; "not found.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //Is it a valid configuration file?</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QSettings newData(filePath, StelIniFormat);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (newData.status() != QSettings::NoError)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qCritical() &lt;&lt; "SolarSystemEditor: Cannot add data from file</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">," &lt;&lt; QDir::toNativeSeparators(filePath) &lt;&lt; "is not a valid configuration f</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ile.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //Process the existing and new files:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (QFile::exists(customSolarSystemFilePath))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QSettings minorBodies(customSolarSystemFilePath, StelIniForm</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">at);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // add and overwrite existing data in the user's ssystem_min</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">or.ini by the data in the new file.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "ADD OBJECTS: Data for " &lt;&lt; newData.childGroups(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">).count() &lt;&lt; "objects to minor file with " &lt;&lt; minorBodies.childGroups().cou</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">nt() &lt;&lt; "entries";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               foreach (QString group, newData.childGroups())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QString fixedGroupName=fixGroupName(group);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       newData.beginGroup(group);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       qDebug() &lt;&lt; "  Group: " &lt;&lt; group &lt;&lt; "for object " &lt;&lt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> newData.value("name");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       qDebug() &lt;&lt; "   ";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QStringList minorChildGroups=minorBodies.childGroups</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (minorChildGroups.contains(fixedGroupName))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qDebug() &lt;&lt; "This group " &lt;&lt; fixedGroupName </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">&lt;&lt; "already exists. Updating values";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qDebug() &lt;&lt; "This group " &lt;&lt; fixedGroupName </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">&lt;&lt; "does not yet exist. Adding values";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       minorBodies.beginGroup(fixedGroupName);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QStringList newKeys=newData.allKeys(); // limited to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> the group!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       foreach (QString key, newKeys)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               minorBodies.setValue(key, newData.value(key)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       minorBodies.endGroup();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       newData.endGroup();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               minorBodies.sync();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "Minor groups now: " &lt;&lt; minorBodies.childGroups(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "Checking for stupid General group.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // There may be a generic group "General" in the updated fil</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e, created from comments. We must remove it.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (minorBodies.childGroups().contains("General"))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       minorBodies.remove("General");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "Minor groups after fix now: " &lt;&lt; minorBodies.ch</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ildGroups();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               minorBodies.sync();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               solarSystem-&gt;reloadPlanets();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit solarSystemChanged();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qCritical() &lt;&lt; "SolarSystemEditor: Cannot add data to use fi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">le," &lt;&lt; QDir::toNativeSeparators(customSolarSystemFilePath) &lt;&lt; "not found."</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">QHash&lt;QString,QString&gt; SolarSystemEditor::listAllLoadedObjectsInFile(QStrin</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">g filePath) <span class="insert">const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(filePath))</td><td> </td><td class="right">       if (!QFile::exists(filePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return QHash&lt;QString,QString&gt;();</td><td> </td><td class="right">               return QHash&lt;QString,QString&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QSettings <span class="delete">solarSystem(filePath, QSettings::IniFormat);</span></td><td> </td><td class="rblock">       QSettings <span class="insert">solarSystemIni(filePath, StelIniFormat);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(solarSystem.status()</span> != QSettings::NoError)</td><td> </td><td class="rblock">       if <span class="insert">(solarSystemIni.status()</span> != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return QHash&lt;QString,QString&gt;();</td><td> </td><td class="right">               return QHash&lt;QString,QString&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QStringList groups = <span class="delete">solarSystem.childGroups();</span></td><td> </td><td class="rblock">       QStringList groups = <span class="insert">solarSystemIni.childGroups();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QStringList planetNames = <span class="delete">solarSystemManager-&gt;getAllPlanetEnglishNam</span></td><td> </td><td class="rblock">       QStringList planetNames = <span class="insert">solarSystem-&gt;getAllPlanetEnglishNames();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">es();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QHash&lt;QString,QString&gt; loadedObjects;</td><td> </td><td class="right">       QHash&lt;QString,QString&gt; loadedObjects;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (QString group, groups)</td><td> </td><td class="right">       foreach (QString group, groups)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               QString name = solarSystem<span class="delete">.value(group + "/name").toString()
</span>;</td><td> </td><td class="rblock">               QString name = solarSystem<span class="insert">Ini.value(group + "/name").toStrin
g()</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (planetNames.contains(name))</td><td> </td><td class="right">               if (planetNames.contains(name))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       loadedObjects.insert(name, group);</td><td> </td><td class="right">                       loadedObjects.insert(name, group);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return loadedObjects;</td><td> </td><td class="right">       return loadedObjects;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">QHash&lt;QString,QString&gt; SolarSystemEditor::listAllLoadedSsoIdentifiers()</td><td> </td><td class="rblock">QHash&lt;QString,QString&gt; SolarSystemEditor::listAllLoadedSsoIdentifiers()<span class="insert"> con
st</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return listAllLoadedObjectsInFile(customSolarSystemFilePath)
;</td><td> </td><td class="right">               return listAllLoadedObjectsInFile(customSolarSystemFilePath)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Error message</td><td> </td><td class="right">               //TODO: Error message</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return QHash&lt;QString,QString&gt;();</td><td> </td><td class="right">               return QHash&lt;QString,QString&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystemEditor::removeSsoWithName(QString name)</td><td> </td><td class="right">bool SolarSystemEditor::removeSsoWithName(QString name)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (name.isEmpty())</td><td> </td><td class="right">       if (name.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //qDebug() &lt;&lt; name;</td><td> </td><td class="right">       //qDebug() &lt;&lt; name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (defaultSsoIdentifiers.keys().contains(name))</td><td> </td><td class="right">       if (defaultSsoIdentifiers.keys().contains(name))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qWarning() &lt;&lt; "You can't delete the default Solar System obj</td><td> </td><td class="rblock">               qWarning() &lt;&lt; "You can't delete the default Solar System obj</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">ects <span class="delete">for</span> the moment.";</td><td> </td><td class="rblock">ects <span class="insert">like" &lt;&lt; name &lt;&lt; "for</span> the moment.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">qCritical() &lt;&lt; "As of 0.16, this line should be impossible t</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">o reach!";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Make sure that the file exists</td><td> </td><td class="right">       //Make sure that the file exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (!QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "Can't remove" &lt;&lt; name &lt;&lt; "<span class="delete">to ssystem.ini: Unabl
</span>e to find" &lt;&lt; QDir::toNativeSeparators(customSolarSystemFilePath);</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "Can't remove" &lt;&lt; name &lt;&lt; "<span class="insert">from ssystem_minor.in
i: Unabl</span>e to find" &lt;&lt; QDir::toNativeSeparators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Open the file</td><td> </td><td class="right">       //Open the file</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QSettings settings(customSolarSystemFilePath, <span class="delete">QSettings::</span>IniFormat);</td><td> </td><td class="rblock">       QSettings settings(customSolarSystemFilePath, <span class="insert">Stel</span>IniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (settings.status() != QSettings::NoError)</td><td> </td><td class="right">       if (settings.status() != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "Error opening ssystem<span class="delete">.ini:" &lt;&lt; QDir::toNativeSe
</span>parators(customSolarSystemFilePath);</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "Error opening ssystem<span class="insert">_minor.ini:" &lt;&lt; QDir::toNa
tiveSe</span>parators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Remove the section</td><td> </td><td class="right">       //Remove the section</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (QString group, settings.childGroups())</td><td> </td><td class="right">       foreach (QString group, settings.childGroups())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (settings.value(group + "/name").toString() == name)</td><td> </td><td class="right">               if (settings.value(group + "/name").toString() == name)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       settings.remove(group);</td><td> </td><td class="right">                       settings.remove(group);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       settings.sync();</td><td> </td><td class="right">                       settings.sync();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Deselect all currently selected objects</td><td> </td><td class="right">       //Deselect all currently selected objects</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //TODO: I bet that someone will complain<span class="delete">s, so: unselect only the rem
o</span>ved one</td><td> </td><td class="rblock">       //TODO: I bet that someone will complain<span class="insert">, so: unselect only the remo
</span>ved one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GETSTELMODULE(StelObjectMgr)-&gt;unSelect();</td><td> </td><td class="right">       GETSTELMODULE(StelObjectMgr)-&gt;unSelect();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Reload the Solar System</td><td> </td><td class="right">       //Reload the Solar System</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">solarSystemManager-&gt;reloadPlanets();</span></td><td> </td><td class="rblock">       <span class="insert">//solarSystem-&gt;reloadPlanets();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // Better: just remove this one object!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       solarSystem-&gt;removePlanet(name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit solarSystemChanged();</td><td> </td><td class="right">       emit solarSystemChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//TODO: Strings that have failed to be parsed. The usual source of discrepa
ncies is</td><td> </td><td class="right">//TODO: Strings that have failed to be parsed. The usual source of discrepa
ncies is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//http://www.minorplanetcenter.org/iau/Ephemerides/Comets/Soft00Cmt.txt</td><td> </td><td class="right">//http://www.minorplanetcenter.org/iau/Ephemerides/Comets/Soft00Cmt.txt</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//It seems that some entries in the list don't match the described format.</td><td> </td><td class="right">//It seems that some entries in the list don't match the described format.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*</td><td> </td><td class="right">/*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "    CJ95O010  1997 03 31.4141  0.906507  0.994945  130.5321  282.6820   
89.3193  20100723  -2.0  4.0  C/1995 O1 (Hale-Bopp)                        
            MPC 61436" -&gt; minus sign, fixed</td><td> </td><td class="right">  "    CJ95O010  1997 03 31.4141  0.906507  0.994945  130.5321  282.6820   
89.3193  20100723  -2.0  4.0  C/1995 O1 (Hale-Bopp)                        
            MPC 61436" -&gt; minus sign, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "    CK09K030  2011 01  9.266   3.90156   1.00000   251.413     0.032   1
46.680              8.5  4.0  C/2009 K3 (Beshore)                          
            MPC 66205" -&gt; lower precision than the spec, fixed</td><td> </td><td class="right">  "    CK09K030  2011 01  9.266   3.90156   1.00000   251.413     0.032   1
46.680              8.5  4.0  C/2009 K3 (Beshore)                          
            MPC 66205" -&gt; lower precision than the spec, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "    CK10F040  2010 04  6.109   0.61383   1.00000   120.718   237.294    
89.143             13.5  4.0  C/2010 F4 (Machholz)                         
            MPC 69906" -&gt; lower precision than the spec, fixed</td><td> </td><td class="right">  "    CK10F040  2010 04  6.109   0.61383   1.00000   120.718   237.294    
89.143             13.5  4.0  C/2010 F4 (Machholz)                         
            MPC 69906" -&gt; lower precision than the spec, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "    CK10M010  2012 02  7.840   2.29869   1.00000   265.318    82.150    
78.373              9.0  4.0  C/2010 M1 (Gibbs)                            
            MPC 70817" -&gt; lower precision than the spec, fixed</td><td> </td><td class="right">  "    CK10M010  2012 02  7.840   2.29869   1.00000   265.318    82.150    
78.373              9.0  4.0  C/2010 M1 (Gibbs)                            
            MPC 70817" -&gt; lower precision than the spec, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "    CK10R010  2011 11 28.457   6.66247   1.00000    96.009   345.949   1
57.437              6.0  4.0  C/2010 R1 (LINEAR)                           
            MPEC 2010-R99" -&gt; lower precision than the spec, fixed</td><td> </td><td class="right">  "    CK10R010  2011 11 28.457   6.66247   1.00000    96.009   345.949   1
57.437              6.0  4.0  C/2010 R1 (LINEAR)                           
            MPEC 2010-R99" -&gt; lower precision than the spec, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "0128P      b  2007 06 13.8064  3.062504  0.320891  210.3319  214.3583   
 4.3606  20100723   8.5  4.0  128P/Shoemaker-Holt                          
            MPC 51822" -&gt; fragment, fixed</td><td> </td><td class="right">  "0128P      b  2007 06 13.8064  3.062504  0.320891  210.3319  214.3583   
 4.3606  20100723   8.5  4.0  128P/Shoemaker-Holt                          
            MPC 51822" -&gt; fragment, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  "0141P      d  2010 05 29.7106  0.757809  0.749215  149.3298  246.0849   
12.8032  20100723  12.0 12.0  141P/Machholz                                
            MPC 59599" -&gt; fragment, fixed</td><td> </td><td class="right">  "0141P      d  2010 05 29.7106  0.757809  0.749215  149.3298  246.0849   
12.8032  20100723  12.0 12.0  141P/Machholz                                
            MPC 59599" -&gt; fragment, fixed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*/</td><td> </td><td class="right">*/</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">SsoElements SolarSystemEditor::readMpcOneLineCometElements(QString oneLineE
lements)</td><td> </td><td class="rblock">SsoElements SolarSystemEditor::readMpcOneLineCometElements(QString oneLineE
lements)<span class="insert"> const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SsoElements result;</td><td> </td><td class="right">       SsoElements result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //qDebug() &lt;&lt; "readMpcOneLineCometElements started...";<span class="delete"> // GZ</span></td><td> </td><td class="rblock">       //qDebug() &lt;&lt; "readMpcOneLineCometElements started...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QRegExp mpcParser("^\\s*(\\d{4})?([A-Z])((?:\\w{6}|\\s{6})?[0a-zA-Z]
)?\\s+(\\d{4})\\s+(\\d{2})\\s+(\\d{1,2}\\.\\d{3,4})\\s+(\\d{1,2}\\.\\d{5,6}
)\\s+(\\d\\.\\d{5,6})\\s+(\\d{1,3}\\.\\d{3,4})\\s+(\\d{1,3}\\.\\d{3,4})\\s+
(\\d{1,3}\\.\\d{3,4})\\s+(?:(\\d{4})(\\d\\d)(\\d\\d))?\\s+(\\-?\\d{1,2}\\.\
\d)\\s+(\\d{1,2}\\.\\d)\\s+(\\S.{1,54}\\S)(?:\\s+(\\S.*))?$");//</td><td> </td><td class="right">       QRegExp mpcParser("^\\s*(\\d{4})?([A-Z])((?:\\w{6}|\\s{6})?[0a-zA-Z]
)?\\s+(\\d{4})\\s+(\\d{2})\\s+(\\d{1,2}\\.\\d{3,4})\\s+(\\d{1,2}\\.\\d{5,6}
)\\s+(\\d\\.\\d{5,6})\\s+(\\d{1,3}\\.\\d{3,4})\\s+(\\d{1,3}\\.\\d{3,4})\\s+
(\\d{1,3}\\.\\d{3,4})\\s+(?:(\\d{4})(\\d\\d)(\\d\\d))?\\s+(\\-?\\d{1,2}\\.\
\d)\\s+(\\d{1,2}\\.\\d)\\s+(\\S.{1,54}\\S)(?:\\s+(\\S.*))?$");//</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int match = mpcParser.indexIn(oneLineElements);</td><td> </td><td class="right">       int match = mpcParser.indexIn(oneLineElements);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //qDebug() &lt;&lt; "RegExp captured:" &lt;&lt; match &lt;&lt; mpcParser.capturedTexts
();</td><td> </td><td class="right">       //qDebug() &lt;&lt; "RegExp captured:" &lt;&lt; match &lt;&lt; mpcParser.capturedTexts
();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (match &lt; 0)</td><td> </td><td class="right">       if (match &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "No match for" &lt;&lt; oneLineElements;</td><td> </td><td class="right">               qWarning() &lt;&lt; "No match for" &lt;&lt; oneLineElements;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return result;</td><td> </td><td class="right">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 472</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 544</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("name", name);</td><td> </td><td class="right">       result.insert("name", name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString sectionName = convertToGroupName(name);</td><td> </td><td class="right">       QString sectionName = convertToGroupName(name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (sectionName.isEmpty())</td><td> </td><td class="right">       if (sectionName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("section_name", sectionName);</td><td> </td><td class="right">       result.insert("section_name", sectionName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //After a name has been determined, insert the essential keys</td><td> </td><td class="right">       //After a name has been determined, insert the essential keys</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">result.insert("parent", "Sun");</span></td><td> </td><td class="rblock">       <span class="insert">//result.insert("parent", "Sun"); // 0.16: omit obvious default.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("type", "comet");</td><td> </td><td class="right">       result.insert("type", "comet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //"comet_orbit" is used for all cases:</td><td> </td><td class="right">       //"comet_orbit" is used for all cases:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //"ell_orbit" interprets distances as kilometers, not AUs</td><td> </td><td class="right">       //"ell_orbit" interprets distances as kilometers, not AUs</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("coord_func", "comet_orbit");</td><td> </td><td class="right">       result.insert("coord_func", "comet_orbit");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // GZ: moved next line below!</td><td> </td><td class="right">       // GZ: moved next line below!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //result.insert("orbit_good", 1000); // default validity for osculat
ing elements, days</td><td> </td><td class="right">       //result.insert("orbit_good", 1000); // default validity for osculat
ing elements, days</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">result.insert("lighting", false);</span></td><td> </td><td class="rblock">       <span class="insert">//result.insert("color",</span> "1.0, 1.0, 1.0");  <span class="insert">// 0.16: omit obvious de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       result.insert("color",</span> "1.0, 1.0, 1.0");</td><td> </td><td class="rblock"><span class="insert">fault.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">result.insert("tex_map",</span> "nomap.png");</td><td> </td><td class="rblock"><span class="insert">       //result.insert("tex_map",</span> "nomap.png");    <span class="insert">// 0.16: omit obvious de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">fault.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool ok = false;</td><td> </td><td class="right">       bool ok = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: Use this for VALIDATION!</td><td> </td><td class="right">       //TODO: Use this for VALIDATION!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int year        = mpcParser.cap(4).toInt();</td><td> </td><td class="right">       int year        = mpcParser.cap(4).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int month       = mpcParser.cap(5).toInt();</td><td> </td><td class="right">       int month       = mpcParser.cap(5).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double dayFraction      = mpcParser.cap(6).toDouble(&amp;ok);</td><td> </td><td class="right">       double dayFraction      = mpcParser.cap(6).toDouble(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int day = (int) dayFraction;</td><td> </td><td class="right">       int day = (int) dayFraction;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QDate datePerihelionPassage(year, month, day);</td><td> </td><td class="right">       QDate datePerihelionPassage(year, month, day);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int fraction = (int) ((dayFraction - day) * 24 * 60 * 60);</td><td> </td><td class="right">       int fraction = (int) ((dayFraction - day) * 24 * 60 * 60);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 537</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 608</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               result.insert("orbit_good", 1000); // default validity for o
sculating elements, days</td><td> </td><td class="right">               result.insert("orbit_good", 1000); // default validity for o
sculating elements, days</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double absoluteMagnitude = mpcParser.cap(15).toDouble(&amp;ok);</td><td> </td><td class="right">       double absoluteMagnitude = mpcParser.cap(15).toDouble(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("absolute_magnitude", absoluteMagnitude);</td><td> </td><td class="right">       result.insert("absolute_magnitude", absoluteMagnitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //This is not the same "slope parameter" as used in asteroids. Bette
r name?</td><td> </td><td class="right">       //This is not the same "slope parameter" as used in asteroids. Bette
r name?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double slopeParameter = mpcParser.cap(16).toDouble(&amp;ok);</td><td> </td><td class="right">       double slopeParameter = mpcParser.cap(16).toDouble(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("slope_parameter", slopeParameter);</td><td> </td><td class="right">       result.insert("slope_parameter", slopeParameter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       double radius = 5; //Fictitious</td><td> </td><td class="rblock">       double radius = 5; //Fictitious<span class="insert"> default assumption</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("radius", radius);</td><td> </td><td class="right">       result.insert("radius", radius);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("albedo", 0.1); // GZ 2014-01-10: Comets are very dark
, should even be 0.03!</td><td> </td><td class="right">       result.insert("albedo", 0.1); // GZ 2014-01-10: Comets are very dark
, should even be 0.03!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("dust_lengthfactor", 0.4); // dust tail length w.r.t. 
gas tail length</td><td> </td><td class="right">       result.insert("dust_lengthfactor", 0.4); // dust tail length w.r.t. 
gas tail length</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("dust_brightnessfactor", 1.5); // dust tail brightness
 w.r.t. gas tail.</td><td> </td><td class="right">       result.insert("dust_brightnessfactor", 1.5); // dust tail brightness
 w.r.t. gas tail.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("dust_widthfactor", 1.5); // opening w.r.t. gas tail o
pening width.</td><td> </td><td class="right">       result.insert("dust_widthfactor", 1.5); // opening w.r.t. gas tail o
pening width.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //qDebug() &lt;&lt; "readMpcOneLineCometElements done\n";</td><td> </td><td class="right">       //qDebug() &lt;&lt; "readMpcOneLineCometElements done\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">SsoElements SolarSystemEditor::readMpcOneLineMinorPlanetElements(QString on
eLineElements)</td><td> </td><td class="rblock">SsoElements SolarSystemEditor::readMpcOneLineMinorPlanetElements(QString on
eLineElements)<span class="insert"> const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SsoElements result;</td><td> </td><td class="right">       SsoElements result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //This time I'll try splitting the line to columns, instead of</td><td> </td><td class="right">       //This time I'll try splitting the line to columns, instead of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //using a regular expression.</td><td> </td><td class="right">       //using a regular expression.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Using QString::mid() allows parsing it in a random sequence.</td><td> </td><td class="right">       //Using QString::mid() allows parsing it in a random sequence.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Length validation</td><td> </td><td class="right">       //Length validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (oneLineElements.isEmpty() ||</td><td> </td><td class="right">       if (oneLineElements.isEmpty() ||</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           oneLineElements.length() &gt; 202 ||</td><td> </td><td class="right">           oneLineElements.length() &gt; 202 ||</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 657</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 728</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Section name</td><td> </td><td class="right">       //Section name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString sectionName = convertToGroupName(name, minorPlanetNumber);</td><td> </td><td class="right">       QString sectionName = convertToGroupName(name, minorPlanetNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (sectionName.isEmpty())</td><td> </td><td class="right">       if (sectionName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("section_name", sectionName);</td><td> </td><td class="right">       result.insert("section_name", sectionName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //After a name has been determined, insert the essential keys</td><td> </td><td class="right">       //After a name has been determined, insert the essential keys</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">result.insert("parent", "Sun");</span></td><td> </td><td class="rblock">       <span class="insert">//result.insert("parent", "Sun");        // 0.16: omit obvious defau
lt.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //"comet_orbit" is used for all cases:</td><td> </td><td class="right">       //"comet_orbit" is used for all cases:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //"ell_orbit" interprets distances as kilometers, not AUs</td><td> </td><td class="right">       //"ell_orbit" interprets distances as kilometers, not AUs</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("coord_func","comet_orbit");</td><td> </td><td class="right">       result.insert("coord_func","comet_orbit");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">result.insert("lighting", false);</span></td><td> </td><td class="rblock">       <span class="insert">//result.insert("color",</span> "1.0, 1.0, 1.0"); <span class="insert">// 0.16: omit obvious def</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       result.insert("color",</span> "1.0, 1.0, 1.0");</td><td> </td><td class="rblock"><span class="insert">ault.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">result.insert("tex_map",</span> "nomap.png");</td><td> </td><td class="rblock"><span class="insert">       //result.insert("tex_map",</span> "nomap.png");   <span class="insert">// 0.16: omit obvious def</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ault.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Magnitude and slope parameter</td><td> </td><td class="right">       //Magnitude and slope parameter</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       column = oneLineElements.mid(8,5).trimmed();</td><td> </td><td class="right">       column = oneLineElements.mid(8,5).trimmed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double absoluteMagnitude = column.toDouble(&amp;ok);</td><td> </td><td class="right">       double absoluteMagnitude = column.toDouble(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       column = oneLineElements.mid(14,5).trimmed();</td><td> </td><td class="right">       column = oneLineElements.mid(14,5).trimmed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double slopeParameter = column.toDouble(&amp;ok);</td><td> </td><td class="right">       double slopeParameter = column.toDouble(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 719</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 789</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       column = oneLineElements.mid(92, 11).trimmed();</td><td> </td><td class="right">       column = oneLineElements.mid(92, 11).trimmed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double semiMajorAxis = column.toDouble(&amp;ok);</td><td> </td><td class="right">       double semiMajorAxis = column.toDouble(&amp;ok);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("orbit_SemiMajorAxis", semiMajorAxis);</td><td> </td><td class="right">       result.insert("orbit_SemiMajorAxis", semiMajorAxis);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       column = oneLineElements.mid(20, 5).trimmed();//Epoch, in packed for
m</td><td> </td><td class="right">       column = oneLineElements.mid(20, 5).trimmed();//Epoch, in packed for
m</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QRegExp packedDateFormat("^([IJK])(\\d\\d)([1-9A-C])([1-9A-V])$");</td><td> </td><td class="right">       QRegExp packedDateFormat("^([IJK])(\\d\\d)([1-9A-C])([1-9A-V])$");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (packedDateFormat.indexIn(column) != 0)</td><td> </td><td class="right">       if (packedDateFormat.indexIn(column) != 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               q<span class="delete">Debu</span>g() &lt;&lt; "readMpcOneLineMinorPlanetElements():"</td><td> </td><td class="rblock">               q<span class="insert">Warnin</span>g() &lt;&lt; "readMpcOneLineMinorPlanetElements():"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        &lt;&lt; column &lt;&lt; "is not a date in packed format";</td><td> </td><td class="right">                        &lt;&lt; column &lt;&lt; "is not a date in packed format";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int year = packedDateFormat.cap(2).toInt();</td><td> </td><td class="right">       int year = packedDateFormat.cap(2).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       switch (packedDateFormat.cap(1).at(0).toLatin1())</td><td> </td><td class="right">       switch (packedDateFormat.cap(1).at(0).toLatin1())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 'I':</td><td> </td><td class="right">               case 'I':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       year += 1800;</td><td> </td><td class="right">                       year += 1800;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 'J':</td><td> </td><td class="right">               case 'J':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 742</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 812</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case 'K':</td><td> </td><td class="right">               case 'K':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default:</td><td> </td><td class="right">               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       year += 2000;</td><td> </td><td class="right">                       year += 2000;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int month = unpackDayOrMonthNumber(packedDateFormat.cap(3).at(0));</td><td> </td><td class="right">       int month = unpackDayOrMonthNumber(packedDateFormat.cap(3).at(0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int day   = unpackDayOrMonthNumber(packedDateFormat.cap(4).at(0));</td><td> </td><td class="right">       int day   = unpackDayOrMonthNumber(packedDateFormat.cap(4).at(0));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //qDebug() &lt;&lt; column &lt;&lt; year &lt;&lt; month &lt;&lt; day;</td><td> </td><td class="right">       //qDebug() &lt;&lt; column &lt;&lt; year &lt;&lt; month &lt;&lt; day;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QDate epochDate(year, month, day);</td><td> </td><td class="right">       QDate epochDate(year, month, day);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!epochDate.isValid())</td><td> </td><td class="right">       if (!epochDate.isValid())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               q<span class="delete">Debu</span>g() &lt;&lt; "readMpcOneLineMinorPlanetElements():"</td><td> </td><td class="rblock">               q<span class="insert">Warnin</span>g() &lt;&lt; "readMpcOneLineMinorPlanetElements():"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        &lt;&lt; column &lt;&lt; "unpacks to"</td><td> </td><td class="right">                        &lt;&lt; column &lt;&lt; "unpacks to"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        &lt;&lt; QString("%1-%2-%3").arg(year).arg(month).arg(day
)</td><td> </td><td class="right">                        &lt;&lt; QString("%1-%2-%3").arg(year).arg(month).arg(day
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                &lt;&lt; "This is not a valid date for an Epoch."
;</td><td> </td><td class="right">                                &lt;&lt; "This is not a valid date for an Epoch."
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Epoch is at .0 TT, i.e. midnight</td><td> </td><td class="right">       //Epoch is at .0 TT, i.e. midnight</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double epochJD;</td><td> </td><td class="right">       double epochJD;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelUtils::getJDFromDate(&amp;epochJD, year, month, day, 0, 0, 0);</td><td> </td><td class="right">       StelUtils::getJDFromDate(&amp;epochJD, year, month, day, 0, 0, 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("orbit_Epoch", epochJD);</td><td> </td><td class="right">       result.insert("orbit_Epoch", epochJD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       column = oneLineElements.mid(26, 9).trimmed();</td><td> </td><td class="right">       column = oneLineElements.mid(26, 9).trimmed();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double meanAnomalyAtEpoch = column.toDouble(&amp;ok);//degrees</td><td> </td><td class="right">       double meanAnomalyAtEpoch = column.toDouble(&amp;ok);//degrees</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!ok)</td><td> </td><td class="right">       if (!ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return SsoElements();</td><td> </td><td class="right">               return SsoElements();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("orbit_MeanAnomaly", meanAnomalyAtEpoch);</td><td> </td><td class="right">       result.insert("orbit_MeanAnomaly", meanAnomalyAtEpoch);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // add period for visualization of orbit</td><td> </td><td class="right">       // add period for visualization of orbit</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (semiMajorAxis&gt;0)</td><td> </td><td class="right">       if (semiMajorAxis&gt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               result.insert("orbit_visualization_period", StelUtils::calcu
lateSiderealPeriod(semiMajorAxis));</td><td> </td><td class="right">               result.insert("orbit_visualization_period", StelUtils::calcu
lateSiderealPeriod(semiMajorAxis));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // 2:3 resonan<span class="delete">se to Neptune</span></td><td> </td><td class="rblock">       // 2:3 resonan<span class="insert">ce to Neptune [https://en.wikipedia.org/wiki/Plutino]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if ((int)semiMajorAxis == 39)</td><td> </td><td class="right">       if ((int)semiMajorAxis == 39)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               objectType = "plutino";</td><td> </td><td class="right">               objectType = "plutino";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // Classical Kuiper belt objects</td><td> </td><td class="rblock">       // Classical Kuiper belt objects<span class="insert"> [https://en.wikipedia.org/wiki/Clas
sical_Kuiper_belt_object]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (semiMajorAxis&gt;=40 &amp;&amp; semiMajorAxis&lt;=50)</td><td> </td><td class="right">       if (semiMajorAxis&gt;=40 &amp;&amp; semiMajorAxis&lt;=50)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               objectType = "cubewano";</td><td> </td><td class="right">               objectType = "cubewano";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Calculate perihelion</td><td> </td><td class="right">       // Calculate perihelion</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float r = (1 - eccentricity)*semiMajorAxis;</td><td> </td><td class="right">       float r = (1 - eccentricity)*semiMajorAxis;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Scattered disc objects</td><td> </td><td class="right">       // Scattered disc objects</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (r &gt; 35)</td><td> </td><td class="right">       if (r &gt; 35)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               objectType = "scattered disc object";</td><td> </td><td class="right">               objectType = "scattered disc object";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // Sednoids</td><td> </td><td class="rblock">       // Sednoids <span class="insert">[https://en.wikipedia.org/wiki/Planet_Nine]</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (r &gt; <span class="delete">50</span> &amp;&amp; semiMajorAxis &gt; <span class="delete">150)</span></td><td> </td><td class="rblock">       if (r &gt; <span class="insert">30</span> &amp;&amp; semiMajorAxis &gt; <span class="insert">250)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               objectType = "sednoid";</td><td> </td><td class="right">               objectType = "sednoid";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Radius and albedo</td><td> </td><td class="right">       //Radius and albedo</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Assume albedo of 0.15 and calculate a radius based on the absolute
 magnitude</td><td> </td><td class="right">       //Assume albedo of 0.15 and calculate a radius based on the absolute
 magnitude</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //as described here: http://www.physics.sfasu.edu/astro/asteroids/si
zemagnitude.html</td><td> </td><td class="right">       //as described here: http://www.physics.sfasu.edu/astro/asteroids/si
zemagnitude.html</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double albedo = 0.15; //Assumed</td><td> </td><td class="right">       double albedo = 0.15; //Assumed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double radius = std::ceil((1329 / std::sqrt(albedo)) * std::pow(10, 
-0.2 * absoluteMagnitude));</td><td> </td><td class="right">       double radius = std::ceil((1329 / std::sqrt(albedo)) * std::pow(10, 
-0.2 * absoluteMagnitude));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("albedo", albedo);</td><td> </td><td class="right">       result.insert("albedo", albedo);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("radius", radius);</td><td> </td><td class="right">       result.insert("radius", radius);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("type", objectType);</td><td> </td><td class="right">       result.insert("type", objectType);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"><span class="insert">/* DEAD CODE. MAYBE REACTIVATE FOR SCRIPTING ACCESS</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SsoElements SolarSystemEditor::readXEphemOneLineElements(QString oneLineEle
ments)</td><td> </td><td class="right">SsoElements SolarSystemEditor::readXEphemOneLineElements(QString oneLineEle
ments)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SsoElements result;</td><td> </td><td class="right">       SsoElements result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       enum OrbitType {Elliptic, Hyperbolic, Parabolic} orbitType;</td><td> </td><td class="right">       enum OrbitType {Elliptic, Hyperbolic, Parabolic} orbitType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList fields = oneLineElements.split(',');</td><td> </td><td class="right">       QStringList fields = oneLineElements.split(',');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (fields.isEmpty() || fields.count() &lt; 10 || fields.count() &gt; 14)</td><td> </td><td class="right">       if (fields.isEmpty() || fields.count() &lt; 10 || fields.count() &gt; 14)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return result;</td><td> </td><td class="right">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //qDebug() &lt;&lt; fields;</td><td> </td><td class="right">       //qDebug() &lt;&lt; fields;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1049</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1119</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (r &gt; 50 &amp;&amp; semiMajorAxis &gt; 150)</td><td> </td><td class="right">               if (r &gt; 50 &amp;&amp; semiMajorAxis &gt; 150)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       objectType = "sednoid";</td><td> </td><td class="right">                       objectType = "sednoid";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("albedo", albedo);</td><td> </td><td class="right">       result.insert("albedo", albedo);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("radius", radius);</td><td> </td><td class="right">       result.insert("radius", radius);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       result.insert("type", objectType);</td><td> </td><td class="right">       result.insert("type", objectType);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">*/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">QList&lt;SsoElements&gt; SolarSystemEditor::readMpcOneLineCometElementsFromFile(Q
String filePath)</td><td> </td><td class="rblock">QList&lt;SsoElements&gt; SolarSystemEditor::readMpcOneLineCometElementsFromFile(Q
String filePath)<span class="insert"> const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;SsoElements&gt; objectList;</td><td> </td><td class="right">       QList&lt;SsoElements&gt; objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(filePath))</td><td> </td><td class="right">       if (!QFile::exists(filePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Can't find" &lt;&lt; QDir::toNativeSeparators(filePat
h);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Can't find" &lt;&lt; QDir::toNativeSeparators(filePat
h);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return objectList;</td><td> </td><td class="right">               return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile mpcElementsFile(filePath);</td><td> </td><td class="right">       QFile mpcElementsFile(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1104</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1175</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Unable to open for reading" &lt;&lt; QDir::toNativeSe
parators(filePath);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Unable to open for reading" &lt;&lt; QDir::toNativeSe
parators(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "File error:" &lt;&lt; mpcElementsFile.errorString();</td><td> </td><td class="right">               qDebug() &lt;&lt; "File error:" &lt;&lt; mpcElementsFile.errorString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return objectList;</td><td> </td><td class="right">               return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return objectList;</td><td> </td><td class="right">       return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">QList&lt;SsoElements&gt; SolarSystemEditor::readMpcOneLineMinorPlanetElementsFrom
File(QString filePath)</td><td> </td><td class="rblock">QList&lt;SsoElements&gt; SolarSystemEditor::readMpcOneLineMinorPlanetElementsFrom
File(QString filePath)<span class="insert"> const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;SsoElements&gt; objectList;</td><td> </td><td class="right">       QList&lt;SsoElements&gt; objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(filePath))</td><td> </td><td class="right">       if (!QFile::exists(filePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Can't find" &lt;&lt; QDir::toNativeSeparators(filePat
h);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Can't find" &lt;&lt; QDir::toNativeSeparators(filePat
h);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return objectList;</td><td> </td><td class="right">               return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile mpcElementsFile(filePath);</td><td> </td><td class="right">       QFile mpcElementsFile(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1158</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1229</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Unable to open for reading" &lt;&lt; QDir::toNativeSe
parators(filePath);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Unable to open for reading" &lt;&lt; QDir::toNativeSe
parators(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "File error:" &lt;&lt; mpcElementsFile.errorString();</td><td> </td><td class="right">               qDebug() &lt;&lt; "File error:" &lt;&lt; mpcElementsFile.errorString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return objectList;</td><td> </td><td class="right">               return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return objectList;</td><td> </td><td class="right">       return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">/*</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> * // UNUSED FUNCTON as of 0.16pre. Maybe reactivate as public slot for scr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ipting.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QList&lt;SsoElements&gt; SolarSystemEditor::readXEphemOneLineElementsFromFile(QSt
ring filePath)</td><td> </td><td class="right">QList&lt;SsoElements&gt; SolarSystemEditor::readXEphemOneLineElementsFromFile(QSt
ring filePath)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;SsoElements&gt; objectList;</td><td> </td><td class="right">       QList&lt;SsoElements&gt; objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(filePath))</td><td> </td><td class="right">       if (!QFile::exists(filePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Can't find" &lt;&lt; QDir::toNativeSeparators(filePat
h);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Can't find" &lt;&lt; QDir::toNativeSeparators(filePat
h);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return objectList;</td><td> </td><td class="right">               return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1216</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1289</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Unable to open for reading" &lt;&lt; QDir::toNativeSe
parators(filePath);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Unable to open for reading" &lt;&lt; QDir::toNativeSe
parators(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "File error:" &lt;&lt; xEphemElementsFile.errorString(
);</td><td> </td><td class="right">               qDebug() &lt;&lt; "File error:" &lt;&lt; xEphemElementsFile.errorString(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return objectList;</td><td> </td><td class="right">               return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return objectList;</td><td> </td><td class="right">       return objectList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"><span class="insert">*/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystemEditor::appendToSolarSystemConfigurationFile(QList&lt;SsoEleme
nts&gt; objectList)</td><td> </td><td class="right">bool SolarSystemEditor::appendToSolarSystemConfigurationFile(QList&lt;SsoEleme
nts&gt; objectList)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       qDebug() &lt;&lt; "appendToSolarSystemConfigurationFile begin ... ";<span class="delete"> // GZ</span></td><td> </td><td class="rblock">       qDebug() &lt;&lt; "appendToSolarSystemConfigurationFile begin ... ";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (objectList.isEmpty())</td><td> </td><td class="right">       if (objectList.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Check if the configuration file exists</td><td> </td><td class="right">       //Check if the configuration file exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (!QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "Can't append object data to ssystem<span class="delete">.ini: Unable
</span> to find" &lt;&lt; QDir::toNativeSeparators(customSolarSystemFilePath);</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "Can't append object data to ssystem<span class="insert">_minor.ini: 
Unable</span> to find" &lt;&lt; QDir::toNativeSeparators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QHash&lt;QString,QString&gt; loadedObjects = listAllLoadedSsoIdentifiers()
;</td><td> </td><td class="right">       QHash&lt;QString,QString&gt; loadedObjects = listAllLoadedSsoIdentifiers()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Remove duplicates (identified by name, not by section name)</td><td> </td><td class="right">       //Remove duplicates (identified by name, not by section name)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QSettings * solarSystemSettings = new QSettings(customSolarSystemFil
ePath, <span class="delete">QSettings::</span>IniFormat);</td><td> </td><td class="rblock">       QSettings * solarSystemSettings = new QSettings(customSolarSystemFil
ePath, <span class="insert">Stel</span>IniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (solarSystemSettings-&gt;status() != QSettings::NoError)</td><td> </td><td class="right">       if (solarSystemSettings-&gt;status() != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "Error opening ssystem<span class="delete">.ini:" &lt;&lt; QDir::toNativeSe
</span>parators(customSolarSystemFilePath);</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "Error opening ssystem<span class="insert">_minor.ini:" &lt;&lt; QDir::toNa
tiveSe</span>parators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (SsoElements object, objectList)</td><td> </td><td class="right">       foreach (SsoElements object, objectList)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString name = object.value("name").toString();</td><td> </td><td class="right">               QString name = object.value("name").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (name.isEmpty())</td><td> </td><td class="right">               if (name.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       continue;</td><td> </td><td class="right">                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString group = object.value("section_name").toString();</td><td> </td><td class="right">               QString group = object.value("section_name").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (group.isEmpty())</td><td> </td><td class="right">               if (group.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1264</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1337</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       loadedObjects.remove(name);</td><td> </td><td class="right">                       loadedObjects.remove(name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else if (solarSystemSettings-&gt;childGroups().contains(group))</td><td> </td><td class="right">               else if (solarSystemSettings-&gt;childGroups().contains(group))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       loadedObjects.remove(solarSystemSettings-&gt;value(grou
p + "/name").toString());</td><td> </td><td class="right">                       loadedObjects.remove(solarSystemSettings-&gt;value(grou
p + "/name").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       solarSystemSettings-&gt;remove(group);</td><td> </td><td class="right">                       solarSystemSettings-&gt;remove(group);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       solarSystemSettings-&gt;sync();</td><td> </td><td class="right">       solarSystemSettings-&gt;sync();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete solarSystemSettings;</td><td> </td><td class="right">       delete solarSystemSettings;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       solarSystemSettings = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       solarSystemSettings = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //Write to file</td><td> </td><td class="rblock">       //Write to file<span class="insert">. (Handle as regular text file, not QSettings.)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //TODO: The usual validation</td><td> </td><td class="right">       //TODO: The usual validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Appending to file...";</td><td> </td><td class="right">       qDebug() &lt;&lt; "Appending to file...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile solarSystemConfigurationFile(customSolarSystemFilePath);</td><td> </td><td class="right">       QFile solarSystemConfigurationFile(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(solarSystemConfigurationFile.open(QFile::WriteOnly | QFile::Appen
d | QFile::Text))</td><td> </td><td class="right">       if(solarSystemConfigurationFile.open(QFile::WriteOnly | QFile::Appen
d | QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QTextStream output (&amp;solarSystemConfigurationFile);</td><td> </td><td class="right">               QTextStream output (&amp;solarSystemConfigurationFile);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bool appendedAtLeastOne = false;</td><td> </td><td class="right">               bool appendedAtLeastOne = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach (SsoElements object, objectList)</td><td> </td><td class="right">               foreach (SsoElements object, objectList)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1300</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1373</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       foreach(QString key, object.keys())</td><td> </td><td class="right">                       foreach(QString key, object.keys())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               output &lt;&lt; QString("%1 = %2").arg(key).arg(ob
ject.value(key).toString()) &lt;&lt; endl;</td><td> </td><td class="right">                               output &lt;&lt; QString("%1 = %2").arg(key).arg(ob
ject.value(key).toString()) &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       output.flush();</td><td> </td><td class="right">                       output.flush();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qDebug() &lt;&lt; "Appended successfully" &lt;&lt; sectionName;</td><td> </td><td class="right">                       qDebug() &lt;&lt; "Appended successfully" &lt;&lt; sectionName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       appendedAtLeastOne = true;</td><td> </td><td class="right">                       appendedAtLeastOne = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               solarSystemConfigurationFile.close();</td><td> </td><td class="right">               solarSystemConfigurationFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "appendToSolarSystemConfigurationFile appended: 
" &lt;&lt; appendedAtLeastOne;<span class="delete"> // GZ</span></td><td> </td><td class="rblock">               qDebug() &lt;&lt; "appendToSolarSystemConfigurationFile appended: 
" &lt;&lt; appendedAtLeastOne;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return appendedAtLeastOne;</td><td> </td><td class="right">               return appendedAtLeastOne;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Unable to open for writing" &lt;&lt; QDir::toNativeSe
parators(customSolarSystemFilePath);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Unable to open for writing" &lt;&lt; QDir::toNativeSe
parators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1340</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 1413</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return true;</td><td> </td><td class="right">               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Check if the configuration file exists</td><td> </td><td class="right">       //Check if the configuration file exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!QFile::exists(customSolarSystemFilePath))</td><td> </td><td class="right">       if (!QFile::exists(customSolarSystemFilePath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Can't update ssystem.ini: Unable to find" &lt;&lt; QD
ir::toNativeSeparators(customSolarSystemFilePath);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Can't update ssystem.ini: Unable to find" &lt;&lt; QD
ir::toNativeSeparators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QSettings solarSystem(customSolarSystemFilePath, <span class="delete">QSettings::IniForma
</span>t);</td><td> </td><td class="rblock">       QSettings solarSystem(customSolarSystemFilePath, <span class="insert">StelIniForma</span>t);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (solarSystem.status() != QSettings::NoError)</td><td> </td><td class="right">       if (solarSystem.status() != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "Error opening ssystem.ini:" &lt;&lt; QDir::toNativeSe
parators(customSolarSystemFilePath);</td><td> </td><td class="right">               qDebug() &lt;&lt; "Error opening ssystem.ini:" &lt;&lt; QDir::toNativeSe
parators(customSolarSystemFilePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList existingSections = solarSystem.childGroups();</td><td> </td><td class="right">       QStringList existingSections = solarSystem.childGroups();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QHash&lt;QString,QString&gt; loadedObjects = listAllLoadedSsoIdentifiers()
;</td><td> </td><td class="right">       QHash&lt;QString,QString&gt; loadedObjects = listAllLoadedSsoIdentifiers()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //TODO: Move to <span class="delete">contstructor?</span></td><td> </td><td class="rblock">       //TODO: Move to <span class="insert">constructor?</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // This list of elements gets temporarily deleted.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // GZ: Note that the original implementation assumed that the coord_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">func could ever change. This is not possible at least in 0.13 and later:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // ell_orbit is used for moons (distances in km) while comet_orbit i</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">s used for minor bodies around the sun.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList orbitalElementsKeys;</td><td> </td><td class="right">       QStringList orbitalElementsKeys;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       orbitalElementsKeys &lt;&lt; "coord_func"</td><td> </td><td class="right">       orbitalElementsKeys &lt;&lt; "coord_func"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_ArgOfPericenter"</td><td> </td><td class="right">                       &lt;&lt; "orbit_ArgOfPericenter"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_AscendingNode"</td><td> </td><td class="right">                       &lt;&lt; "orbit_AscendingNode"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_Eccentricity"</td><td> </td><td class="right">                       &lt;&lt; "orbit_Eccentricity"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_Epoch"</td><td> </td><td class="right">                       &lt;&lt; "orbit_Epoch"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; "orbit_good"                                // <span class="delete">GZ</span></td><td> </td><td class="rblock"><span class="insert">// GZ It seems to have been an error to include these.  They might simply b</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> ADDITION (4x)</span></td><td> </td><td class="rblock"><span class="insert">e updated without prior deletion.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; "dust_lengthfactor"</td><td> </td><td class="rblock"><span class="insert">//</span>                     &lt;&lt; "orbit_good"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; "dust_brightnessfactor"</td><td> </td><td class="rblock">//                     &lt;&lt; "dust_lengthfactor"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       &lt;&lt; "dust_widthfactor"</td><td> </td><td class="rblock"><span class="insert">//</span>                     &lt;&lt; "dust_brightnessfactor"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//</span>                     &lt;&lt; "dust_widthfactor"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_Inclination"</td><td> </td><td class="right">                       &lt;&lt; "orbit_Inclination"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_LongOfPericenter"</td><td> </td><td class="right">                       &lt;&lt; "orbit_LongOfPericenter"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_MeanAnomaly"</td><td> </td><td class="right">                       &lt;&lt; "orbit_MeanAnomaly"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_MeanLongitude"</td><td> </td><td class="right">                       &lt;&lt; "orbit_MeanLongitude"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_MeanMotion"</td><td> </td><td class="right">                       &lt;&lt; "orbit_MeanMotion"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_PericenterDistance"</td><td> </td><td class="right">                       &lt;&lt; "orbit_PericenterDistance"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_Period"</td><td> </td><td class="right">                       &lt;&lt; "orbit_Period"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_SemiMajorAxis"</td><td> </td><td class="right">                       &lt;&lt; "orbit_SemiMajorAxis"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       &lt;&lt; "orbit_TimeAtPericenter";</td><td> </td><td class="right">                       &lt;&lt; "orbit_TimeAtPericenter";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1433</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 1510</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flags.testFlag(UpdateType))</td><td> </td><td class="right">               if (flags.testFlag(UpdateType))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       updateSsoProperty(solarSystem, object, "type");</td><td> </td><td class="right">                       updateSsoProperty(solarSystem, object, "type");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flags.testFlag(UpdateOrbitalElements))</td><td> </td><td class="right">               if (flags.testFlag(UpdateOrbitalElements))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Remove all orbital elements first, in case</td><td> </td><td class="right">                       //Remove all orbital elements first, in case</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //the new ones use another coordinate function</td><td> </td><td class="right">                       //the new ones use another coordinate function</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       // GZ This seems completely useless now. Type of orb
it will not change as it is always comet_orbit.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       foreach (QString key, orbitalElementsKeys)</td><td> </td><td class="right">                       foreach (QString key, orbitalElementsKeys)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               solarSystem.remove(key);</td><td> </td><td class="right">                               solarSystem.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       foreach (QString key, orbitalElementsKeys)</td><td> </td><td class="right">                       foreach (QString key, orbitalElementsKeys)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               updateSsoProperty(solarSystem, object, key);</td><td> </td><td class="right">                               updateSsoProperty(solarSystem, object, key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flags.testFlag(UpdateMagnitudeParameters))</td><td> </td><td class="right">               if (flags.testFlag(UpdateMagnitudeParameters))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (object.contains("absolute_magnitude") &amp;&amp; object.
contains("slope_parameter"))</td><td> </td><td class="right">                       if (object.contains("absolute_magnitude") &amp;&amp; object.
contains("slope_parameter"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString type = solarSystem.value("type").toS
tring();</td><td> </td><td class="right">                               QString type = solarSystem.value("type").toS
tring();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (type == "asteroid" || type == "comet" )</td><td> </td><td class="rblock">                               if (type == "asteroid" || type == "<span class="insert">plutino" 
|| type == "cubewano" || type == "scattered disc object" || type == "sednoi
d" || type == "</span>comet" )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       updateSsoProperty(solarSystem, objec
t, "absolute_magnitude");</td><td> </td><td class="right">                                       updateSsoProperty(solarSystem, objec
t, "absolute_magnitude");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       updateSsoProperty(solarSystem, objec
t, "slope_parameter");</td><td> </td><td class="right">                                       updateSsoProperty(solarSystem, objec
t, "slope_parameter");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //TODO: Do what, log a message?</td><td> </td><td class="right">                                       //TODO: Do what, log a message?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 1498</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 1576</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //insert the minor planet number in the section name</td><td> </td><td class="right">       //insert the minor planet number in the section name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //(if an asteroid is named, it must be numbered)</td><td> </td><td class="right">       //(if an asteroid is named, it must be numbered)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (minorPlanetNumber)</td><td> </td><td class="right">       if (minorPlanetNumber)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               groupName.prepend(QString::number(minorPlanetNumber));</td><td> </td><td class="right">               groupName.prepend(QString::number(minorPlanetNumber));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return groupName;</td><td> </td><td class="right">       return groupName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QString SolarSystemEditor::fixGroupName(QString &amp;name)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString groupName(name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       groupName.replace("%25", "%");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       groupName.replace("%28", "(");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       groupName.replace("%29", ")");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return groupName;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int SolarSystemEditor::unpackDayOrMonthNumber(QChar digit)</td><td> </td><td class="right">int SolarSystemEditor::unpackDayOrMonthNumber(QChar digit)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //0-9, 0 is an invalid value<span class="delete">, but the function is supposed to return
 0 on failure</span>.</td><td> </td><td class="rblock">       //0-9, 0 is an invalid value<span class="insert"> in the designed use of this function</span>.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (digit.isDigit())</td><td> </td><td class="right">       if (digit.isDigit())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return digit.digitValue();</td><td> </td><td class="right">               return digit.digitValue();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (digit.isUpper())</td><td> </td><td class="right">       if (digit.isUpper())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               char letter = digit.toLatin1();</td><td> </td><td class="right">               char letter = digit.toLatin1();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (letter &lt; 'A' || letter &gt; 'V')</td><td> </td><td class="right">               if (letter &lt; 'A' || letter &gt; 'V')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return 0;</td><td> </td><td class="right">                       return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return (10 + (letter - 'A'));</td><td> </td><td class="right">               return (10 + (letter - 'A'));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return <span class="delete">0</span>;</td><td> </td><td class="rblock">               return <span class="insert">-1</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int SolarSystemEditor::unpackYearNumber (QChar prefix, int lastTwoDigits)</td><td> </td><td class="right">int SolarSystemEditor::unpackYearNumber (QChar prefix, int lastTwoDigits)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int year = lastTwoDigits;</td><td> </td><td class="right">       int year = lastTwoDigits;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (prefix == 'I')</td><td> </td><td class="right">       if (prefix == 'I')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               year += 1800;</td><td> </td><td class="right">               year += 1800;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (prefix == 'J')</td><td> </td><td class="right">       else if (prefix == 'J')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               year += 1900;</td><td> </td><td class="right">               year += 1900;</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 72 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>106 lines changed or deleted</i></th><th><i> </i></th><th><i>229 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
