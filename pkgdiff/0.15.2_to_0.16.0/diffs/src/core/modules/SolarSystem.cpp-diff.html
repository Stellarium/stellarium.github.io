<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-80-generic #101-Ubuntu SMP Thu Jun 8 15:35:06 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: SolarSystem.cpp - SolarSystem.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;SolarSystem.cpp&nbsp;</th><th> </th><th>&nbsp;SolarSystem.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 40</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 40</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTextureMgr.hpp"</td><td> </td><td class="right">#include "StelTextureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyCultureMgr.hpp"</td><td> </td><td class="right">#include "StelSkyCultureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelIniParser.hpp"</td><td> </td><td class="right">#include "StelIniParser.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "MinorPlanet.hpp"</td><td> </td><td class="right">#include "MinorPlanet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Comet.hpp"</td><td> </td><td class="right">#include "Comet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelMainView.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyDrawer.hpp"</td><td> </td><td class="right">#include "StelSkyDrawer.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "TrailGroup.hpp"</td><td> </td><td class="right">#include "TrailGroup.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "RefractionExtinction.hpp"</td><td> </td><td class="right">#include "RefractionExtinction.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "AstroCalcDialog.hpp"</td><td> </td><td class="right">#include "AstroCalcDialog.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;functional&gt;</td><td> </td><td class="right">#include &lt;functional&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 66</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 67</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QStringList&gt;</td><td> </td><td class="right">#include &lt;QStringList&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMap&gt;</td><td> </td><td class="right">#include &lt;QMap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMultiMap&gt;</td><td> </td><td class="right">#include &lt;QMultiMap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMapIterator&gt;</td><td> </td><td class="right">#include &lt;QMapIterator&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDir&gt;</td><td> </td><td class="right">#include &lt;QDir&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SolarSystem::SolarSystem()</td><td> </td><td class="right">SolarSystem::SolarSystem()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       : shadowPlanetCount(0)</td><td> </td><td class="right">       : shadowPlanetCount(0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagMoonScale(false)</td><td> </td><td class="right">       , flagMoonScale(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       , <span class="delete">moonScale(1.)</span></td><td> </td><td class="rblock">       , <span class="insert">moonScale(1.0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , flagMinorBodyScale(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , minorBodyScale(1.0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , labelsAmount(false)</td><td> </td><td class="right">       , labelsAmount(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagOrbits(false)</td><td> </td><td class="right">       , flagOrbits(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagLightTravelTime(true)</td><td> </td><td class="right">       , flagLightTravelTime(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">, flagUseObjModels(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , flagShowObjSelfShadows(true)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagShow(false)</td><td> </td><td class="right">       , flagShow(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagPointer(false)</td><td> </td><td class="right">       , flagPointer(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagNativePlanetNames(false)</td><td> </td><td class="right">       , flagNativePlanetNames(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagTranslatedNames(false)</td><td> </td><td class="right">       , flagTranslatedNames(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagIsolatedTrails(true)</td><td> </td><td class="right">       , flagIsolatedTrails(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagIsolatedOrbits(true)</td><td> </td><td class="right">       , flagIsolatedOrbits(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , ephemerisMarkersDisplayed(true)</td><td> </td><td class="right">       , ephemerisMarkersDisplayed(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , ephemerisDatesDisplayed(false)</td><td> </td><td class="right">       , ephemerisDatesDisplayed(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       , <span class="delete">allTrails(NULL)</span></td><td> </td><td class="rblock">       , <span class="insert">ephemerisMagnitudesDisplayed(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , ephemerisHorizontalCoordinates(false)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , allTrails(Q_NULLPTR)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , conf(StelApp::getInstance().getSettings())</td><td> </td><td class="right">       , conf(StelApp::getInstance().getSettings())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       planetNameFont.setPixelSize(StelApp::getInstance().getBaseFontSize()
);</td><td> </td><td class="right">       planetNameFont.setPixelSize(StelApp::getInstance().getBaseFontSize()
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("SolarSystem");</td><td> </td><td class="right">       setObjectName("SolarSystem");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui());</td><td> </td><td class="right">       gui = dynamic_cast&lt;StelGui*&gt;(StelApp::getInstance().getGui());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFontSize(float newFontSize)</td><td> </td><td class="right">void SolarSystem::setFontSize(float newFontSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       planetNameFont.setPixelSize(newFontSize);</td><td> </td><td class="right">       planetNameFont.setPixelSize(newFontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SolarSystem::~SolarSystem()</td><td> </td><td class="right">SolarSystem::~SolarSystem()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // release selected:</td><td> </td><td class="right">       // release selected:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selected.clear();</td><td> </td><td class="right">       selected.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (Orbit* orb, orbits)</td><td> </td><td class="right">       foreach (Orbit* orb, orbits)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete orb;</td><td> </td><td class="right">               delete orb;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               orb = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">               orb = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sun.clear();</td><td> </td><td class="right">       sun.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       moon.clear();</td><td> </td><td class="right">       moon.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       earth.clear();</td><td> </td><td class="right">       earth.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::hintCircleTex.clear();</td><td> </td><td class="right">       Planet::hintCircleTex.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::texEarthShadow.clear();</td><td> </td><td class="right">       Planet::texEarthShadow.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texCircle.clear();</td><td> </td><td class="right">       texCircle.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texPointer.clear();</td><td> </td><td class="right">       texPointer.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete allTrails;</td><td> </td><td class="right">       delete allTrails;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       allTrails = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       allTrails = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get rid of circular reference between the shared pointers which p
revent proper destruction of the Planet objects.</td><td> </td><td class="right">       // Get rid of circular reference between the shared pointers which p
revent proper destruction of the Planet objects.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (PlanetP p, systemPlanets)</td><td> </td><td class="right">       foreach (PlanetP p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               p-&gt;satellites.clear();</td><td> </td><td class="right">               p-&gt;satellites.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //delete comet textures created in loadPlanets</td><td> </td><td class="right">       //delete comet textures created in loadPlanets</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Comet::comaTexture.clear();</td><td> </td><td class="right">       Comet::comaTexture.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Comet::tailTexture.clear();</td><td> </td><td class="right">       Comet::tailTexture.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 150</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 157</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::init();</td><td> </td><td class="right">       Planet::init();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       loadPlanets();  // Load planets data</td><td> </td><td class="right">       loadPlanets();  // Load planets data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute position and matrix of sun and all the satellites (ie pla
nets)</td><td> </td><td class="right">       // Compute position and matrix of sun and all the satellites (ie pla
nets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // for the first initialization Q_ASSERT that center is sun center (
only impacts on light speed correction)</td><td> </td><td class="right">       // for the first initialization Q_ASSERT that center is sun center (
only impacts on light speed correction)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       computePositions(StelApp::getInstance().getCore()-&gt;getJDE());</td><td> </td><td class="right">       computePositions(StelApp::getInstance().getCore()-&gt;getJDE());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setSelected("");        // Fix a bug on macosX! Thanks Fumio!</td><td> </td><td class="right">       setSelected("");        // Fix a bug on macosX! Thanks Fumio!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagMoonScale(conf-&gt;value("viewing/flag_moon_scaled", conf-&gt;value
("viewing/flag_init_moon_scaled", "false").toBool()).toBool());  // name ch
ange</td><td> </td><td class="right">       setFlagMoonScale(conf-&gt;value("viewing/flag_moon_scaled", conf-&gt;value
("viewing/flag_init_moon_scaled", "false").toBool()).toBool());  // name ch
ange</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">setMinorBodyScale(conf-&gt;value("viewing/minorbodies_scale", 10.0).toF</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">loat());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagMinorBodyScale(conf-&gt;value("viewing/flag_minorbodies_scaled",</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> false).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMoonScale(conf-&gt;value("viewing/moon_scale", 4.0).toFloat());</td><td> </td><td class="right">       setMoonScale(conf-&gt;value("viewing/moon_scale", 4.0).toFloat());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPlanets(conf-&gt;value("astro/flag_planets").toBool());</td><td> </td><td class="right">       setFlagPlanets(conf-&gt;value("astro/flag_planets").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(conf-&gt;value("astro/flag_planets_hints").toBool());</td><td> </td><td class="right">       setFlagHints(conf-&gt;value("astro/flag_planets_hints").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLabels(conf-&gt;value("astro/flag_planets_labels", true).toBool(
));</td><td> </td><td class="right">       setFlagLabels(conf-&gt;value("astro/flag_planets_labels", true).toBool(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLabelsAmount(conf-&gt;value("astro/labels_amount", 3.).toFloat());</td><td> </td><td class="right">       setLabelsAmount(conf-&gt;value("astro/labels_amount", 3.).toFloat());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(conf-&gt;value("astro/flag_planets_orbits").toBool());</td><td> </td><td class="right">       setFlagOrbits(conf-&gt;value("astro/flag_planets_orbits").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLightTravelTime(conf-&gt;value("astro/flag_light_travel_time", t
rue).toBool());</td><td> </td><td class="right">       setFlagLightTravelTime(conf-&gt;value("astro/flag_light_travel_time", t
rue).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">setFlagUseObjModels(conf-&gt;value("astro/flag_use_obj_models", false).</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagShowObjSelfShadows(conf-&gt;value("astro/flag_show_obj_self_shad</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ows", true).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPointer(conf-&gt;value("astro/flag_planets_pointers", true).toBo
ol());</td><td> </td><td class="right">       setFlagPointer(conf-&gt;value("astro/flag_planets_pointers", true).toBo
ol());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set the algorithm from Astronomical Almanac for computation of ap
parent magnitudes for</td><td> </td><td class="right">       // Set the algorithm from Astronomical Almanac for computation of ap
parent magnitudes for</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // planets in case  observer on the Earth by default</td><td> </td><td class="right">       // planets in case  observer on the Earth by default</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       setApparentMagnitudeAlgorithmOnEarth(conf-&gt;value("astro/apparent_mag
nitude_algorithm", "<span class="delete">Harris</span>").toString());</td><td> </td><td class="rblock">       setApparentMagnitudeAlgorithmOnEarth(conf-&gt;value("astro/apparent_mag
nitude_algorithm", "<span class="insert">ExplSup2013</span>").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagNativePlanetNames(conf-&gt;value("viewing/flag_planets_native_na
mes", true).toBool());</td><td> </td><td class="right">       setFlagNativePlanetNames(conf-&gt;value("viewing/flag_planets_native_na
mes", true).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Is enabled the showing of isolated trails for selected objects on
ly?</td><td> </td><td class="right">       // Is enabled the showing of isolated trails for selected objects on
ly?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagIsolatedTrails(conf-&gt;value("viewing/flag_isolated_trails", tr
ue).toBool());</td><td> </td><td class="right">       setFlagIsolatedTrails(conf-&gt;value("viewing/flag_isolated_trails", tr
ue).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagIsolatedOrbits(conf-&gt;value("viewing/flag_isolated_orbits", tr
ue).toBool());</td><td> </td><td class="right">       setFlagIsolatedOrbits(conf-&gt;value("viewing/flag_isolated_orbits", tr
ue).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPermanentOrbits(conf-&gt;value("astro/flag_permanent_orbits", fa
lse).toBool());</td><td> </td><td class="right">       setFlagPermanentOrbits(conf-&gt;value("astro/flag_permanent_orbits", fa
lse).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setOrbitColorStyle(conf-&gt;value("astro/planets_orbits_color_style", "
one_color").toString());</td><td> </td><td class="right">       setOrbitColorStyle(conf-&gt;value("astro/planets_orbits_color_style", "
one_color").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">setFlagEphemerisMarkers(conf-&gt;value("astro/flag_ephemeris_markers",</span> </td><td> </td><td class="rblock">       <span class="insert">setFlagEphemerisMarkers(conf-&gt;value("astrocalc/flag_ephemeris_marker</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">true).toBool());</td><td> </td><td class="rblock"><span class="insert">s",</span> true).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">setFlagEphemerisDates(conf-&gt;value("astro/flag_ephemeris_dates", fals</span></td><td> </td><td class="rblock">       <span class="insert">setFlagEphemerisDates(conf-&gt;value("astrocalc/flag_ephemeris_dates", </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e).toBool());</span></td><td> </td><td class="rblock"><span class="insert">false).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagEphemerisMagnitudes(conf-&gt;value("astrocalc/flag_ephemeris_mag</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">nitudes", false).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagEphemerisHorizontalCoordinates(conf-&gt;value("astrocalc/flag_ep</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">hemeris_horizontal", false).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Settings for calculation of position of Great Red Spot on Jupiter</td><td> </td><td class="right">       // Settings for calculation of position of Great Red Spot on Jupiter</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagCustomGrsSettings(conf-&gt;value("astro/flag_grs_custom", false)
.toBool());</td><td> </td><td class="right">       setFlagCustomGrsSettings(conf-&gt;value("astro/flag_grs_custom", false)
.toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCustomGrsLongitude(conf-&gt;value("astro/grs_longitude", 216).toInt(
));</td><td> </td><td class="right">       setCustomGrsLongitude(conf-&gt;value("astro/grs_longitude", 216).toInt(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCustomGrsDrift(conf-&gt;value("astro/grs_drift", 15.).toDouble());</td><td> </td><td class="right">       setCustomGrsDrift(conf-&gt;value("astro/grs_drift", 15.).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCustomGrsJD(conf-&gt;value("astro/grs_jd", 2456901.5).toDouble());</td><td> </td><td class="right">       setCustomGrsJD(conf-&gt;value("astro/grs_jd", 2456901.5).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load colors from config file</td><td> </td><td class="right">       // Load colors from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString defaultColor = conf-&gt;value("color/default_color").toString()
;</td><td> </td><td class="right">       QString defaultColor = conf-&gt;value("color/default_color").toString()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLabelsColor(StelUtils::strToVec3f(conf-&gt;value("color/planet_names
_color", defaultColor).toString()));</td><td> </td><td class="right">       setLabelsColor(StelUtils::strToVec3f(conf-&gt;value("color/planet_names
_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 218</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 231</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(objectManager, SIGNAL(selectedObjectChanged(StelModule::Stel
ModuleSelectAction)),</td><td> </td><td class="right">       connect(objectManager, SIGNAL(selectedObjectChanged(StelModule::Stel
ModuleSelectAction)),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               this, SLOT(selectedObjectChange(StelModule::StelModuleSelect
Action)));</td><td> </td><td class="right">               this, SLOT(selectedObjectChange(StelModule::StelModuleSelect
Action)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texPointer = StelApp::getInstance().getTextureManager().createTextur
e(StelFileMgr::getInstallationDir()+"/textures/pointeur4.png");</td><td> </td><td class="right">       texPointer = StelApp::getInstance().getTextureManager().createTextur
e(StelFileMgr::getInstallationDir()+"/textures/pointeur4.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texCircle = StelApp::getInstance().getTextureManager().createTexture
(StelFileMgr::getInstallationDir()+"/textures/neb.png");    // Load circle 
texture</td><td> </td><td class="right">       texCircle = StelApp::getInstance().getTextureManager().createTexture
(StelFileMgr::getInstallationDir()+"/textures/neb.png");    // Load circle 
texture</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::hintCircleTex = StelApp::getInstance().getTextureManager().c
reateTexture(StelFileMgr::getInstallationDir()+"/textures/planet-indicator.
png");</td><td> </td><td class="right">       Planet::hintCircleTex = StelApp::getInstance().getTextureManager().c
reateTexture(StelFileMgr::getInstallationDir()+"/textures/planet-indicator.
png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp *app = &amp;StelApp::getInstance();</td><td> </td><td class="right">       StelApp *app = &amp;StelApp::getInstance();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(app, SIGNAL(languageChanged()), this, SLOT(updateI18n()));</td><td> </td><td class="right">       connect(app, SIGNAL(languageChanged()), this, SLOT(updateI18n()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(&amp;app-&gt;getSkyCultureMgr(), SIGNAL(currentSkyCultureChanged(QS
tring)), this, SLOT(updateSkyCulture(QString)));</td><td> </td><td class="right">       connect(&amp;app-&gt;getSkyCultureMgr(), SIGNAL(currentSkyCultureChanged(QS
tring)), this, SLOT(updateSkyCulture(QString)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       connect(&amp;StelMainView::getInstance(), SIGNAL(reloadShadersRequested(
)), this, SLOT(reloadShaders()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString displayGroup = N_("Display Options");</td><td> </td><td class="right">       QString displayGroup = N_("Display Options");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Planets", displayGroup, N_("Planets"), "planet
sDisplayed", "P");</td><td> </td><td class="right">       addAction("actionShow_Planets", displayGroup, N_("Planets"), "planet
sDisplayed", "P");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Planets_Labels", displayGroup, N_("Planet labe
ls"), "labelsDisplayed", "Alt+P");</td><td> </td><td class="right">       addAction("actionShow_Planets_Labels", displayGroup, N_("Planet labe
ls"), "labelsDisplayed", "Alt+P");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Planets_Orbits", displayGroup, N_("Planet orbi
ts"), "flagOrbits", "O");</td><td> </td><td class="right">       addAction("actionShow_Planets_Orbits", displayGroup, N_("Planet orbi
ts"), "flagOrbits", "O");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Planets_Trails", displayGroup, N_("Planet trai
ls"), "trailsDisplayed", "Shift+T");</td><td> </td><td class="right">       addAction("actionShow_Planets_Trails", displayGroup, N_("Planet trai
ls"), "trailsDisplayed", "Shift+T");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //there is a small discrepancy in the GUI: "Show planet markers" act
ually means show planet hints</td><td> </td><td class="right">       //there is a small discrepancy in the GUI: "Show planet markers" act
ually means show planet hints</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Planets_Hints", displayGroup, N_("Planet marke
rs"), "flagHints", "Ctrl+P");</td><td> </td><td class="right">       addAction("actionShow_Planets_Hints", displayGroup, N_("Planet marke
rs"), "flagHints", "Ctrl+P");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Planets_Pointers", displayGroup, N_("Planet se
lection marker"), "flagPointer", "Ctrl+Shift+P");</td><td> </td><td class="right">       addAction("actionShow_Planets_Pointers", displayGroup, N_("Planet se
lection marker"), "flagPointer", "Ctrl+Shift+P");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addAction("actionShow_Skyculture_NativePlanetNames", displayGroup, N
_("Native planet names (from starlore)"), "flagNativePlanetNames", "Ctrl+Sh
ift+N");</td><td> </td><td class="right">       addAction("actionShow_Skyculture_NativePlanetNames", displayGroup, N
_("Native planet names (from starlore)"), "flagNativePlanetNames", "Ctrl+Sh
ift+N");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::deinit()</td><td> </td><td class="right">void SolarSystem::deinit()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if(Planet::planetShaderProgram)</span></td><td> </td><td class="rblock">       Planet::deinitShader();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               Planet::deinitShader();</td><td> </td><td class="rblock">       <span class="insert">Planet::deinitFBO();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::recreateTrails()</td><td> </td><td class="right">void SolarSystem::recreateTrails()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Create a trail group containing all the planets orbiting the sun 
(not including satellites)</td><td> </td><td class="right">       // Create a trail group containing all the planets orbiting the sun 
(not including satellites)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (allTrails!=<span class="delete">NULL</span>)</td><td> </td><td class="rblock">       if (allTrails!=<span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete allTrails;</td><td> </td><td class="right">               delete allTrails;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       allTrails = new TrailGroup(365.f);</td><td> </td><td class="right">       allTrails = new TrailGroup(365.f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       PlanetP p = getSelected();</td><td> </td><td class="right">       PlanetP p = getSelected();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (p!=<span class="delete">NULL</span> &amp;&amp; getFlagIsolatedTrails())</td><td> </td><td class="rblock">       if (p!=<span class="insert">Q_NULLPTR</span> &amp;&amp; getFlagIsolatedTrails())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               allTrails-&gt;addObject((QSharedPointer&lt;StelObject&gt;)p, &amp;trailCo
lor);</td><td> </td><td class="right">               allTrails-&gt;addObject((QSharedPointer&lt;StelObject&gt;)p, &amp;trailCo
lor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach (const PlanetP&amp; p, getSun()-&gt;satellites)</td><td> </td><td class="right">               foreach (const PlanetP&amp; p, getSun()-&gt;satellites)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       allTrails-&gt;addObject((QSharedPointer&lt;StelObject&gt;)p, 
&amp;trailColor);</td><td> </td><td class="right">                       allTrails-&gt;addObject((QSharedPointer&lt;StelObject&gt;)p, 
&amp;trailColor);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 278</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 292</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               p-&gt;setNativeName("");</td><td> </td><td class="right">                               p-&gt;setNativeName("");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               updateI18n();</td><td> </td><td class="right">               updateI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Open file</td><td> </td><td class="right">       // Open file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile planetNamesFile(namesFile);</td><td> </td><td class="right">       QFile planetNamesFile(namesFile);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!planetNamesFile.open(QIODevice::ReadOnly | QIODevice::Text))</td><td> </td><td class="right">       if (!planetNamesFile.open(QIODevice::ReadOnly | QIODevice::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qDebug() &lt;&lt; "<span class="delete">Cannot open file" &lt;&lt; QDir::toNativeSeparators(n
</span>amesFile);</td><td> </td><td class="rblock">               qDebug() &lt;&lt; "<span class="insert"> Cannot open file" &lt;&lt; QDir::toNativeSeparators(
n</span>amesFile);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Now parse the file</td><td> </td><td class="right">       // Now parse the file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // lines to ignore which start with a # or are empty</td><td> </td><td class="right">       // lines to ignore which start with a # or are empty</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QRegExp commentRx("^(\\s*#.*|\\s*)$");</td><td> </td><td class="right">       QRegExp commentRx("^(\\s*#.*|\\s*)$");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // lines which look like records - we use the RE to extract the fiel
ds</td><td> </td><td class="right">       // lines which look like records - we use the RE to extract the fiel
ds</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // which will be available in recRx.capturedTexts()</td><td> </td><td class="right">       // which will be available in recRx.capturedTexts()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QRegExp recRx("^\\s*(\\w+)\\s+\"(.+)\"\\s+_[(]\"(.+)\"[)]\\n");</td><td> </td><td class="right">       QRegExp recRx("^\\s*(\\w+)\\s+\"(.+)\"\\s+_[(]\"(.+)\"[)]\\n");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 331</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 345</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">       foreach (const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (p-&gt;getPlanetType()==Planet::isPlanet || p-&gt;getPlanetType
()==Planet::isMoon || p-&gt;getPlanetType()==Planet::isStar)</td><td> </td><td class="right">               if (p-&gt;getPlanetType()==Planet::isPlanet || p-&gt;getPlanetType
()==Planet::isMoon || p-&gt;getPlanetType()==Planet::isStar)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;setNativeName(planetNativeNamesMap[p-&gt;getEnglishN
ame()]);</td><td> </td><td class="right">                       p-&gt;setNativeName(planetNativeNamesMap[p-&gt;getEnglishN
ame()]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       updateI18n();</td><td> </td><td class="right">       updateI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void SolarSystem::reloadShaders()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Planet::deinitShader();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Planet::initShader();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::drawPointer(const StelCore* core)</td><td> </td><td class="right">void SolarSystem::drawPointer(const StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Planet");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!newSelected.empty())</td><td> </td><td class="right">       if (!newSelected.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelObjectP obj = newSelected[0];</td><td> </td><td class="right">               const StelObjectP obj = newSelected[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d pos=obj-&gt;getJ2000EquatorialPos(core);</td><td> </td><td class="right">               Vec3d pos=obj-&gt;getJ2000EquatorialPos(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 381</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 401</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void ellipticalOrbitPosFunc(double jd,double xyz[3], void* userDataPtr)</td><td> </td><td class="right">void ellipticalOrbitPosFunc(double jd,double xyz[3], void* userDataPtr)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static_cast&lt;EllipticalOrbit*&gt;(userDataPtr)-&gt;positionAtTimevInVSOP87C
oordinates(jd, xyz);</td><td> </td><td class="right">       static_cast&lt;EllipticalOrbit*&gt;(userDataPtr)-&gt;positionAtTimevInVSOP87C
oordinates(jd, xyz);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void cometOrbitPosFunc(double jd,double xyz[3], void* userDataPtr)</td><td> </td><td class="right">void cometOrbitPosFunc(double jd,double xyz[3], void* userDataPtr)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static_cast&lt;CometOrbit*&gt;(userDataPtr)-&gt;positionAtTimevInVSOP87Coordi
nates(jd, xyz);</td><td> </td><td class="right">       static_cast&lt;CometOrbit*&gt;(userDataPtr)-&gt;positionAtTimevInVSOP87Coordi
nates(jd, xyz);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">// Init and load the solar system data</td><td> </td><td class="rblock">// Init and load the solar system data<span class="insert"> (2 files)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::loadPlanets()</td><td> </td><td class="right">void SolarSystem::loadPlanets()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       qDebug() &lt;&lt; "Loading Solar System data ...";</td><td> </td><td class="rblock">       <span class="insert">minorBodies.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QStringList solarSystemFiles = StelFileMgr::findFileInAllPaths("data</td><td> </td><td class="rblock">       qDebug() &lt;&lt; "Loading Solar System data <span class="insert">(1: planets and moons)</span> ...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">/ssystem.ini");</span></td><td> </td><td class="rblock">       <span class="insert">QString solarSystemFile = StelFileMgr::findFile("data/ssystem_major.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ini");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (solarSystemFile.isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qWarning() &lt;&lt; "ERROR while loading ssystem_major.ini (unable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> to find data/ssystem_major.ini): " &lt;&lt; endl;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (!loadPlanets(solarSystemFile))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qWarning() &lt;&lt; "ERROR while loading ssystem_major.ini: " &lt;&lt; e</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ndl;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qDebug() &lt;&lt; "Loading Solar System data (2: minor bodies)...";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       QStringList solarSystemFiles = StelFileMgr::findFileInAllPaths("data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">/ssystem_minor.ini");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (solarSystemFiles.isEmpty())</td><td> </td><td class="right">       if (solarSystemFiles.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               qWarning() &lt;&lt; "ERROR while loading ssys<span class="delete">yem.ini (unable to fi
nd data/ssystem</span>.ini): " &lt;&lt; endl;</td><td> </td><td class="rblock">               qWarning() &lt;&lt; "ERROR while loading ssys<span class="insert">tem_minor.ini (unable
 to find data/ssystem_minor</span>.ini): " &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const QString&amp; solarSystemFile, solarSystemFiles)</td><td> </td><td class="right">       foreach (const QString&amp; solarSystemFile, solarSystemFiles)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (loadPlanets(solarSystemFile))</td><td> </td><td class="right">               if (loadPlanets(solarSystemFile))</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       qDebug() &lt;&lt; "File ssystem_minor.ini is loaded succes</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">sfully...";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       sun.clear();</td><td> </td><td class="rblock"><span class="insert">//</span>                     sun.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       moon.clear();</td><td> </td><td class="rblock"><span class="insert">//</span>                     moon.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       earth.clear();</td><td> </td><td class="rblock"><span class="insert">//</span>                     earth.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">//qCritical() &lt;&lt; "We should not be here!";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       qDebug() &lt;&lt; "Removing minor bodies";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       foreach (PlanetP p, systemPlanets)</td><td> </td><td class="right">                       foreach (PlanetP p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               p-&gt;satellites.clear();</td><td> </td><td class="rblock">                               <span class="insert">// We can only delete minor objects now!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               p.clear();</td><td> </td><td class="rblock"><span class="insert">                               if (p-&gt;pType &gt;= Planet::isAsteroid)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       p-&gt;satellites.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       p.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               <span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       systemPlanets.clear();</td><td> </td><td class="right">                       systemPlanets.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Memory leak? What's the proper way of cleaning sha
red pointers?</td><td> </td><td class="right">                       //Memory leak? What's the proper way of cleaning sha
red pointers?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">// TODO: 0.16pre what about the orbits list?</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //If the file is in the user data directory, rename 
it:</td><td> </td><td class="right">                       //If the file is in the user data directory, rename 
it:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (solarSystemFile.contains(StelFileMgr::getUserDir
()))</td><td> </td><td class="right">                       if (solarSystemFile.contains(StelFileMgr::getUserDir
()))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString newName = QString("%1/data/ssystem-%
2.ini").arg(StelFileMgr::getUserDir()).arg(QDateTime::currentDateTime().toS
tring("yyyyMMddThhmmss"));</td><td> </td><td class="right">                               QString newName = QString("%1/data/ssystem-%
2.ini").arg(StelFileMgr::getUserDir()).arg(QDateTime::currentDateTime().toS
tring("yyyyMMddThhmmss"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (QFile::rename(solarSystemFile, newName))</td><td> </td><td class="right">                               if (QFile::rename(solarSystemFile, newName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "Invalid Solar System 
file" &lt;&lt; QDir::toNativeSeparators(solarSystemFile) &lt;&lt; "has been renamed to"
 &lt;&lt; QDir::toNativeSeparators(newName);</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "Invalid Solar System 
file" &lt;&lt; QDir::toNativeSeparators(solarSystemFile) &lt;&lt; "has been renamed to"
 &lt;&lt; QDir::toNativeSeparators(newName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "Invalid Solar System 
file" &lt;&lt; QDir::toNativeSeparators(solarSystemFile) &lt;&lt; "cannot be removed!";</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "Invalid Solar System 
file" &lt;&lt; QDir::toNativeSeparators(solarSystemFile) &lt;&lt; "cannot be removed!";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "Please either delete 
it, rename it or move it elsewhere.";</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "Please either delete 
it, rename it or move it elsewhere.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 434</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 480</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       shadowPlanetCount = 0;</td><td> </td><td class="right">       shadowPlanetCount = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const PlanetP&amp; planet, systemPlanets)</td><td> </td><td class="right">       foreach (const PlanetP&amp; planet, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(planet-&gt;parent != sun || !planet-&gt;satellites.isEmpty())</td><td> </td><td class="right">               if(planet-&gt;parent != sun || !planet-&gt;satellites.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       shadowPlanetCount++;</td><td> </td><td class="right">                       shadowPlanetCount++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::loadPlanets(const QString&amp; filePath)</td><td> </td><td class="right">bool SolarSystem::loadPlanets(const QString&amp; filePath)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">qDebug() &lt;&lt; "Loading from :"  &lt;&lt; filePath;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       int readOk = 0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings pd(filePath, StelIniFormat);</td><td> </td><td class="right">       QSettings pd(filePath, StelIniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pd.status() != QSettings::NoError)</td><td> </td><td class="right">       if (pd.status() != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "ERROR while parsing" &lt;&lt; QDir::toNativeSeparat
ors(filePath);</td><td> </td><td class="right">               qWarning() &lt;&lt; "ERROR while parsing" &lt;&lt; QDir::toNativeSeparat
ors(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // QSettings does not allow us to say that the sections of the file</td><td> </td><td class="right">       // QSettings does not allow us to say that the sections of the file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // will be listed in the same order  as in the file like the old</td><td> </td><td class="right">       // will be listed in the same order  as in the file like the old</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // InitParser used to so we can no longer assume that.</td><td> </td><td class="right">       // InitParser used to so we can no longer assume that.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //</td><td> </td><td class="right">       //</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // This means we must first decide what order to read the sections</td><td> </td><td class="right">       // This means we must first decide what order to read the sections</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // of the file in (each section contains one planet<span class="delete">) to avoid settin
</span>g</td><td> </td><td class="rblock">       // of the file in (each section contains one planet<span class="insert">/moon/asteroid/co
met/...) to avoid settin</span>g</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // the parent Planet* to one which has not yet been created.</td><td> </td><td class="right">       // the parent Planet* to one which has not yet been created.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //</td><td> </td><td class="right">       //</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 1: Make a map of body names back to the section names</td><td> </td><td class="right">       // Stage 1: Make a map of body names back to the section names</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // which they come from. Also make a map of body name to parent body</td><td> </td><td class="right">       // which they come from. Also make a map of body name to parent body</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // name. These two maps can be made in a single pass through the</td><td> </td><td class="right">       // name. These two maps can be made in a single pass through the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // sections of the file.</td><td> </td><td class="right">       // sections of the file.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //</td><td> </td><td class="right">       //</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 2: Make an ordered list of section names such that each</td><td> </td><td class="right">       // Stage 2: Make an ordered list of section names such that each</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // item is only ever dependent on items which appear earlier in the</td><td> </td><td class="right">       // item is only ever dependent on items which appear earlier in the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // list.</td><td> </td><td class="right">       // list.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // 2a: Make a QMultiMap relating the number of levels of dependency</td><td> </td><td class="right">       // 2a: Make a QMultiMap relating the number of levels of dependency</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     to the body name, i.e.</td><td> </td><td class="right">       //     to the body name, i.e.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     0 -&gt; Sun</td><td> </td><td class="right">       //     0 -&gt; Sun</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     1 -&gt; Mercury</td><td> </td><td class="right">       //     1 -&gt; Mercury</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     1 -&gt; Venus</td><td> </td><td class="right">       //     1 -&gt; Venus</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     1 -&gt; Earth</td><td> </td><td class="right">       //     1 -&gt; Earth</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     2 -&gt; Moon</td><td> </td><td class="right">       //     2 -&gt; Moon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //     etc.</td><td> </td><td class="right">       //     etc.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // 2b: Populate an ordered list of section names by iterating over</td><td> </td><td class="right">       // 2b: Populate an ordered list of section names by iterating over</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //     the QMultiMap.  This type of <span class="delete">contains</span> is always sorted on <span class="delete">the</span></td><td> </td><td class="rblock">       //     the QMultiMap.  This type of <span class="insert">container</span> is always sorted on <span class="insert">th</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //     <span class="delete">key,</span> so it's easy.</td><td> </td><td class="rblock"><span class="insert">e</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       //     i.e. <span class="delete">[sol,</span> earth, moon] is fine, but not <span class="delete">[sol,</span> moon, earth]</td><td> </td><td class="rblock">       //     <span class="insert">key in ascending order,</span> so it's easy.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       //     i.e. <span class="insert">[sun,</span> earth, moon] is fine, but not <span class="insert">[sun,</span> moon, earth]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //</td><td> </td><td class="right">       //</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 3: iterate over the ordered sections decided in stage 2,</td><td> </td><td class="right">       // Stage 3: iterate over the ordered sections decided in stage 2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // creating the planet objects from the QSettings data.</td><td> </td><td class="right">       // creating the planet objects from the QSettings data.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 1 (as described above).</td><td> </td><td class="right">       // Stage 1 (as described above).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QMap&lt;QString, QString&gt; secNameMap;</td><td> </td><td class="right">       QMap&lt;QString, QString&gt; secNameMap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QMap&lt;QString, QString&gt; parentMap;</td><td> </td><td class="right">       QMap&lt;QString, QString&gt; parentMap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList sections = pd.childGroups();</td><td> </td><td class="right">       QStringList sections = pd.childGroups();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // qDebug() &lt;&lt; "Stage 1: load ini file with" &lt;&lt; sections.size() &lt;&lt; "
entries: "&lt;&lt; sections;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i=0; i&lt;sections.size(); ++i)</td><td> </td><td class="right">       for (int i=0; i&lt;sections.size(); ++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString secname = sections.at(i);</td><td> </td><td class="right">               const QString secname = sections.at(i);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString englishName = pd.value(secname+"/name").toStri
ng();</td><td> </td><td class="right">               const QString englishName = pd.value(secname+"/name").toStri
ng();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const QString strParent = pd.value(secname+"/parent"<span class="delete">).toStri
</span>ng();</td><td> </td><td class="rblock">               const QString strParent = pd.value(secname+"/parent"<span class="insert">, "Sun")
.toStri</span>ng();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               secNameMap[englishName] = secname;</td><td> </td><td class="right">               secNameMap[englishName] = secname;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (strParent!="none" &amp;&amp; !strParent.isEmpty() &amp;&amp; !englishNam
e.isEmpty())</td><td> </td><td class="right">               if (strParent!="none" &amp;&amp; !strParent.isEmpty() &amp;&amp; !englishNam
e.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       parentMap[englishName] = strParent;</td><td> </td><td class="right">                       parentMap[englishName] = strParent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">// qDebug() &lt;&lt; "parentmap[" &lt;&lt; englishName &lt;&lt; "] = "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> &lt;&lt; strParent;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 2a (as described above).</td><td> </td><td class="right">       // Stage 2a (as described above).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QMultiMap&lt;int, QString&gt; depLevelMap;</td><td> </td><td class="right">       QMultiMap&lt;int, QString&gt; depLevelMap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i=0; i&lt;sections.size(); ++i)</td><td> </td><td class="right">       for (int i=0; i&lt;sections.size(); ++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString englishName = pd.value(sections.at(i)+"/name")
.toString();</td><td> </td><td class="right">               const QString englishName = pd.value(sections.at(i)+"/name")
.toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // follow dependencies, incrementing level when we have one</td><td> </td><td class="right">               // follow dependencies, incrementing level when we have one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // till we run out.</td><td> </td><td class="right">               // till we run out.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString p=englishName;</td><td> </td><td class="right">               QString p=englishName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int level = 0;</td><td> </td><td class="right">               int level = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               while(parentMap.contains(p) &amp;&amp; parentMap[p]!="none")</td><td> </td><td class="right">               while(parentMap.contains(p) &amp;&amp; parentMap[p]!="none")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       level++;</td><td> </td><td class="right">                       level++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p = parentMap[p];</td><td> </td><td class="right">                       p = parentMap[p];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               depLevelMap.insert(level, secNameMap[englishName]);</td><td> </td><td class="right">               depLevelMap.insert(level, secNameMap[englishName]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // qDebug() &lt;&lt; "2a: Level" &lt;&lt; level &lt;&lt; "secNameMap[" &lt;&lt; engl
ishName &lt;&lt; "]="&lt;&lt; secNameMap[englishName];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 2b (as described above).</td><td> </td><td class="right">       // Stage 2b (as described above).</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // qDebug() &lt;&lt; "Stage 2b:";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList orderedSections;</td><td> </td><td class="right">       QStringList orderedSections;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QMapIterator&lt;int, QString&gt; levelMapIt(depLevelMap);</td><td> </td><td class="right">       QMapIterator&lt;int, QString&gt; levelMapIt(depLevelMap);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while(levelMapIt.hasNext())</td><td> </td><td class="right">       while(levelMapIt.hasNext())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               levelMapIt.next();</td><td> </td><td class="right">               levelMapIt.next();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               orderedSections &lt;&lt; levelMapIt.value();</td><td> </td><td class="right">               orderedSections &lt;&lt; levelMapIt.value();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // qDebug() &lt;&lt; orderedSections;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 3 (as described above).</td><td> </td><td class="right">       // Stage 3 (as described above).</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">int</span> readOk=0;</td><td> </td><td class="rblock">       <span class="insert">//int</span> readOk=0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">int</span> totalPlanets=0;</td><td> </td><td class="rblock">       <span class="insert">//int</span> totalPlanets=0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// qDebug() &lt;&lt; "Adding " &lt;&lt; orderedSections.size() &lt;&lt; "objects...";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i = 0;i&lt;orderedSections.size();++i)</td><td> </td><td class="right">       for (int i = 0;i&lt;orderedSections.size();++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">totalPlanets++;</span></td><td> </td><td class="rblock">               <span class="insert">// qDebug() &lt;&lt; "Processing entry" &lt;&lt; orderedSections.at(i);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //totalPlanets++;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString secname = orderedSections.at(i);</td><td> </td><td class="right">               const QString secname = orderedSections.at(i);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString englishName = pd.value(secname+"/name").toStri
ng().simplified();</td><td> </td><td class="right">               const QString englishName = pd.value(secname+"/name").toStri
ng().simplified();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const QString strParent = pd.value(secname+"/parent"<span class="delete">).toStri
ng();</span></td><td> </td><td class="rblock">               const QString strParent = pd.value(secname+"/parent"<span class="insert">, "Sun")
.toString(); // Obvious default, keep file entries simple.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               PlanetP parent;</td><td> </td><td class="right">               PlanetP parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (strParent!="none")</td><td> </td><td class="right">               if (strParent!="none")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Look in the other planets the one named with strP
arent</td><td> </td><td class="right">                       // Look in the other planets the one named with strP
arent</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       foreach (const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">                       foreach (const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (p-&gt;getEnglishName()==strParent)</td><td> </td><td class="right">                               if (p-&gt;getEnglishName()==strParent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       parent = p;</td><td> </td><td class="right">                                       parent = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 545</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 604</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (parent.isNull())</td><td> </td><td class="right">                       if (parent.isNull())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "ERROR : can't find parent sol
ar system body for " &lt;&lt; englishName;</td><td> </td><td class="right">                               qWarning() &lt;&lt; "ERROR : can't find parent sol
ar system body for " &lt;&lt; englishName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //abort();</td><td> </td><td class="right">                               //abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString funcName = pd.value(secname+"/coord_func").toS
tring();</td><td> </td><td class="right">               const QString funcName = pd.value(secname+"/coord_func").toS
tring();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               posFuncType <span class="delete">posfunc=NULL;</span></td><td> </td><td class="rblock">               <span class="insert">// qDebug() &lt;&lt; "englishName:" &lt;&lt; englishName &lt;&lt; ", parent:" </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               void* <span class="delete">userDataPtr=NULL;</span></td><td> </td><td class="rblock"><span class="insert">&lt;&lt; strParent &lt;&lt;  ", coord_func:" &lt;&lt; funcName;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               OsculatingFunctType *osculatingFunc = <span class="delete">0;</span></td><td> </td><td class="rblock">               posFuncType <span class="insert">posfunc=Q_NULLPTR;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               void* <span class="insert">orbitPtr=Q_NULLPTR;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               OsculatingFunctType *osculatingFunc = <span class="insert">Q_NULLPTR;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bool closeOrbit = pd.value(secname+"/closeOrbit", true).toBo
ol();</td><td> </td><td class="right">               bool closeOrbit = pd.value(secname+"/closeOrbit", true).toBo
ol();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="ell_orbit")</td><td> </td><td class="right">               if (funcName=="ell_orbit")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       // GZ TODO: It seems ell_orbit is only used for plan
et moons. Just assert eccentricity&lt;1 and remove a few extra calculations?</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Read the orbital elements</td><td> </td><td class="right">                       // Read the orbital elements</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double epoch = pd.value(secname+"/orbit_Epoch"
,J2000).toDouble();</td><td> </td><td class="right">                       const double epoch = pd.value(secname+"/orbit_Epoch"
,J2000).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity").toDouble();</td><td> </td><td class="right">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity").toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td> </td><td class="right">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td> </td><td class="right">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double semi_major_axis;</td><td> </td><td class="right">                       double semi_major_axis;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (pericenterDistance &lt;= 0.0) {</td><td> </td><td class="right">                       if (pericenterDistance &lt;= 0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td> </td><td class="right">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (semi_major_axis &lt;= -1e100) {</td><td> </td><td class="right">                               if (semi_major_axis &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "ERROR: " &lt;&lt; englishName</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "ERROR: " &lt;&lt; englishName</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               <span class="delete">&lt;&lt; ": you must provide orbit
</span>_PericenterDistance or orbit_SemiMajorAxis";</td><td> </td><td class="rblock">                                               <span class="insert"> &lt;&lt; ": you must provide orbi
t</span>_PericenterDistance or orbit_SemiMajorAxis";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //abort();</td><td> </td><td class="right">                                       //abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       semi_major_axis /= AU;</td><td> </td><td class="right">                                       semi_major_axis /= AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td> </td><td class="right">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td> </td><td class="right">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               pericenterDistance /= AU;</td><td> </td><td class="right">                               pericenterDistance /= AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = (eccentricity == 1.0)</td><td> </td><td class="right">                               semi_major_axis = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 619</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 680</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mean_anomaly *= (M_PI/180.0);</td><td> </td><td class="right">                               mean_anomaly *= (M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mean_longitude = mean_anomaly + long_of_peri
center;</td><td> </td><td class="right">                               mean_longitude = mean_anomaly + long_of_peri
center;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // when the parent is the sun use ecliptic rather th
an sun equator:</td><td> </td><td class="right">                       // when the parent is the sun use ecliptic rather th
an sun equator:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parentRotObliquity = parent-&gt;getParent(
)</td><td> </td><td class="right">                       const double parentRotObliquity = parent-&gt;getParent(
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                           
              ? parent-&gt;getRotObliquity(2451545.0)</td><td> </td><td class="right">                                                                           
              ? parent-&gt;getRotObliquity(2451545.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                           
              : 0.0;</td><td> </td><td class="right">                                                                           
              : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parent_rot_asc_node = parent-&gt;getParent
()</td><td> </td><td class="right">                       const double parent_rot_asc_node = parent-&gt;getParent
()</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
              ? parent-&gt;getRotAscending<span class="delete">n</span>ode()</td><td> </td><td class="rblock">                                                                           
              ? parent-&gt;getRotAscending<span class="insert">N</span>ode()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                           
              : 0.0;</td><td> </td><td class="right">                                                                           
              : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double parent_rot_j2000_longitude = 0.0;</td><td> </td><td class="right">                       double parent_rot_j2000_longitude = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (parent-&gt;getParent()) {</td><td> </td><td class="right">                       if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double c_obl = cos(parentRotObliquity)
;</td><td> </td><td class="right">                               const double c_obl = cos(parentRotObliquity)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double s_obl = sin(parentRotObliquity)
;</td><td> </td><td class="right">                               const double s_obl = sin(parentRotObliquity)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double c_nod = cos(parent_rot_asc_node
);</td><td> </td><td class="right">                               const double c_nod = cos(parent_rot_asc_node
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double s_nod = sin(parent_rot_asc_node
);</td><td> </td><td class="right">                               const double s_nod = sin(parent_rot_asc_node
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitAxis0( c_nod,       s_nod, 
       0.0);</td><td> </td><td class="right">                               const Vec3d OrbitAxis0( c_nod,       s_nod, 
       0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c
_obl,s_obl);</td><td> </td><td class="right">                               const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c
_obl,s_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s
_obl,c_obl);</td><td> </td><td class="right">                               const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s
_obl,c_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 650</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 711</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  ascending
_node,</td><td> </td><td class="right">                                                                  ascending
_node,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  arg_of_pe
ricenter,</td><td> </td><td class="right">                                                                  arg_of_pe
ricenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  mean_anom
aly,</td><td> </td><td class="right">                                                                  mean_anom
aly,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  period,</td><td> </td><td class="right">                                                                  period,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  epoch,</td><td> </td><td class="right">                                                                  epoch,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  parentRot
Obliquity,</td><td> </td><td class="right">                                                                  parentRot
Obliquity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  parent_ro
t_asc_node,</td><td> </td><td class="right">                                                                  parent_ro
t_asc_node,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                  parent_ro
t_j2000_longitude);</td><td> </td><td class="right">                                                                  parent_ro
t_j2000_longitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       orbits.push_back(orb);</td><td> </td><td class="right">                       orbits.push_back(orb);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">userData</span>Ptr = orb;</td><td> </td><td class="rblock">                       <span class="insert">orbit</span>Ptr = orb;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;ellipticalOrbitPosFunc;</td><td> </td><td class="right">                       posfunc = &amp;ellipticalOrbitPosFunc;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else if (funcName=="comet_orbit")</td><td> </td><td class="right">               else if (funcName=="comet_orbit")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Read the orbital elements</td><td> </td><td class="right">                       // Read the orbital elements</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_PericenterDistance,orbit_SemiMajorAxis: giv
en in AU</td><td> </td><td class="right">                       // orbit_PericenterDistance,orbit_SemiMajorAxis: giv
en in AU</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_MeanMotion: given in degrees/day</td><td> </td><td class="right">                       // orbit_MeanMotion: given in degrees/day</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_Period: given in days</td><td> </td><td class="right">                       // orbit_Period: given in days</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_TimeAtPericenter,orbit_Epoch: JD</td><td> </td><td class="right">                       // orbit_TimeAtPericenter,orbit_Epoch: JD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_MeanAnomaly,orbit_Inclination,orbit_ArgOfPe
ricenter,orbit_AscendingNode: given in degrees</td><td> </td><td class="right">                       // orbit_MeanAnomaly,orbit_Inclination,orbit_ArgOfPe
ricenter,orbit_AscendingNode: given in degrees</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity",0.0).toDouble();</td><td> </td><td class="right">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity",0.0).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td> </td><td class="right">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td> </td><td class="right">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double semi_major_axis;</td><td> </td><td class="right">                       double semi_major_axis;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (pericenterDistance &lt;= 0.0) {</td><td> </td><td class="right">                       if (pericenterDistance &lt;= 0.0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td> </td><td class="right">                               semi_major_axis = pd.value(secname+"/orbit_S
emiMajorAxis",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (semi_major_axis &lt;= -1e100) {</td><td> </td><td class="right">                               if (semi_major_axis &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               <span class="delete">&lt;&lt; ": you must provide orbit
</span>_PericenterDistance or orbit_SemiMajorAxis";</td><td> </td><td class="rblock">                                               <span class="insert">   &lt;&lt; ": you must provide or
bit</span>_PericenterDistance or orbit_SemiMajorAxis";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //abort();</td><td> </td><td class="right">                                       //abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td> </td><td class="right">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td> </td><td class="right">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = (eccentricity == 1.0)</td><td> </td><td class="right">                               semi_major_axis = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               ? 0.0 // par
abolic orbits have no semi_major_axis</td><td> </td><td class="right">                                                               ? 0.0 // par
abolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               : pericenter
Distance / (1.0-eccentricity);</td><td> </td><td class="right">                                                               : pericenter
Distance / (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td> </td><td class="right">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (meanMotion &lt;= -1e100) {</td><td> </td><td class="right">                       if (meanMotion &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double period = pd.value(secname+"/orb
it_Period",-1e100).toDouble();</td><td> </td><td class="right">                               const double period = pd.value(secname+"/orb
it_Period",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (period &lt;= -1e100) {</td><td> </td><td class="right">                               if (period &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (parent-&gt;getParent()) {</td><td> </td><td class="right">                                       if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               qWarning() &lt;&lt; "ERROR: " &lt;&lt; e
nglishName</td><td> </td><td class="right">                                               qWarning() &lt;&lt; "ERROR: " &lt;&lt; e
nglishName</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                       &lt;&lt; ": when the <span class="delete">paren</span></td><td> </td><td class="rblock">                                                          &lt;&lt; ": when the <span class="insert">pa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">t</span> body is not the sun, you must provide "</td><td> </td><td class="rblock"><span class="insert">rent</span> body is not the sun, you must provide "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                       &lt;&lt; "either <span class="delete">orbit_Mea</span></td><td> </td><td class="rblock">                                                          &lt;&lt; "either <span class="insert">orbit_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">nMotion</span> or orbit_Period";</td><td> </td><td class="rblock"><span class="insert">MeanMotion</span> or orbit_Period";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       } else {</td><td> </td><td class="right">                                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               // in case of parent=sun: us
e Gaussian gravitational constant</td><td> </td><td class="right">                                               // in case of parent=sun: us
e Gaussian gravitational constant</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               // for calculating meanMotio
n:</td><td> </td><td class="right">                                               // for calculating meanMotio
n:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //meanMotion = (eccentricity
 &gt;= 0.9999 &amp;&amp; eccentricity &lt;= 1.0)</td><td> </td><td class="right">                                               //meanMotion = (eccentricity
 &gt;= 0.9999 &amp;&amp; eccentricity &lt;= 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //                      ? 0.
01720209895 * (1.5/pericenterDistance) * sqrt(0.5/pericenterDistance)</td><td> </td><td class="right">                                               //                      ? 0.
01720209895 * (1.5/pericenterDistance) * sqrt(0.5/pericenterDistance)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //                      : (s
emi_major_axis &gt; 0.0)</td><td> </td><td class="right">                                               //                      : (s
emi_major_axis &gt; 0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //                      ? 0.
01720209895 / (semi_major_axis*sqrt(semi_major_axis))</td><td> </td><td class="right">                                               //                      ? 0.
01720209895 / (semi_major_axis*sqrt(semi_major_axis))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //                      : 0.
01720209895 / (-semi_major_axis*sqrt(-semi_major_axis));</td><td> </td><td class="right">                                               //                      : 0.
01720209895 / (-semi_major_axis*sqrt(-semi_major_axis));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               meanMotion = (eccentricity =
= 1.0)</td><td> </td><td class="right">                                               meanMotion = (eccentricity =
= 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                       ? 0.
01720209895 * (1.5/pericenterDistance) * std::sqrt(0.5/pericenterDistance) 
 // GZ: This is Heafner's W / dt</td><td> </td><td class="right">                                                                       ? 0.
01720209895 * (1.5/pericenterDistance) * std::sqrt(0.5/pericenterDistance) 
 // GZ: This is Heafner's W / dt</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 713</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 774</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               meanMotion *= (M_PI/180.0);</td><td> </td><td class="right">                               meanMotion *= (M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double time_at_pericenter = pd.value(secname+"/orbit
_TimeAtPericenter",-1e100).toDouble();</td><td> </td><td class="right">                       double time_at_pericenter = pd.value(secname+"/orbit
_TimeAtPericenter",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (time_at_pericenter &lt;= -1e100) {</td><td> </td><td class="right">                       if (time_at_pericenter &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double epoch = pd.value(secname+"/orbi
t_Epoch",-1e100).toDouble();</td><td> </td><td class="right">                               const double epoch = pd.value(secname+"/orbi
t_Epoch",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               double mean_anomaly = pd.value(secname+"/orb
it_MeanAnomaly",-1e100).toDouble();</td><td> </td><td class="right">                               double mean_anomaly = pd.value(secname+"/orb
it_MeanAnomaly",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (epoch &lt;= -1e100 || mean_anomaly &lt;= -1e10
0) {</td><td> </td><td class="right">                               if (epoch &lt;= -1e100 || mean_anomaly &lt;= -1e10
0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               &lt;&lt; ": when you do not <span class="delete">provid</span></td><td> </td><td class="rblock">                                                  &lt;&lt; ": when you do not <span class="insert">pro</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e</span> orbit_TimeAtPericenter, you must provide both "</td><td> </td><td class="rblock"><span class="insert">vide</span> orbit_TimeAtPericenter, you must provide both "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               &lt;&lt; "orbit_Epoch and <span class="delete">orbit_Me</span></td><td> </td><td class="rblock">                                                  &lt;&lt; "orbit_Epoch and <span class="insert">orbit</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">anAnomaly";</span></td><td> </td><td class="rblock"><span class="insert">_MeanAnomaly";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //abort();</td><td> </td><td class="right">                                       //abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       mean_anomaly *= (M_PI/180.0);</td><td> </td><td class="right">                                       mean_anomaly *= (M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       time_at_pericenter = epoch - mean_an
omaly / meanMotion;</td><td> </td><td class="right">                                       time_at_pericenter = epoch - mean_an
omaly / meanMotion;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double orbitGoodDays=pd.value(secname+"/orbit_
good", 1000).toDouble();</td><td> </td><td class="right">                       const double orbitGoodDays=pd.value(secname+"/orbit_
good", 1000).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double inclination = pd.value(secname+"/orbit_
Inclination").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double inclination = pd.value(secname+"/orbit_
Inclination").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double arg_of_pericenter = pd.value(secname+"/
orbit_ArgOfPericenter").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double arg_of_pericenter = pd.value(secname+"/
orbit_ArgOfPericenter").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double ascending_node = pd.value(secname+"/orb
it_AscendingNode").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double ascending_node = pd.value(secname+"/orb
it_AscendingNode").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parentRotObliquity = parent-&gt;getParent(
) ? parent-&gt;getRotObliquity(2451545.0) : 0.0;</td><td> </td><td class="right">                       const double parentRotObliquity = parent-&gt;getParent(
) ? parent-&gt;getRotObliquity(2451545.0) : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const double parent_rot_asc_node = parent-&gt;getParent
() ? parent-&gt;getRotAscending<span class="delete">n</span>ode() : 0.0;</td><td> </td><td class="rblock">                       const double parent_rot_asc_node = parent-&gt;getParent
() ? parent-&gt;getRotAscending<span class="insert">N</span>ode() : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double parent_rot_j2000_longitude = 0.0;</td><td> </td><td class="right">                       double parent_rot_j2000_longitude = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               if (parent-&gt;getParent()) {</td><td> </td><td class="right">                                               if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const double c_obl =
 cos(parentRotObliquity);</td><td> </td><td class="right">                                                       const double c_obl =
 cos(parentRotObliquity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const double s_obl =
 sin(parentRotObliquity);</td><td> </td><td class="right">                                                       const double s_obl =
 sin(parentRotObliquity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const double c_nod =
 cos(parent_rot_asc_node);</td><td> </td><td class="right">                                                       const double c_nod =
 cos(parent_rot_asc_node);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const double s_nod =
 sin(parent_rot_asc_node);</td><td> </td><td class="right">                                                       const double s_nod =
 sin(parent_rot_asc_node);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const Vec3d OrbitAxi
s0( c_nod,       s_nod,        0.0);</td><td> </td><td class="right">                                                       const Vec3d OrbitAxi
s0( c_nod,       s_nod,        0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const Vec3d OrbitAxi
s1(-s_nod*c_obl, c_nod*c_obl,s_obl);</td><td> </td><td class="right">                                                       const Vec3d OrbitAxi
s1(-s_nod*c_obl, c_nod*c_obl,s_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const Vec3d OrbitPol
e(  s_nod*s_obl,-c_nod*s_obl,c_obl);</td><td> </td><td class="right">                                                       const Vec3d OrbitPol
e(  s_nod*s_obl,-c_nod*s_obl,c_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const Vec3d J2000Pol
e(StelCore::matJ2000ToVsop87.multiplyWithoutTranslation(Vec3d(0,0,1)));</td><td> </td><td class="right">                                                       const Vec3d J2000Pol
e(StelCore::matJ2000ToVsop87.multiplyWithoutTranslation(Vec3d(0,0,1)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 755</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 816</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        inclination,</td><td> </td><td class="right">                                                        inclination,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        ascending_node,</td><td> </td><td class="right">                                                        ascending_node,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        arg_of_pericenter,</td><td> </td><td class="right">                                                        arg_of_pericenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        time_at_pericenter,</td><td> </td><td class="right">                                                        time_at_pericenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        orbitGoodDays,</td><td> </td><td class="right">                                                        orbitGoodDays,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        meanMotion,</td><td> </td><td class="right">                                                        meanMotion,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        parentRotObliquity,</td><td> </td><td class="right">                                                        parentRotObliquity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        parent_rot_asc_node
,</td><td> </td><td class="right">                                                        parent_rot_asc_node
,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                        parent_rot_j2000_lo
ngitude);</td><td> </td><td class="right">                                                        parent_rot_j2000_lo
ngitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       orbits.push_back(orb);</td><td> </td><td class="right">                       orbits.push_back(orb);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">userData</span>Ptr = orb;</td><td> </td><td class="rblock">                       <span class="insert">orbit</span>Ptr = orb;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;cometOrbitPosFunc;</td><td> </td><td class="right">                       posfunc = &amp;cometOrbitPosFunc;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="sun_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="sun_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_sun_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_sun_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="mercury_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="mercury_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_mercury_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_mercury_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_mercury_helio_osculating_coord
s;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_mercury_helio_osculating_coord
s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="venus_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="venus_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_venus_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_venus_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_venus_helio_osculating_coords;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_venus_helio_osculating_coords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="earth_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="earth_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_earth_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_earth_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_earth_helio_osculating_coords;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_earth_helio_osculating_coords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="lunar_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="lunar_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_lunar_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_lunar_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="mars_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="mars_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_mars_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_mars_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_mars_helio_osculating_coords;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_mars_helio_osculating_coords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="phobos_special")</td><td> </td><td class="rblock">               <span class="insert">else</span> if (funcName=="phobos_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_phobos_parent_coordsv);</span></td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_phobos_parent_coordsv;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="deimos_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="deimos_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_deimos_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_deimos_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="jupiter_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="jupiter_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_jupiter_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_jupiter_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_jupiter_helio_osculating_coord
s;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_jupiter_helio_osculating_coord
s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="europa_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="europa_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_europa_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_europa_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="calisto_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="calisto_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_callisto_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_callisto_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="io_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="io_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_io_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_io_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="ganymede_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="ganymede_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_ganymede_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_ganymede_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="saturn_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="saturn_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_saturn_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_saturn_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_saturn_helio_osculating_coords
;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_saturn_helio_osculating_coords
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="mimas_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="mimas_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_mimas_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_mimas_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="enceladus_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="enceladus_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_enceladus_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_enceladus_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="tethys_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="tethys_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_tethys_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_tethys_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="dione_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="dione_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_dione_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_dione_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="rhea_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="rhea_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_rhea_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_rhea_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="titan_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="titan_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_titan_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_titan_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="iapetus_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="iapetus_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_iapetus_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_iapetus_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="hyperion_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="hyperion_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_hyperion_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_hyperion_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="uranus_special") {</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="uranus_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_uranus_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_uranus_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_uranus_helio_osculating_coords
;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_uranus_helio_osculating_coords
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="miranda_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="miranda_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_miranda_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_miranda_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="ariel_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="ariel_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_ariel_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_ariel_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="umbriel_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="umbriel_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_umbriel_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_umbriel_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="titania_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="titania_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_titania_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_titania_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="oberon_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="oberon_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_oberon_parent_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_oberon_parent_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="neptune_special") {</td><td> </td><td class="rblock">               <span class="insert">else</span> if (funcName=="neptune_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_neptune_helio_coordsv);</span></td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_neptune_helio_coordsv;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_neptune_helio_osculating_coord
s;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_neptune_helio_osculating_coord
s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (funcName=="pluto_special")</td><td> </td><td class="rblock">               <span class="insert">else </span>if (funcName=="pluto_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = &amp;get_pluto_helio_coordsv;</td><td> </td><td class="right">                       posfunc = &amp;get_pluto_helio_coordsv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (posfunc==<span class="delete">NULL</span>)</td><td> </td><td class="rblock">               if (posfunc==<span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       qCritical() &lt;&lt; "ERROR <span class="delete">: can't find posfunc " &lt;&lt; func
</span>Name &lt;&lt; " for " &lt;&lt; englishName;</td><td> </td><td class="rblock">                       qCritical() &lt;&lt; "ERROR <span class="insert">in section " &lt;&lt; secname &lt;&lt; ": 
can't find posfunc " &lt;&lt; func</span>Name &lt;&lt; " for " &lt;&lt; englishName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       exit(-1);</td><td> </td><td class="right">                       exit(-1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Create the Solar System body and add it to the list</td><td> </td><td class="right">               // Create the Solar System body and add it to the list</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString type = pd.value(secname+"/type").toString();</td><td> </td><td class="right">               QString type = pd.value(secname+"/type").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">//TODO: Refactor the subclass selection to reduce duplicate </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">code mess here,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // by at least using this base class pointer and using setXX</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">X functions instead of mega-constructors</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // that have to pass most of it on to the Planet class</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               PlanetP p;</td><td> </td><td class="right">               PlanetP p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // New class objects, named "plutino", "cubewano", "dwarf pl
anet", "SDO", "OCO", has properties</td><td> </td><td class="right">               // New class objects, named "plutino", "cubewano", "dwarf pl
anet", "SDO", "OCO", has properties</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // similar to asteroids and we should calculate their positi
ons like for asteroids. Dwarf planets</td><td> </td><td class="right">               // similar to asteroids and we should calculate their positi
ons like for asteroids. Dwarf planets</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // have one exception: Pluto - we should use special functio
n for calculation of orbit of Pluto.</td><td> </td><td class="right">               // have one exception: Pluto - we should use special functio
n for calculation of orbit of Pluto.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if ((type == "asteroid" || type == "dwarf planet" || type ==
 "cubewano" || type == "plutino" || type == "scattered disc object" || type
 == "Oort cloud object") &amp;&amp; !englishName.contains("Pluto"))</td><td> </td><td class="right">               if ((type == "asteroid" || type == "dwarf planet" || type ==
 "cubewano" || type == "plutino" || type == "scattered disc object" || type
 == "Oort cloud object") &amp;&amp; !englishName.contains("Pluto"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       minorBodies &lt;&lt; englishName;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p = PlanetP(new MinorPlanet(englishName,</td><td> </td><td class="right">                       p = PlanetP(new MinorPlanet(englishName,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                   pd.value(secname+"/light
ing").toBool(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                   pd.value(secname+"/radiu
s").toDouble()/AU,</td><td> </td><td class="right">                                                   pd.value(secname+"/radiu
s").toDouble()/AU,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                   pd.value(secname+"/oblat
eness", 0.0).toDouble(),</td><td> </td><td class="right">                                                   pd.value(secname+"/oblat
eness", 0.0).toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   StelUtils::strToVec3f(pd</td><td> </td><td class="rblock">                                                   StelUtils::strToVec3f(pd</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.value(secname+"/color").toString()),</span></td><td> </td><td class="rblock"><span class="insert">.value(secname+"/color", "1.0,1.0,1.0").toString()), // halo color</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   pd.value(secname+"/albed</td><td> </td><td class="rblock">                                                   pd.value(secname+"/albed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">o").toFloat(),</span></td><td> </td><td class="rblock"><span class="insert">o", 0.25f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   pd.value(secname+"/tex_m</td><td> </td><td class="rblock"><span class="insert">                                                   pd.value(secname+"/rough</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ap").toString(),</span></td><td> </td><td class="rblock"><span class="insert">ness",0.9f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                   pd.value(secname+"/tex_m</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ap", "nomap.png").toString(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                   pd.value(secname+"/model</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">").toString(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                   posfunc,</td><td> </td><td class="right">                                                   posfunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   <span class="delete">userData</span>Ptr,</td><td> </td><td class="rblock">                                                   <span class="insert">orbit</span>Ptr,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                   osculatingFunc,</td><td> </td><td class="right">                                                   osculatingFunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                   closeOrbit,</td><td> </td><td class="right">                                                   closeOrbit,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   pd.value(secname+"/hidde
n", <span class="delete">0</span>).toBool(),</td><td> </td><td class="rblock">                                                   pd.value(secname+"/hidde
n", <span class="insert">false</span>).toBool(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                   type));</td><td> </td><td class="right">                                                   type));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QSharedPointer&lt;MinorPlanet&gt; mp =  p.dynamicCast&lt;Mino
rPlanet&gt;();</td><td> </td><td class="right">                       QSharedPointer&lt;MinorPlanet&gt; mp =  p.dynamicCast&lt;Mino
rPlanet&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Number</td><td> </td><td class="right">                       //Number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int minorPlanetNumber = pd.value(secname+"/minor_pla
net_number", 0).toInt();</td><td> </td><td class="right">                       int minorPlanetNumber = pd.value(secname+"/minor_pla
net_number", 0).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (minorPlanetNumber)</td><td> </td><td class="right">                       if (minorPlanetNumber)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mp-&gt;setMinorPlanetNumber(minorPlanetNumber);</td><td> </td><td class="right">                               mp-&gt;setMinorPlanetNumber(minorPlanetNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 929</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 997</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       mp-&gt;setAbsoluteMagnitudeAndSlope(mag
nitude, 0.15);</td><td> </td><td class="right">                                       mp-&gt;setAbsoluteMagnitudeAndSlope(mag
nitude, 0.15);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       mp-&gt;setSemiMajorAxis(pd.value(secname+"/orbit_SemiMa
jorAxis", 0).toDouble());</td><td> </td><td class="right">                       mp-&gt;setSemiMajorAxis(pd.value(secname+"/orbit_SemiMa
jorAxis", 0).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else if (type == "comet")</td><td> </td><td class="right">               else if (type == "comet")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       minorBodies &lt;&lt; englishName;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p = PlanetP(new Comet(englishName,</td><td> </td><td class="right">                       p = PlanetP(new Comet(englishName,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                      <span class="delete">pd.value(secname+"/lighting").toBool(</span></td><td> </td><td class="rblock">                                             <span class="insert">pd.value(secname+"/radius").to</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">),</span></td><td> </td><td class="rblock"><span class="insert">Double()/AU,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                      pd.value(secname+"/radius").toDouble(</span></td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/oblateness"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)/AU,</span></td><td> </td><td class="rblock">, <span class="insert">0.0).toDouble(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                      pd.value(secname+"/oblateness", 0.0).</span></td><td> </td><td class="rblock"><span class="insert">                                             StelUtils::strToVec3f(pd.value</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">toDouble(),</span></td><td> </td><td class="rblock"><span class="insert">(secname+"/color", "1.0,1.0,1.0").toString()), // halo color</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                      StelUtils::strToVec3f(pd.value(secnam</span></td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/albedo", 0.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e+"/color").toString()),</span></td><td> </td><td class="rblock"><span class="insert">25f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                      pd.value(secname+"/albedo").toFloat()</span></td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/roughness",</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">,</td><td> </td><td class="rblock"><span class="insert">0.9f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                      <span class="delete">pd.value(secname+"/tex_map").toString</span></td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/outgas_inte</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(),</span></td><td> </td><td class="rblock"><span class="insert">nsity",0.1f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                      posfunc,</td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/outgas_fall</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                      <span class="delete">userDataPtr,</span></td><td> </td><td class="rblock"><span class="insert">off", 0.1f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                      osculatingFunc,</td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/tex_map", "</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                      closeOrbit,</td><td> </td><td class="rblock"><span class="insert">nomap.png").toString(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                  <span class="delete">pd.value(secname+"/hidden</span></td><td> </td><td class="rblock"><span class="insert">                                             pd.value(secname+"/model").toS</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">", 0).toBool(),</span></td><td> </td><td class="rblock"><span class="insert">tring(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                  type,</td><td> </td><td class="rblock">                                             posfunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                  <span class="delete">pd.value(secname+"/dust_w</span></td><td> </td><td class="rblock">                                             <span class="insert">orbitPtr,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">idthfactor",</span> 1.5f).toFloat(),</td><td> </td><td class="rblock">                                             osculatingFunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                  <span class="delete">pd.value(secname+"/dust_l</span></td><td> </td><td class="rblock">                                             closeOrbit,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">engthfactor",</span> 0.4f).toFloat(),</td><td> </td><td class="rblock">                                             <span class="insert">pd.value(secname+"/hidden", fa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                  <span class="delete">pd.value(secname+"/dust_b</span></td><td> </td><td class="rblock"><span class="insert">lse).toBool(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rightnessfactor",</span> 1.5f).toFloat()</td><td> </td><td class="rblock">                                             type,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                 ));</td><td> </td><td class="rblock">                                             <span class="insert">pd.value(secname+"/dust_widthf</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">actor",</span> 1.5f).toFloat(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                             <span class="insert">pd.value(secname+"/dust_length</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">factor",</span> 0.4f).toFloat(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                             <span class="insert">pd.value(secname+"/dust_bright</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">nessfactor",</span> 1.5f).toFloat()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                             ));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QSharedPointer&lt;Comet&gt; mp =  p.dynamicCast&lt;Comet&gt;();</td><td> </td><td class="right">                       QSharedPointer&lt;Comet&gt; mp =  p.dynamicCast&lt;Comet&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //g,k magnitude system</td><td> </td><td class="right">                       //g,k magnitude system</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double magnitude = pd.value(secname+"/absolute_magni
tude", -99).toDouble();</td><td> </td><td class="right">                       double magnitude = pd.value(secname+"/absolute_magni
tude", -99).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double slope = pd.value(secname+"/slope_parameter", 
4.0).toDouble();</td><td> </td><td class="right">                       double slope = pd.value(secname+"/slope_parameter", 
4.0).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (magnitude &gt; -99)</td><td> </td><td class="right">                       if (magnitude &gt; -99)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (slope &gt;= 0 &amp;&amp; slope &lt;= 20)</td><td> </td><td class="right">                               if (slope &gt;= 0 &amp;&amp; slope &lt;= 20)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 976</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1048</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (eccentricity&lt;1 &amp;&amp; pericenterDistance&gt;0)</td><td> </td><td class="right">                       if (eccentricity&lt;1 &amp;&amp; pericenterDistance&gt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mp-&gt;setSemiMajorAxis(pericenterDistance / (1
.0-eccentricity));</td><td> </td><td class="right">                               mp-&gt;setSemiMajorAxis(pericenterDistance / (1
.0-eccentricity));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Set possible default name of the normal map for a
voiding yin-yang shaped moon</td><td> </td><td class="right">                       // Set possible default name of the normal map for a
voiding yin-yang shaped moon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // phase when normal map key not exists. Example: mo
on_normals.png</td><td> </td><td class="right">                       // phase when normal map key not exists. Example: mo
on_normals.png</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Details: https://bugs.launchpad.net/stellarium/+b
ug/1335609</td><td> </td><td class="right">                       // Details: https://bugs.launchpad.net/stellarium/+b
ug/1335609</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       QString normalMapName = englishName.toLower().append</td><td> </td><td class="rblock">                       QString normalMapName = <span class="insert">"";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">("_normals.png");</td><td> </td><td class="rblock"><span class="insert">                       if (!pd.value(secname+"/hidden", false).toBool()) //</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> no normal maps for invisible objects!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               normalMapName =</span> englishName.toLower().append</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">("_normals.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p = PlanetP(new Planet(englishName,</td><td> </td><td class="right">                       p = PlanetP(new Planet(englishName,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                              pd.value(secname+"/lighting")
.toBool(),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              pd.value(secname+"/radius").t
oDouble()/AU,</td><td> </td><td class="right">                                              pd.value(secname+"/radius").t
oDouble()/AU,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              pd.value(secname+"/oblateness
", 0.0).toDouble(),</td><td> </td><td class="right">                                              pd.value(secname+"/oblateness
", 0.0).toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              StelUtils::strToVec3f(pd.valu</td><td> </td><td class="rblock">                                              StelUtils::strToVec3f(pd.valu</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e(secname+"/color").toString()),</span></td><td> </td><td class="rblock"><span class="insert">e(secname+"/color", "1.0,1.0,1.0").toString()), // halo color</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                              pd.value(secname+"/albedo").t</span></td><td> </td><td class="rblock"><span class="insert">                                              pd.value(secname+"/albedo", 0</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">oFloat(),</span></td><td> </td><td class="rblock"><span class="insert">.25f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                              pd.value(secname+"/tex_map").</span></td><td> </td><td class="rblock"><span class="insert">                                              pd.value(secname+"/roughness"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">toString(),</span></td><td> </td><td class="rblock"><span class="insert">,0.9f).toFloat(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                              pd.value(secname+"/tex_map", </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">"nomap.png").toString(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              pd.value(secname+"/normals_ma
p", normalMapName).toString(),</td><td> </td><td class="right">                                              pd.value(secname+"/normals_ma
p", normalMapName).toString(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                              pd.value(secname+"/model").to
String(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              posfunc,</td><td> </td><td class="right">                                              posfunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              <span class="delete">userData</span>Ptr,</td><td> </td><td class="rblock">                                              <span class="insert">orbit</span>Ptr,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              osculatingFunc,</td><td> </td><td class="right">                                              osculatingFunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              closeOrbit,</td><td> </td><td class="right">                                              closeOrbit,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              pd.value(secname+"/hidden", <span class="delete">0
</span>).toBool(),</td><td> </td><td class="rblock">                                              pd.value(secname+"/hidden", <span class="insert">f
alse</span>).toBool(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              pd.value(secname+"/atmosphere
", false).toBool(),</td><td> </td><td class="right">                                              pd.value(secname+"/atmosphere
", false).toBool(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              pd.value(secname+"/halo", <span class="delete">0).
toBool(),</span></td><td> </td><td class="rblock">                                              pd.value(secname+"/halo", <span class="insert">tru
e).toBool(),          // GZ new default. Avoids clutter in ssystem.ini.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                              type));</td><td> </td><td class="right">                                              type));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;absoluteMagnitude = pd.value(secname+"/absolute_m
agnitude", -99.).toDouble();</td><td> </td><td class="right">                       p-&gt;absoluteMagnitude = pd.value(secname+"/absolute_m
agnitude", -99.).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!parent.isNull())</td><td> </td><td class="right">               if (!parent.isNull())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       parent-&gt;satellites.append(p);</td><td> </td><td class="right">                       parent-&gt;satellites.append(p);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;parent = parent;</td><td> </td><td class="right">                       p-&gt;parent = parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="earth") earth = p;</td><td> </td><td class="right">               if (secname=="earth") earth = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1058</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 1133</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               readOk++;</td><td> </td><td class="right">               readOk++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (systemPlanets.isEmpty())</td><td> </td><td class="right">       if (systemPlanets.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "No Solar System objects loaded from" &lt;&lt; QDir:
:toNativeSeparators(filePath);</td><td> </td><td class="right">               qWarning() &lt;&lt; "No Solar System objects loaded from" &lt;&lt; QDir:
:toNativeSeparators(filePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // special case: load earth shadow texture</td><td> </td><td class="right">       // special case: load earth shadow texture</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Planet::texEarthShadow = <span class="delete">StelApp::getInstance().getTextureManager().</span></td><td> </td><td class="rblock">       <span class="insert">if (!Planet::texEarthShadow)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">createTexture(StelFileMgr::getInstallationDir()+"/textures/earth-shadow.png</span></td><td> </td><td class="rblock">               Planet::texEarthShadow = <span class="insert">StelApp::getInstance().getTextureMa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">");</span></td><td> </td><td class="rblock"><span class="insert">nager().createTexture(StelFileMgr::getInstallationDir()+"/textures/earth-sh</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">adow.png");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Also comets just have static textures.</td><td> </td><td class="right">       // Also comets just have static textures.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Comet::comaTexture = <span class="delete">StelApp::getInstance().getTextureManager().crea</span></td><td> </td><td class="rblock">       <span class="insert">if (!Comet::comaTexture)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">teTextureThread(StelFileMgr::getInstallationDir()+"/textures/cometComa.png"</span></td><td> </td><td class="rblock">               Comet::comaTexture = <span class="insert">StelApp::getInstance().getTextureManage</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> StelTexture::StelTextureParams(true, GL_LINEAR, <span class="delete">GL_CLAMP_TO_EDGE));</span></td><td> </td><td class="rblock"><span class="insert">r().createTextureThread(StelFileMgr::getInstallationDir()+"/textures/cometC</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">oma.png",</span> StelTexture::StelTextureParams(true, GL_LINEAR, <span class="insert">GL_CLAMP_TO_EDGE)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //tail textures. We use paraboloid tail bodies, textured like a fish
eye sphere, i.e. center=head. The texture should be something like a mottle
d star to give some structure.</td><td> </td><td class="right">       //tail textures. We use paraboloid tail bodies, textured like a fish
eye sphere, i.e. center=head. The texture should be something like a mottle
d star to give some structure.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Comet::tailTexture = <span class="delete">StelApp::getInstance().getTextureManager().crea</span></td><td> </td><td class="rblock">       <span class="insert">if (!Comet::tailTexture)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">teTextureThread(StelFileMgr::getInstallationDir()+"/textures/cometTail.png"</span></td><td> </td><td class="rblock">               Comet::tailTexture = <span class="insert">StelApp::getInstance().getTextureManage</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> StelTexture::StelTextureParams(true, GL_LINEAR, <span class="delete">GL_CLAMP_TO_EDGE));</span></td><td> </td><td class="rblock"><span class="insert">r().createTextureThread(StelFileMgr::getInstallationDir()+"/textures/cometT</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ail.png",</span> StelTexture::StelTextureParams(true, GL_LINEAR, <span class="insert">GL_CLAMP_TO_EDGE)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (readOk&gt;0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "Solar System bodies";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Compute the position for every elements of the solar system.</td><td> </td><td class="right">// Compute the position for every elements of the solar system.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// The order is not important since the position is computed relatively to 
the mother body</td><td> </td><td class="right">// The order is not important since the position is computed relatively to 
the mother body</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::computePositions(double dateJDE, const Vec3d&amp; observerPos
)</td><td> </td><td class="right">void SolarSystem::computePositions(double dateJDE, const Vec3d&amp; observerPos
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagLightTravelTime)</td><td> </td><td class="right">       if (flagLightTravelTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach (PlanetP p, systemPlanets)</td><td> </td><td class="right">               foreach (PlanetP p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;computePositionWithoutOrbits(dateJDE);</td><td> </td><td class="right">                       p-&gt;computePositionWithoutOrbits(dateJDE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">// BEGIN HACK: 0.16.0pre for solar aberration/light time cor</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">rection: (This fixes eclipse bug LP:#1275092)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               Vec3d earthPosJDE=getEarth()-&gt;getHeliocentricEclipticPos();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               const double earthDist=earthPosJDE.length();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               getEarth()-&gt;computePosition(dateJDE-earthDist * (AU / (SPEED</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">_OF_LIGHT * 86400)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               Vec3d earthPosJDEbefore=getEarth()-&gt;getHeliocentricEclipticP</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">os();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               getSun()-&gt;setHeliocentricEclipticPos(earthPosJDE-earthPosJDE</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">before);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // We must reset Earth for the next step!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               getEarth()-&gt;computePosition(dateJDE);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // END HACK FOR SOLAR LOGHT TIME/ABERRATION</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach (PlanetP p, systemPlanets)</td><td> </td><td class="right">               foreach (PlanetP p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double light_speed_correction = (p-&gt;getHelioce
ntricEclipticPos()-observerPos).length() * (AU / (SPEED_OF_LIGHT * 86400));</td><td> </td><td class="right">                       const double light_speed_correction = (p-&gt;getHelioce
ntricEclipticPos()-observerPos).length() * (AU / (SPEED_OF_LIGHT * 86400));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;computePosition(dateJDE-light_speed_correction);</td><td> </td><td class="right">                       p-&gt;computePosition(dateJDE-light_speed_correction);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">// BEGIN HACK PART 2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               getSun()-&gt;setHeliocentricEclipticPos(earthPosJDE-earthPosJDE</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">before);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // END HACK PART 2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach (PlanetP p, systemPlanets)</td><td> </td><td class="right">               foreach (PlanetP p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;computePosition(dateJDE);</td><td> </td><td class="right">                       p-&gt;computePosition(dateJDE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       computeTransMatrices(dateJDE, observerPos);</td><td> </td><td class="right">       computeTransMatrices(dateJDE, observerPos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1168</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 1264</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               p-&gt;draw(core, maxMagLabel, planetNameFont);</td><td> </td><td class="right">               p-&gt;draw(core, maxMagLabel, planetNameFont);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (GETSTELMODULE(StelObjectMgr)-&gt;getFlagSelectedObjectPointer() &amp;&amp; 
getFlagPointer())</td><td> </td><td class="right">       if (GETSTELMODULE(StelObjectMgr)-&gt;getFlagSelectedObjectPointer() &amp;&amp; 
getFlagPointer())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               drawPointer(core);</td><td> </td><td class="right">               drawPointer(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // AstroCalcDialog</td><td> </td><td class="right">       // AstroCalcDialog</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (getFlagEphemerisMarkers())</td><td> </td><td class="right">       if (getFlagEphemerisMarkers())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               StelProjectorP prj = <span class="delete">core-&gt;getProjection(StelCore::FrameJ200</span></td><td> </td><td class="rblock">               StelProjectorP <span class="insert">prj;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">0);</span> // , StelCore::RefractionOff);</td><td> </td><td class="rblock"><span class="insert">               if (getFlagEphemerisHorizontalCoordinates())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       prj = <span class="insert">core-&gt;getProjection(StelCore::FrameAltAz);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       prj = core-&gt;getProjection(StelCore::FrameJ2000);</span> // </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">, StelCore::RefractionOff);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelPainter sPainter(prj);</td><td> </td><td class="right">               StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float size, shift;</td><td> </td><td class="right">               float size, shift;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0103" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               <span class="insert">bool showDates = getFlagEphemerisDates();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               bool showMagnitudes = getFlagEphemerisMagnitudes();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QString info = "";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0104" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for (int i =0; i&lt; AstroCalcDialog::EphemerisList<span class="delete">J2000.count(
</span>); i++)</td><td> </td><td class="rblock">               for (int i =0; i&lt; AstroCalcDialog::EphemerisList<span class="insert">Coords.count
(</span>); i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // draw EphemerisListJ2000[i];</td><td> </td><td class="right">                       // draw EphemerisListJ2000[i];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d win;</td><td> </td><td class="right">                       Vec3d win;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Check visibility of pointer</td><td> </td><td class="right">                       // Check visibility of pointer</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0105" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (!(sPainter.getProjector()-&gt;projectCheck(AstroCal
cDialog::EphemerisList<span class="delete">J2000</span>[i], win)))</td><td> </td><td class="rblock">                       if (!(sPainter.getProjector()-&gt;projectCheck(AstroCal
cDialog::EphemerisList<span class="insert">Coords</span>[i], win)))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (i == AstroCalcDialog::DisplayedPositionIndex)</td><td> </td><td class="right">                       if (i == AstroCalcDialog::DisplayedPositionIndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               sPainter.setColor(1.0f, 0.7f, 0.0f, 1.0f);</td><td> </td><td class="right">                               sPainter.setColor(1.0f, 0.7f, 0.0f, 1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               size = 6.f;</td><td> </td><td class="right">                               size = 6.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               sPainter.setColor(1.0f, 1.0f, 0.0f, 1.0f);</td><td> </td><td class="right">                               sPainter.setColor(1.0f, 1.0f, 0.0f, 1.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               size = 4.f;</td><td> </td><td class="right">                               size = 4.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       sPainter.setBlending(true, GL_ONE, GL_ONE);</td><td> </td><td class="right">                       sPainter.setBlending(true, GL_ONE, GL_ONE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       texCircle-&gt;bind();</td><td> </td><td class="right">                       texCircle-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0106" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       sPainter.drawSprite2dMode(AstroCalcDialog::Ephemeris
List<span class="delete">J2000</span>[i], size);</td><td> </td><td class="rblock">                       sPainter.drawSprite2dMode(AstroCalcDialog::Ephemeris
List<span class="insert">Coords</span>[i], size);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0107" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (<span class="delete">getFlagEphemerisDates()</span>)</td><td> </td><td class="rblock">                       if (<span class="insert">showDates || showMagnitudes</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               shift = 3.f + size/1.6f;</td><td> </td><td class="right">                               shift = 3.f + size/1.6f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0108" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               sPainter.drawText(AstroCalcDialog::Ephemeris</td><td> </td><td class="rblock">                               <span class="insert">if (showDates &amp;&amp; showMagnitudes)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ListJ2000[i], AstroCalcDialog::EphemerisListDates[i],</span> 0, shift, shift, <span class="delete">fals</span></td><td> </td><td class="rblock"><span class="insert">                                       info = QString("%1 (%2)").arg(AstroC</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e);</span></td><td> </td><td class="rblock"><span class="insert">alcDialog::EphemerisListDates[i], QString::number(AstroCalcDialog::Ephemeri</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">sListMagnitudes[i], 'f', 2));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (showDates &amp;&amp; !showMagnitudes)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       info = AstroCalcDialog::EphemerisLis</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tDates[i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (!showDates &amp;&amp; showMagnitudes)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       info = QString::number(AstroCalcDial</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">og::EphemerisListMagnitudes[i], 'f', 2);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               sPainter.drawText(AstroCalcDialog::Ephemeris</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ListCoords[i], info,</span> 0, shift, shift, <span class="insert">false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">PlanetP SolarSystem::searchByEnglishName(QString planetEnglishName) const</td><td> </td><td class="right">PlanetP SolarSystem::searchByEnglishName(QString planetEnglishName) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">       foreach (const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (p-&gt;getEnglishName() == planetEnglishName)</td><td> </td><td class="right">               if (p-&gt;getEnglishName() == planetEnglishName)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 1344</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 1454</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;StelObjectP&gt; result;</td><td> </td><td class="right">       QList&lt;StelObjectP&gt; result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!getFlagPlanets())</td><td> </td><td class="right">       if (!getFlagPlanets())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return result;</td><td> </td><td class="right">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d v = core-&gt;j2000ToEquinoxEqu(vv, StelCore::RefractionOff);</td><td> </td><td class="right">       Vec3d v = core-&gt;j2000ToEquinoxEqu(vv, StelCore::RefractionOff);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       v.normalize();</td><td> </td><td class="right">       v.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double cosLimFov = std::cos(limitFov * M_PI/180.);</td><td> </td><td class="right">       double cosLimFov = std::cos(limitFov * M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d equPos;</td><td> </td><td class="right">       Vec3d equPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double cosAngularSize;</td><td> </td><td class="right">       double cosAngularSize;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0109" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString weAreHere = core-&gt;getCurrentPlanet()-&gt;getEnglishName();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">       foreach (const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               equPos = p-&gt;getEquinoxEquatorialPos(core);</td><td> </td><td class="right">               equPos = p-&gt;getEquinoxEquatorialPos(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               equPos.normalize();</td><td> </td><td class="right">               equPos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               cosAngularSize = std::cos(p-&gt;getSpheroidAngularSize(core) * 
M_PI/180.);</td><td> </td><td class="right">               cosAngularSize = std::cos(p-&gt;getSpheroidAngularSize(core) * 
M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0110" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (equPos*v&gt;=std::min(cosLimFov, cosAngularSize))</td><td> </td><td class="rblock">               if (equPos*v&gt;=std::min(cosLimFov, cosAngularSize)<span class="insert"> &amp;&amp; p-&gt;getE
nglishName()!=weAreHere</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       result.append(qSharedPointerCast&lt;StelObject&gt;(p));</td><td> </td><td class="right">                       result.append(qSharedPointerCast&lt;StelObject&gt;(p));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Update i18 names from english names according to current sky culture tra
nslator</td><td> </td><td class="right">// Update i18 names from english names according to current sky culture tra
nslator</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::updateI18n()</td><td> </td><td class="right">void SolarSystem::updateI18n()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l19" /><small>skipping to change at</small><em> line 1469</em></th><th> </th><th><a name="part-r19" /><small>skipping to change at</small><em> line 1580</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagLightTravelTime(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagLightTravelTime(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(b!=flagLightTravelTime)</td><td> </td><td class="right">       if(b!=flagLightTravelTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagLightTravelTime = b;</td><td> </td><td class="right">               flagLightTravelTime = b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit flagLightTravelTimeChanged(b);</td><td> </td><td class="right">               emit flagLightTravelTimeChanged(b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0111" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void SolarSystem::setFlagShowObjSelfShadows(bool b)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(b!=flagShowObjSelfShadows)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               flagShowObjSelfShadows = b;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if(!b)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       Planet::deinitFBO();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit flagShowObjSelfShadowsChanged(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setSelected(PlanetP obj)</td><td> </td><td class="right">void SolarSystem::setSelected(PlanetP obj)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (obj &amp;&amp; obj-&gt;getType() == "Planet")</td><td> </td><td class="right">       if (obj &amp;&amp; obj-&gt;getType() == "Planet")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selected = obj;</td><td> </td><td class="right">               selected = obj;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               selected.clear();;</td><td> </td><td class="right">               selected.clear();;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Undraw other objects hints, orbit, trails etc..</td><td> </td><td class="right">       // Undraw other objects hints, orbit, trails etc..</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(getFlagHints());</td><td> </td><td class="right">       setFlagHints(getFlagHints());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(getFlagOrbits());</td><td> </td><td class="right">       setFlagOrbits(getFlagOrbits());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l20" /><small>skipping to change at</small><em> line 1513</em></th><th> </th><th><a name="part-r20" /><small>skipping to change at</small><em> line 1635</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // shadow location at earth + moon distance along earth vector from 
sun</td><td> </td><td class="right">       // shadow location at earth + moon distance along earth vector from 
sun</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d en = e;</td><td> </td><td class="right">       Vec3d en = e;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       en.normalize();</td><td> </td><td class="right">       en.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d shadow = en * (e.length() + m.length());</td><td> </td><td class="right">       Vec3d shadow = en * (e.length() + m.length());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // find shadow radii in AU</td><td> </td><td class="right">       // find shadow radii in AU</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double r_penumbra = shadow.length()*702378.1/AU/e.length() - 696000/
AU;</td><td> </td><td class="right">       double r_penumbra = shadow.length()*702378.1/AU/e.length() - 696000/
AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // modify shadow location for scaled moon</td><td> </td><td class="right">       // modify shadow location for scaled moon</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d mdist = shadow - mh;</td><td> </td><td class="right">       Vec3d mdist = shadow - mh;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0112" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(mdist.length() &gt; r_penumbra + 2000/AU) return <span class="delete">0;   // not visible
</span> so don't bother drawing</td><td> </td><td class="rblock">       if(mdist.length() &gt; r_penumbra + 2000/AU) return <span class="insert">false;   // not vis
ible</span> so don't bother drawing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0113" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return <span class="delete">1</span>;</td><td> </td><td class="rblock">       return <span class="insert">true</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QStringList SolarSystem::listAllObjects(bool inEnglish) const</td><td> </td><td class="right">QStringList SolarSystem::listAllObjects(bool inEnglish) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList result;</td><td> </td><td class="right">       QStringList result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (inEnglish)</td><td> </td><td class="right">       if (inEnglish)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach(const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">               foreach(const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       result &lt;&lt; p-&gt;getEnglishName();</td><td> </td><td class="right">                       result &lt;&lt; p-&gt;getEnglishName();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l21" /><small>skipping to change at</small><em> line 1593</em></th><th> </th><th><a name="part-r21" /><small>skipping to change at</small><em> line 1715</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagPlanets(void) const</td><td> </td><td class="right">bool SolarSystem::getFlagPlanets(void) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return flagShow;</td><td> </td><td class="right">       return flagShow;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagEphemerisMarkers(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagEphemerisMarkers(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (b!=ephemerisMarkersDisplayed)</td><td> </td><td class="right">       if (b!=ephemerisMarkersDisplayed)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ephemerisMarkersDisplayed=b;</td><td> </td><td class="right">               ephemerisMarkersDisplayed=b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0114" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               conf-&gt;setValue("astro<span class="delete">/flag_ephemeris_markers", b); // Immedi
</span>ate saving of state</td><td> </td><td class="rblock">               conf-&gt;setValue("astro<span class="insert">calc/flag_ephemeris_markers", b); // Im
medi</span>ate saving of state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit ephemerisMarkersChanged(b);</td><td> </td><td class="right">               emit ephemerisMarkersChanged(b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagEphemerisMarkers() const</td><td> </td><td class="right">bool SolarSystem::getFlagEphemerisMarkers() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return ephemerisMarkersDisplayed;</td><td> </td><td class="right">       return ephemerisMarkersDisplayed;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0115" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void SolarSystem::setFlagEphemerisHorizontalCoordinates(bool b)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (b!=ephemerisHorizontalCoordinates)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               ephemerisHorizontalCoordinates=b;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("astrocalc/flag_ephemeris_horizontal", b); //</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> Immediate saving of state</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit ephemerisHorizontalCoordinatesChanged(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool SolarSystem::getFlagEphemerisHorizontalCoordinates() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return ephemerisHorizontalCoordinates;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagEphemerisDates(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagEphemerisDates(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (b!=ephemerisDatesDisplayed)</td><td> </td><td class="right">       if (b!=ephemerisDatesDisplayed)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ephemerisDatesDisplayed=b;</td><td> </td><td class="right">               ephemerisDatesDisplayed=b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0116" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               conf-&gt;setValue("astro<span class="delete">/flag_ephemeris_dates", b); // Immediat
</span>e saving of state</td><td> </td><td class="rblock">               conf-&gt;setValue("astro<span class="insert">calc/flag_ephemeris_dates", b); // Imme
diat</span>e saving of state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit ephemerisDatesChanged(b);</td><td> </td><td class="right">               emit ephemerisDatesChanged(b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagEphemerisDates() const</td><td> </td><td class="right">bool SolarSystem::getFlagEphemerisDates() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return ephemerisDatesDisplayed;</td><td> </td><td class="right">       return ephemerisDatesDisplayed;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0117" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void SolarSystem::setFlagEphemerisMagnitudes(bool b)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (b!=ephemerisMagnitudesDisplayed)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               ephemerisMagnitudesDisplayed=b;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               conf-&gt;setValue("astrocalc/flag_ephemeris_magnitudes", b); //</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> Immediate saving of state</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit ephemerisMagnitudesChanged(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool SolarSystem::getFlagEphemerisMagnitudes() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return ephemerisMagnitudesDisplayed;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagNativePlanetNames(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagNativePlanetNames(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (b!=flagNativePlanetNames)</td><td> </td><td class="right">       if (b!=flagNativePlanetNames)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagNativePlanetNames=b;</td><td> </td><td class="right">               flagNativePlanetNames=b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               foreach (const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">               foreach (const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (p-&gt;getPlanetType()==Planet::isPlanet || p-&gt;getPl
anetType()==Planet::isMoon || p-&gt;getPlanetType()==Planet::isStar)</td><td> </td><td class="right">                       if (p-&gt;getPlanetType()==Planet::isPlanet || p-&gt;getPl
anetType()==Planet::isMoon || p-&gt;getPlanetType()==Planet::isStar)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               p-&gt;setFlagNativeName(flagNativePlanetNames);</td><td> </td><td class="right">                               p-&gt;setFlagNativeName(flagNativePlanetNames);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l22" /><small>skipping to change at</small><em> line 1900</em></th><th> </th><th><a name="part-r22" /><small>skipping to change at</small><em> line 2052</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(b!=flagMoonScale)</td><td> </td><td class="right">       if(b!=flagMoonScale)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!b) getMoon()-&gt;setSphereScale(1);</td><td> </td><td class="right">               if (!b) getMoon()-&gt;setSphereScale(1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else getMoon()-&gt;setSphereScale(moonScale);</td><td> </td><td class="right">               else getMoon()-&gt;setSphereScale(moonScale);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagMoonScale = b;</td><td> </td><td class="right">               flagMoonScale = b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit flagMoonScaleChanged(b);</td><td> </td><td class="right">               emit flagMoonScaleChanged(b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0118" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">// Set/Get Moon display scaling factor</td><td> </td><td class="rblock">// Set/Get Moon display scaling factor<span class="insert">. This goes directly to the Moon obje
ct.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setMoonScale(double f)</td><td> </td><td class="right">void SolarSystem::setMoonScale(double f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(moonScale != f)</td><td> </td><td class="right">       if(moonScale != f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               moonScale = f;</td><td> </td><td class="right">               moonScale = f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagMoonScale)</td><td> </td><td class="right">               if (flagMoonScale)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       getMoon()-&gt;setSphereScale(moonScale);</td><td> </td><td class="right">                       getMoon()-&gt;setSphereScale(moonScale);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit moonScaleChanged(f);</td><td> </td><td class="right">               emit moonScaleChanged(f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0119" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Set/Get if minor body display is scaled. This flag will be queried by al</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">l Planet objects except for the Moon.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void SolarSystem::setFlagMinorBodyScale(bool b)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(b!=flagMinorBodyScale)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               flagMinorBodyScale = b;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               double newScale = b ? minorBodyScale : 1.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //update the bodies with the new scale</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               foreach(PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if(p == moon) continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (p-&gt;getPlanetType()!=Planet::isPlanet</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       &amp;&amp; p-&gt;getPlanetType()!=Planet::isSta</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">r</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       )</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               p-&gt;setSphereScale(newScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit flagMinorBodyScaleChanged(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Set/Get minor body display scaling factor. This will be queried by all P</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">lanet objects except for the Moon.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void SolarSystem::setMinorBodyScale(double f)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if(minorBodyScale != f)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               minorBodyScale = f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if(flagMinorBodyScale) //update the bodies with the new scal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       foreach(PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if(p == moon) continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               if (p-&gt;getPlanetType()!=Planet::isPlanet</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               &amp;&amp; p-&gt;getPlanetType()!=Plane</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">t::isStar</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               )</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       p-&gt;setSphereScale(minorBodyScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit minorBodyScaleChanged(f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set selected planets by englishName</td><td> </td><td class="right">// Set selected planets by englishName</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setSelected(const QString&amp; englishName)</td><td> </td><td class="right">void SolarSystem::setSelected(const QString&amp; englishName)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setSelected(searchByEnglishName(englishName));</td><td> </td><td class="right">       setSelected(searchByEnglishName(englishName));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the list of all the planet english names</td><td> </td><td class="right">// Get the list of all the planet english names</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QStringList SolarSystem::getAllPlanetEnglishNames() const</td><td> </td><td class="right">QStringList SolarSystem::getAllPlanetEnglishNames() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList res;</td><td> </td><td class="right">       QStringList res;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l23" /><small>skipping to change at</small><em> line 1935</em></th><th> </th><th><a name="part-r23" /><small>skipping to change at</small><em> line 2129</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QStringList SolarSystem::getAllPlanetLocalizedNames() const</td><td> </td><td class="right">QStringList SolarSystem::getAllPlanetLocalizedNames() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList res;</td><td> </td><td class="right">       QStringList res;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (const PlanetP&amp; p, systemPlanets)</td><td> </td><td class="right">       foreach (const PlanetP&amp; p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               res.append(p-&gt;nameI18);</td><td> </td><td class="right">               res.append(p-&gt;nameI18);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return res;</td><td> </td><td class="right">       return res;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0120" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// GZ TODO: This could be modified to only delete&amp;reload the minor objects.
 For now, we really load both parts again like in the 0.10?-0.15 series.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::reloadPlanets()</td><td> </td><td class="right">void SolarSystem::reloadPlanets()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Save flag states</td><td> </td><td class="right">       // Save flag states</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagScaleMoon = getFlagMoonScale();</td><td> </td><td class="right">       bool flagScaleMoon = getFlagMoonScale();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float moonScale = getMoonScale();</td><td> </td><td class="right">       float moonScale = getMoonScale();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0121" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">bool flagScaleMinorBodies=getFlagMinorBodyScale();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float minorScale= getMinorBodyScale();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagPlanets = getFlagPlanets();</td><td> </td><td class="right">       bool flagPlanets = getFlagPlanets();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagHints = getFlagHints();</td><td> </td><td class="right">       bool flagHints = getFlagHints();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagLabels = getFlagLabels();</td><td> </td><td class="right">       bool flagLabels = getFlagLabels();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagOrbits = getFlagOrbits();</td><td> </td><td class="right">       bool flagOrbits = getFlagOrbits();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagNative = getFlagNativePlanetNames();</td><td> </td><td class="right">       bool flagNative = getFlagNativePlanetNames();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool flagTrans = getFlagTranslatedNames();</td><td> </td><td class="right">       bool flagTrans = getFlagTranslatedNames();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool hasSelection = false;</td><td> </td><td class="right">       bool hasSelection = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Save observer location (fix for LP bug # 969211)</td><td> </td><td class="right">       // Save observer location (fix for LP bug # 969211)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TODO: This can probably be done better with a better understandin
g of StelObserver --BM</td><td> </td><td class="right">       // TODO: This can probably be done better with a better understandin
g of StelObserver --BM</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l24" /><small>skipping to change at</small><em> line 1964</em></th><th> </th><th><a name="part-r24" /><small>skipping to change at</small><em> line 2161</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Whether any planet are selected? Save the current selection...</td><td> </td><td class="right">       // Whether any planet are selected? Save the current selection...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; selectedObject = objMgr-&gt;getSelectedObject(
"Planet");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; selectedObject = objMgr-&gt;getSelectedObject(
"Planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!selectedObject.isEmpty())</td><td> </td><td class="right">       if (!selectedObject.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // ... unselect current planet.</td><td> </td><td class="right">               // ... unselect current planet.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               hasSelection = true;</td><td> </td><td class="right">               hasSelection = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               objMgr-&gt;unSelect();</td><td> </td><td class="right">               objMgr-&gt;unSelect();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Unload all Solar System objects</td><td> </td><td class="right">       // Unload all Solar System objects</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       selected.clear();//Release the selected one</td><td> </td><td class="right">       selected.clear();//Release the selected one</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0122" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// GZ TODO in case this methods gets converted to only reload minor </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bodies: Only delete Orbits which are not referenced by some Planet.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (Orbit* orb, orbits)</td><td> </td><td class="right">       foreach (Orbit* orb, orbits)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete orb;</td><td> </td><td class="right">               delete orb;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0123" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               orb = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">               orb = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       orbits.clear();</td><td> </td><td class="right">       orbits.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sun.clear();</td><td> </td><td class="right">       sun.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       moon.clear();</td><td> </td><td class="right">       moon.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       earth.clear();</td><td> </td><td class="right">       earth.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::texEarthShadow.clear(); //Loaded in loadPlanets()</td><td> </td><td class="right">       Planet::texEarthShadow.clear(); //Loaded in loadPlanets()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete allTrails;</td><td> </td><td class="right">       delete allTrails;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0124" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       allTrails = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       allTrails = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       foreach (PlanetP p, systemPlanets)</td><td> </td><td class="right">       foreach (PlanetP p, systemPlanets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               p-&gt;satellites.clear();</td><td> </td><td class="right">               p-&gt;satellites.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               p.clear();</td><td> </td><td class="right">               p.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       systemPlanets.clear();</td><td> </td><td class="right">       systemPlanets.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Memory leak? What's the proper way of cleaning shared pointers?</td><td> </td><td class="right">       // Memory leak? What's the proper way of cleaning shared pointers?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Also delete Comet textures (loaded in loadPlanets()</td><td> </td><td class="right">       // Also delete Comet textures (loaded in loadPlanets()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Comet::tailTexture.clear();</td><td> </td><td class="right">       Comet::tailTexture.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Comet::comaTexture.clear();</td><td> </td><td class="right">       Comet::comaTexture.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0125" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // Re-load the ssystem.ini file</td><td> </td><td class="rblock">       // Re-load the ssystem<span class="insert">_major.ini and ssystem_minor</span>.ini file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       loadPlanets();</td><td> </td><td class="right">       loadPlanets();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       computePositions(core-&gt;getJDE());</td><td> </td><td class="right">       computePositions(core-&gt;getJDE());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setSelected("");</td><td> </td><td class="right">       setSelected("");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       recreateTrails();</td><td> </td><td class="right">       recreateTrails();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Restore observer location</td><td> </td><td class="right">       // Restore observer location</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       core-&gt;moveObserverTo(loc, 0., 0.);</td><td> </td><td class="right">       core-&gt;moveObserverTo(loc, 0., 0.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Restore flag states</td><td> </td><td class="right">       // Restore flag states</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagMoonScale(flagScaleMoon);</td><td> </td><td class="right">       setFlagMoonScale(flagScaleMoon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMoonScale(moonScale);</td><td> </td><td class="right">       setMoonScale(moonScale);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0126" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">setFlagMinorBodyScale(flagScaleMinorBodies);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setMinorBodyScale(1.0); // force-reset first to really reach the obj</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ects in the next call.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setMinorBodyScale(minorScale);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPlanets(flagPlanets);</td><td> </td><td class="right">       setFlagPlanets(flagPlanets);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(flagHints);</td><td> </td><td class="right">       setFlagHints(flagHints);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLabels(flagLabels);</td><td> </td><td class="right">       setFlagLabels(flagLabels);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(flagOrbits);</td><td> </td><td class="right">       setFlagOrbits(flagOrbits);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagNativePlanetNames(flagNative);</td><td> </td><td class="right">       setFlagNativePlanetNames(flagNative);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagTranslatedNames(flagTrans);</td><td> </td><td class="right">       setFlagTranslatedNames(flagTrans);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (hasSelection)</td><td> </td><td class="right">       if (hasSelection)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Restore selection...</td><td> </td><td class="right">               // Restore selection...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l25" /><small>skipping to change at</small><em> line 2025</em></th><th> </th><th><a name="part-r25" /><small>skipping to change at</small><em> line 2227</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Restore translations</td><td> </td><td class="right">       // Restore translations</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       updateI18n();</td><td> </td><td class="right">       updateI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit solarSystemDataReloaded();</td><td> </td><td class="right">       emit solarSystemDataReloaded();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set the algorithm for computation of apparent magnitudes for planets in 
case  observer on the Earth</td><td> </td><td class="right">// Set the algorithm for computation of apparent magnitudes for planets in 
case  observer on the Earth</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setApparentMagnitudeAlgorithmOnEarth(QString algorithm)</td><td> </td><td class="right">void SolarSystem::setApparentMagnitudeAlgorithmOnEarth(QString algorithm)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0127" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">getEarth()-&gt;</span>setApparentMagnitudeAlgorithm(algorithm);</td><td> </td><td class="rblock">       <span class="insert">Planet::</span>setApparentMagnitudeAlgorithm(algorithm);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the algorithm used for computation of apparent magnitudes for planet
s in case  observer on the Earth</td><td> </td><td class="right">// Get the algorithm used for computation of apparent magnitudes for planet
s in case  observer on the Earth</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString SolarSystem::getApparentMagnitudeAlgorithmOnEarth() const</td><td> </td><td class="right">QString SolarSystem::getApparentMagnitudeAlgorithmOnEarth() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0128" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return <span class="delete">getEarth()-&gt;</span>getApparentMagnitudeAlgorithmString();</td><td> </td><td class="rblock">       return <span class="insert">Planet::</span>getApparentMagnitudeAlgorithmString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagPermanentOrbits(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagPermanentOrbits(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::permanentDrawingOrbits=b;</td><td> </td><td class="right">       Planet::permanentDrawingOrbits=b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagCustomGrsSettings(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagCustomGrsSettings(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::flagCustomGrsSettings=b;</td><td> </td><td class="right">       Planet::flagCustomGrsSettings=b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l26" /><small>skipping to change at</small><em> line 2192</em></th><th> </th><th><a name="part-r26" /><small>skipping to change at</small><em> line 2394</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       illumination = 1.0 - (AR + Ar) / AS;</td><td> </td><td class="right">                       illumination = 1.0 - (AR + Ar) / AS;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(illumination &lt; final_illumination)</td><td> </td><td class="right">               if(illumination &lt; final_illumination)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       final_illumination = illumination;</td><td> </td><td class="right">                       final_illumination = illumination;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return final_illumination;</td><td> </td><td class="right">       return final_illumination;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0129" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool SolarSystem::removePlanet(QString name)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       PlanetP candidate = searchByEnglishName(name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (!candidate)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qWarning() &lt;&lt; "Cannot remove planet " &lt;&lt; name &lt;&lt; ": Not foun</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">d.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // TODO: In case we want major bodies or Pluto to be deleted, think </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">about proper handling of moons!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //candidate-&gt;satellites.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (candidate-&gt;pType &lt; Planet::isAsteroid)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qWarning() &lt;&lt; "REMOVING MAJOR OBJECT:" &lt;&lt; name;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qWarning() &lt;&lt; "              This is likely not what you wan</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">t, but will be accepted.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               Q_ASSERT(0);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Orbit* orbPtr=(Orbit*) candidate-&gt;orbitPtr;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (orbPtr)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               orbits.removeOne(orbPtr);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       systemPlanets.removeOne(candidate);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       candidate.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 129 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>160 lines changed or deleted</i></th><th><i> </i></th><th><i>403 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
