<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-80-generic #101-Ubuntu SMP Thu Jun 8 15:35:06 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelMainView.cpp - StelMainView.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelMainView.cpp&nbsp;</th><th> </th><th>&nbsp;StelMainView.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 32</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 32</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelGui.hpp"</td><td> </td><td class="right">#include "StelGui.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelActionMgr.hpp"</td><td> </td><td class="right">#include "StelActionMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelOpenGL.hpp"</td><td> </td><td class="right">#include "StelOpenGL.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include "StelOpenGLArray.hpp"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDir&gt;</td><td> </td><td class="right">#include &lt;QDir&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef USE_OLD_QGLWIDGET</td><td> </td><td class="right">#ifdef USE_OLD_QGLWIDGET</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QGLWidget&gt;</td><td> </td><td class="right">#include &lt;QGLWidget&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLWidget&gt;</td><td> </td><td class="right">#include &lt;QOpenGLWidget&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QApplication&gt;</td><td> </td><td class="right">#include &lt;QApplication&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDesktopWidget&gt;</td><td> </td><td class="right">#include &lt;QDesktopWidget&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 59</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 60</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMoveEvent&gt;</td><td> </td><td class="right">#include &lt;QMoveEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QPluginLoader&gt;</td><td> </td><td class="right">#include &lt;QPluginLoader&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QScreen&gt;</td><td> </td><td class="right">#include &lt;QScreen&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QtPlugin&gt;</td><td> </td><td class="right">#include &lt;QtPlugin&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QThread&gt;</td><td> </td><td class="right">#include &lt;QThread&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QTimer&gt;</td><td> </td><td class="right">#include &lt;QTimer&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QWidget&gt;</td><td> </td><td class="right">#include &lt;QWidget&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QWindow&gt;</td><td> </td><td class="right">#include &lt;QWindow&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMessageBox&gt;</td><td> </td><td class="right">#include &lt;QMessageBox&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QStandardPaths&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef Q_OS_WIN</td><td> </td><td class="right">#ifdef Q_OS_WIN</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;QPinchGesture&gt;</td><td> </td><td class="right">       #include &lt;QPinchGesture&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLShader&gt;</td><td> </td><td class="right">#include &lt;QOpenGLShader&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLShaderProgram&gt;</td><td> </td><td class="right">#include &lt;QOpenGLShaderProgram&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLFramebufferObject&gt;</td><td> </td><td class="right">#include &lt;QOpenGLFramebufferObject&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLPaintDevice&gt;</td><td> </td><td class="right">#include &lt;QOpenGLPaintDevice&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef OPENGL_DEBUG_LOGGING</td><td> </td><td class="right">#ifdef OPENGL_DEBUG_LOGGING</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QOpenGLDebugLogger&gt;</td><td> </td><td class="right">#include &lt;QOpenGLDebugLogger&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;clocale&gt;</td><td> </td><td class="right">#include &lt;clocale&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Initialize static variables</td><td> </td><td class="right">// Initialize static variables</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">StelMainView* StelMainView::singleton = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">StelMainView* StelMainView::singleton = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef USE_OLD_QGLWIDGET</td><td> </td><td class="right">#ifdef USE_OLD_QGLWIDGET</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class StelGLWidget : public QGLWidget</td><td> </td><td class="right">class StelGLWidget : public QGLWidget</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class StelGLWidget : public QOpenGLWidget</td><td> </td><td class="right">class StelGLWidget : public QOpenGLWidget</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelGLWidget(const QSurfaceFormat&amp; fmt, StelMainView* parent)</td><td> </td><td class="right">       StelGLWidget(const QSurfaceFormat&amp; fmt, StelMainView* parent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               :</td><td> </td><td class="right">               :</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 169</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 171</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">private:</td><td> </td><td class="right">private:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMainView* parent;</td><td> </td><td class="right">       StelMainView* parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool initialized;</td><td> </td><td class="right">       bool initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// A custom QGraphicsEffect to apply the night mode on top of the screen.</td><td> </td><td class="right">// A custom QGraphicsEffect to apply the night mode on top of the screen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class NightModeGraphicsEffect : public QGraphicsEffect</td><td> </td><td class="right">class NightModeGraphicsEffect : public QGraphicsEffect</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       NightModeGraphicsEffect(StelMainView* parent = <span class="delete">NULL</span>)</td><td> </td><td class="rblock">       NightModeGraphicsEffect(StelMainView* parent = <span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               : QGraphicsEffect(parent),</td><td> </td><td class="right">               : QGraphicsEffect(parent),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                 parent(parent), fbo(<span class="delete">NULL</span>)</td><td> </td><td class="rblock">                 parent(parent), fbo(<span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Q_ASSERT(parent-&gt;glContext() == QOpenGLContext::currentConte
xt());</td><td> </td><td class="right">               Q_ASSERT(parent-&gt;glContext() == QOpenGLContext::currentConte
xt());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               program = new QOpenGLShaderProgram(this);</td><td> </td><td class="right">               program = new QOpenGLShaderProgram(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString vertexCode =</td><td> </td><td class="right">               QString vertexCode =</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               "attribute highp vec4 a_pos;\n"</td><td> </td><td class="right">                               "attribute highp vec4 a_pos;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               "attribute highp vec2 a_texCoord;\n"</td><td> </td><td class="right">                               "attribute highp vec2 a_texCoord;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               "varying highp   vec2 v_texCoord;\n"</td><td> </td><td class="right">                               "varying highp   vec2 v_texCoord;\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               "void main(void)\n"</td><td> </td><td class="right">                               "void main(void)\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               "{\n"</td><td> </td><td class="right">                               "{\n"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 224</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 226</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QPaintDevice* paintDevice = painter-&gt;device();</td><td> </td><td class="right">               QPaintDevice* paintDevice = painter-&gt;device();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int mainFBO;</td><td> </td><td class="right">               int mainFBO;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gl-&gt;glGetIntegerv(GL_FRAMEBUFFER_BINDING, &amp;mainFBO);</td><td> </td><td class="right">               gl-&gt;glGetIntegerv(GL_FRAMEBUFFER_BINDING, &amp;mainFBO);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int pixelRatio = paintDevice-&gt;devicePixelRatio();</td><td> </td><td class="right">               int pixelRatio = paintDevice-&gt;devicePixelRatio();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QSize size(paintDevice-&gt;width() * pixelRatio, paintDevice-&gt;h
eight() * pixelRatio);</td><td> </td><td class="right">               QSize size(paintDevice-&gt;width() * pixelRatio, paintDevice-&gt;h
eight() * pixelRatio);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (fbo &amp;&amp; fbo-&gt;size() != size)</td><td> </td><td class="right">               if (fbo &amp;&amp; fbo-&gt;size() != size)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       delete fbo;</td><td> </td><td class="right">                       delete fbo;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       fbo = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">                       fbo = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!fbo)</td><td> </td><td class="right">               if (!fbo)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QOpenGLFramebufferObjectFormat format;</td><td> </td><td class="right">                       QOpenGLFramebufferObjectFormat format;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       format.setAttachment(QOpenGLFramebufferObject::Combi
nedDepthStencil);</td><td> </td><td class="right">                       format.setAttachment(QOpenGLFramebufferObject::Combi
nedDepthStencil);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       format.setInternalTextureFormat(GL_RGBA);</td><td> </td><td class="right">                       format.setInternalTextureFormat(GL_RGBA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fbo = new QOpenGLFramebufferObject(size, format);</td><td> </td><td class="right">                       fbo = new QOpenGLFramebufferObject(size, format);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // we have to use our own paint device</td><td> </td><td class="right">               // we have to use our own paint device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 309</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 311</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QGraphicsScene::keyPressEvent(event);</td><td> </td><td class="right">               QGraphicsScene::keyPressEvent(event);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">private:</td><td> </td><td class="right">private:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMainView* parent;</td><td> </td><td class="right">       StelMainView* parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class StelRootItem : public QGraphicsObject</td><td> </td><td class="right">class StelRootItem : public QGraphicsObject</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       StelRootItem(StelMainView* mainView, QGraphicsItem* parent = <span class="delete">NULL</span>)</td><td> </td><td class="rblock">       StelRootItem(StelMainView* mainView, QGraphicsItem* parent = <span class="insert">Q_NULLP
TR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               : QGraphicsObject(parent), mainView(mainView)</td><td> </td><td class="right">               : QGraphicsObject(parent), mainView(mainView)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlag(QGraphicsItem::ItemClipsToShape);</td><td> </td><td class="right">               setFlag(QGraphicsItem::ItemClipsToShape);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlag(QGraphicsItem::ItemClipsChildrenToShape);</td><td> </td><td class="right">               setFlag(QGraphicsItem::ItemClipsChildrenToShape);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlag(QGraphicsItem::ItemIsFocusable);</td><td> </td><td class="right">               setFlag(QGraphicsItem::ItemIsFocusable);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setAcceptHoverEvents(true);</td><td> </td><td class="right">               setAcceptHoverEvents(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef Q_OS_WIN</td><td> </td><td class="right">#ifdef Q_OS_WIN</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setAcceptTouchEvents(true);</td><td> </td><td class="right">               setAcceptTouchEvents(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 523</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 525</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QRectF rect;</td><td> </td><td class="right">       QRectF rect;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double previousPaintTime;</td><td> </td><td class="right">       double previousPaintTime;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelMainView* mainView;</td><td> </td><td class="right">       StelMainView* mainView;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Initialize and render Stellarium gui.</td><td> </td><td class="right">//! Initialize and render Stellarium gui.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class StelGuiItem : public QGraphicsWidget</td><td> </td><td class="right">class StelGuiItem : public QGraphicsWidget</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       StelGuiItem(QGraphicsItem* parent = <span class="delete">NULL</span>)</td><td> </td><td class="rblock">       StelGuiItem(QGraphicsItem* parent = <span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               : QGraphicsWidget(parent)</td><td> </td><td class="right">               : QGraphicsWidget(parent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelApp::getInstance().getGui()-&gt;init(this);</td><td> </td><td class="right">               StelApp::getInstance().getGui()-&gt;init(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">protected:</td><td> </td><td class="right">protected:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void resizeEvent(QGraphicsSceneResizeEvent* event) Q_DECL_OVERRIDE</td><td> </td><td class="right">       void resizeEvent(QGraphicsSceneResizeEvent* event) Q_DECL_OVERRIDE</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Q_UNUSED(event);</td><td> </td><td class="right">               Q_UNUSED(event);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //widget-&gt;setGeometry(0, 0, size().width(), size().height())
;</td><td> </td><td class="right">               //widget-&gt;setGeometry(0, 0, size().width(), size().height())
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelApp::getInstance().getGui()-&gt;forceRefreshGui();</td><td> </td><td class="right">               StelApp::getInstance().getGui()-&gt;forceRefreshGui();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">private:</td><td> </td><td class="right">private:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //QGraphicsWidget *widget;</td><td> </td><td class="right">       //QGraphicsWidget *widget;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // void onSizeChanged();</td><td> </td><td class="right">       // void onSizeChanged();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelMainView::StelMainView(QSettings* settings)</td><td> </td><td class="right">StelMainView::StelMainView(QSettings* settings)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       : QGraphicsView(),</td><td> </td><td class="right">       : QGraphicsView(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">         <span class="delete">guiItem(NULL),</span></td><td> </td><td class="rblock">         <span class="insert">guiItem(Q_NULLPTR),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">         gui(NULL),</span></td><td> </td><td class="rblock"><span class="insert">         gui(Q_NULLPTR),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">         stelApp(NULL),</span></td><td> </td><td class="rblock"><span class="insert">         stelApp(Q_NULLPTR),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         updateQueued(false),</td><td> </td><td class="right">         updateQueued(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         flagInvertScreenShotColors(false),</td><td> </td><td class="right">         flagInvertScreenShotColors(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         flagOverwriteScreenshots(false),</td><td> </td><td class="right">         flagOverwriteScreenshots(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         screenShotPrefix("stellarium-"),</td><td> </td><td class="right">         screenShotPrefix("stellarium-"),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         screenShotDir(""),</td><td> </td><td class="right">         screenShotDir(""),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">         cursorTimeout(-1.f), flagCursorTimeout(false), maxfps(10000.f)</td><td> </td><td class="right">         cursorTimeout(-1.f), flagCursorTimeout(false), maxfps(10000.f)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setAttribute(Qt::WA_OpaquePaintEvent);</td><td> </td><td class="right">       setAttribute(Qt::WA_OpaquePaintEvent);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setAutoFillBackground(false);</td><td> </td><td class="right">       setAutoFillBackground(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 751</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 753</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Should be check of requirements disabled?</td><td> </td><td class="right">       // Should be check of requirements disabled?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (conf-&gt;value("main/check_requirements", true).toBool())</td><td> </td><td class="right">       if (conf-&gt;value("main/check_requirements", true).toBool())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Find out lots of debug info about supported version of Op
enGL and vendor/renderer.</td><td> </td><td class="right">               // Find out lots of debug info about supported version of Op
enGL and vendor/renderer.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               processOpenGLdiagnosticsAndWarnings(conf, QOpenGLContext::cu
rrentContext());</td><td> </td><td class="right">               processOpenGLdiagnosticsAndWarnings(conf, QOpenGLContext::cu
rrentContext());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //create and initialize main app</td><td> </td><td class="right">       //create and initialize main app</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp = new StelApp(this);</td><td> </td><td class="right">       stelApp = new StelApp(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp-&gt;setGui(gui);</td><td> </td><td class="right">       stelApp-&gt;setGui(gui);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                           </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp-&gt;init(conf);</td><td> </td><td class="right">       stelApp-&gt;init(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">//setup StelOpenGLArray global state</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelOpenGLArray::initGL();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //this makes sure the app knows how large the window is</td><td> </td><td class="right">       //this makes sure the app knows how large the window is</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(stelScene,SIGNAL(sceneRectChanged(QRectF)),stelApp,SLOT(glWi
ndowHasBeenResized(QRectF)));</td><td> </td><td class="right">       connect(stelScene,SIGNAL(sceneRectChanged(QRectF)),stelApp,SLOT(glWi
ndowHasBeenResized(QRectF)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //also immediately set the current values</td><td> </td><td class="right">       //also immediately set the current values</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp-&gt;glWindowHasBeenResized(stelScene-&gt;sceneRect());</td><td> </td><td class="right">       stelApp-&gt;glWindowHasBeenResized(stelScene-&gt;sceneRect());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelActionMgr *actionMgr = stelApp-&gt;getStelActionManager();</td><td> </td><td class="right">       StelActionMgr *actionMgr = stelApp-&gt;getStelActionManager();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionMgr-&gt;addAction("actionSave_Screenshot_Global", N_("Miscellaneo
us"), N_("Save screenshot"), this, "saveScreenShot()", "Ctrl+S");</td><td> </td><td class="right">       actionMgr-&gt;addAction("actionSave_Screenshot_Global", N_("Miscellaneo
us"), N_("Save screenshot"), this, "saveScreenShot()", "Ctrl+S");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       actionMgr-&gt;addAction("actionReload_Shaders", N_("Miscellaneous"), N_
("Reload shaders (for development)"), this, "reloadShaders()", "Ctrl+R, P")
;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionMgr-&gt;addAction("actionSet_Full_Screen_Global", N_("Display Opt
ions"), N_("Full-screen mode"), this, "fullScreen", "F11");</td><td> </td><td class="right">       actionMgr-&gt;addAction("actionSet_Full_Screen_Global", N_("Display Opt
ions"), N_("Full-screen mode"), this, "fullScreen", "F11");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter::initGLShaders();</td><td> </td><td class="right">       StelPainter::initGLShaders();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       guiItem = new StelGuiItem(rootItem);</td><td> </td><td class="right">       guiItem = new StelGuiItem(rootItem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       scene()-&gt;addItem(rootItem);</td><td> </td><td class="right">       scene()-&gt;addItem(rootItem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //set the default focus to the sky</td><td> </td><td class="right">       //set the default focus to the sky</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       focusSky();</td><td> </td><td class="right">       focusSky();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       nightModeEffect = new NightModeGraphicsEffect(this);</td><td> </td><td class="right">       nightModeEffect = new NightModeGraphicsEffect(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       updateNightModeProperty(StelApp::getInstance().getVisionModeNight())
;</td><td> </td><td class="right">       updateNightModeProperty(StelApp::getInstance().getVisionModeNight())
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 813</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 817</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int x = conf-&gt;value("video/screen_x", 0).toInt();</td><td> </td><td class="right">               int x = conf-&gt;value("video/screen_x", 0).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int y = conf-&gt;value("video/screen_y", 0).toInt();</td><td> </td><td class="right">               int y = conf-&gt;value("video/screen_y", 0).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               move(x + screenGeom.x(), y + screenGeom.y());</td><td> </td><td class="right">               move(x + screenGeom.x(), y + screenGeom.y());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagInvertScreenShotColors = conf-&gt;value("main/invert_screenshots_co
lors", false).toBool();</td><td> </td><td class="right">       flagInvertScreenShotColors = conf-&gt;value("main/invert_screenshots_co
lors", false).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagCursorTimeout(conf-&gt;value("gui/flag_mouse_cursor_timeout", fa
lse).toBool());</td><td> </td><td class="right">       setFlagCursorTimeout(conf-&gt;value("gui/flag_mouse_cursor_timeout", fa
lse).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCursorTimeout(conf-&gt;value("gui/mouse_cursor_timeout", 10.f).toFlo
at());</td><td> </td><td class="right">       setCursorTimeout(conf-&gt;value("gui/mouse_cursor_timeout", 10.f).toFlo
at());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMaxFps(conf-&gt;value("video/maximum_fps",10000.f).toFloat());</td><td> </td><td class="right">       setMaxFps(conf-&gt;value("video/maximum_fps",10000.f).toFloat());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setMinFps(conf-&gt;value("video/minimum_fps",10000.f).toFloat());</td><td> </td><td class="right">       setMinFps(conf-&gt;value("video/minimum_fps",10000.f).toFloat());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagUseButtonsBackground(conf-&gt;value("gui/flag_show_buttons_backg
round", true).toBool());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // XXX: This should be done in StelApp::init(), unfortunately for th
e moment we need to init the gui before the</td><td> </td><td class="right">       // XXX: This should be done in StelApp::init(), unfortunately for th
e moment we need to init the gui before the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // plugins, because the gui creates the QActions needed by some plug
ins.</td><td> </td><td class="right">       // plugins, because the gui creates the QActions needed by some plug
ins.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp-&gt;initPlugIns();</td><td> </td><td class="right">       stelApp-&gt;initPlugIns();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The script manager can only be fully initialized after the plugin
s have loaded.</td><td> </td><td class="right">       // The script manager can only be fully initialized after the plugin
s have loaded.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp-&gt;initScriptMgr();</td><td> </td><td class="right">       stelApp-&gt;initScriptMgr();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Set the global stylesheet, this is only useful for the tooltips.</td><td> </td><td class="right">       // Set the global stylesheet, this is only useful for the tooltips.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelGui* gui = dynamic_cast&lt;StelGui*&gt;(stelApp-&gt;getGui());</td><td> </td><td class="right">       StelGui* gui = dynamic_cast&lt;StelGui*&gt;(stelApp-&gt;getGui());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (gui!=<span class="delete">NULL</span>)</td><td> </td><td class="rblock">       if (gui!=<span class="insert">Q_NULLPTR</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setStyleSheet(gui-&gt;getStelStyle().qtStyleSheet);</td><td> </td><td class="right">               setStyleSheet(gui-&gt;getStelStyle().qtStyleSheet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(stelApp, SIGNAL(visionNightModeChanged(bool)), this, SLOT(up
dateNightModeProperty(bool)));</td><td> </td><td class="right">       connect(stelApp, SIGNAL(visionNightModeChanged(bool)), this, SLOT(up
dateNightModeProperty(bool)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // I doubt this will have any effect on framerate, but may cause pro
blems elsewhere?</td><td> </td><td class="right">       // I doubt this will have any effect on framerate, but may cause pro
blems elsewhere?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QThread::currentThread()-&gt;setPriority(QThread::HighestPriority);</td><td> </td><td class="right">       QThread::currentThread()-&gt;setPriority(QThread::HighestPriority);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifndef NDEBUG</td><td> </td><td class="right">#ifndef NDEBUG</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get an overview of module callOrders</td><td> </td><td class="right">       // Get an overview of module callOrders</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (qApp-&gt;property("verbose")==true)</td><td> </td><td class="right">       if (qApp-&gt;property("verbose")==true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelApp::getInstance().dumpModuleActionPriorities(StelModule
::ActionDraw);</td><td> </td><td class="right">               StelApp::getInstance().dumpModuleActionPriorities(StelModule
::ActionDraw);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 849</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 854</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::updateNightModeProperty(bool b)</td><td> </td><td class="right">void StelMainView::updateNightModeProperty(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // So that the bottom bar tooltips get properly rendered in night mo
de.</td><td> </td><td class="right">       // So that the bottom bar tooltips get properly rendered in night mo
de.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setProperty("nightMode", b);</td><td> </td><td class="right">       setProperty("nightMode", b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       nightModeEffect-&gt;setEnabled(b);</td><td> </td><td class="right">       nightModeEffect-&gt;setEnabled(b);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelMainView::reloadShaders()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //make sure GL context is bound</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       glContextMakeCurrent();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       emit reloadShadersRequested();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// This is a series of various diagnostics based on "bugs" reported for 0.1
3.0 and 0.13.1.</td><td> </td><td class="right">// This is a series of various diagnostics based on "bugs" reported for 0.1
3.0 and 0.13.1.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Almost all can be traced to insufficient driver level.</td><td> </td><td class="right">// Almost all can be traced to insufficient driver level.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// No changes of OpenGL state is done here.</td><td> </td><td class="right">// No changes of OpenGL state is done here.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// If problems are detected, warn the user one time, but continue. Warning 
panel will be suppressed on next start.</td><td> </td><td class="right">// If problems are detected, warn the user one time, but continue. Warning 
panel will be suppressed on next start.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Work in progress, as long as we get reports about bad systems or until O
penGL startup is finalized and safe.</td><td> </td><td class="right">// Work in progress, as long as we get reports about bad systems or until O
penGL startup is finalized and safe.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Several tests do not apply to MacOS X.</td><td> </td><td class="right">// Several tests do not apply to MacOS X.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::processOpenGLdiagnosticsAndWarnings(QSettings *conf, QOp
enGLContext *context) const</td><td> </td><td class="right">void StelMainView::processOpenGLdiagnosticsAndWarnings(QSettings *conf, QOp
enGLContext *context) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef Q_OS_MAC</td><td> </td><td class="right">#ifdef Q_OS_MAC</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_UNUSED(conf);</td><td> </td><td class="right">       Q_UNUSED(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1205</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1217</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "dumpOpenGLdiagnostics(): No OpenGL context";</td><td> </td><td class="right">               qDebug() &lt;&lt; "dumpOpenGLdiagnostics(): No OpenGL context";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::deinit()</td><td> </td><td class="right">void StelMainView::deinit()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glContextMakeCurrent();</td><td> </td><td class="right">       glContextMakeCurrent();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       deinitGL();</td><td> </td><td class="right">       deinitGL();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete stelApp;</td><td> </td><td class="right">       delete stelApp;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       stelApp = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       stelApp = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Update the translated title</td><td> </td><td class="right">// Update the translated title</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::initTitleI18n()</td><td> </td><td class="right">void StelMainView::initTitleI18n()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString appNameI18n = q_("Stellarium %1").arg(StelUtils::getApplicat
ionVersion());</td><td> </td><td class="right">       QString appNameI18n = q_("Stellarium %1").arg(StelUtils::getApplicat
ionVersion());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setWindowTitle(appNameI18n);</td><td> </td><td class="right">       setWindowTitle(appNameI18n);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::setFullScreen(bool b)</td><td> </td><td class="right">void StelMainView::setFullScreen(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1331</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1343</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Delete openGL textures (to call before the GLContext disappears)</td><td> </td><td class="right">//! Delete openGL textures (to call before the GLContext disappears)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::deinitGL()</td><td> </td><td class="right">void StelMainView::deinitGL()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //fix for bug 1628072 caused by QTBUG-56798</td><td> </td><td class="right">       //fix for bug 1628072 caused by QTBUG-56798</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifndef QT_NO_DEBUG</td><td> </td><td class="right">#ifndef QT_NO_DEBUG</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelOpenGL::clearGLErrors();</td><td> </td><td class="right">       StelOpenGL::clearGLErrors();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelApp-&gt;deinit();</td><td> </td><td class="right">       stelApp-&gt;deinit();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete gui;</td><td> </td><td class="right">       delete gui;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       gui = <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       gui = <span class="insert">Q_NULLPTR</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMainView::saveScreenShot(const QString&amp; filePrefix, const QString&amp;
 saveDir, const bool overwrite)</td><td> </td><td class="right">void StelMainView::saveScreenShot(const QString&amp; filePrefix, const QString&amp;
 saveDir, const bool overwrite)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       screenShotPrefix = filePrefix;</td><td> </td><td class="right">       screenShotPrefix = filePrefix;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       screenShotDir = saveDir;</td><td> </td><td class="right">       screenShotDir = saveDir;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagOverwriteScreenshots=overwrite;</td><td> </td><td class="right">       flagOverwriteScreenshots=overwrite;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit(screenshotRequested());</td><td> </td><td class="right">       emit(screenshotRequested());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1366</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1378</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       stelScene-&gt;render(&amp;painter);</td><td> </td><td class="right">       stelScene-&gt;render(&amp;painter);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       painter.end();</td><td> </td><td class="right">       painter.end();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QImage im = fbObj-&gt;toImage();</td><td> </td><td class="right">       QImage im = fbObj-&gt;toImage();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fbObj-&gt;release();</td><td> </td><td class="right">       fbObj-&gt;release();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete fbObj;</td><td> </td><td class="right">       delete fbObj;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagInvertScreenShotColors)</td><td> </td><td class="right">       if (flagInvertScreenShotColors)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               im.invertPixels();</td><td> </td><td class="right">               im.invertPixels();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">if (StelFileMgr::getScreenshotDir().isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               qWarning() &lt;&lt; "Oops, the directory for screenshots is not se</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">t! Let's try create and set it...";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // Create a directory for screenshots if main/screenshot_dir</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> option is unset and user do screenshot at the moment!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QString screenshotDirSuffix = "/Stellarium";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QString screenshotDir;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (!QStandardPaths::standardLocations(QStandardPaths::Pictu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">resLocation).isEmpty())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       screenshotDir = QStandardPaths::standardLocations(QS</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tandardPaths::PicturesLocation)[0].append(screenshotDirSuffix);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       screenshotDir = StelFileMgr::getUserDir().append(scr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eenshotDirSuffix);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               try</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       StelFileMgr::setScreenshotDir(screenshotDir);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       StelApp::getInstance().getSettings()-&gt;setValue("main</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">/screenshot_dir", screenshotDir);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               catch (std::runtime_error &amp;e)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       qDebug("Error: cannot create screenshot directory: %</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">s", e.what());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (screenShotDir == "")</td><td> </td><td class="right">       if (screenShotDir == "")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               shotDir = QFileInfo(StelFileMgr::getScreenshotDir());</td><td> </td><td class="right">               shotDir = QFileInfo(StelFileMgr::getScreenshotDir());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               shotDir = QFileInfo(screenShotDir);</td><td> </td><td class="right">               shotDir = QFileInfo(screenShotDir);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!shotDir.isDir())</td><td> </td><td class="right">       if (!shotDir.isDir())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "ERROR requested screenshot directory is not a
 directory: " &lt;&lt; QDir::toNativeSeparators(shotDir.filePath());</td><td> </td><td class="right">               qWarning() &lt;&lt; "ERROR requested screenshot directory is not a
 directory: " &lt;&lt; QDir::toNativeSeparators(shotDir.filePath());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 18 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>13 lines changed or deleted</i></th><th><i> </i></th><th><i>54 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
