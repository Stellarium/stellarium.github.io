<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: GridLinesMgr.cpp - GridLinesMgr.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;GridLinesMgr.cpp&nbsp;</th><th> </th><th>&nbsp;GridLinesMgr.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 23</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 23</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * GNU General Public License for more details.</td><td> </td><td class="right"> * GNU General Public License for more details.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * You should have received a copy of the GNU General Public License</td><td> </td><td class="right"> * You should have received a copy of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * along with this program; if not, write to the Free Software</td><td> </td><td class="right"> * along with this program; if not, write to the Free Software</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td> </td><td class="right"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;set&gt;</td><td> </td><td class="right">#include &lt;set&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QFontMetrics&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QtOpenGL&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "GridLinesMgr.hpp"</td><td> </td><td class="right">#include "GridLinesMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMovementMgr.hpp"</td><td> </td><td class="right">#include "StelMovementMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelNavigator.hpp"</td><td> </td><td class="right">#include "StelNavigator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLoadingBar.hpp"</td><td> </td><td class="right">#include "StelLoadingBar.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFader.hpp"</td><td> </td><td class="right">#include "StelFader.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelFontMgr.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelFont.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelStyle.hpp"</td><td> </td><td class="right">#include "StelStyle.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! @class SkyGrid</td><td> </td><td class="right">//! @class SkyGrid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Class which manages a grid to display in the sky.</td><td> </td><td class="right">//! Class which manages a grid to display in the sky.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! TODO needs support for DMS/DMS labelling, not only HMS/DMS</td><td> </td><td class="right">//! TODO needs support for DMS/DMS labelling, not only HMS/DMS</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class SkyGrid</td><td> </td><td class="right">class SkyGrid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Create and precompute positions of a SkyGrid</td><td> </td><td class="right">       // Create and precompute positions of a SkyGrid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SkyGrid(StelCore::FrameType frame);</td><td> </td><td class="right">       SkyGrid(StelCore::FrameType frame);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    virtual ~SkyGrid();</td><td> </td><td class="rblock">    <span class="insert">   </span>virtual ~SkyGrid();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void draw(const StelCore* prj) const;</td><td> </td><td class="right">       void draw(const StelCore* prj) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setFontSize(double newFontSize);</td><td> </td><td class="right">       void setFontSize(double newFontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setColor(const Vec3f&amp; c) {color = c;}</td><td> </td><td class="right">       void setColor(const Vec3f&amp; c) {color = c;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const Vec3f&amp; getColor() {return color;}</td><td> </td><td class="right">       const Vec3f&amp; getColor() {return color;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void update(double deltaTime) {fader.update((int)(deltaTime*1000));}</td><td> </td><td class="right">       void update(double deltaTime) {fader.update((int)(deltaTime*1000));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setFadeDuration(float duration) {fader.setDuration((int)(durati
on*1000.f));}</td><td> </td><td class="right">       void setFadeDuration(float duration) {fader.setDuration((int)(durati
on*1000.f));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setFlagshow(bool b){fader = b;}</td><td> </td><td class="right">       void setFlagshow(bool b){fader = b;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool getFlagshow(void) const {return fader;}</td><td> </td><td class="right">       bool getFlagshow(void) const {return fader;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">private:</td><td> </td><td class="right">private:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f color;</td><td> </td><td class="right">       Vec3f color;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore::FrameType frameType;</td><td> </td><td class="right">       StelCore::FrameType frameType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">double fontSize;</span></td><td> </td><td class="rblock">       <span class="insert">QFont</span> font;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       StelFont&amp;</span> font;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       LinearFader fader;</td><td> </td><td class="right">       LinearFader fader;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! @class SkyLine</td><td> </td><td class="right">//! @class SkyLine</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Class which manages a line to display around the sky like the ecliptic 
line.</td><td> </td><td class="right">//! Class which manages a line to display around the sky like the ecliptic 
line.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">class SkyLine</td><td> </td><td class="right">class SkyLine</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">public:</td><td> </td><td class="right">public:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       enum SKY_LINE_TYPE</td><td> </td><td class="right">       enum SKY_LINE_TYPE</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               EQUATOR,</td><td> </td><td class="right">               EQUATOR,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ECLIPTIC,</td><td> </td><td class="right">               ECLIPTIC,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               MERIDIAN</td><td> </td><td class="right">               MERIDIAN</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Create and precompute positions of a SkyGrid</td><td> </td><td class="right">       // Create and precompute positions of a SkyGrid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SkyLine(SKY_LINE_TYPE _line_type = EQUATOR);</td><td> </td><td class="right">       SkyLine(SKY_LINE_TYPE _line_type = EQUATOR);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    virtual ~SkyLine();</td><td> </td><td class="rblock">    <span class="insert">   </span>virtual ~SkyLine();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void draw(StelCore* core) const;</td><td> </td><td class="right">       void draw(StelCore* core) const;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setColor(const Vec3f&amp; c) {color = c;}</td><td> </td><td class="right">       void setColor(const Vec3f&amp; c) {color = c;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const Vec3f&amp; getColor() {return color;}</td><td> </td><td class="right">       const Vec3f&amp; getColor() {return color;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void update(double deltaTime) {fader.update((int)(deltaTime*1000));}</td><td> </td><td class="right">       void update(double deltaTime) {fader.update((int)(deltaTime*1000));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setFadeDuration(float duration) {fader.setDuration((int)(durati
on*1000.f));}</td><td> </td><td class="right">       void setFadeDuration(float duration) {fader.setDuration((int)(durati
on*1000.f));}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setFlagshow(bool b){fader = b;}</td><td> </td><td class="right">       void setFlagshow(bool b){fader = b;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool getFlagshow(void) const {return fader;}</td><td> </td><td class="right">       bool getFlagshow(void) const {return fader;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       void setFontSize(double newSize);</td><td> </td><td class="right">       void setFontSize(double newSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">private:</td><td> </td><td class="right">private:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       SKY_LINE_TYPE line_type;</td><td> </td><td class="right">       SKY_LINE_TYPE line_type;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f color;</td><td> </td><td class="right">       Vec3f color;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore::FrameType frameType;</td><td> </td><td class="right">       StelCore::FrameType frameType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       LinearFader fader;</td><td> </td><td class="right">       LinearFader fader;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">double fontSize;</span></td><td> </td><td class="rblock">       <span class="insert">QFont</span> font;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       StelFont&amp;</span> font;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString label;</td><td> </td><td class="right">       QString label;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// rms added color as parameter</td><td> </td><td class="right">// rms added color as parameter</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">SkyGrid::SkyGrid(StelCore::FrameType frame) : color(0.2,0.2,0.2), frameType</td><td> </td><td class="rblock">SkyGrid::SkyGrid(StelCore::FrameType frame) : color(0.2,0.2,0.2), frameType</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(frame), fontSize(12),</span></td><td> </td><td class="rblock"><span class="insert">(frame)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       font(StelApp::getInstance().getFontManager().getStandardFont(StelApp</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">::getInstance().getLocaleMgr().getAppLanguage(), fontSize))</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       font.setPixelSize(12);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SkyGrid::~SkyGrid()</td><td> </td><td class="right">SkyGrid::~SkyGrid()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SkyGrid::setFontSize(double newFontSize)</td><td> </td><td class="right">void SkyGrid::setFontSize(double newFontSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">fontSize = newFontSize;</span></td><td> </td><td class="rblock">       <span class="insert">font.setPixelSize(newFontSize);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       font = StelApp::getInstance().getFontManager().getStandardFont(StelA</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">pp::getInstance().getLocaleMgr().getAppLanguage(), fontSize);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Conversion into mas = milli arcsecond</td><td> </td><td class="right">// Conversion into mas = milli arcsecond</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static const double RADIAN_MAS = 180./M_PI*1000.*60.*60.;</td><td> </td><td class="right">static const double RADIAN_MAS = 180./M_PI*1000.*60.*60.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static const double DEGREE_MAS = 1000.*60.*60.;</td><td> </td><td class="right">static const double DEGREE_MAS = 1000.*60.*60.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Step sizes in arcsec</td><td> </td><td class="right">// Step sizes in arcsec</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static const double STEP_SIZES_DMS[] = {0.05, 0.2, 1., 5., 10., 60., 300., 
600., 1200., 3600., 3600.*5., 3600.*10.};</td><td> </td><td class="right">static const double STEP_SIZES_DMS[] = {0.05, 0.2, 1., 5., 10., 60., 300., 
600., 1200., 3600., 3600.*5., 3600.*10.};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static const double STEP_SIZES_HMS[] = {0.05, 0.2, 1.5, 7.5, 15., 15.*5., 1
5.*10., 15.*60., 15.*60.*5., 15.*60*10., 15.*60*60};</td><td> </td><td class="right">static const double STEP_SIZES_HMS[] = {0.05, 0.2, 1.5, 7.5, 15., 15.*5., 1
5.*10., 15.*60., 15.*60.*5., 15.*60*10., 15.*60*60};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 150</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 147</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (unsigned int i=0;i&lt;11;++i)</td><td> </td><td class="right">       for (unsigned int i=0;i&lt;11;++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (STEP_SIZES_HMS[i]&gt;minSizeArcsec)</td><td> </td><td class="right">               if (STEP_SIZES_HMS[i]&gt;minSizeArcsec)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return STEP_SIZES_HMS[i]/3600.;</td><td> </td><td class="right">                       return STEP_SIZES_HMS[i]/3600.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 15.;</td><td> </td><td class="right">       return 15.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct ViewportEdgeIntersectCallbackData</td><td> </td><td class="right">struct ViewportEdgeIntersectCallbackData</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">ViewportEdgeIntersectCallbackData(const StelPainter&amp;</span> p) : <span class="delete">sPainter(p</span></td><td> </td><td class="rblock">       <span class="insert">ViewportEdgeIntersectCallbackData(StelPainter*</span> p) : <span class="insert">sPainter(p)</span> {;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)</span> {;}</td><td> </td><td class="rblock">       <span class="insert">StelPainter*</span> sPainter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">const StelPainter&amp;</span> sPainter;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">StelFont* font;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec4f textColor;</td><td> </td><td class="right">       Vec4f textColor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString text;           // Label to display at the intersection of t
he lines and screen side</td><td> </td><td class="right">       QString text;           // Label to display at the intersection of t
he lines and screen side</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double raAngle;         // Used for meridians</td><td> </td><td class="right">       double raAngle;         // Used for meridians</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelCore::FrameType frameType;</td><td> </td><td class="right">       StelCore::FrameType frameType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Callback which draws the label of the grid</td><td> </td><td class="right">// Callback which draws the label of the grid</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void viewportEdgeIntersectCallback(const Vec3d&amp; screenPos, const Vec3d&amp; dir
ection, <span class="delete">const </span>void* userData)</td><td> </td><td class="rblock">void viewportEdgeIntersectCallback(const Vec3d&amp; screenPos, const Vec3d&amp; dir
ection, void* userData)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">const ViewportEdgeIntersectCallbackData* d = static_cast&lt;const Viewp
ortEdgeInter</span>sectCallbackData*&gt;(userData);</td><td> </td><td class="rblock">       <span class="insert">ViewportEdgeIntersectCallbackData* d = static_cast&lt;ViewportEdgeInter
</span>sectCallbackData*&gt;(userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d direc(direction);</td><td> </td><td class="right">       Vec3d direc(direction);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       direc.normalize();</td><td> </td><td class="right">       direc.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">GLfloat tmpColor[4];</span></td><td> </td><td class="rblock">       <span class="insert">const Vec4f&amp; tmpColor = d-&gt;sPainter-&gt;getColor();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glGetFloatv(GL_CURRENT_COLOR, tmpColor);</span></td><td> </td><td class="rblock"><span class="insert">       d-&gt;sPainter-&gt;setColor(d-&gt;textColor[0], d-&gt;textColor[1], d-&gt;textColor</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glColor4fv(d-&gt;textColor);</span></td><td> </td><td class="rblock"><span class="insert">[2], d-&gt;textColor[3]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString text;</td><td> </td><td class="right">       QString text;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (d-&gt;text.isEmpty())</td><td> </td><td class="right">       if (d-&gt;text.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // We are in the case of meridians, we need to determine whi
ch of the 2 labels (3h or 15h to use)</td><td> </td><td class="right">               // We are in the case of meridians, we need to determine whi
ch of the 2 labels (3h or 15h to use)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d tmpV;</td><td> </td><td class="right">               Vec3d tmpV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               d-&gt;sPainter<span class="delete">.</span>getProjector()-&gt;unProject(screenPos, tmpV);</td><td> </td><td class="rblock">               d-&gt;sPainter<span class="insert">-&gt;</span>getProjector()-&gt;unProject(screenPos, tmpV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double lon, lat;</td><td> </td><td class="right">               double lon, lat;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelUtils::rectToSphe(&amp;lon, &amp;lat, tmpV);</td><td> </td><td class="right">               StelUtils::rectToSphe(&amp;lon, &amp;lat, tmpV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (d-&gt;frameType==StelCore::FrameAltAz)</td><td> </td><td class="right">               if (d-&gt;frameType==StelCore::FrameAltAz)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double raAngle = M_PI-d-&gt;raAngle;</td><td> </td><td class="right">                       double raAngle = M_PI-d-&gt;raAngle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       lon = M_PI-lon;</td><td> </td><td class="right">                       lon = M_PI-lon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (raAngle&lt;0)</td><td> </td><td class="right">                       if (raAngle&lt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               raAngle=+2.*M_PI;</td><td> </td><td class="right">                               raAngle=+2.*M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (lon&lt;0)</td><td> </td><td class="right">                       if (lon&lt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               lon=+2.*M_PI;</td><td> </td><td class="right">                               lon=+2.*M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 223</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 218</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               text = d-&gt;text;</td><td> </td><td class="right">               text = d-&gt;text;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double angleDeg = std::atan2(-direc[1], -direc[0])*180./M_PI;</td><td> </td><td class="right">       double angleDeg = std::atan2(-direc[1], -direc[0])*180./M_PI;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float xshift=6.f;</td><td> </td><td class="right">       float xshift=6.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (angleDeg&gt;90. || angleDeg&lt;-90.)</td><td> </td><td class="right">       if (angleDeg&gt;90. || angleDeg&lt;-90.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               angleDeg+=180.;</td><td> </td><td class="right">               angleDeg+=180.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               xshift=-d-&gt;<span class="delete">font-&gt;getStrLen</span>(text)-6.f;</td><td> </td><td class="rblock">               xshift=-d-&gt;<span class="insert">sPainter-&gt;getFontMetrics().width</span>(text)-6.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">d-&gt;sPainter.drawText(d-&gt;font, screenPos[0],</span> screenPos[1], text, <span class="delete">angl</span></td><td> </td><td class="rblock">       <span class="insert">d-&gt;sPainter-&gt;drawText(screenPos[0],</span> screenPos[1], text, <span class="insert">angleDeg, xs</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eDeg, xshift,</span> 3);</td><td> </td><td class="rblock"><span class="insert">hift,</span> 3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glColor4fv(tmpColor);</span></td><td> </td><td class="rblock">       <span class="insert">d-&gt;sPainter-&gt;setColor(tmpColor[0], tmpColor[1], tmpColor[2], tmpColo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">r[3]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Draw the sky grid in the current frame</td><td> </td><td class="right">//! Draw the sky grid in the current frame</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SkyGrid::draw(const StelCore* core) const</td><td> </td><td class="right">void SkyGrid::draw(const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(frameType);</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(frameType);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!fader.getInterstate())</td><td> </td><td class="right">       if (!fader.getInterstate())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Look for all meridians and parallels intersecting with the disk b
ounding the viewport</td><td> </td><td class="right">       // Look for all meridians and parallels intersecting with the disk b
ounding the viewport</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 255</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 250</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               southPoleInViewport = true;</td><td> </td><td class="right">               southPoleInViewport = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the longitude and latitude resolution at the center of the vi
ewport</td><td> </td><td class="right">       // Get the longitude and latitude resolution at the center of the vi
ewport</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d centerV;</td><td> </td><td class="right">       Vec3d centerV;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       prj-&gt;unProject(prj-&gt;getViewportPosX()+prj-&gt;getViewportWidth()/2, prj
-&gt;getViewportPosY()+prj-&gt;getViewportHeight()/2+1, centerV);</td><td> </td><td class="right">       prj-&gt;unProject(prj-&gt;getViewportPosX()+prj-&gt;getViewportWidth()/2, prj
-&gt;getViewportPosY()+prj-&gt;getViewportHeight()/2+1, centerV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double lon2, lat2;</td><td> </td><td class="right">       double lon2, lat2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelUtils::rectToSphe(&amp;lon2, &amp;lat2, centerV);</td><td> </td><td class="right">       StelUtils::rectToSphe(&amp;lon2, &amp;lat2, centerV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const double gridStepParallelRad = M_PI/180.*getClosestResolutionDMS
(prj-&gt;getPixelPerRadAtCenter());</td><td> </td><td class="right">       const double gridStepParallelRad = M_PI/180.*getClosestResolutionDMS
(prj-&gt;getPixelPerRadAtCenter());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double gridStepMeridianRad;</td><td> </td><td class="right">       double gridStepMeridianRad;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (northPoleInViewport || southPoleInViewport)</td><td> </td><td class="right">       if (northPoleInViewport || southPoleInViewport)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               gridStepMeridianRad = M_PI/180.* 15.;</td><td> </td><td class="rblock">               gridStepMeridianRad = <span class="insert">(frameType==StelCore::FrameAltAz) ? M_
PI/180.* 10. : </span>M_PI/180.* 15.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double closetResLon = (frameType==StelCore::FrameAltAz
) ? getClosestResolutionDMS(prj-&gt;getPixelPerRadAtCenter()*std::cos(lat2)) :
 getClosestResolutionHMS(prj-&gt;getPixelPerRadAtCenter()*std::cos(lat2));</td><td> </td><td class="right">               const double closetResLon = (frameType==StelCore::FrameAltAz
) ? getClosestResolutionDMS(prj-&gt;getPixelPerRadAtCenter()*std::cos(lat2)) :
 getClosestResolutionHMS(prj-&gt;getPixelPerRadAtCenter()*std::cos(lat2));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               gridStepMeridianRad = M_PI/180.* ((northPoleInViewport || so
uthPoleInViewport) ? 15. : closetResLon);</td><td> </td><td class="right">               gridStepMeridianRad = M_PI/180.* ((northPoleInViewport || so
uthPoleInViewport) ? 15. : closetResLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the bounding halfspace</td><td> </td><td class="right">       // Get the bounding halfspace</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const S<span class="delete">telGeom::HalfSpace viewPortHalfSpace = prj-&gt;getBoundingHalfSp
ace</span>();</td><td> </td><td class="rblock">       const S<span class="insert">phericalCap viewPortSphericalCap = prj-&gt;getBoundingSphericalC
ap</span>();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute the first grid starting point. This point is close to the
 center of the screen</td><td> </td><td class="right">       // Compute the first grid starting point. This point is close to the
 center of the screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // and lays at the intersection of a meridien and a parallel</td><td> </td><td class="right">       // and lays at the intersection of a meridien and a parallel</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       lon2 = <span class="delete">gridStepMeridianRad*((int)(lon2/gridStepMeridianRad));</span></td><td> </td><td class="rblock">       lon2 = <span class="insert">gridStepMeridianRad*((int)(lon2/gridStepMeridianRad+0.5));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       lat2 = <span class="delete">gridStepParallelRad*((int)(lat2/gridStepParallelRad));</span></td><td> </td><td class="rblock">       lat2 = <span class="insert">gridStepParallelRad*((int)(lat2/gridStepParallelRad+0.5));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d firstPoint;</td><td> </td><td class="right">       Vec3d firstPoint;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelUtils::spheToRect(lon2, lat2, firstPoint);</td><td> </td><td class="right">       StelUtils::spheToRect(lon2, lat2, firstPoint);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       firstPoint.normalize();</td><td> </td><td class="right">       firstPoint.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">Q_ASSERT(viewPortHalfSpace</span>.contains(firstPoint));</td><td> </td><td class="rblock">       <span class="insert">// Q_ASSERT(viewPortSphericalCap</span>.contains(firstPoint));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Initialize a painter and set openGL state</td><td> </td><td class="right">       // Initialize a painter and set openGL state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(prj);</td><td> </td><td class="right">       StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glEnable(GL_LINE_SMOOTH);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glDisable(GL_TEXTURE_2D);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_BLEND);</td><td> </td><td class="right">       glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td> </td><td class="right">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec4f textColor(color[0], color[1], color[2], 0);</td><td> </td><td class="right">       Vec4f textColor(color[0], color[1], color[2], 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (StelApp::getInstance().getVisionModeNight())</td><td> </td><td class="right">       if (StelApp::getInstance().getVisionModeNight())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // instead of a filter which just zeros G&amp;B, set the red</td><td> </td><td class="right">               // instead of a filter which just zeros G&amp;B, set the red</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // value to the mean brightness of RGB.</td><td> </td><td class="right">               // value to the mean brightness of RGB.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float red = (color[0] + color[1] + color[2]) / 3.0;</td><td> </td><td class="right">               float red = (color[0] + color[1] + color[2]) / 3.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               textColor[0] = red;</td><td> </td><td class="right">               textColor[0] = red;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               textColor[1] = 0.; textColor[2] = 0.;</td><td> </td><td class="right">               textColor[1] = 0.; textColor[2] = 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glColor4f</span>(red, 0, 0, fader.getInterstate());</td><td> </td><td class="rblock">               <span class="insert">sPainter.setColor</span>(red, 0, 0, fader.getInterstate());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glColor4f(color[0],color[1],color[2], fader.getInterstate())
</span>;</td><td> </td><td class="rblock">               <span class="insert">sPainter.setColor(color[0],color[1],color[2], fader.getInter
state())</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       textColor*=2;</td><td> </td><td class="right">       textColor*=2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       textColor[3]=fader.getInterstate();</td><td> </td><td class="right">       textColor[3]=fader.getInterstate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       ViewportEdgeIntersectCallbackData <span class="delete">userData(sPainter);</span></td><td> </td><td class="rblock">       <span class="insert">sPainter.setFont(font);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       userData.font = &amp;font;</span></td><td> </td><td class="rblock">       ViewportEdgeIntersectCallbackData <span class="insert">userData(&amp;sPainter);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       userData.textColor = textColor;</td><td> </td><td class="right">       userData.textColor = textColor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       userData.frameType = frameType;</td><td> </td><td class="right">       userData.frameType = frameType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       /////////////////////////////////////////////////</td><td> </td><td class="right">       /////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw all the meridians (great circles)</td><td> </td><td class="right">       // Draw all the meridians (great circles)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       S<span class="delete">telGeom::HalfSpace meridianHalfSpace</span>(Vec3d(1,0,0), 0);</td><td> </td><td class="rblock">       S<span class="insert">phericalCap meridianSphericalCap</span>(Vec3d(1,0,0), 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Mat4d rotLon = Mat4d::zrotation(gridStepMeridianRad);</td><td> </td><td class="right">       Mat4d rotLon = Mat4d::zrotation(gridStepMeridianRad);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d fpt = firstPoint;</td><td> </td><td class="right">       Vec3d fpt = firstPoint;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d p1, p2;</td><td> </td><td class="right">       Vec3d p1, p2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int maxNbIter = (int)(M_PI/gridStepMeridianRad);</td><td> </td><td class="right">       int maxNbIter = (int)(M_PI/gridStepMeridianRad);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int i;</td><td> </td><td class="right">       int i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (i=0; i&lt;maxNbIter; ++i)</td><td> </td><td class="right">       for (i=0; i&lt;maxNbIter; ++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td> </td><td class="right">               StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               userData.raAngle = lon2;</td><td> </td><td class="right">               userData.raAngle = lon2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">meridianHalfSpace.n</span> = fpt^Vec3d(0,0,1);</td><td> </td><td class="rblock">               <span class="insert">meridianSphericalCap.n</span> = fpt^Vec3d(0,0,1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">meridianHalfSpace.n.normalize();</span></td><td> </td><td class="rblock">               <span class="insert">meridianSphericalCap.n.normalize();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">(!planeIntersect2(viewPortHalfSpace, meridianHalfSpace, p</span></td><td> </td><td class="rblock">               if <span class="insert">(!SphericalCap::intersectionPoints(viewPortSphericalCap, </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">1,</span> p2))</td><td> </td><td class="rblock"><span class="insert">meridianSphericalCap, p1,</span> p2))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (viewPort<span class="delete">HalfSpace.d&lt;meridianHalfSpace.d &amp;&amp; viewP
ortHalfSpace.contains(meridianHalfSpace</span>.n))</td><td> </td><td class="rblock">                       if (viewPort<span class="insert">SphericalCap.d&lt;meridianSphericalCap.d &amp;&amp;
 viewPortSphericalCap.contains(meridianSphericalCap</span>.n))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // The meridian is fully included in the vie
wport, draw it in 3 sub-arcs to avoid length &gt; 180.</td><td> </td><td class="right">                               // The meridian is fully included in the vie
wport, draw it in 3 sub-arcs to avoid length &gt; 180.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">Mat4d rotLon120 = Mat4d::rotation(meridianHa
lfSpace</span>.n, 120.*M_PI/180.);</td><td> </td><td class="rblock">                               <span class="insert">const Mat4d&amp; rotLon120 = Mat4d::rotation(mer
idianSphericalCap</span>.n, 120.*M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d rotFpt=fpt;</td><td> </td><td class="right">                               Vec3d rotFpt=fpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               rotFpt.transfo4d(rotLon120);</td><td> </td><td class="right">                               rotFpt.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d rotFpt2=rotFpt;</td><td> </td><td class="right">                               Vec3d rotFpt2=rotFpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               rotFpt2.transfo4d(rotLon120);</td><td> </td><td class="right">                               rotFpt2.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">sPainter.drawSmallCircleArc(fpt,</span> rotFpt, <span class="delete">Vec</span></td><td> </td><td class="rblock">                               <span class="insert">sPainter.drawGreatCircleArc(fpt,</span> rotFpt, <span class="insert">NUL</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">3d(0,0,0),</span> viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="rblock"><span class="insert">L,</span> viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">sPainter.drawSmallCircleArc(rotFpt,</span> rotFpt2,</td><td> </td><td class="rblock">                               <span class="insert">sPainter.drawGreatCircleArc(rotFpt,</span> rotFpt2,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> <span class="delete">Vec3d(0,0,0),</span> viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="rblock"> <span class="insert">NULL,</span> viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">sPainter.drawSmallCircleArc(rotFpt2,</span> fpt, <span class="delete">Ve</span></td><td> </td><td class="rblock">                               <span class="insert">sPainter.drawGreatCircleArc(rotFpt2,</span> fpt, <span class="insert">NU</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">c3d(0,0,0),</span> viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="rblock"><span class="insert">LL,</span> viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               fpt.transfo4d(rotLon);</td><td> </td><td class="right">                               fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d middlePoint = p1+p2;</td><td> </td><td class="right">               Vec3d middlePoint = p1+p2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               middlePoint.normalize();</td><td> </td><td class="right">               middlePoint.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!viewPort<span class="delete">HalfSpace</span>.contains(middlePoint))</td><td> </td><td class="rblock">               if (!viewPort<span class="insert">SphericalCap</span>.contains(middlePoint))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint*=-1.;</td><td> </td><td class="right">                       middlePoint*=-1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180 deg</td><td> </td><td class="right">               // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180 deg</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">sPainter.drawSmallCircleArc(p1,</span> middlePoint, <span class="delete">Vec3d(0), viewp</span></td><td> </td><td class="rblock">               <span class="insert">sPainter.drawGreatCircleArc(p1,</span> middlePoint, <span class="insert">NULL, viewportE</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ortEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">dgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">sPainter.drawSmallCircleArc(p2,</span> middlePoint, <span class="delete">Vec3d(0), viewp</span></td><td> </td><td class="rblock">               <span class="insert">sPainter.drawGreatCircleArc(p2,</span> middlePoint, <span class="insert">NULL, viewportE</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ortEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">dgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fpt.transfo4d(rotLon);</td><td> </td><td class="right">               fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (i!=maxNbIter)</td><td> </td><td class="right">       if (i!=maxNbIter)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               rotLon = Mat4d::<span class="delete">rotation(Vec3d(0,0,1), -gridStepMeridianRad)
</span>;</td><td> </td><td class="rblock">               rotLon = Mat4d::<span class="insert">zrotation(-gridStepMeridianRad)</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fpt = firstPoint;</td><td> </td><td class="right">               fpt = firstPoint;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fpt.transfo4d(rotLon);</td><td> </td><td class="right">               fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               for (int j=0; j&lt;maxNbIter-i; ++j)</td><td> </td><td class="right">               for (int j=0; j&lt;maxNbIter-i; ++j)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td> </td><td class="right">                       StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       userData.raAngle = lon2;</td><td> </td><td class="right">                       userData.raAngle = lon2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">meridianHalfSpace.n</span> = fpt^Vec3d(0,0,1);</td><td> </td><td class="rblock">                       <span class="insert">meridianSphericalCap.n</span> = fpt^Vec3d(0,0,1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">meridianHalfSpace.n.normalize();</span></td><td> </td><td class="rblock">                       <span class="insert">meridianSphericalCap.n.normalize();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if <span class="delete">(!planeIntersect2(viewPortHalfSpace, meridianHalf</span></td><td> </td><td class="rblock">                       if <span class="insert">(!SphericalCap::intersectionPoints(viewPortSpheri</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Space,</span> p1, p2))</td><td> </td><td class="rblock"><span class="insert">calCap, meridianSphericalCap,</span> p1, p2))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d middlePoint = p1+p2;</td><td> </td><td class="right">                       Vec3d middlePoint = p1+p2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint.normalize();</td><td> </td><td class="right">                       middlePoint.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (!viewPort<span class="delete">HalfSpace</span>.contains(middlePoint))</td><td> </td><td class="rblock">                       if (!viewPort<span class="insert">SphericalCap</span>.contains(middlePoint))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               middlePoint*=-1;</td><td> </td><td class="right">                               middlePoint*=-1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">sPainter.drawSmallCircleArc(p1,</span> middlePoint, <span class="delete">Vec3d(0</span></td><td> </td><td class="rblock">                       <span class="insert">sPainter.drawGreatCircleArc(p1,</span> middlePoint, <span class="insert">NULL, v</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">), viewportEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">iewportEdgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">sPainter.drawSmallCircleArc(p2,</span> middlePoint, <span class="delete">Vec3d(0</span></td><td> </td><td class="rblock">                       <span class="insert">sPainter.drawGreatCircleArc(p2,</span> middlePoint, <span class="insert">NULL, v</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">), viewportEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">iewportEdgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fpt.transfo4d(rotLon);</td><td> </td><td class="right">                       fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       /////////////////////////////////////////////////</td><td> </td><td class="right">       /////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw all the parallels (small circles)</td><td> </td><td class="right">       // Draw all the parallels (small circles)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       S<span class="delete">telGeom::HalfSpace parallelHalfSpace</span>(Vec3d(0,0,1), 0);</td><td> </td><td class="rblock">       S<span class="insert">phericalCap parallelSphericalCap</span>(Vec3d(0,0,1), 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       rotLon = Mat4d::rotation(firstPoint^Vec3d(0,0,1), gridStepParallelRa
d);</td><td> </td><td class="right">       rotLon = Mat4d::rotation(firstPoint^Vec3d(0,0,1), gridStepParallelRa
d);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       fpt = firstPoint;</td><td> </td><td class="right">       fpt = firstPoint;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       maxNbIter = (int)(M_PI/gridStepParallelRad)-1;</td><td> </td><td class="right">       maxNbIter = (int)(M_PI/gridStepParallelRad)-1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (i=0; i&lt;maxNbIter; ++i)</td><td> </td><td class="right">       for (i=0; i&lt;maxNbIter; ++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td> </td><td class="right">               StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               userData.text = StelUtils::radToDmsStrAdapt(lat2);</td><td> </td><td class="right">               userData.text = StelUtils::radToDmsStrAdapt(lat2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">parallelHalfSpace.d</span> = fpt[2];</td><td> </td><td class="rblock">               <span class="insert">parallelSphericalCap.d</span> = fpt[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">(parallelHalfSpace.d&gt;0.9999999)</span></td><td> </td><td class="rblock">               if <span class="insert">(parallelSphericalCap.d&gt;0.9999999)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const Vec3d <span class="delete">rotCenter(0,0,parallelHalfSpace.d);</span></td><td> </td><td class="rblock">               const Vec3d <span class="insert">rotCenter(0,0,parallelSphericalCap.d);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">(!planeIntersect2(viewPortHalfSpace, parallelHalfSpace, p</span></td><td> </td><td class="rblock">               if <span class="insert">(!SphericalCap::intersectionPoints(viewPortSphericalCap, </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">1,</span> p2))</td><td> </td><td class="rblock"><span class="insert">parallelSphericalCap, p1,</span> p2))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if <span class="delete">((viewPortHalfSpace.d&lt;parallelHalfSpace.d &amp;&amp; view</span></td><td> </td><td class="rblock">                       if <span class="insert">((viewPortSphericalCap.d&lt;parallelSphericalCap.d &amp;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">PortHalfSpace.contains(parallelHalfSpace.n))</span></td><td> </td><td class="rblock"><span class="insert">&amp; viewPortSphericalCap.contains(parallelSphericalCap.n))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               || <span class="delete">(viewPortHalfSpace.d&lt;-parallelHalfSpace.d</span></td><td> </td><td class="rblock">                               || <span class="insert">(viewPortSphericalCap.d&lt;-parallelSpherica</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> &amp;&amp; <span class="delete">viewPortHalfSpace.contains(-parallelHalfSpace.n)))</span></td><td> </td><td class="rblock"><span class="insert">lCap.d</span> &amp;&amp; <span class="insert">viewPortSphericalCap.contains(-parallelSphericalCap.n)))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // The parallel is fully included in the vie
wport, draw it in 3 sub-arcs to avoid lengths &gt;= 180 deg</td><td> </td><td class="right">                               // The parallel is fully included in the vie
wport, draw it in 3 sub-arcs to avoid lengths &gt;= 180 deg</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               <span class="delete">Mat4d rotLon120 = Mat4d::rotation(Vec3d(0,0,
1), </span>120.*M_PI/180.);</td><td> </td><td class="rblock">                               <span class="insert">static const Mat4d rotLon120 = Mat4d::zrotat
ion(</span>120.*M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d rotFpt=fpt;</td><td> </td><td class="right">                               Vec3d rotFpt=fpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               rotFpt.transfo4d(rotLon120);</td><td> </td><td class="right">                               rotFpt.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d rotFpt2=rotFpt;</td><td> </td><td class="right">                               Vec3d rotFpt2=rotFpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               rotFpt2.transfo4d(rotLon120);</td><td> </td><td class="right">                               rotFpt2.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               sPainter.drawSmallCircleArc(fpt, rotFpt, rot
Center, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                               sPainter.drawSmallCircleArc(fpt, rotFpt, rot
Center, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               sPainter.drawSmallCircleArc(rotFpt, rotFpt2,
 rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                               sPainter.drawSmallCircleArc(rotFpt, rotFpt2,
 rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               sPainter.drawSmallCircleArc(rotFpt2, fpt, ro
tCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                               sPainter.drawSmallCircleArc(rotFpt2, fpt, ro
tCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               fpt.transfo4d(rotLon);</td><td> </td><td class="right">                               fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180 deg</td><td> </td><td class="right">               // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180 deg</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d middlePoint = p1-rotCenter+p2-rotCenter;</td><td> </td><td class="right">               Vec3d middlePoint = p1-rotCenter+p2-rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               middlePoint.normalize();</td><td> </td><td class="right">               middlePoint.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               middlePoint*=(p1-rotCenter).length();</td><td> </td><td class="right">               middlePoint*=(p1-rotCenter).length();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               middlePoint+=rotCenter;</td><td> </td><td class="right">               middlePoint+=rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (!viewPort<span class="delete">HalfSpace</span>.contains(middlePoint))</td><td> </td><td class="rblock">               if (!viewPort<span class="insert">SphericalCap</span>.contains(middlePoint))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint-=rotCenter;</td><td> </td><td class="right">                       middlePoint-=rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint*=-1.;</td><td> </td><td class="right">                       middlePoint*=-1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint+=rotCenter;</td><td> </td><td class="right">                       middlePoint+=rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter.drawSmallCircleArc(p1, middlePoint, rotCenter, view
portEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">               sPainter.drawSmallCircleArc(p1, middlePoint, rotCenter, view
portEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               sPainter.drawSmallCircleArc(p2, middlePoint, rotCenter, view
portEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">               sPainter.drawSmallCircleArc(p2, middlePoint, rotCenter, view
portEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fpt.transfo4d(rotLon);</td><td> </td><td class="right">               fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 443</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 436</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (i!=maxNbIter)</td><td> </td><td class="right">       if (i!=maxNbIter)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rotLon = Mat4d::rotation(firstPoint^Vec3d(0,0,1), -gridStepP
arallelRad);</td><td> </td><td class="right">               rotLon = Mat4d::rotation(firstPoint^Vec3d(0,0,1), -gridStepP
arallelRad);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fpt = firstPoint;</td><td> </td><td class="right">               fpt = firstPoint;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               fpt.transfo4d(rotLon);</td><td> </td><td class="right">               fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               for (int j=0; j&lt;maxNbIter-i; ++j)</td><td> </td><td class="right">               for (int j=0; j&lt;maxNbIter-i; ++j)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td> </td><td class="right">                       StelUtils::rectToSphe(&amp;lon2, &amp;lat2, fpt);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       userData.text = StelUtils::radToDmsStrAdapt(lat2);</td><td> </td><td class="right">                       userData.text = StelUtils::radToDmsStrAdapt(lat2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">parallelHalfSpace.d</span> = fpt[2];</td><td> </td><td class="rblock">                       <span class="insert">parallelSphericalCap.d</span> = fpt[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const Vec3d <span class="delete">rotCenter(0,0,parallelHalfSpace.d);</span></td><td> </td><td class="rblock">                       const Vec3d <span class="insert">rotCenter(0,0,parallelSphericalCap.d);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if <span class="delete">(!planeIntersect2(viewPortHalfSpace, parallelHalf</span></td><td> </td><td class="rblock">                       if <span class="insert">(!SphericalCap::intersectionPoints(viewPortSpheri</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Space,</span> p1, p2))</td><td> </td><td class="rblock"><span class="insert">calCap, parallelSphericalCap,</span> p1, p2))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if <span class="delete">((viewPortHalfSpace.d&lt;parallelHalfSpace.d</span></td><td> </td><td class="rblock">                               if <span class="insert">((viewPortSphericalCap.d&lt;parallelSpherica</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> &amp;&amp; <span class="delete">viewPortHalfSpace.contains(parallelHalfSpace.n))</span></td><td> </td><td class="rblock"><span class="insert">lCap.d</span> &amp;&amp; <span class="insert">viewPortSphericalCap.contains(parallelSphericalCap.n))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                        || <span class="delete">(viewPortHalfSpace.d&lt;-parallelHa</span></td><td> </td><td class="rblock">                                        || <span class="insert">(viewPortSphericalCap.d&lt;-paralle</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">lfSpace.d</span> &amp;&amp; <span class="delete">viewPortHalfSpace.contains(-parallelHalfSpace.n)))</span></td><td> </td><td class="rblock"><span class="insert">lSphericalCap.d</span> &amp;&amp; <span class="insert">viewPortSphericalCap.contains(-parallelSphericalCap.n)))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // The parallel is fully included in
 the viewport, draw it in 3 sub-arcs to avoid lengths &gt;= 180 deg</td><td> </td><td class="right">                                       // The parallel is fully included in
 the viewport, draw it in 3 sub-arcs to avoid lengths &gt;= 180 deg</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">Mat4d rotLon120 = Mat4d::rotation(Ve
c3d(0,0,1), </span>120.*M_PI/180.);</td><td> </td><td class="rblock">                                       <span class="insert">static const Mat4d rotLon120 = Mat4d
::zrotation(</span>120.*M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       Vec3d rotFpt=fpt;</td><td> </td><td class="right">                                       Vec3d rotFpt=fpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       rotFpt.transfo4d(rotLon120);</td><td> </td><td class="right">                                       rotFpt.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       Vec3d rotFpt2=rotFpt;</td><td> </td><td class="right">                                       Vec3d rotFpt2=rotFpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       rotFpt2.transfo4d(rotLon120);</td><td> </td><td class="right">                                       rotFpt2.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       sPainter.drawSmallCircleArc(fpt, rot
Fpt, rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                                       sPainter.drawSmallCircleArc(fpt, rot
Fpt, rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       sPainter.drawSmallCircleArc(rotFpt, 
rotFpt2, rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                                       sPainter.drawSmallCircleArc(rotFpt, 
rotFpt2, rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       sPainter.drawSmallCircleArc(rotFpt2,
 fpt, rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                                       sPainter.drawSmallCircleArc(rotFpt2,
 fpt, rotCenter, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       fpt.transfo4d(rotLon);</td><td> </td><td class="right">                                       fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       continue;</td><td> </td><td class="right">                                       continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180
 deg</td><td> </td><td class="right">                       // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180
 deg</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d middlePoint = p1-rotCenter+p2-rotCenter;</td><td> </td><td class="right">                       Vec3d middlePoint = p1-rotCenter+p2-rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint.normalize();</td><td> </td><td class="right">                       middlePoint.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint*=(p1-rotCenter).length();</td><td> </td><td class="right">                       middlePoint*=(p1-rotCenter).length();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       middlePoint+=rotCenter;</td><td> </td><td class="right">                       middlePoint+=rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (!viewPort<span class="delete">HalfSpace</span>.contains(middlePoint))</td><td> </td><td class="rblock">                       if (!viewPort<span class="insert">SphericalCap</span>.contains(middlePoint))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               middlePoint-=rotCenter;</td><td> </td><td class="right">                               middlePoint-=rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               middlePoint*=-1.;</td><td> </td><td class="right">                               middlePoint*=-1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               middlePoint+=rotCenter;</td><td> </td><td class="right">                               middlePoint+=rotCenter;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       sPainter.drawSmallCircleArc(p1, middlePoint, rotCent
er, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                       sPainter.drawSmallCircleArc(p1, middlePoint, rotCent
er, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       sPainter.drawSmallCircleArc(p2, middlePoint, rotCent
er, viewportEdgeIntersectCallback, &amp;userData);</td><td> </td><td class="right">                       sPainter.drawSmallCircleArc(p2, middlePoint, rotCent
er, viewportEdgeIntersectCallback, &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       fpt.transfo4d(rotLon);</td><td> </td><td class="right">                       fpt.transfo4d(rotLon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">SkyLine::SkyLine(SKY_LINE_TYPE _line_type) : color(0.f, 0.f, <span class="delete">1.f), fontSize</span></td><td> </td><td class="rblock">SkyLine::SkyLine(SKY_LINE_TYPE _line_type) : color(0.f, 0.f, <span class="insert">1.f)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(14.),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">font(StelApp::getInstance().getFontManager().getStandardFont(StelApp::getIn</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">stance().getLocaleMgr().getAppLanguage(), fontSize))</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       font.setPixelSize(14);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       line_type = _line_type;</td><td> </td><td class="right">       line_type = _line_type;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       switch (line_type)</td><td> </td><td class="right">       switch (line_type)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MERIDIAN:</td><td> </td><td class="right">               case MERIDIAN:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       frameType = StelCore::FrameAltAz;</td><td> </td><td class="right">                       frameType = StelCore::FrameAltAz;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       label = q_("Meridian");</td><td> </td><td class="right">                       label = q_("Meridian");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ECLIPTIC:</td><td> </td><td class="right">               case ECLIPTIC:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       frameType = StelCore::FrameObservercentricEcliptic;</td><td> </td><td class="right">                       frameType = StelCore::FrameObservercentricEcliptic;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 514</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 507</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SkyLine::~SkyLine()</td><td> </td><td class="right">SkyLine::~SkyLine()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SkyLine::setFontSize(double newFontSize)</td><td> </td><td class="right">void SkyLine::setFontSize(double newFontSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">fontSize = newFontSize;</span></td><td> </td><td class="rblock">       <span class="insert">font.setPixelSize(newFontSize);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       font = StelApp::getInstance().getFontManager().getStandardFont(StelA</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">pp::getInstance().getLocaleMgr().getAppLanguage(), fontSize);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SkyLine::draw(StelCore *core) const</td><td> </td><td class="right">void SkyLine::draw(StelCore *core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!fader.getInterstate())</td><td> </td><td class="right">       if (!fader.getInterstate())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelProjectorP prj = core-&gt;getProjection(frameType);</td><td> </td><td class="right">       StelProjectorP prj = core-&gt;getProjection(frameType);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Get the bounding halfspace</td><td> </td><td class="right">       // Get the bounding halfspace</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const S<span class="delete">telGeom::HalfSpace viewPortHalfSpace = prj-&gt;getBoundingHalfSp
ace</span>();</td><td> </td><td class="rblock">       const S<span class="insert">phericalCap viewPortSphericalCap = prj-&gt;getBoundingSphericalC
ap</span>();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Initialize a painter and set openGL state</td><td> </td><td class="right">       // Initialize a painter and set openGL state</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPainter sPainter(prj);</td><td> </td><td class="right">       StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">glColor4f(color[0],</span> color[1], color[2], <span class="delete">fader.getInterstate());</span></td><td> </td><td class="rblock">       <span class="insert">sPainter.setColor(color[0],</span> color[1], color[2], <span class="insert">fader.getInterstate(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glDisable(GL_TEXTURE_2D);</span></td><td> </td><td class="rblock"><span class="insert">));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glEnable(GL_BLEND);</td><td> </td><td class="right">       glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td> </td><td class="right">       glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal transpa
rency mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       glEnable(GL_LINE_SMOOTH);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec4f textColor(color[0], color[1], color[2], 0);</td><td> </td><td class="right">       Vec4f textColor(color[0], color[1], color[2], 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       textColor*=2;</td><td> </td><td class="right">       textColor*=2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       textColor[3]=fader.getInterstate();</td><td> </td><td class="right">       textColor[3]=fader.getInterstate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       ViewportEdgeIntersectCallbackData <span class="delete">userData(sPainter);</span></td><td> </td><td class="rblock">       ViewportEdgeIntersectCallbackData <span class="insert">userData(&amp;sPainter);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       userData.font = &amp;font;</span></td><td> </td><td class="rblock"><span class="insert">       sPainter.setFont(font);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       userData.textColor = textColor;</td><td> </td><td class="right">       userData.textColor = textColor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       userData.text = label;</td><td> </td><td class="right">       userData.text = label;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       /////////////////////////////////////////////////</td><td> </td><td class="right">       /////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the line</td><td> </td><td class="right">       // Draw the line</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       S<span class="delete">telGeom::HalfSpace meridianHalfSpace</span>(Vec3d(0,0,1), 0);</td><td> </td><td class="rblock">       S<span class="insert">phericalCap meridianSphericalCap</span>(Vec3d(0,0,1), 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d fpt(1,0,0);</td><td> </td><td class="right">       Vec3d fpt(1,0,0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (line_type==MERIDIAN)</td><td> </td><td class="right">       if (line_type==MERIDIAN)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               meridian<span class="delete">HalfSpace</span>.n.set(0,1,0);</td><td> </td><td class="rblock">               meridian<span class="insert">SphericalCap</span>.n.set(0,1,0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d p1, p2;</td><td> </td><td class="right">       Vec3d p1, p2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!<span class="delete">planeIntersect2(viewPortHalfSpace, meridianHalfSpace</span>, p1, p2))</td><td> </td><td class="rblock">       if (!<span class="insert">SphericalCap::intersectionPoints(viewPortSphericalCap, meridian
SphericalCap</span>, p1, p2))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">((viewPortHalfSpace.d&lt;meridianHalfSpace.d</span> &amp;&amp; <span class="delete">viewPortHalf</span></td><td> </td><td class="rblock">               if <span class="insert">((viewPortSphericalCap.d&lt;meridianSphericalCap.d</span> &amp;&amp; <span class="insert">viewPo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Space.contains(meridianHalfSpace.n))</span></td><td> </td><td class="rblock"><span class="insert">rtSphericalCap.contains(meridianSphericalCap.n))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   || <span class="delete">(viewPortHalfSpace.d&lt;-meridianHalfSpace.d &amp;&amp; viewPort</span></td><td> </td><td class="rblock">                       || <span class="insert">(viewPortSphericalCap.d&lt;-meridianSphericalCap.d &amp;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">HalfSpace.contains(-meridianHalfSpace.n)))</span></td><td> </td><td class="rblock"><span class="insert">&amp; viewPortSphericalCap.contains(-meridianSphericalCap.n)))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // The meridian is fully included in the viewport, d
raw it in 3 sub-arcs to avoid length &gt; 180.</td><td> </td><td class="right">                       // The meridian is fully included in the viewport, d
raw it in 3 sub-arcs to avoid length &gt; 180.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">Mat4d rotLon120 = Mat4d::rotation(meridianHalfSpace.
</span>n, 120.*M_PI/180.);</td><td> </td><td class="rblock">                       <span class="insert">const Mat4d&amp; rotLon120 = Mat4d::rotation(meridianSph
ericalCap.</span>n, 120.*M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d rotFpt=fpt;</td><td> </td><td class="right">                       Vec3d rotFpt=fpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotFpt.transfo4d(rotLon120);</td><td> </td><td class="right">                       rotFpt.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3d rotFpt2=rotFpt;</td><td> </td><td class="right">                       Vec3d rotFpt2=rotFpt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotFpt2.transfo4d(rotLon120);</td><td> </td><td class="right">                       rotFpt2.transfo4d(rotLon120);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">sPainter.drawSmallCircleArc(fpt,</span> rotFpt, <span class="delete">Vec3d(0,0,0</span></td><td> </td><td class="rblock">                       <span class="insert">sPainter.drawGreatCircleArc(fpt,</span> rotFpt, <span class="insert">NULL, viewp</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">), viewportEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">ortEdgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">sPainter.drawSmallCircleArc(rotFpt,</span> rotFpt2, <span class="delete">Vec3d(0</span></td><td> </td><td class="rblock">                       <span class="insert">sPainter.drawGreatCircleArc(rotFpt,</span> rotFpt2, <span class="insert">NULL, v</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,0,0), viewportEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">iewportEdgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">sPainter.drawSmallCircleArc(rotFpt2,</span> fpt, <span class="delete">Vec3d(0,0,</span></td><td> </td><td class="rblock">                       <span class="insert">sPainter.drawGreatCircleArc(rotFpt2,</span> fpt, <span class="insert">NULL, view</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">0), viewportEdgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">portEdgeIntersectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d middlePoint = p1+p2;</td><td> </td><td class="right">       Vec3d middlePoint = p1+p2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       middlePoint.normalize();</td><td> </td><td class="right">       middlePoint.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!viewPort<span class="delete">HalfSpace</span>.contains(middlePoint))</td><td> </td><td class="rblock">       if (!viewPort<span class="insert">SphericalCap</span>.contains(middlePoint))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               middlePoint*=-1.;</td><td> </td><td class="right">               middlePoint*=-1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180 deg</td><td> </td><td class="right">       // Draw the arc in 2 sub-arcs to avoid lengths &gt; 180 deg</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">sPainter.drawSmallCircleArc(p1,</span> middlePoint, <span class="delete">Vec3d(0,0,0), viewportE</span></td><td> </td><td class="rblock">       <span class="insert">sPainter.drawGreatCircleArc(p1,</span> middlePoint, <span class="insert">NULL, viewportEdgeInter</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">sectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">sPainter.drawSmallCircleArc(p2,</span> middlePoint, <span class="delete">Vec3d(0,0,0), viewportE</span></td><td> </td><td class="rblock">       <span class="insert">sPainter.drawGreatCircleArc(p2,</span> middlePoint, <span class="insert">NULL, viewportEdgeInter</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dgeIntersectCallback,</span> &amp;userData);</td><td> </td><td class="rblock"><span class="insert">sectCallback,</span> &amp;userData);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     // Johannes: use a big radius as a dirty workaround for the bug that
 the</td><td> </td><td class="right">//     // Johannes: use a big radius as a dirty workaround for the bug that
 the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     // ecliptic line is not drawn around the observer, but around the su
n:</td><td> </td><td class="right">//     // ecliptic line is not drawn around the observer, but around the su
n:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//     const Vec3d vv(1000000,0,0);</td><td> </td><td class="right">//     const Vec3d vv(1000000,0,0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">GridLinesMgr::GridLinesMgr()</td><td> </td><td class="right">GridLinesMgr::GridLinesMgr()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("GridLinesMgr");</td><td> </td><td class="right">       setObjectName("GridLinesMgr");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equGrid = new SkyGrid(StelCore::FrameEquinoxEqu);</td><td> </td><td class="right">       equGrid = new SkyGrid(StelCore::FrameEquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equJ2000Grid = new SkyGrid(StelCore::FrameJ2000);</td><td> </td><td class="right">       equJ2000Grid = new SkyGrid(StelCore::FrameJ2000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       galacticGrid = new SkyGrid(StelCore::FrameGalactic);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       aziGrid = new SkyGrid(StelCore::FrameAltAz);</td><td> </td><td class="right">       aziGrid = new SkyGrid(StelCore::FrameAltAz);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equatorLine = new SkyLine(SkyLine::EQUATOR);</td><td> </td><td class="right">       equatorLine = new SkyLine(SkyLine::EQUATOR);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       eclipticLine = new SkyLine(SkyLine::ECLIPTIC);</td><td> </td><td class="right">       eclipticLine = new SkyLine(SkyLine::ECLIPTIC);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       meridianLine = new SkyLine(SkyLine::MERIDIAN);</td><td> </td><td class="right">       meridianLine = new SkyLine(SkyLine::MERIDIAN);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">GridLinesMgr::~GridLinesMgr()</td><td> </td><td class="right">GridLinesMgr::~GridLinesMgr()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete equGrid;</td><td> </td><td class="right">       delete equGrid;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete equJ2000Grid;</td><td> </td><td class="right">       delete equJ2000Grid;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       delete galacticGrid;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete aziGrid;</td><td> </td><td class="right">       delete aziGrid;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete equatorLine;</td><td> </td><td class="right">       delete equatorLine;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete eclipticLine;</td><td> </td><td class="right">       delete eclipticLine;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete meridianLine;</td><td> </td><td class="right">       delete meridianLine;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> Reimplementation of the getCallOrder method</td><td> </td><td class="right"> Reimplementation of the getCallOrder method</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double GridLinesMgr::getCallOrder(StelModuleActionName actionName) const</td><td> </td><td class="right">double GridLinesMgr::getCallOrder(StelModuleActionName actionName) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 629</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 621</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::init()</td><td> </td><td class="right">void GridLinesMgr::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(conf);</td><td> </td><td class="right">       Q_ASSERT(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagAzimuthalGrid(conf-&gt;value("viewing/flag_azimuthal_grid").toBo
ol());</td><td> </td><td class="right">       setFlagAzimuthalGrid(conf-&gt;value("viewing/flag_azimuthal_grid").toBo
ol());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagEquatorGrid(conf-&gt;value("viewing/flag_equatorial_grid").toBoo
l());</td><td> </td><td class="right">       setFlagEquatorGrid(conf-&gt;value("viewing/flag_equatorial_grid").toBoo
l());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagEquatorJ2000Grid(conf-&gt;value("viewing/flag_equatorial_J2000_g
rid").toBool());</td><td> </td><td class="right">       setFlagEquatorJ2000Grid(conf-&gt;value("viewing/flag_equatorial_J2000_g
rid").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setFlagGalacticGrid(conf-&gt;value("viewing/flag_galactic_grid").toBool
());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagEquatorLine(conf-&gt;value("viewing/flag_equator_line").toBool()
);</td><td> </td><td class="right">       setFlagEquatorLine(conf-&gt;value("viewing/flag_equator_line").toBool()
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagEclipticLine(conf-&gt;value("viewing/flag_ecliptic_line").toBool
());</td><td> </td><td class="right">       setFlagEclipticLine(conf-&gt;value("viewing/flag_ecliptic_line").toBool
());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagMeridianLine(conf-&gt;value("viewing/flag_meridian_line").toBool
());</td><td> </td><td class="right">       setFlagMeridianLine(conf-&gt;value("viewing/flag_meridian_line").toBool
());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::update(double deltaTime)</td><td> </td><td class="right">void GridLinesMgr::update(double deltaTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Update faders</td><td> </td><td class="right">       // Update faders</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equGrid-&gt;update(deltaTime);</td><td> </td><td class="right">       equGrid-&gt;update(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equJ2000Grid-&gt;update(deltaTime);</td><td> </td><td class="right">       equJ2000Grid-&gt;update(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       galacticGrid-&gt;update(deltaTime);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       aziGrid-&gt;update(deltaTime);</td><td> </td><td class="right">       aziGrid-&gt;update(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equatorLine-&gt;update(deltaTime);</td><td> </td><td class="right">       equatorLine-&gt;update(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       eclipticLine-&gt;update(deltaTime);</td><td> </td><td class="right">       eclipticLine-&gt;update(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       meridianLine-&gt;update(deltaTime);</td><td> </td><td class="right">       meridianLine-&gt;update(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::draw(StelCore* core)</td><td> </td><td class="right">void GridLinesMgr::draw(StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Draw the equatorial grid</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equGrid-&gt;draw(core);</td><td> </td><td class="right">       equGrid-&gt;draw(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">// Draw the equatorial grid</span></td><td> </td><td class="rblock">       <span class="insert">galacticGrid-&gt;draw(core);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equJ2000Grid-&gt;draw(core);</td><td> </td><td class="right">       equJ2000Grid-&gt;draw(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Draw the altazimuthal grid</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       aziGrid-&gt;draw(core);</td><td> </td><td class="right">       aziGrid-&gt;draw(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Draw the celestial equator line</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       equatorLine-&gt;draw(core);</td><td> </td><td class="right">       equatorLine-&gt;draw(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Draw the ecliptic line</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       eclipticLine-&gt;draw(core);</td><td> </td><td class="right">       eclipticLine-&gt;draw(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       // Draw the meridian line</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       meridianLine-&gt;draw(core);</td><td> </td><td class="right">       meridianLine-&gt;draw(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setStelStyle(const StelStyle&amp; style)</td><td> </td><td class="right">void GridLinesMgr::setStelStyle(const StelStyle&amp; style)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString section = style.confSectionName;</td><td> </td><td class="right">       QString section = style.confSectionName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load colors from config file</td><td> </td><td class="right">       // Load colors from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString defaultColor = conf-&gt;value(section+"/default_color").toStrin
g();</td><td> </td><td class="right">       QString defaultColor = conf-&gt;value(section+"/default_color").toStrin
g();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setColorEquatorGrid(StelUtils::strToVec3f(conf-&gt;value(section+"/equa
torial_color", defaultColor).toString()));</td><td> </td><td class="right">       setColorEquatorGrid(StelUtils::strToVec3f(conf-&gt;value(section+"/equa
torial_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setColorEquatorJ2000Grid(StelUtils::strToVec3f(conf-&gt;value(section+"
/equatorial_J2000_color", defaultColor).toString()));</td><td> </td><td class="right">       setColorEquatorJ2000Grid(StelUtils::strToVec3f(conf-&gt;value(section+"
/equatorial_J2000_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setColorGalacticGrid(StelUtils::strToVec3f(conf-&gt;value(section+"/gal
actic_color", defaultColor).toString()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setColorAzimuthalGrid(StelUtils::strToVec3f(conf-&gt;value(section+"/az
imuthal_color", defaultColor).toString()));</td><td> </td><td class="right">       setColorAzimuthalGrid(StelUtils::strToVec3f(conf-&gt;value(section+"/az
imuthal_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setColorEquatorLine(StelUtils::strToVec3f(conf-&gt;value(section+"/equa
tor_color", defaultColor).toString()));</td><td> </td><td class="right">       setColorEquatorLine(StelUtils::strToVec3f(conf-&gt;value(section+"/equa
tor_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setColorEclipticLine(StelUtils::strToVec3f(conf-&gt;value(section+"/ecl
iptic_color", defaultColor).toString()));</td><td> </td><td class="right">       setColorEclipticLine(StelUtils::strToVec3f(conf-&gt;value(section+"/ecl
iptic_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setColorMeridianLine(StelUtils::strToVec3f(conf-&gt;value(section+"/mer
idian_color", defaultColor).toString()));</td><td> </td><td class="right">       setColorMeridianLine(StelUtils::strToVec3f(conf-&gt;value(section+"/mer
idian_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set flag for displaying Azimuthal Grid</td><td> </td><td class="right">//! Set flag for displaying Azimuthal Grid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setFlagAzimuthalGrid(bool b) {aziGrid-&gt;setFlagshow(b);}</td><td> </td><td class="right">void GridLinesMgr::setFlagAzimuthalGrid(bool b) {aziGrid-&gt;setFlagshow(b);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get flag for displaying Azimuthal Grid</td><td> </td><td class="right">//! Get flag for displaying Azimuthal Grid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool GridLinesMgr::getFlagAzimuthalGrid(void) const {return aziGrid-&gt;getFla
gshow();}</td><td> </td><td class="right">bool GridLinesMgr::getFlagAzimuthalGrid(void) const {return aziGrid-&gt;getFla
gshow();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 694</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 684</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get flag for displaying Equatorial Grid</td><td> </td><td class="right">//! Get flag for displaying Equatorial Grid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool GridLinesMgr::getFlagEquatorGrid(void) const {return equGrid-&gt;getFlags
how();}</td><td> </td><td class="right">bool GridLinesMgr::getFlagEquatorGrid(void) const {return equGrid-&gt;getFlags
how();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f GridLinesMgr::getColorEquatorGrid(void) const {return equGrid-&gt;getCol
or();}</td><td> </td><td class="right">Vec3f GridLinesMgr::getColorEquatorGrid(void) const {return equGrid-&gt;getCol
or();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set flag for displaying Equatorial J2000 Grid</td><td> </td><td class="right">//! Set flag for displaying Equatorial J2000 Grid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setFlagEquatorJ2000Grid(bool b) {equJ2000Grid-&gt;setFlagsh
ow(b);}</td><td> </td><td class="right">void GridLinesMgr::setFlagEquatorJ2000Grid(bool b) {equJ2000Grid-&gt;setFlagsh
ow(b);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get flag for displaying Equatorial J2000 Grid</td><td> </td><td class="right">//! Get flag for displaying Equatorial J2000 Grid</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool GridLinesMgr::getFlagEquatorJ2000Grid(void) const {return equJ2000Grid
-&gt;getFlagshow();}</td><td> </td><td class="right">bool GridLinesMgr::getFlagEquatorJ2000Grid(void) const {return equJ2000Grid
-&gt;getFlagshow();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f GridLinesMgr::getColorEquatorJ2000Grid(void) const {return equJ2000Gr
id-&gt;getColor();}</td><td> </td><td class="right">Vec3f GridLinesMgr::getColorEquatorJ2000Grid(void) const {return equJ2000Gr
id-&gt;getColor();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//! Set flag for displaying Equatorial J2000 Grid</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void GridLinesMgr::setFlagGalacticGrid(bool b) {galacticGrid-&gt;setFlagshow(b</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//! Get flag for displaying Equatorial J2000 Grid</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool GridLinesMgr::getFlagGalacticGrid(void) const {return galacticGrid-&gt;ge</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tFlagshow();}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Vec3f GridLinesMgr::getColorGalacticGrid(void) const {return galacticGrid-&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">getColor();}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set flag for displaying Equatorial Line</td><td> </td><td class="right">//! Set flag for displaying Equatorial Line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setFlagEquatorLine(bool b) {equatorLine-&gt;setFlagshow(b);
}</td><td> </td><td class="right">void GridLinesMgr::setFlagEquatorLine(bool b) {equatorLine-&gt;setFlagshow(b);
}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get flag for displaying Equatorial Line</td><td> </td><td class="right">//! Get flag for displaying Equatorial Line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool GridLinesMgr::getFlagEquatorLine(void) const {return equatorLine-&gt;getF
lagshow();}</td><td> </td><td class="right">bool GridLinesMgr::getFlagEquatorLine(void) const {return equatorLine-&gt;getF
lagshow();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f GridLinesMgr::getColorEquatorLine(void) const {return equatorLine-&gt;ge
tColor();}</td><td> </td><td class="right">Vec3f GridLinesMgr::getColorEquatorLine(void) const {return equatorLine-&gt;ge
tColor();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set flag for displaying Ecliptic Line</td><td> </td><td class="right">//! Set flag for displaying Ecliptic Line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setFlagEclipticLine(bool b) {eclipticLine-&gt;setFlagshow(b
);}</td><td> </td><td class="right">void GridLinesMgr::setFlagEclipticLine(bool b) {eclipticLine-&gt;setFlagshow(b
);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get flag for displaying Ecliptic Line</td><td> </td><td class="right">//! Get flag for displaying Ecliptic Line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool GridLinesMgr::getFlagEclipticLine(void) const {return eclipticLine-&gt;ge
tFlagshow();}</td><td> </td><td class="right">bool GridLinesMgr::getFlagEclipticLine(void) const {return eclipticLine-&gt;ge
tFlagshow();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 715</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 711</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set flag for displaying Meridian Line</td><td> </td><td class="right">//! Set flag for displaying Meridian Line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setFlagMeridianLine(bool b) {meridianLine-&gt;setFlagshow(b
);}</td><td> </td><td class="right">void GridLinesMgr::setFlagMeridianLine(bool b) {meridianLine-&gt;setFlagshow(b
);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get flag for displaying Meridian Line</td><td> </td><td class="right">//! Get flag for displaying Meridian Line</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool GridLinesMgr::getFlagMeridianLine(void) const {return meridianLine-&gt;ge
tFlagshow();}</td><td> </td><td class="right">bool GridLinesMgr::getFlagMeridianLine(void) const {return meridianLine-&gt;ge
tFlagshow();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3f GridLinesMgr::getColorMeridianLine(void) const {return meridianLine-&gt;
getColor();}</td><td> </td><td class="right">Vec3f GridLinesMgr::getColorMeridianLine(void) const {return meridianLine-&gt;
getColor();}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setColorAzimuthalGrid(const Vec3f&amp; v) { aziGrid-&gt;setColo
r(v);}</td><td> </td><td class="right">void GridLinesMgr::setColorAzimuthalGrid(const Vec3f&amp; v) { aziGrid-&gt;setColo
r(v);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setColorEquatorGrid(const Vec3f&amp; v) { equGrid-&gt;setColor(
v);}</td><td> </td><td class="right">void GridLinesMgr::setColorEquatorGrid(const Vec3f&amp; v) { equGrid-&gt;setColor(
v);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setColorEquatorJ2000Grid(const Vec3f&amp; v) { equJ2000Grid-
&gt;setColor(v);}</td><td> </td><td class="right">void GridLinesMgr::setColorEquatorJ2000Grid(const Vec3f&amp; v) { equJ2000Grid-
&gt;setColor(v);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void GridLinesMgr::setColorGalacticGrid(const Vec3f&amp; v) { galacticGrid-&gt;set
Color(v);}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setColorEquatorLine(const Vec3f&amp; v) { equatorLine-&gt;setCo
lor(v);}</td><td> </td><td class="right">void GridLinesMgr::setColorEquatorLine(const Vec3f&amp; v) { equatorLine-&gt;setCo
lor(v);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setColorEclipticLine(const Vec3f&amp; v) { eclipticLine-&gt;set
Color(v);}</td><td> </td><td class="right">void GridLinesMgr::setColorEclipticLine(const Vec3f&amp; v) { eclipticLine-&gt;set
Color(v);}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void GridLinesMgr::setColorMeridianLine(const Vec3f&amp; v) { meridianLine-&gt;set
Color(v);}</td><td> </td><td class="right">void GridLinesMgr::setColorMeridianLine(const Vec3f&amp; v) { meridianLine-&gt;set
Color(v);}</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 74 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>128 lines changed or deleted</i></th><th><i> </i></th><th><i>125 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
