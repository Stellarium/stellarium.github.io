<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: SolarSystem.cpp - SolarSystem.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;SolarSystem.cpp&nbsp;</th><th> </th><th>&nbsp;SolarSystem.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 20</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 20</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This program is distributed in the hope that it will be useful,</td><td> </td><td class="right"> * This program is distributed in the hope that it will be useful,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</td><td> </td><td class="right"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td><td> </td><td class="right"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * GNU General Public License for more details.</td><td> </td><td class="right"> * GNU General Public License for more details.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * You should have received a copy of the GNU General Public License</td><td> </td><td class="right"> * You should have received a copy of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * along with this program; if not, write to the Free Software</td><td> </td><td class="right"> * along with this program; if not, write to the Free Software</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td> </td><td class="right"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include &lt;algorithm&gt;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "SolarSystem.hpp"</td><td> </td><td class="right">#include "SolarSystem.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTexture.hpp"</td><td> </td><td class="right">#include "StelTexture.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "stellplanet.h"</td><td> </td><td class="right">#include "stellplanet.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Orbit.hpp"</td><td> </td><td class="right">#include "Orbit.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelNavigator.hpp"</td><td> </td><td class="right">#include "StelNavigator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelProjector.hpp"</td><td> </td><td class="right">#include "StelProjector.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTextureMgr.hpp"</td><td> </td><td class="right">#include "StelTextureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelFontMgr.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelLocaleMgr.hpp"</td><td> </td><td class="right">#include "StelLocaleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyCultureMgr.hpp"</td><td> </td><td class="right">#include "StelSkyCultureMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelIniParser.hpp"</td><td> </td><td class="right">#include "StelIniParser.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "Planet.hpp"</td><td> </td><td class="right">#include "Planet.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelNavigator.hpp"</td><td> </td><td class="right">#include "StelNavigator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelFont.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelSkyDrawer.hpp"</td><td> </td><td class="right">#include "StelSkyDrawer.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelStyle.hpp"</td><td> </td><td class="right">#include "StelStyle.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPainter.hpp"</td><td> </td><td class="right">#include "StelPainter.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;functional&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;algorithm&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QTextStream&gt;</td><td> </td><td class="right">#include &lt;QTextStream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QVariant&gt;</td><td> </td><td class="right">#include &lt;QVariant&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QString&gt;</td><td> </td><td class="right">#include &lt;QString&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QStringList&gt;</td><td> </td><td class="right">#include &lt;QStringList&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMap&gt;</td><td> </td><td class="right">#include &lt;QMap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMultiMap&gt;</td><td> </td><td class="right">#include &lt;QMultiMap&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMapIterator&gt;</td><td> </td><td class="right">#include &lt;QMapIterator&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">using namespace std;</span></td><td> </td><td class="rblock">SolarSystem::SolarSystem() <span class="insert">:</span> moonScale(1.),    <span class="insert">flagOrbits(false), flagLight</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"><span class="insert">TravelTime(false),</span> lastHomePlanet(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">SolarSystem::SolarSystem() <span class="delete">:sun(NULL),moon(NULL),earth(NULL),selected(NULL)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> moonScale(1.), <span class="delete">fontSize(14.),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       planetNameFont(StelApp::getInstance().getFontManager().getStandardFo</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">nt(StelApp::getInstance().getLocaleMgr().getAppLanguage(), fontSize)),</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       flagOrbits(false),flagLightTravelTime(false),</span> lastHomePlanet(NULL)</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       planetNameFont.setPixelSize(14.);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("SolarSystem");</td><td> </td><td class="right">       setObjectName("SolarSystem");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFontSize(float newFontSize)</td><td> </td><td class="right">void SolarSystem::setFontSize(float newFontSize)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       planetNameFont<span class="delete"> = StelApp::getInstance().getFontManager().getStandard
Font(StelApp::getInstance().getLocaleMgr().getSkyLanguage(), f</span>ontSize);</td><td> </td><td class="rblock">       planetNameFont<span class="insert">.setPixelSize(newF</span>ontSize);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">SolarSystem::~SolarSystem()</td><td> </td><td class="right">SolarSystem::~SolarSystem()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // release selected:</td><td> </td><td class="right">       // release selected:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">selected = NULL;</span></td><td> </td><td class="rblock">       <span class="insert">selected.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for(std::vector&lt;Planet*&gt;::iterator iter = systemPlanets.begin(); ite</span></td><td> </td><td class="rblock"><span class="insert">       foreach (Orbit* orb, orbits)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">r != systemPlanets.end(); ++iter)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if (*iter)</span> delete <span class="delete">*iter;</span></td><td> </td><td class="rblock">               delete <span class="insert">orb;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               *iter</span> = NULL;</td><td> </td><td class="rblock"><span class="insert">               orb</span> = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">for(std::vector&lt;Orbit*&gt;::iterator iter = orbits.begin(); iter != orb</span></td><td> </td><td class="rblock">       <span class="insert">sun.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">its.end(); ++iter)</span></td><td> </td><td class="rblock"><span class="insert">       moon.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"><span class="insert">       earth.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               if (*iter) delete *iter;</span></td><td> </td><td class="rblock"><span class="insert">       Planet::hintCircleTex.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               *iter = NULL;</span></td><td> </td><td class="rblock"><span class="insert">       Planet::texEarthShadow.clear();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       sun = NULL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       moon = NULL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       earth = NULL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Planet::hintCircleTex.reset();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Planet::texEarthShadow.reset();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> Reimplementation of the getCallOrder method</td><td> </td><td class="right"> Reimplementation of the getCallOrder method</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double SolarSystem::getCallOrder(StelModuleActionName actionName) const</td><td> </td><td class="right">double SolarSystem::getCallOrder(StelModuleActionName actionName) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (actionName==StelModule::ActionDraw)</td><td> </td><td class="right">       if (actionName==StelModule::ActionDraw)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return StelApp::getInstance().getModuleMgr().getModule("Star
Mgr")-&gt;getCallOrder(actionName)+10;</td><td> </td><td class="right">               return StelApp::getInstance().getModuleMgr().getModule("Star
Mgr")-&gt;getCallOrder(actionName)+10;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 0;</td><td> </td><td class="right">       return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 124</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 116</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagPlanets(conf-&gt;value("astro/flag_planets").toBool());</td><td> </td><td class="right">       setFlagPlanets(conf-&gt;value("astro/flag_planets").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(conf-&gt;value("astro/flag_planets_hints").toBool());</td><td> </td><td class="right">       setFlagHints(conf-&gt;value("astro/flag_planets_hints").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLabels(conf-&gt;value("astro/flag_planets_labels", true).toBool(
));</td><td> </td><td class="right">       setFlagLabels(conf-&gt;value("astro/flag_planets_labels", true).toBool(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLabelsAmount(conf-&gt;value("astro/labels_amount", 3.).toDouble());</td><td> </td><td class="right">       setLabelsAmount(conf-&gt;value("astro/labels_amount", 3.).toDouble());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(conf-&gt;value("astro/flag_planets_orbits").toBool());</td><td> </td><td class="right">       setFlagOrbits(conf-&gt;value("astro/flag_planets_orbits").toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagLightTravelTime(conf-&gt;value("astro/flag_light_travel_time", f
alse).toBool());</td><td> </td><td class="right">       setFlagLightTravelTime(conf-&gt;value("astro/flag_light_travel_time", f
alse).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagTrails(conf-&gt;value("astro/flag_object_trails", false).toBool(
));</td><td> </td><td class="right">       setFlagTrails(conf-&gt;value("astro/flag_object_trails", false).toBool(
));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       startTrails(conf-&gt;value("astro/flag_object_trails", false).toBool())
;</td><td> </td><td class="right">       startTrails(conf-&gt;value("astro/flag_object_trails", false).toBool())
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GETSTELMODULE(StelObjectMgr)-&gt;registerStelObjectMgr(this);</td><td> </td><td class="right">       GETSTELMODULE(StelObjectMgr)-&gt;registerStelObjectMgr(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">StelApp::getInstance().getTextureManager().setDefaultParams();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       StelApp::getInstance().getTextureManager().setMinFilter(GL_LINEAR);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       texPointer = StelApp::getInstance().getTextureManager().createTextur
e("pointeur4.png");</td><td> </td><td class="right">       texPointer = StelApp::getInstance().getTextureManager().createTextur
e("pointeur4.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::hintCircleTex = StelApp::getInstance().getTextureManager().c
reateTexture("planet-indicator.png");</td><td> </td><td class="right">       Planet::hintCircleTex = StelApp::getInstance().getTextureManager().c
reateTexture("planet-indicator.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::drawPointer(const StelCore* core)</td><td> </td><td class="right">void SolarSystem::drawPointer(const StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelNavigator* nav = core-&gt;getNavigator();</td><td> </td><td class="right">       const StelNavigator* nav = core-&gt;getNavigator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td> </td><td class="right">       const StelProjectorP prj = core-&gt;getProjection(StelCore::FrameJ2000)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Planet");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!newSelected.empty())</td><td> </td><td class="right">       if (!newSelected.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelObjectP obj = newSelected[0];</td><td> </td><td class="right">               const StelObjectP obj = newSelected[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d pos=obj-&gt;getJ2000EquatorialPos(nav);</td><td> </td><td class="right">               Vec3d pos=obj-&gt;getJ2000EquatorialPos(nav);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d screenpos;</td><td> </td><td class="right">               Vec3d screenpos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Compute 2D pos and return if outside screen</td><td> </td><td class="right">               // Compute 2D pos and return if outside screen</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!prj-&gt;project(pos, screenpos))</td><td> </td><td class="right">               if (!prj-&gt;project(pos, screenpos))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelPainter sPainter(prj);</td><td> </td><td class="right">               StelPainter sPainter(prj);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">glColor3f</span>(1.0f,0.3f,0.3f);</td><td> </td><td class="rblock">               <span class="insert">sPainter.setColor</span>(1.0f,0.3f,0.3f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float size = obj-&gt;getAngularSize(core)*M_PI/180.*prj-&gt;getPix
elPerRadAtCenter()*2.;</td><td> </td><td class="right">               float size = obj-&gt;getAngularSize(core)*M_PI/180.*prj-&gt;getPix
elPerRadAtCenter()*2.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               size+=<span class="delete">26</span>.f + 10.f*std::sin(2.f * StelApp::getInstance().getT
otalRunTime());</td><td> </td><td class="rblock">               size+=<span class="insert">40</span>.f + 10.f*std::sin(2.f * StelApp::getInstance().getT
otalRunTime());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               texPointer-&gt;bind();</td><td> </td><td class="right">               texPointer-&gt;bind();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        <span class="delete">glEnable(GL_TEXTURE_2D);</span></td><td> </td><td class="rblock">               <span class="insert">sPainter.enableTexture2d(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        glEnable(GL_BLEND);</td><td> </td><td class="rblock">               glEnable(GL_BLEND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal <span class="delete">transp</span></td><td> </td><td class="rblock">               glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); // Normal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">arency</span> mode</td><td> </td><td class="rblock"> <span class="insert">transparency</span> mode</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        <span class="delete">glPushMatrix();</span></td><td> </td><td class="rblock">               <span class="insert">size*=0.5;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glTranslatef(screenpos[0], screenpos[1], 0.0f);</span></td><td> </td><td class="rblock"><span class="insert">               const float angleBase = StelApp::getInstance().getTotalRunTi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glRotatef(StelApp::getInstance().getTotalRunTime()*10.,0,0,-1);</span></td><td> </td><td class="rblock"><span class="insert">me() * 10;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"><span class="insert">               // We draw 4 instances of the sprite at the corners of the p</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glTranslatef(-size/2, -size/2,0.0f);</span></td><td> </td><td class="rblock"><span class="insert">ointer</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glRotatef(90,0,0,1);</span></td><td> </td><td class="rblock"><span class="insert">               for (int i = 0; i &lt; 4; ++i)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glBegin(GL_QUADS );</span></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,0.0f);    glVertex3f(-10,-10,0);      //Bas G</span></td><td> </td><td class="rblock"><span class="insert">                       const float angle = angleBase + i * 90;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">auche</span></td><td> </td><td class="rblock"><span class="insert">                       const double x = screenpos[0] + size * cos(angle / 1</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,0.0f);    glVertex3f(10,-10,0);       //Bas D</span></td><td> </td><td class="rblock"><span class="insert">80 * M_PI);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">roite</span></td><td> </td><td class="rblock"><span class="insert">                       const double y = screenpos[1] + size * sin(angle / 1</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,1.0f);    glVertex3f(10,10,0);        //Haut </span></td><td> </td><td class="rblock"><span class="insert">80 * M_PI);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Droit</span></td><td> </td><td class="rblock"><span class="insert">                       sPainter.drawSprite2dMode(x, y, 10, angle);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,1.0f);    glVertex3f(-10,10,0);       //Haut </span></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Gauche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glEnd ();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glRotatef(-90,0,0,1);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glTranslatef(0,size,0.0f);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glBegin(GL_QUADS );</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,0.0f);    glVertex3f(-10,-10,0);      //Bas G</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">auche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,0.0f);    glVertex3f(10,-10,0);       //Bas D</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">roite</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,1.0f);    glVertex3f(10,10,0);        //Haut </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Droit</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,1.0f);    glVertex3f(-10,10,0);       //Haut </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Gauche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glEnd ();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glRotatef(-90,0,0,1);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glTranslatef(0, size,0.0f);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glBegin(GL_QUADS );</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,0.0f);    glVertex3f(-10,-10,0);      //Bas G</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">auche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,0.0f);    glVertex3f(10,-10,0);       //Bas D</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">roite</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,1.0f);    glVertex3f(10,10,0);        //Haut </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Droit</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,1.0f);    glVertex3f(-10,10,0);       //Haut </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Gauche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glEnd ();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glRotatef(-90,0,0,1);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glTranslatef(0,size,0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glBegin(GL_QUADS );</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,0.0f);    glVertex3f(-10,-10,0);      //Bas G</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">auche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,0.0f);    glVertex3f(10,-10,0);       //Bas D</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">roite</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(1.0f,1.0f);    glVertex3f(10,10,0);        //Haut </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Droit</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            glTexCoord2f(0.0f,1.0f);    glVertex3f(-10,10,0);       //Haut </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Gauche</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">        glEnd ();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               glPopMatrix();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void ellipticalOrbitPosFunc(double jd,double xyz[3], void* userDataPtr)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       static_cast&lt;EllipticalOrbit*&gt;(userDataPtr)-&gt;positionAtTimevInVSOP87C</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">oordinates(jd, xyz);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void cometOrbitPosFunc(double jd,double xyz[3], void* userDataPtr)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       static_cast&lt;CometOrbit*&gt;(userDataPtr)-&gt;positionAtTimevInVSOP87Coordi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">nates(jd, xyz);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Init and load the solar system data</td><td> </td><td class="right">// Init and load the solar system data</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::loadPlanets()</td><td> </td><td class="right">void SolarSystem::loadPlanets()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Loading Solar System data ...";</td><td> </td><td class="right">       qDebug() &lt;&lt; "Loading Solar System data ...";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString iniFile;</td><td> </td><td class="right">       QString iniFile;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       try</td><td> </td><td class="right">       try</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               iniFile = Stel<span class="delete">App::getInstance().getFileMgr().findFile("data
</span>/ssystem.ini");</td><td> </td><td class="rblock">               iniFile = Stel<span class="insert">FileMgr::findFile("data</span>/ssystem.ini");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       catch(std::runtime_error&amp; e)</td><td> </td><td class="right">       catch(std::runtime_error&amp; e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "ERROR while loading ssysyem.ini (unable to fi
nd data/ssystem.ini): " &lt;&lt; e.what() &lt;&lt; endl;</td><td> </td><td class="right">               qWarning() &lt;&lt; "ERROR while loading ssysyem.ini (unable to fi
nd data/ssystem.ini): " &lt;&lt; e.what() &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings pd(iniFile, StelIniFormat);</td><td> </td><td class="right">       QSettings pd(iniFile, StelIniFormat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (pd.status() != QSettings::NoError)</td><td> </td><td class="right">       if (pd.status() != QSettings::NoError)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "ERROR while parsing ssysyem.ini file";</td><td> </td><td class="right">               qWarning() &lt;&lt; "ERROR while parsing ssysyem.ini file";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 304</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 273</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Stage 3 (as described above).</td><td> </td><td class="right">       // Stage 3 (as described above).</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int readOk=0;</td><td> </td><td class="right">       int readOk=0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int totalPlanets=0;</td><td> </td><td class="right">       int totalPlanets=0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i = 0;i&lt;orderedSections.size();++i)</td><td> </td><td class="right">       for (int i = 0;i&lt;orderedSections.size();++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               totalPlanets++;</td><td> </td><td class="right">               totalPlanets++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString secname = orderedSections.at(i);</td><td> </td><td class="right">               const QString secname = orderedSections.at(i);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString englishName = pd.value(secname+"/name").toStri
ng();</td><td> </td><td class="right">               const QString englishName = pd.value(secname+"/name").toStri
ng();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString strParent = pd.value(secname+"/parent").toStri
ng();</td><td> </td><td class="right">               const QString strParent = pd.value(secname+"/parent").toStri
ng();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">Planet *parent = NULL;</span></td><td> </td><td class="rblock">               <span class="insert">PlanetP parent;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (strParent!="none")</td><td> </td><td class="rblock">               if (strParent!="none")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Look in the other planets the one named with strP
arent</td><td> </td><td class="right">                       // Look in the other planets the one named with strP
arent</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">vector&lt;Planet*&gt;::iterator iter = systemPlanets.begin</span></td><td> </td><td class="rblock">                       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (<span class="delete">(*iter)</span>-&gt;getEnglishName()==strParent)</td><td> </td><td class="rblock">                               if (<span class="insert">p</span>-&gt;getEnglishName()==strParent)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       parent = <span class="delete">(*iter);</span></td><td> </td><td class="rblock">                                       parent = <span class="insert">p;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       break;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               iter++;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (parent<span class="delete"> == NULL</span>)</td><td> </td><td class="rblock">                       if (parent<span class="insert">.isNull()</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qWarning() &lt;&lt; "ERROR : can't find parent sol
ar system body for " &lt;&lt; englishName;</td><td> </td><td class="right">                               qWarning() &lt;&lt; "ERROR : can't find parent sol
ar system body for " &lt;&lt; englishName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               abort();</td><td> </td><td class="right">                               abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const QString funcName = pd.value(secname+"/coord_func").toS
tring();</td><td> </td><td class="right">               const QString funcName = pd.value(secname+"/coord_func").toS
tring();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               posFuncType <span class="delete">posfunc;</span></td><td> </td><td class="rblock">               posFuncType <span class="insert">posfunc=NULL;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               void* userDataPtr=NULL;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               OsulatingFunctType *osculatingFunc = 0;</td><td> </td><td class="right">               OsulatingFunctType *osculatingFunc = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bool closeOrbit = pd.value(secname+"/closeOrbit", true).toBo
ol();</td><td> </td><td class="right">               bool closeOrbit = pd.value(secname+"/closeOrbit", true).toBo
ol();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="ell_orbit")</td><td> </td><td class="right">               if (funcName=="ell_orbit")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Read the orbital elements</td><td> </td><td class="right">                       // Read the orbital elements</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double epoch = pd.value(secname+"/orbit_Epoch"
,J2000).toDouble();</td><td> </td><td class="right">                       const double epoch = pd.value(secname+"/orbit_Epoch"
,J2000).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity").toDouble();</td><td> </td><td class="right">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity").toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td> </td><td class="right">                       if (eccentricity &gt;= 1.0) closeOrbit = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td> </td><td class="right">                       double pericenterDistance = pd.value(secname+"/orbit
_PericenterDistance",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 352</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 321</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td> </td><td class="right">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       abort();</td><td> </td><td class="right">                                       abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       semi_major_axis /= AU;</td><td> </td><td class="right">                                       semi_major_axis /= AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td> </td><td class="right">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td> </td><td class="right">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               pericenterDistance /= AU;</td><td> </td><td class="right">                               pericenterDistance /= AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = (eccentricity == 1.0)</td><td> </td><td class="right">                               semi_major_axis = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               ? 0.0 // <span class="delete">parabolic</span> orbits <span class="delete">ha</span></td><td> </td><td class="rblock">                                                               ? 0.0 // <span class="insert">par</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ve</span> no semi_major_axis</td><td> </td><td class="rblock"><span class="insert">abolic</span> orbits <span class="insert">have</span> no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               : <span class="delete">pericenterDistance</span> / <span class="delete">(1.0-</span></td><td> </td><td class="rblock">                                                               : <span class="insert">pericenter</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eccentricity);</span></td><td> </td><td class="rblock"><span class="insert">Distance</span> / <span class="insert">(1.0-eccentricity);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td> </td><td class="right">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double period;</td><td> </td><td class="right">                       double period;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (meanMotion &lt;= -1e100) {</td><td> </td><td class="right">                       if (meanMotion &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               period = pd.value(secname+"/orbit_Period",-1
e100).toDouble();</td><td> </td><td class="right">                               period = pd.value(secname+"/orbit_Period",-1
e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (period &lt;= -1e100) {</td><td> </td><td class="right">                               if (period &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       meanMotion = (eccentricity == 1.0)</td><td> </td><td class="right">                                       meanMotion = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   ? <span class="delete">0.01720209895</span> * <span class="delete">(1.5/p</span></td><td> </td><td class="rblock">                                                               ? <span class="insert">0.01720209</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ericenterDistance)</span></td><td> </td><td class="rblock"><span class="insert">895</span> * <span class="insert">(1.5/pericenterDistance)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                   * <span class="delete">sqrt(0</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">.5/pericenterDistance)</span></td><td> </td><td class="rblock">                    * <span class="insert">sqrt(0.5/pericenterDistance)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   : <span class="delete">(semi_major_axis</span> &gt; <span class="delete">0.0</span></td><td> </td><td class="rblock">                                                               : <span class="insert">(semi_majo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)</span></td><td> </td><td class="rblock"><span class="insert">r_axis</span> &gt; <span class="insert">0.0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   ? <span class="delete">0.01720209895</span> / <span class="delete">(semi_</span></td><td> </td><td class="rblock">                                                               ? <span class="insert">0.01720209</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">major_axis*sqrt(semi_major_axis))</span></td><td> </td><td class="rblock"><span class="insert">895</span> / <span class="insert">(semi_major_axis*sqrt(semi_major_axis))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                   : <span class="delete">0.01720209895</span> / <span class="delete">(-semi</span></td><td> </td><td class="rblock">                                                               : <span class="insert">0.01720209</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">_major_axis*sqrt(-semi_major_axis));</span></td><td> </td><td class="rblock"><span class="insert">895</span> / <span class="insert">(-semi_major_axis*sqrt(-semi_major_axis));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       period = 2.0*M_PI/meanMotion;</td><td> </td><td class="right">                                       period = 2.0*M_PI/meanMotion;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       meanMotion = 2.0*M_PI/period;</td><td> </td><td class="right">                                       meanMotion = 2.0*M_PI/period;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               period = 2.0*M_PI/meanMotion;</td><td> </td><td class="right">                               period = 2.0*M_PI/meanMotion;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double inclination = pd.value(secname+"/orbit_
Inclination").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double inclination = pd.value(secname+"/orbit_
Inclination").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double ascending_node = pd.value(secname+"/orb
it_AscendingNode").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double ascending_node = pd.value(secname+"/orb
it_AscendingNode").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double arg_of_pericenter = pd.value(secname+"/orbit_
ArgOfPericenter",-1e100).toDouble();</td><td> </td><td class="right">                       double arg_of_pericenter = pd.value(secname+"/orbit_
ArgOfPericenter",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 396</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 365</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (mean_anomaly &lt;= -1e100) {</td><td> </td><td class="right">                       if (mean_anomaly &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mean_longitude = pd.value(secname+"/orbit_Me
anLongitude").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                               mean_longitude = pd.value(secname+"/orbit_Me
anLongitude").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mean_anomaly = mean_longitude - long_of_peri
center;</td><td> </td><td class="right">                               mean_anomaly = mean_longitude - long_of_peri
center;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mean_anomaly *= (M_PI/180.0);</td><td> </td><td class="right">                               mean_anomaly *= (M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               mean_longitude = mean_anomaly + long_of_peri
center;</td><td> </td><td class="right">                               mean_longitude = mean_anomaly + long_of_peri
center;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // when the parent is the sun use ecliptic rathe tha
n sun equator:</td><td> </td><td class="right">                       // when the parent is the sun use ecliptic rathe tha
n sun equator:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parentRotObliquity = parent-&gt;getParent(
)</td><td> </td><td class="right">                       const double parentRotObliquity = parent-&gt;getParent(
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         ? <span class="delete">parent-&gt;getRotOb</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">liquity()</span></td><td> </td><td class="rblock">              ? <span class="insert">parent-&gt;getRotObliquity()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         : 0.0;</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">              : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parent_rot_asc_node = parent-&gt;getParent
()</td><td> </td><td class="right">                       const double parent_rot_asc_node = parent-&gt;getParent
()</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         ? <span class="delete">parent-&gt;getRotAs</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">cendingnode()</span></td><td> </td><td class="rblock">              ? <span class="insert">parent-&gt;getRotAscendingnode()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         : 0.0;</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">              : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double parent_rot_j2000_longitude = 0.0;</td><td> </td><td class="right">                       double parent_rot_j2000_longitude = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (parent-&gt;getParent()) {</td><td> </td><td class="right">                       if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double c_obl = cos(parentRotObliquity)
;</td><td> </td><td class="right">                               const double c_obl = cos(parentRotObliquity)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double s_obl = sin(parentRotObliquity)
;</td><td> </td><td class="right">                               const double s_obl = sin(parentRotObliquity)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double c_nod = cos(parent_rot_asc_node
);</td><td> </td><td class="right">                               const double c_nod = cos(parent_rot_asc_node
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double s_nod = sin(parent_rot_asc_node
);</td><td> </td><td class="right">                               const double s_nod = sin(parent_rot_asc_node
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitAxis0( c_nod,       s_nod, 
       0.0);</td><td> </td><td class="right">                               const Vec3d OrbitAxis0( c_nod,       s_nod, 
       0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c
_obl,s_obl);</td><td> </td><td class="right">                               const Vec3d OrbitAxis1(-s_nod*c_obl, c_nod*c
_obl,s_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s
_obl,c_obl);</td><td> </td><td class="right">                               const Vec3d OrbitPole(  s_nod*s_obl,-c_nod*s
_obl,c_obl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const Vec3d J2000Pole(StelNavigator::matJ200
0ToVsop87.multiplyWithoutTranslation(Vec3d(0,0,1)));</td><td> </td><td class="right">                               const Vec3d J2000Pole(StelNavigator::matJ200
0ToVsop87.multiplyWithoutTranslation(Vec3d(0,0,1)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3d J2000NodeOrigin(J2000Pole^OrbitPole);</td><td> </td><td class="right">                               Vec3d J2000NodeOrigin(J2000Pole^OrbitPole);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               J2000NodeOrigin.normalize();</td><td> </td><td class="right">                               J2000NodeOrigin.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               parent_rot_j2000_longitude = atan2(J2000Node
Origin*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</td><td> </td><td class="right">                               parent_rot_j2000_longitude = atan2(J2000Node
Origin*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Create an elliptical orbit</td><td> </td><td class="right">                       // Create an elliptical orbit</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       EllipticalOrbit *orb = new EllipticalOrbit(pericente
rDistance,</td><td> </td><td class="right">                       EllipticalOrbit *orb = new EllipticalOrbit(pericente
rDistance,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                  <span class="delete">eccentric</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ity,</span></td><td> </td><td class="rblock">                               <span class="insert">eccentricity,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                  inclinati</span></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">on,</span></td><td> </td><td class="rblock"><span class="insert">                               inclination,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                  ascending</span></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">_node,</span></td><td> </td><td class="rblock"><span class="insert">                               ascending_node,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                  arg_of_pe</span></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ricenter,</span></td><td> </td><td class="rblock"><span class="insert">                               arg_of_pericenter,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                  mean_anom</span></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">aly,</span></td><td> </td><td class="rblock"><span class="insert">                               mean_anomaly,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                  period,</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                  epoch,</td><td> </td><td class="rblock">                               period,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                  <span class="delete">parentRot</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Obliquity,</span></td><td> </td><td class="rblock">                               epoch,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                                                  parent_ro</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">t_asc_node,</span></td><td> </td><td class="rblock">                               <span class="insert">parentRotObliquity,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               parent_rot_asc_node,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                           
                               parent_rot_j2000_longitude);</td><td> </td><td class="right">                                                                           
                               parent_rot_j2000_longitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       orbits.push_back(orb);</td><td> </td><td class="right">                       orbits.push_back(orb);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(orb, &amp;EllipticalOrbit::positio</span></td><td> </td><td class="rblock">                       <span class="insert">userDataPtr = orb;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">nAtTimevInVSOP87Coordinates);</span></td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;ellipticalOrbitPosFunc;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else if (funcName=="comet_orbit")</td><td> </td><td class="right">               else if (funcName=="comet_orbit")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Read the orbital elements</td><td> </td><td class="right">                       // Read the orbital elements</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_PericenterDistance,orbit_SemiMajorAxis: giv
en in AU</td><td> </td><td class="right">                       // orbit_PericenterDistance,orbit_SemiMajorAxis: giv
en in AU</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_MeanMotion: given in degrees/day</td><td> </td><td class="right">                       // orbit_MeanMotion: given in degrees/day</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_Period: given in days</td><td> </td><td class="right">                       // orbit_Period: given in days</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_TimeAtPericenter,orbit_Epoch: JD</td><td> </td><td class="right">                       // orbit_TimeAtPericenter,orbit_Epoch: JD</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // orbit_MeanAnomaly,orbit_Inclination,orbit_ArgOfPe
ricenter,orbit_AscendingNode: given in degrees</td><td> </td><td class="right">                       // orbit_MeanAnomaly,orbit_Inclination,orbit_ArgOfPe
ricenter,orbit_AscendingNode: given in degrees</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity",0.0).toDouble();</td><td> </td><td class="right">                       const double eccentricity = pd.value(secname+"/orbit
_Eccentricity",0.0).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 456</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 426</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (semi_major_axis &lt;= -1e100) {</td><td> </td><td class="right">                               if (semi_major_axis &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "ERROR: " &lt;&lt; englishNa
me</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td> </td><td class="right">                                               &lt;&lt; ": you must provide orbit
_PericenterDistance or orbit_SemiMajorAxis";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       abort();</td><td> </td><td class="right">                                       abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td> </td><td class="right">                                       Q_ASSERT(eccentricity != 1.0); // pa
rabolic orbits have no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td> </td><td class="right">                                       pericenterDistance = semi_major_axis
 * (1.0-eccentricity);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               semi_major_axis = (eccentricity == 1.0)</td><td> </td><td class="right">                               semi_major_axis = (eccentricity == 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               ? 0.0 // <span class="delete">parabolic</span> orbits <span class="delete">ha</span></td><td> </td><td class="rblock">                                                               ? 0.0 // <span class="insert">par</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ve</span> no semi_major_axis</td><td> </td><td class="rblock"><span class="insert">abolic</span> orbits <span class="insert">have</span> no semi_major_axis</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               : <span class="delete">pericenterDistance</span> / <span class="delete">(1.0-</span></td><td> </td><td class="rblock">                                                               : <span class="insert">pericenter</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eccentricity);</span></td><td> </td><td class="rblock"><span class="insert">Distance</span> / <span class="insert">(1.0-eccentricity);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td> </td><td class="right">                       double meanMotion = pd.value(secname+"/orbit_MeanMot
ion",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (meanMotion &lt;= -1e100) {</td><td> </td><td class="right">                       if (meanMotion &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double period = pd.value(secname+"/orb
it_Period",-1e100).toDouble();</td><td> </td><td class="right">                               const double period = pd.value(secname+"/orb
it_Period",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (period &lt;= -1e100) {</td><td> </td><td class="right">                               if (period &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (parent-&gt;getParent()) {</td><td> </td><td class="right">                                       if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               qWarning() &lt;&lt; "ERROR: " &lt;&lt; e
nglishName</td><td> </td><td class="right">                                               qWarning() &lt;&lt; "ERROR: " &lt;&lt; e
nglishName</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       &lt;&lt; ": when the paren
t body is not the sun, you must provide "</td><td> </td><td class="right">                                                       &lt;&lt; ": when the paren
t body is not the sun, you must provide "</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       &lt;&lt; "either orbit_Mea
nMotion or orbit_Period";</td><td> </td><td class="right">                                                       &lt;&lt; "either orbit_Mea
nMotion or orbit_Period";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       } else {</td><td> </td><td class="right">                                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               // in case of parent=sun: us
e Gaussian gravitational constant</td><td> </td><td class="right">                                               // in case of parent=sun: us
e Gaussian gravitational constant</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               // for calculating meanMotio
n:</td><td> </td><td class="right">                                               // for calculating meanMotio
n:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               meanMotion = (eccentricity =
= 1.0)</td><td> </td><td class="right">                                               meanMotion = (eccentricity =
= 1.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                           ? <span class="delete">0.01720209895</span> </td><td> </td><td class="rblock">                                                                       ? <span class="insert">0.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">* (1.5/pericenterDistance)</td><td> </td><td class="rblock"><span class="insert">01720209895</span> * (1.5/pericenterDistance)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">* sqrt(0.5/pericenterDistance)</td><td> </td><td class="rblock">                            * sqrt(0.5/pericenterDistance)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                           : <span class="delete">(semi_major_ax</span></td><td> </td><td class="rblock">                                                                       : <span class="insert">(s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">is</span> &gt; 0.0)</td><td> </td><td class="rblock"><span class="insert">emi_major_axis</span> &gt; 0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                           ? <span class="delete">0.01720209895</span> </td><td> </td><td class="rblock">                                                                       ? <span class="insert">0.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">/ (semi_major_axis*sqrt(semi_major_axis))</td><td> </td><td class="rblock"><span class="insert">01720209895</span> / (semi_major_axis*sqrt(semi_major_axis))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                           : <span class="delete">0.01720209895</span> </td><td> </td><td class="rblock">                                                                       : <span class="insert">0.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">/ (-semi_major_axis*sqrt(-semi_major_axis));</td><td> </td><td class="rblock"><span class="insert">01720209895</span> / (-semi_major_axis*sqrt(-semi_major_axis));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       meanMotion = 2.0*M_PI/period;</td><td> </td><td class="right">                                       meanMotion = 2.0*M_PI/period;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       } else {</td><td> </td><td class="right">                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               meanMotion *= (M_PI/180.0);</td><td> </td><td class="right">                               meanMotion *= (M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double time_at_pericenter = pd.value(secname+"/orbit
_TimeAtPericenter",-1e100).toDouble();</td><td> </td><td class="right">                       double time_at_pericenter = pd.value(secname+"/orbit
_TimeAtPericenter",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (time_at_pericenter &lt;= -1e100) {</td><td> </td><td class="right">                       if (time_at_pericenter &lt;= -1e100) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               const double epoch = pd.value(secname+"/orbi
t_Epoch",-1e100).toDouble();</td><td> </td><td class="right">                               const double epoch = pd.value(secname+"/orbi
t_Epoch",-1e100).toDouble();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 501</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 471</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       abort();</td><td> </td><td class="right">                                       abort();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               } else {</td><td> </td><td class="right">                               } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       mean_anomaly *= (M_PI/180.0);</td><td> </td><td class="right">                                       mean_anomaly *= (M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       time_at_pericenter = epoch - mean_an
omaly / meanMotion;</td><td> </td><td class="right">                                       time_at_pericenter = epoch - mean_an
omaly / meanMotion;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double inclination = pd.value(secname+"/orbit_
Inclination").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double inclination = pd.value(secname+"/orbit_
Inclination").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double arg_of_pericenter = pd.value(secname+"/
orbit_ArgOfPericenter").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double arg_of_pericenter = pd.value(secname+"/
orbit_ArgOfPericenter").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double ascending_node = pd.value(secname+"/orb
it_AscendingNode").toDouble()*(M_PI/180.0);</td><td> </td><td class="right">                       const double ascending_node = pd.value(secname+"/orb
it_AscendingNode").toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parentRotObliquity = parent-&gt;getParent(
)</td><td> </td><td class="right">                       const double parentRotObliquity = parent-&gt;getParent(
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         ? <span class="delete">parent-&gt;getRotOb</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">liquity()</span></td><td> </td><td class="rblock">              ? <span class="insert">parent-&gt;getRotObliquity()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         : 0.0;</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">              : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double parent_rot_asc_node = parent-&gt;getParent
()</td><td> </td><td class="right">                       const double parent_rot_asc_node = parent-&gt;getParent
()</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         ? <span class="delete">parent-&gt;getRotAs</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">cendingnode()</span></td><td> </td><td class="rblock">              ? <span class="insert">parent-&gt;getRotAscendingnode()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                         : 0.0;</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">              : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double parent_rot_j2000_longitude = 0.0;</td><td> </td><td class="right">                       double parent_rot_j2000_longitude = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                        if (parent-&gt;getParent()) {</td><td> </td><td class="rblock">                                               if (parent-&gt;getParent()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const double c_obl = <span class="delete">cos(parentRotObliquity);</span></td><td> </td><td class="rblock">                                                  const double c_obl = <span class="insert">cos(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const double s_obl = <span class="delete">sin(parentRotObliquity);</span></td><td> </td><td class="rblock"><span class="insert">parentRotObliquity);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const double c_nod = <span class="delete">cos(parent_rot_asc_node);</span></td><td> </td><td class="rblock">                                                  const double s_obl = <span class="insert">sin(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const double s_nod = <span class="delete">sin(parent_rot_asc_node);</span></td><td> </td><td class="rblock"><span class="insert">parentRotObliquity);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const Vec3d OrbitAxis0( <span class="delete">c_nod,</span>       s_nod,     </td><td> </td><td class="rblock">                                                  const double c_nod = <span class="insert">cos(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">   0.0);</td><td> </td><td class="rblock"><span class="insert">parent_rot_asc_node);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const Vec3d <span class="delete">OrbitAxis1(-s_nod*c_obl, c_nod*c_obl</span></td><td> </td><td class="rblock">                                                  const double s_nod = <span class="insert">sin(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,s_obl);</span></td><td> </td><td class="rblock"><span class="insert">parent_rot_asc_node);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           const Vec3d OrbitPole(  <span class="delete">s_nod*s_obl,-c_nod*s_obl</span></td><td> </td><td class="rblock">                                                  const Vec3d OrbitAxis0( <span class="insert">c</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,c_obl);</span></td><td> </td><td class="rblock"><span class="insert">_nod,</span>       s_nod,        0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                  const Vec3d <span class="insert">OrbitAxis1(-s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">_nod*c_obl, c_nod*c_obl,s_obl);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                  const Vec3d OrbitPole(  <span class="insert">s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">_nod*s_obl,-c_nod*s_obl,c_obl);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                  const Vec3d J2000Pole(Ste
lNavigator::matJ2000ToVsop87.multiplyWithoutTranslation(Vec3d(0,0,1)));</td><td> </td><td class="right">                                                  const Vec3d J2000Pole(Ste
lNavigator::matJ2000ToVsop87.multiplyWithoutTranslation(Vec3d(0,0,1)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           Vec3d <span class="delete">J2000NodeOrigin(J2000Pole^OrbitPole);</span></td><td> </td><td class="rblock">                                                  Vec3d <span class="insert">J2000NodeOrigin(J20</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                           J2000NodeOrigin.normalize();</span></td><td> </td><td class="rblock"><span class="insert">00Pole^OrbitPole);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                           parent_rot_j2000_longitude</span> = <span class="delete">atan2(J2000NodeOrig</span></td><td> </td><td class="rblock"><span class="insert">                                                  J2000NodeOrigin.normalize</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">in*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</span></td><td> </td><td class="rblock"><span class="insert">();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                        }</td><td> </td><td class="rblock"><span class="insert">                                                  parent_rot_j2000_longitud</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e</span> = <span class="insert">atan2(J2000NodeOrigin*OrbitAxis1,J2000NodeOrigin*OrbitAxis0);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       CometOrbit *orb = new CometOrbit(pericenterDistance,</td><td> </td><td class="right">                       CometOrbit *orb = new CometOrbit(pericenterDistance,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        eccentricity,</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        inclination,</td><td> </td><td class="rblock">             eccentricity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        ascending_node,</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        arg_of_pericenter,</td><td> </td><td class="rblock">             inclination,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        time_at_pericenter,</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        meanMotion,</td><td> </td><td class="rblock">             ascending_node,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        parentRotObliquity,</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        <span class="delete">parent_rot_asc_node</span></td><td> </td><td class="rblock">             arg_of_pericenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">             time_at_pericenter,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">             meanMotion,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">             parentRotObliquity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">             <span class="insert">parent_rot_asc_node,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                           
             parent_rot_j2000_longitude);</td><td> </td><td class="right">                                                                           
             parent_rot_j2000_longitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       orbits.push_back(orb);</td><td> </td><td class="right">                       orbits.push_back(orb);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">                       <span class="insert">userDataPtr = orb;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(orb,&amp;CometOrbit::positionAtTim</span></td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;cometOrbitPosFunc;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">evInVSOP87Coordinates);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="sun_special")</td><td> </td><td class="right">               if (funcName=="sun_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_sun_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_sun_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="mercury_special") {</td><td> </td><td class="right">               if (funcName=="mercury_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_mercury_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_mercury_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_mercury_helio_osculating_coord
s;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_mercury_helio_osculating_coord
s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="venus_special") {</td><td> </td><td class="right">               if (funcName=="venus_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_venus_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_venus_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_venus_helio_osculating_coords;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_venus_helio_osculating_coords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="earth_special") {</td><td> </td><td class="right">               if (funcName=="earth_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_earth_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_earth_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_earth_helio_osculating_coords;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_earth_helio_osculating_coords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="lunar_special")</td><td> </td><td class="right">               if (funcName=="lunar_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_lunar_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_lunar_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="mars_special") {</td><td> </td><td class="right">               if (funcName=="mars_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_mars_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_mars_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_mars_helio_osculating_coords;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_mars_helio_osculating_coords;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="phobos_special")</td><td> </td><td class="right">               if (funcName=="phobos_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = posFuncType(get_phobos_parent_coordsv);</td><td> </td><td class="right">                       posfunc = posFuncType(get_phobos_parent_coordsv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="deimos_special")</td><td> </td><td class="right">               if (funcName=="deimos_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_deimos_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_deimos_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="jupiter_special") {</td><td> </td><td class="right">               if (funcName=="jupiter_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_jupiter_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_jupiter_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_jupiter_helio_osculating_coord
s;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_jupiter_helio_osculating_coord
s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="europa_special")</td><td> </td><td class="right">               if (funcName=="europa_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_europa_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_europa_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="calisto_special")</td><td> </td><td class="right">               if (funcName=="calisto_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_callisto_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_callisto_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="io_special")</td><td> </td><td class="right">               if (funcName=="io_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_io_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_io_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="ganymede_special")</td><td> </td><td class="right">               if (funcName=="ganymede_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_ganymede_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_ganymede_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="saturn_special") {</td><td> </td><td class="right">               if (funcName=="saturn_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_saturn_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_saturn_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_saturn_helio_osculating_coords
;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_saturn_helio_osculating_coords
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="mimas_special")</td><td> </td><td class="right">               if (funcName=="mimas_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_mimas_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_mimas_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="enceladus_special")</td><td> </td><td class="right">               if (funcName=="enceladus_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_enceladus_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_enceladus_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="tethys_special")</td><td> </td><td class="right">               if (funcName=="tethys_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_tethys_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_tethys_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="dione_special")</td><td> </td><td class="right">               if (funcName=="dione_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_dione_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_dione_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="rhea_special")</td><td> </td><td class="right">               if (funcName=="rhea_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_rhea_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_rhea_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="titan_special")</td><td> </td><td class="right">               if (funcName=="titan_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_titan_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_titan_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="iapetus_special")</td><td> </td><td class="right">               if (funcName=="iapetus_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_iapetus_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_iapetus_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="hyperion_special")</td><td> </td><td class="right">               if (funcName=="hyperion_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_hyperion_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_hyperion_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="uranus_special") {</td><td> </td><td class="right">               if (funcName=="uranus_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_uranus_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_uranus_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_uranus_helio_osculating_coords
;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_uranus_helio_osculating_coords
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="miranda_special")</td><td> </td><td class="right">               if (funcName=="miranda_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_miranda_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_miranda_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="ariel_special")</td><td> </td><td class="right">               if (funcName=="ariel_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_ariel_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_ariel_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="umbriel_special")</td><td> </td><td class="right">               if (funcName=="umbriel_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_umbriel_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_umbriel_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="titania_special")</td><td> </td><td class="right">               if (funcName=="titania_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_titania_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_titania_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="oberon_special")</td><td> </td><td class="right">               if (funcName=="oberon_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_oberon_parent_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_oberon_parent_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="neptune_special") {</td><td> </td><td class="right">               if (funcName=="neptune_special") {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       posfunc = posFuncType(get_neptune_helio_coordsv);</td><td> </td><td class="right">                       posfunc = posFuncType(get_neptune_helio_coordsv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       osculatingFunc = &amp;get_neptune_helio_osculating_coord
s;</td><td> </td><td class="right">                       osculatingFunc = &amp;get_neptune_helio_osculating_coord
s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (funcName=="pluto_special")</td><td> </td><td class="right">               if (funcName=="pluto_special")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       posfunc = <span class="delete">posFuncType(get_pluto_helio_coordsv)</span>;</td><td> </td><td class="rblock">                       posfunc = <span class="insert">&amp;get_pluto_helio_coordsv</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (posfunc<span class="delete">.empty()</span>)</td><td> </td><td class="rblock">               if (posfunc<span class="insert">==NULL</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "ERROR : can't find posfunc " &lt;&lt; funcN
ame &lt;&lt; " for " &lt;&lt; englishName;</td><td> </td><td class="right">                       qWarning() &lt;&lt; "ERROR : can't find posfunc " &lt;&lt; funcN
ame &lt;&lt; " for " &lt;&lt; englishName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       exit(-1);</td><td> </td><td class="right">                       exit(-1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Create the Planet and add it to the list</td><td> </td><td class="right">               // Create the Planet and add it to the list</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               Planet<span class="delete">* p = </span>new Planet(englishName,</td><td> </td><td class="rblock">               Planet<span class="insert">P p(</span>new Planet(englishName,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/lighting").toBool
(),</td><td> </td><td class="right">                                       pd.value(secname+"/lighting").toBool
(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/radius").toDouble
()/AU,</td><td> </td><td class="right">                                       pd.value(secname+"/radius").toDouble
()/AU,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/oblateness", 0.0)
.toDouble(),</td><td> </td><td class="right">                                       pd.value(secname+"/oblateness", 0.0)
.toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       StelUtils::strToVec3f(pd.value(secna
me+"/color").toString()),</td><td> </td><td class="right">                                       StelUtils::strToVec3f(pd.value(secna
me+"/color").toString()),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/albedo").toDouble
(),</td><td> </td><td class="right">                                       pd.value(secname+"/albedo").toDouble
(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/tex_map").toStrin
g(),</td><td> </td><td class="right">                                       pd.value(secname+"/tex_map").toStrin
g(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/tex_halo").toStri
ng(),</td><td> </td><td class="right">                                       pd.value(secname+"/tex_halo").toStri
ng(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       posfunc,</td><td> </td><td class="right">                                       posfunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                   userDataPtr,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       osculatingFunc,</td><td> </td><td class="right">                                       osculatingFunc,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       closeOrbit,</td><td> </td><td class="right">                                       closeOrbit,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       pd.value(secname+"/hidden", 0).toBoo
l(),</td><td> </td><td class="right">                                       pd.value(secname+"/hidden", 0).toBoo
l(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       pd.value(secname+"/atmosphere", fals</td><td> </td><td class="rblock">                                       pd.value(secname+"/atmosphere", fals</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e).toBool());</span></td><td> </td><td class="rblock"><span class="insert">e).toBool()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">(parent!=NULL)</span></td><td> </td><td class="rblock">               if <span class="insert">(!parent.isNull())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       p-&gt;setParent(parent);</span></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       parent-&gt;satellites.append(p);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       p-&gt;parent = parent;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="earth") earth = p;</td><td> </td><td class="right">               if (secname=="earth") earth = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="sun") sun = p;</td><td> </td><td class="right">               if (secname=="sun") sun = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (secname=="moon") moon = p;</td><td> </td><td class="right">               if (secname=="moon") moon = p;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double rotObliquity = pd.value(secname+"/rot_obliquity",0.).
toDouble()*(M_PI/180.0);</td><td> </td><td class="right">               double rotObliquity = pd.value(secname+"/rot_obliquity",0.).
toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double rotAscNode = pd.value(secname+"/rot_equator_ascending
_node",0.).toDouble()*(M_PI/180.0);</td><td> </td><td class="right">               double rotAscNode = pd.value(secname+"/rot_equator_ascending
_node",0.).toDouble()*(M_PI/180.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Use more common planet North pole data if available</td><td> </td><td class="right">               // Use more common planet North pole data if available</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // NB: N pole as defined by IAU (NOT right hand rotation rul
e)</td><td> </td><td class="right">               // NB: N pole as defined by IAU (NOT right hand rotation rul
e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // NB: J2000 epoch</td><td> </td><td class="right">               // NB: J2000 epoch</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 694</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 668</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelUtils::rectToSphe(&amp;ra, &amp;de, vsop87Pole);</td><td> </td><td class="right">                       StelUtils::rectToSphe(&amp;ra, &amp;de, vsop87Pole);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotObliquity = (M_PI_2 - de);</td><td> </td><td class="right">                       rotObliquity = (M_PI_2 - de);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rotAscNode = (ra + M_PI_2);</td><td> </td><td class="right">                       rotAscNode = (ra + M_PI_2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // qDebug() &lt;&lt; "\tCalculated rotational obliquity: "
 &lt;&lt; rotObliquity*180./M_PI &lt;&lt; endl;</td><td> </td><td class="right">                       // qDebug() &lt;&lt; "\tCalculated rotational obliquity: "
 &lt;&lt; rotObliquity*180./M_PI &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // qDebug() &lt;&lt; "\tCalculated rotational ascending no
de: " &lt;&lt; rotAscNode*180./M_PI &lt;&lt; endl;</td><td> </td><td class="right">                       // qDebug() &lt;&lt; "\tCalculated rotational ascending no
de: " &lt;&lt; rotAscNode*180./M_PI &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               p-&gt;setRotationElements(</td><td> </td><td class="right">               p-&gt;setRotationElements(</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   pd.value(secname+"/rot_periode", <span class="delete">pd.value(secname+"/orbi</span></td><td> </td><td class="rblock">                       pd.value(secname+"/rot_periode", <span class="insert">pd.value(secname+"/</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">t_Period",</span> 24.).toDouble()).toDouble()/24.,</td><td> </td><td class="rblock"><span class="insert">orbit_Period",</span> 24.).toDouble()).toDouble()/24.,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   <span class="delete">pd.value(secname+"/rot_rotation_offset",0.).toDouble(),</span></td><td> </td><td class="rblock">                       <span class="insert">pd.value(secname+"/rot_rotation_offset",0.).toDouble</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   pd.value(secname+"/rot_epoch", J2000).toDouble(),</td><td> </td><td class="rblock"><span class="insert">(),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   rotObliquity,</td><td> </td><td class="rblock">                       pd.value(secname+"/rot_epoch", J2000).toDouble(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   rotAscNode,</td><td> </td><td class="rblock">                       rotObliquity,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   <span class="delete">pd.value(secname+"/rot_precession_rate",0.).toDouble()*M</span></td><td> </td><td class="rblock">                       rotAscNode,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">_PI/(180*36525),</span></td><td> </td><td class="rblock">                       <span class="insert">pd.value(secname+"/rot_precession_rate",0.).toDouble</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                   pd.value(secname+"/orbit_visualization_period",0.).toDou</span></td><td> </td><td class="rblock"><span class="insert">()*M_PI/(180*36525),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ble());</span></td><td> </td><td class="rblock"><span class="insert">                       pd.value(secname+"/orbit_visualization_period",0.).t</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">oDouble());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (pd.value(secname+"/rings", 0).toBool()) {</td><td> </td><td class="right">               if (pd.value(secname+"/rings", 0).toBool()) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double rMin = pd.value(secname+"/ring_inner_si
ze").toDouble()/AU;</td><td> </td><td class="right">                       const double rMin = pd.value(secname+"/ring_inner_si
ze").toDouble()/AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       const double rMax = pd.value(secname+"/ring_outer_si
ze").toDouble()/AU;</td><td> </td><td class="right">                       const double rMax = pd.value(secname+"/ring_outer_si
ze").toDouble()/AU;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Ring *r = new Ring(rMin,rMax,pd.value(secname+"/tex_
ring").toString());</td><td> </td><td class="right">                       Ring *r = new Ring(rMin,rMax,pd.value(secname+"/tex_
ring").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p-&gt;setRings(r);</td><td> </td><td class="right">                       p-&gt;setRings(r);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               systemPlanets.push_back(p);</td><td> </td><td class="right">               systemPlanets.push_back(p);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               readOk++;</td><td> </td><td class="right">               readOk++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // special case: load earth shadow texture</td><td> </td><td class="right">       // special case: load earth shadow texture</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       StelApp::getInstance().getTextureManager().setDefaultParams();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Planet::texEarthShadow = StelApp::getInstance().getTextureManager().
createTexture("earth-shadow.png");</td><td> </td><td class="right">       Planet::texEarthShadow = StelApp::getInstance().getTextureManager().
createTexture("earth-shadow.png");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "/" &lt;&lt; totalPlanets &lt;&lt; "planet orb
its";</td><td> </td><td class="right">       qDebug() &lt;&lt; "Loaded" &lt;&lt; readOk &lt;&lt; "/" &lt;&lt; totalPlanets &lt;&lt; "planet orb
its";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Compute the position for every elements of the solar system.</td><td> </td><td class="right">// Compute the position for every elements of the solar system.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// The order is not important since the position is computed relatively to 
the mother body</td><td> </td><td class="right">// The order is not important since the position is computed relatively to 
the mother body</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::computePositions(double date, const Vec3d&amp; observerPos)</td><td> </td><td class="right">void SolarSystem::computePositions(double date, const Vec3d&amp; observerPos)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagLightTravelTime)</td><td> </td><td class="right">       if (flagLightTravelTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter(systemPlanets
.begin());iter!=systemPlanets.end();iter++</span>)</td><td> </td><td class="rblock">               for<span class="insert">each (PlanetP p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">(*iter)</span>-&gt;computePositionWithoutOrbits(date);</td><td> </td><td class="rblock">                       <span class="insert">p</span>-&gt;computePositionWithoutOrbits(date);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter(systemPlanets
.begin());iter!=systemPlanets.end();iter++</span>)</td><td> </td><td class="rblock">               for<span class="insert">each (PlanetP p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const double light_speed_correction = <span class="delete">((*iter)-&gt;getH</span></td><td> </td><td class="rblock">                       const double light_speed_correction = <span class="insert">(p-&gt;getHelioce</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eliocentricEclipticPos()-observerPos).length()</span> * (AU / (SPEED_OF_LIGHT * <span class="delete">86</span></td><td> </td><td class="rblock"><span class="insert">ntricEclipticPos()-observerPos).length()</span> * (AU / (SPEED_OF_LIGHT * <span class="insert">86400));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">400));</span></td><td> </td><td class="rblock"><span class="insert">                       p-&gt;computePosition(date-light_speed_correction);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       (*iter)-&gt;computePosition(date-light_speed_correction</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter(systemPlanets
.begin());iter!=systemPlanets.end();iter++</span>)</td><td> </td><td class="rblock">               for<span class="insert">each (PlanetP p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">(*iter)</span>-&gt;computePosition(date);</td><td> </td><td class="rblock">                       <span class="insert">p</span>-&gt;computePosition(date);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       computeTransMatrices(date, observerPos);</td><td> </td><td class="right">       computeTransMatrices(date, observerPos);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Compute the transformation matrix for every elements of the solar system
.</td><td> </td><td class="right">// Compute the transformation matrix for every elements of the solar system
.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// The elements have to be ordered hierarchically, eg. it's important to co
mpute earth before moon.</td><td> </td><td class="right">// The elements have to be ordered hierarchically, eg. it's important to co
mpute earth before moon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::computeTransMatrices(double date, const Vec3d&amp; observerPo
s)</td><td> </td><td class="right">void SolarSystem::computeTransMatrices(double date, const Vec3d&amp; observerPo
s)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagLightTravelTime)</td><td> </td><td class="right">       if (flagLightTravelTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter(systemPlanets
.begin());iter!=systemPlanets.end();iter++</span>)</td><td> </td><td class="rblock">               for<span class="insert">each (PlanetP p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const double light_speed_correction = <span class="delete">((*iter)-&gt;getH</span></td><td> </td><td class="rblock">                       const double light_speed_correction = <span class="insert">(p-&gt;getHelioce</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eliocentricEclipticPos()-observerPos).length()</span> * (AU / (SPEED_OF_LIGHT * <span class="delete">86</span></td><td> </td><td class="rblock"><span class="insert">ntricEclipticPos()-observerPos).length()</span> * (AU / (SPEED_OF_LIGHT * <span class="insert">86400));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">400));</span></td><td> </td><td class="rblock"><span class="insert">                       p-&gt;computeTransMatrix(date-light_speed_correction);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       (*iter)-&gt;computeTransMatrix(date-light_speed_correct</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ion);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter(systemPlanets
.begin());iter!=systemPlanets.end();iter++</span>)</td><td> </td><td class="rblock">               for<span class="insert">each (PlanetP p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">(*iter)</span>-&gt;computeTransMatrix(date);</td><td> </td><td class="rblock">                       <span class="insert">p</span>-&gt;computeTransMatrix(date);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// And sort them from the furthest to the closest to the observer</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">struct biggerDistance : public std::binary_function&lt;PlanetP, PlanetP, bool&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       bool operator()(PlanetP p1, PlanetP p2)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return p1-&gt;getDistance() &gt; p2-&gt;getDistance();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">};</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Draw all the elements of the solar system</td><td> </td><td class="right">// Draw all the elements of the solar system</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// We are supposed to be in heliocentric coordinate</td><td> </td><td class="right">// We are supposed to be in heliocentric coordinate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::draw(StelCore* core)</td><td> </td><td class="right">void SolarSystem::draw(StelCore* core)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!flagShow)</td><td> </td><td class="right">       if (!flagShow)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelNavigator* nav = core-&gt;getNavigator();</td><td> </td><td class="right">       StelNavigator* nav = core-&gt;getNavigator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       Planet::setFont(&amp;planetNameFont);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute each Planet distance to the observer</td><td> </td><td class="right">       // Compute each Planet distance to the observer</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d obsHelioPos = nav-&gt;getObserverHeliocentricEclipticPos();</td><td> </td><td class="right">       Vec3d obsHelioPos = nav-&gt;getObserverHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       iter = systemPlanets.begin();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">(*iter)-&gt;computeDistance(obsHelioPos);</span></td><td> </td><td class="rblock">               <span class="insert">p-&gt;computeDistance(obsHelioPos);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               ++iter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // And sort them from the furthest to the closest</td><td> </td><td class="right">       // And sort them from the furthest to the closest</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       sort(systemPlanets.begin(),systemPlanets.end(),biggerDistance());</td><td> </td><td class="right">       sort(systemPlanets.begin(),systemPlanets.end(),biggerDistance());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Draw the elements</td><td> </td><td class="right">       // Draw the elements</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       float maxMagLabel=core-&gt;getSkyDrawer()-&gt;getLimitMagnitude()*0.80+(la
belsAmount*1.2f)-2.f;</td><td> </td><td class="right">       float maxMagLabel=core-&gt;getSkyDrawer()-&gt;getLimitMagnitude()*0.80+(la
belsAmount*1.2f)-2.f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">(*iter)-&gt;draw(core, maxMagLabel);</span></td><td> </td><td class="rblock">               <span class="insert">p-&gt;draw(core, maxMagLabel, planetNameFont);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               ++iter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (GETSTELMODULE(StelObjectMgr)-&gt;getFlagSelectedObjectPointer())</td><td> </td><td class="right">       if (GETSTELMODULE(StelObjectMgr)-&gt;getFlagSelectedObjectPointer())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               drawPointer(core);</td><td> </td><td class="right">               drawPointer(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setStelStyle(const StelStyle&amp; style)</td><td> </td><td class="right">void SolarSystem::setStelStyle(const StelStyle&amp; style)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Load colors from config file</td><td> </td><td class="right">       // Load colors from config file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString section = style.confSectionName;</td><td> </td><td class="right">       QString section = style.confSectionName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString defaultColor = conf-&gt;value(section+"/default_color").toStrin
g();</td><td> </td><td class="right">       QString defaultColor = conf-&gt;value(section+"/default_color").toStrin
g();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setLabelsColor(StelUtils::strToVec3f(conf-&gt;value(section+"/planet_na
mes_color", defaultColor).toString()));</td><td> </td><td class="right">       setLabelsColor(StelUtils::strToVec3f(conf-&gt;value(section+"/planet_na
mes_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setOrbitsColor(StelUtils::strToVec3f(conf-&gt;value(section+"/planet_or
bits_color", defaultColor).toString()));</td><td> </td><td class="right">       setOrbitsColor(StelUtils::strToVec3f(conf-&gt;value(section+"/planet_or
bits_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setTrailsColor(StelUtils::strToVec3f(conf-&gt;value(section+"/object_tr
ails_color", defaultColor).toString()));</td><td> </td><td class="right">       setTrailsColor(StelUtils::strToVec3f(conf-&gt;value(section+"/object_tr
ails_color", defaultColor).toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">Planet<span class="delete">*</span> SolarSystem::searchByEnglishName(QString planetEnglishName) const</td><td> </td><td class="rblock">Planet<span class="insert">P</span> SolarSystem::searchByEnglishName(QString planetEnglishName) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if((*iter)-&gt;getEnglishName()</span> == planetEnglishName) return <span class="delete">(*</span></td><td> </td><td class="rblock">               <span class="insert">if (p-&gt;getEnglishName()</span> == planetEnglishName)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">iter);  // also check standard ini file names</span></td><td> </td><td class="rblock">                       return <span class="insert">p;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               ++iter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">       return <span class="insert">PlanetP();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return <span class="delete">NULL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelObjectP SolarSystem::searchByNameI18n(const QString&amp; planetNameI18) con
st</td><td> </td><td class="right">StelObjectP SolarSystem::searchByNameI18n(const QString&amp; planetNameI18) con
st</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if( (*iter)-&gt;getNameI18n()</span> == <span class="delete">planetNameI18 )</span> return <span class="delete">(*iter)</span></td><td> </td><td class="rblock">               <span class="insert">if (p-&gt;getNameI18n()</span> == <span class="insert">planetNameI18)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;  // also check standard ini file names</span></td><td> </td><td class="rblock">                       return <span class="insert">qSharedPointerCast&lt;StelObject&gt;(p);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               ++iter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       return <span class="insert">StelObjectP()</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelObjectP SolarSystem::searchByName(const QString&amp; name) const</td><td> </td><td class="right">StelObjectP SolarSystem::searchByName(const QString&amp; name) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if( (*iter)-&gt;getEnglishName()</span> == <span class="delete">name )</span> return <span class="delete">(*iter);</span></td><td> </td><td class="rblock">               <span class="insert">if (p-&gt;getEnglishName()</span> == <span class="insert">name)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               ++iter;</span></td><td> </td><td class="rblock">                       return <span class="insert">qSharedPointerCast&lt;StelObject&gt;(p);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       return <span class="insert">StelObjectP()</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Search if any Planet is close to position given in earth equatorial posi
tion and return the distance</td><td> </td><td class="right">// Search if any Planet is close to position given in earth equatorial posi
tion and return the distance</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">StelObject<span class="delete">*</span> SolarSystem::search(Vec3d pos, const StelCore* core) const</td><td> </td><td class="rblock">StelObject<span class="insert">P</span> SolarSystem::search(Vec3d pos, const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       pos.normalize();</td><td> </td><td class="right">       pos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       Planet<span class="delete"> * closest = NULL</span>;</td><td> </td><td class="rblock">       Planet<span class="insert">P closest</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double cos_angle_closest = 0.;</td><td> </td><td class="right">       double cos_angle_closest = 0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d equPos;</td><td> </td><td class="right">       Vec3d equPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               equPos = <span class="delete">(*iter)-&gt;getEquinoxEquatorialPos(core-&gt;getNavigator
</span>());</td><td> </td><td class="rblock">               equPos = <span class="insert">p-&gt;getEquinoxEquatorialPos(core-&gt;getNavigator</span>());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               equPos.normalize();</td><td> </td><td class="right">               equPos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0103" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               double cos_ang_dist = equPos<span class="delete">[0]*pos[0] + equPos[1]*pos[1] + 
equPos[2]*pos[2]</span>;</td><td> </td><td class="rblock">               double cos_ang_dist = equPos<span class="insert">*pos</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (cos_ang_dist&gt;cos_angle_closest)</td><td> </td><td class="right">               if (cos_ang_dist&gt;cos_angle_closest)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0104" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       closest = <span class="delete">*iter</span>;</td><td> </td><td class="rblock">                       closest = <span class="insert">p</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       cos_angle_closest = cos_ang_dist;</td><td> </td><td class="right">                       cos_angle_closest = cos_ang_dist;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0105" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               iter++;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (cos_angle_closest&gt;0.999)</td><td> </td><td class="right">       if (cos_angle_closest&gt;0.999)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0106" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return <span class="delete">closest</span>;</td><td> </td><td class="rblock">               return <span class="insert">qSharedPointerCast&lt;StelObject&gt;(closest)</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0107" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       else return <span class="delete">NULL</span>;</td><td> </td><td class="rblock">       else return <span class="insert">StelObjectP()</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Return a stl vector containing the planets located inside the limFov cir
cle around position v</td><td> </td><td class="right">// Return a stl vector containing the planets located inside the limFov cir
cle around position v</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QList&lt;StelObjectP&gt; SolarSystem::searchAround(const Vec3d&amp; vv, double limitF
ov, const StelCore* core) const</td><td> </td><td class="right">QList&lt;StelObjectP&gt; SolarSystem::searchAround(const Vec3d&amp; vv, double limitF
ov, const StelCore* core) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;StelObjectP&gt; result;</td><td> </td><td class="right">       QList&lt;StelObjectP&gt; result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!getFlagPlanets())</td><td> </td><td class="right">       if (!getFlagPlanets())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return result;</td><td> </td><td class="right">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d v = core-&gt;getNavigator()-&gt;j2000ToEquinoxEqu(vv);</td><td> </td><td class="right">       Vec3d v = core-&gt;getNavigator()-&gt;j2000ToEquinoxEqu(vv);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       v.normalize();</td><td> </td><td class="right">       v.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0108" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       double cosLimFov = cos(limitFov * M_PI/180.);</td><td> </td><td class="rblock">       double cosLimFov = <span class="insert">std::</span>cos(limitFov * M_PI/180.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d equPos;</td><td> </td><td class="right">       Vec3d equPos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0109" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0110" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               equPos = <span class="delete">(*iter)-&gt;getEquinoxEquatorialPos(core-&gt;getNavigator
</span>());</td><td> </td><td class="rblock">               equPos = <span class="insert">p-&gt;getEquinoxEquatorialPos(core-&gt;getNavigator</span>());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               equPos.normalize();</td><td> </td><td class="right">               equPos.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0111" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (equPos<span class="delete">[0]*v[0] + equPos[1]*v[1] + equPos[2]*v[2]&gt;=cosLim
</span>Fov)</td><td> </td><td class="rblock">               if (equPos<span class="insert">*v&gt;=cosLim</span>Fov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0112" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       result.<span class="delete">push_back(*iter</span>);</td><td> </td><td class="rblock">                       result.<span class="insert">append(qSharedPointerCast&lt;StelObject&gt;(p)</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0113" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               iter++;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Update i18 names from english names according to passed translator</td><td> </td><td class="right">// Update i18 names from english names according to passed translator</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::updateI18n()</td><td> </td><td class="right">void SolarSystem::updateI18n()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelTranslator&amp; trans = StelApp::getInstance().getLocaleMgr().getSky
Translator();</td><td> </td><td class="right">       StelTranslator&amp; trans = StelApp::getInstance().getLocaleMgr().getSky
Translator();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0114" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;translateName(trans);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">+ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;translateName(trans);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       planetNameFont = StelApp::getInstance().getFontManager().getStandard</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Font(trans.getTrueLocaleName(), fontSize);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString SolarSystem::getPlanetHashString(void)</td><td> </td><td class="right">QString SolarSystem::getPlanetHashString(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString str;</td><td> </td><td class="right">       QString str;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QTextStream oss(&amp;str);</td><td> </td><td class="right">       QTextStream oss(&amp;str);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0115" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector &lt;Planet *&gt;::iterator iter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for (iter = systemPlanets.begin(); iter != systemPlanets.end(); ++it</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">er)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0116" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if<span class="delete">((*iter)-&gt;getParent() != NULL &amp;&amp; (*iter)-&gt;getParent()-&gt;get
EnglishNa</span>me() != "Sun")</td><td> </td><td class="rblock">               if<span class="insert"> (!p-&gt;getParent().isNull() &amp;&amp; p-&gt;getParent()-&gt;getEnglishNa
</span>me() != "Sun")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0117" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       oss &lt;&lt; <span class="delete">(*iter)-&gt;getParent()-&gt;getEnglishName() &lt;&lt; " :
</span> ";</td><td> </td><td class="rblock">                       oss &lt;&lt; <span class="insert">p-&gt;getParent()-&gt;getEnglishName() &lt;&lt; " :</span> ";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0118" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">               oss &lt;&lt; <span class="insert">p-&gt;getEnglishName()</span> &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               oss &lt;&lt; <span class="delete">(*iter)-&gt;getEnglishName()</span> &lt;&lt; endl;</td><td> </td><td class="rblock">               oss &lt;&lt; <span class="insert">p-&gt;getEnglishName()</span> &lt;&lt; endl;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               oss &lt;&lt; <span class="delete">(*iter)-&gt;getEnglishName()</span> &lt;&lt; endl;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return str;</td><td> </td><td class="right">       return str;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::startTrails(bool b)</td><td> </td><td class="right">void SolarSystem::startTrails(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0119" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;startTrail(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">+ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;startTrail(b);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagTrails(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagTrails(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0120" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;setFlagTrail(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">+ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;setFlagTrail(b);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagTrails(void) const</td><td> </td><td class="right">bool SolarSystem::getFlagTrails(void) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0121" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">for (std::vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">();</span></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">            iter != systemPlanets.end(); iter++ )</span> {</td><td> </td><td class="rblock">               if <span class="insert">(p-&gt;getFlagTrail())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">((*iter)-&gt;getFlagTrail())</span> return true;</td><td> </td><td class="rblock">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagHints(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagHints(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0122" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;setFlagHints(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">+ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;setFlagHints(b);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagHints(void) const</td><td> </td><td class="right">bool SolarSystem::getFlagHints(void) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0123" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin
(); iter != systemPlanets.end(); iter++</span>)</td><td> </td><td class="rblock">       for<span class="insert">each (const PlanetP&amp; p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0124" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">((*iter)-&gt;getFlagHints())</span> return true;</td><td> </td><td class="rblock">               if <span class="insert">(p-&gt;getFlagHints())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagLabels(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagLabels(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0125" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(); iter+</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;setFlagLabels(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">+ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;setFlagLabels(b);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagLabels() const</td><td> </td><td class="right">bool SolarSystem::getFlagLabels() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0126" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for<span class="delete"> (std::vector&lt;Planet*&gt;::const_iterator iter = systemPlanets.begin
(); iter != systemPlanets.end(); iter++</span>)</td><td> </td><td class="rblock">       for<span class="insert">each (const PlanetP&amp; p, systemPlanets</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0127" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if <span class="delete">((*iter)-&gt;getFlagLabels())</span> return true;</td><td> </td><td class="rblock">               if <span class="insert">(p-&gt;getFlagLabels())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagOrbits(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagOrbits(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagOrbits = b;</td><td> </td><td class="right">       flagOrbits = b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0128" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!b || !selected || selected<span class="delete"> == </span>sun)</td><td> </td><td class="rblock">       if (!b || !selected || selected<span class="insert">==</span>sun)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0129" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">               <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               for( iter = systemPlanets.begin(); iter &lt; systemPlanets.end(</span></td><td> </td><td class="rblock"><span class="insert">                       p-&gt;setFlagOrbits(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">); iter++ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       (*iter)-&gt;setFlagOrbits(b);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0130" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               // <span class="delete">if</span> a Planet is selected and orbits are on,</td><td> </td><td class="rblock">               // <span class="insert">If</span> a Planet is selected and orbits are on, fade out <span class="insert">non-s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">//</span> fade out <span class="delete">non-selected</span> ones</td><td> </td><td class="rblock"><span class="insert">elected</span> ones</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">vector&lt;Planet*&gt;::iterator iter;</span></td><td> </td><td class="rblock">               <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               for (iter = systemPlanets.begin();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                    iter != systemPlanets.end(); iter++ )</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0131" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (selected == <span class="delete">(*iter)) (*iter)-&gt;setFlagOrbits(b);</span></td><td> </td><td class="rblock">                       if (selected == <span class="insert">p)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       else <span class="delete">(*iter)-&gt;setFlagOrbits(false);</span></td><td> </td><td class="rblock"><span class="insert">                               p-&gt;setFlagOrbits(b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                               <span class="insert">p-&gt;setFlagOrbits(false);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagLightTravelTime(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagLightTravelTime(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLightTravelTime = b;</td><td> </td><td class="right">       flagLightTravelTime = b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0132" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void SolarSystem::setSelected(<span class="delete">StelObject*</span> obj)</td><td> </td><td class="rblock">void SolarSystem::setSelected(<span class="insert">PlanetP</span> obj)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0133" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    if (obj &amp;&amp; obj-&gt;getType() == "Planet")</td><td> </td><td class="rblock">       if (obj &amp;&amp; obj-&gt;getType() == "Planet")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       selected = obj;</td><td> </td><td class="rblock">               selected = obj;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    else</td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">selected = NULL;</span></td><td> </td><td class="rblock">               <span class="insert">selected.clear();;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Undraw other objects hints, orbit, trails etc..</td><td> </td><td class="right">       // Undraw other objects hints, orbit, trails etc..</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagHints(getFlagHints());</td><td> </td><td class="right">       setFlagHints(getFlagHints());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagOrbits(getFlagOrbits());</td><td> </td><td class="right">       setFlagOrbits(getFlagOrbits());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setFlagTrails(getFlagTrails());</td><td> </td><td class="right">       setFlagTrails(getFlagTrails());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::update(double deltaTime)</td><td> </td><td class="right">void SolarSystem::update(double deltaTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool restartTrails = false;</td><td> </td><td class="right">       bool restartTrails = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelNavigator* nav = StelApp::getInstance().getCore()-&gt;getNavigator(
);</td><td> </td><td class="right">       StelNavigator* nav = StelApp::getInstance().getCore()-&gt;getNavigator(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Determine if home planet has changed, and restart planet trails</td><td> </td><td class="right">       // Determine if home planet has changed, and restart planet trails</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // since the data is no longer useful</td><td> </td><td class="right">       // since the data is no longer useful</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0134" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">nav-&gt;getHomePlanet() != lastHomePlanet</span>)</td><td> </td><td class="rblock">       if (<span class="insert">lastHomePlanet &amp;&amp; nav-&gt;getCurrentLocation().planetName != lastHo
mePlanet-&gt;getEnglishName()</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0135" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               lastHomePlanet = <span class="delete">nav-&gt;getHomePlanet();</span></td><td> </td><td class="rblock">               lastHomePlanet = <span class="insert">searchByEnglishName(nav-&gt;getCurrentLocation</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">().planetName);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               Q_ASSERT(!lastHomePlanet.isNull());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               restartTrails = true;</td><td> </td><td class="right">               restartTrails = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0136" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector&lt;Planet*&gt;::iterator iter = systemPlanets.begin();</span></td><td> </td><td class="rblock">       <span class="insert">foreach (PlanetP p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (iter != systemPlanets.end())</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0137" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if(restartTrails) (*iter)-&gt;startTrail(true);</span></td><td> </td><td class="rblock">               <span class="insert">if (restartTrails)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;updateTrail(nav);</span></td><td> </td><td class="rblock"><span class="insert">                       p-&gt;startTrail(true);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               (*iter)-&gt;update((int)(deltaTime*1000));</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;updateTrail(nav);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               iter++;</span></td><td> </td><td class="rblock"><span class="insert">               p-&gt;update((int)(deltaTime*1000));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// is a lunar eclipse close at hand?</td><td> </td><td class="right">// is a lunar eclipse close at hand?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::nearLunarEclipse()</td><td> </td><td class="right">bool SolarSystem::nearLunarEclipse()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TODO: could replace with simpler test</td><td> </td><td class="right">       // TODO: could replace with simpler test</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d e = getEarth()-&gt;getEclipticPos();</td><td> </td><td class="right">       Vec3d e = getEarth()-&gt;getEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d m = getMoon()-&gt;getEclipticPos();  // relative to earth</td><td> </td><td class="right">       Vec3d m = getMoon()-&gt;getEclipticPos();  // relative to earth</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 1092</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 1040</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d mdist = shadow - mh;</td><td> </td><td class="right">       Vec3d mdist = shadow - mh;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(mdist.length() &gt; r_penumbra + 2000/AU) return 0;   // not visible
 so don't bother drawing</td><td> </td><td class="right">       if(mdist.length() &gt; r_penumbra + 2000/AU) return 0;   // not visible
 so don't bother drawing</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return 1;</td><td> </td><td class="right">       return 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Find and return the list of at most maxNbItem objects auto-completing t
he passed object I18n name</td><td> </td><td class="right">//! Find and return the list of at most maxNbItem objects auto-completing t
he passed object I18n name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QStringList SolarSystem::listMatchingObjectsI18n(const QString&amp; objPrefix, 
int maxNbItem) const</td><td> </td><td class="right">QStringList SolarSystem::listMatchingObjectsI18n(const QString&amp; objPrefix, 
int maxNbItem) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList result;</td><td> </td><td class="right">       QStringList result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0138" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (maxNbItem==0) return result;</td><td> </td><td class="rblock">       if (maxNbItem==0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString objw = objPrefix.toUpper();</td><td> </td><td class="right">       QString objw = objPrefix.toUpper();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0139" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">vector &lt;Planet*&gt;::const_iterator iter;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for (iter=systemPlanets.begin(); iter!=systemPlanets.end(); ++iter)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0140" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               QString constw = <span class="delete">(*iter)-&gt;getNameI18n().mid(0, objw.size()).
toUppe</span>r();</td><td> </td><td class="rblock">               QString constw = <span class="insert">p-&gt;getNameI18n().mid(0, objw.size()).toUppe
</span>r();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (constw==objw)</td><td> </td><td class="right">               if (constw==objw)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0141" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       result &lt;&lt; <span class="delete">(*iter)</span>-&gt;getNameI18n();</td><td> </td><td class="rblock">                       result &lt;&lt; <span class="insert">p</span>-&gt;getNameI18n();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (result.size()==maxNbItem)</td><td> </td><td class="right">                       if (result.size()==maxNbItem)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               return result;</td><td> </td><td class="right">                               return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::selectedObjectChangeCallBack(StelModuleSelectAction actio
n)</td><td> </td><td class="right">void SolarSystem::selectedObjectChangeCallBack(StelModuleSelectAction actio
n)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Planet");</td><td> </td><td class="right">       const QList&lt;StelObjectP&gt; newSelected = GETSTELMODULE(StelObjectMgr)-
&gt;getSelectedObject("Planet");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!newSelected.empty())</td><td> </td><td class="right">       if (!newSelected.empty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0142" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               setSelected(<span class="delete">newSelected[0].get(</span>));</td><td> </td><td class="rblock">               setSelected(<span class="insert">qSharedPointerCast&lt;Planet&gt;(newSelected[0]</span>));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Activate/Deactivate planets display</td><td> </td><td class="right">// Activate/Deactivate planets display</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setFlagPlanets(bool b)</td><td> </td><td class="right">void SolarSystem::setFlagPlanets(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagShow=b;</td><td> </td><td class="right">       flagShow=b;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool SolarSystem::getFlagPlanets(void) const {return flagShow;}</td><td> </td><td class="right">bool SolarSystem::getFlagPlanets(void) const {return flagShow;}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1159</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1105</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagMoonScale)</td><td> </td><td class="right">       if (flagMoonScale)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               getMoon()-&gt;setSphereScale(moonScale);</td><td> </td><td class="right">               getMoon()-&gt;setSphereScale(moonScale);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set selected planets by englishName</td><td> </td><td class="right">// Set selected planets by englishName</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void SolarSystem::setSelected(const QString&amp; englishName)</td><td> </td><td class="right">void SolarSystem::setSelected(const QString&amp; englishName)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setSelected(searchByEnglishName(englishName));</td><td> </td><td class="right">       setSelected(searchByEnglishName(englishName));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0143" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">bool SolarSystem::biggerDistance::operator()(Planet* p1, Planet* p2)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return p1-&gt;getDistance() &gt; p2-&gt;getDistance();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the list of all the planet english names</td><td> </td><td class="right">// Get the list of all the planet english names</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QStringList SolarSystem::getAllPlanetEnglishNames() const</td><td> </td><td class="right">QStringList SolarSystem::getAllPlanetEnglishNames() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList res;</td><td> </td><td class="right">       QStringList res;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0144" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">for (std::vector&lt;Planet*&gt;::const_iterator iter(systemPlanets.begin()</span></td><td> </td><td class="rblock">       <span class="insert">foreach (const PlanetP&amp; p, systemPlanets)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);iter!=systemPlanets.end();iter++)</span></td><td> </td><td class="rblock"><span class="insert">               res.append(p-&gt;englishName);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               res.append((*iter)-&gt;englishName);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return res;</td><td> </td><td class="right">       return res;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 144 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>393 lines changed or deleted</i></th><th><i> </i></th><th><i>322 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
