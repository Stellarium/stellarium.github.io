<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelMovementMgr.cpp - StelMovementMgr.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelMovementMgr.cpp&nbsp;</th><th> </th><th>&nbsp;StelMovementMgr.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 25</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 25</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * You should have received a copy of the GNU General Public License</td><td> </td><td class="right"> * You should have received a copy of the GNU General Public License</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * along with this program; if not, write to the Free Software</td><td> </td><td class="right"> * along with this program; if not, write to the Free Software</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td> </td><td class="right"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, U
SA.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelMovementMgr.hpp"</td><td> </td><td class="right">#include "StelMovementMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelObjectMgr.hpp"</td><td> </td><td class="right">#include "StelObjectMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelModuleMgr.hpp"</td><td> </td><td class="right">#include "StelModuleMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelApp.hpp"</td><td> </td><td class="right">#include "StelApp.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelCore.hpp"</td><td> </td><td class="right">#include "StelCore.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">#include "StelNavigator.hpp"</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelUtils.hpp"</td><td> </td><td class="right">#include "StelUtils.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QString&gt;</td><td> </td><td class="right">#include &lt;QString&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QTextStream&gt;</td><td> </td><td class="right">#include &lt;QTextStream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QKeyEvent&gt;</td><td> </td><td class="right">#include &lt;QKeyEvent&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelMovementMgr::StelMovementMgr(StelCore* acore) : core(acore),</td><td> </td><td class="right">StelMovementMgr::StelMovementMgr(StelCore* acore) : core(acore),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagLockEquPos(false),</td><td> </td><td class="right">       flagLockEquPos(false),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 67</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 66</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelMovementMgr::~StelMovementMgr()</td><td> </td><td class="right">StelMovementMgr::~StelMovementMgr()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::init()</td><td> </td><td class="right">void StelMovementMgr::init()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QSettings* conf = StelApp::getInstance().getSettings();</td><td> </td><td class="right">       QSettings* conf = StelApp::getInstance().getSettings();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       objectMgr = GETSTELMODULE(StelObjectMgr);</td><td> </td><td class="right">       objectMgr = GETSTELMODULE(StelObjectMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(conf);</td><td> </td><td class="right">       Q_ASSERT(conf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(objectMgr);</td><td> </td><td class="right">       Q_ASSERT(objectMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">connect(objectMgr, SIGNAL(selectedObjectChanged(StelModule::StelModu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">leSelectAction)),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       this, SLOT(selectedObjectChange(StelModule::StelModu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">leSelectAction)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementsSpeedFactor=1.;</td><td> </td><td class="right">       movementsSpeedFactor=1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagEnableMoveAtScreenEdge = conf-&gt;value("navigation/flag_enable_mov
e_at_screen_edge",false).toBool();</td><td> </td><td class="right">       flagEnableMoveAtScreenEdge = conf-&gt;value("navigation/flag_enable_mov
e_at_screen_edge",false).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       mouseZoomSpeed = conf-&gt;value("navigation/mouse_zoom",30).toInt();</td><td> </td><td class="right">       mouseZoomSpeed = conf-&gt;value("navigation/mouse_zoom",30).toInt();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagEnableZoomKeys = conf-&gt;value("navigation/flag_enable_zoom_keys")
.toBool();</td><td> </td><td class="right">       flagEnableZoomKeys = conf-&gt;value("navigation/flag_enable_zoom_keys")
.toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagEnableMoveKeys = conf-&gt;value("navigation/flag_enable_move_keys")
.toBool();</td><td> </td><td class="right">       flagEnableMoveKeys = conf-&gt;value("navigation/flag_enable_move_keys")
.toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       keyMoveSpeed = conf-&gt;value("navigation/move_speed",0.0004f).toFloat(
);</td><td> </td><td class="right">       keyMoveSpeed = conf-&gt;value("navigation/move_speed",0.0004f).toFloat(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       keyZoomSpeed = conf-&gt;value("navigation/zoom_speed", 0.0004f).toFloat
();</td><td> </td><td class="right">       keyZoomSpeed = conf-&gt;value("navigation/zoom_speed", 0.0004f).toFloat
();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       autoMoveDuration = conf-&gt;value ("navigation/auto_move_duration",1.5f
).toFloat();</td><td> </td><td class="right">       autoMoveDuration = conf-&gt;value ("navigation/auto_move_duration",1.5f
).toFloat();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagManualZoom = conf-&gt;value("navigation/flag_manual_zoom").toBool()
;</td><td> </td><td class="right">       flagManualZoom = conf-&gt;value("navigation/flag_manual_zoom").toBool()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagAutoZoomOutResetsDirection = conf-&gt;value("navigation/auto_zoom_o
ut_resets_direction", true).toBool();</td><td> </td><td class="right">       flagAutoZoomOutResetsDirection = conf-&gt;value("navigation/auto_zoom_o
ut_resets_direction", true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagEnableMouseNavigation = conf-&gt;value("navigation/flag_enable_mous
e_navigation",true).toBool();</td><td> </td><td class="right">       flagEnableMouseNavigation = conf-&gt;value("navigation/flag_enable_mous
e_navigation",true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       minFov = 0.0001;</td><td> </td><td class="right">       minFov = 0.0001;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       maxFov = 100.;</td><td> </td><td class="right">       maxFov = 100.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       initFov = conf-&gt;value("navigation/init_fov",60.f).toFloat();</td><td> </td><td class="right">       initFov = conf-&gt;value("navigation/init_fov",60.f).toFloat();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentFov = initFov;</td><td> </td><td class="right">       currentFov = initFov;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3f tmp = StelUtils::strToVec3f(conf-&gt;value("navigation/init_view_
pos").toString());</td><td> </td><td class="right">       Vec3f tmp = StelUtils::strToVec3f(conf-&gt;value("navigation/init_view_
pos").toString());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       initViewPos.set(tmp[0], tmp[1], tmp[2]);</td><td> </td><td class="right">       initViewPos.set(tmp[0], tmp[1], tmp[2]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       viewDirectionJ2000 = core-&gt;<span class="delete">getNavigator()-&gt;altAzToJ2000(initViewPos)
</span>;</td><td> </td><td class="rblock">       viewDirectionJ2000 = core-&gt;<span class="insert">altAzToJ2000(initViewPos, StelCore::Refra
ctionOff)</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString tmpstr = conf-&gt;value("navigation/viewing_mode", "horizon").t
oString();</td><td> </td><td class="right">       QString tmpstr = conf-&gt;value("navigation/viewing_mode", "horizon").t
oString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (tmpstr=="equator")</td><td> </td><td class="right">       if (tmpstr=="equator")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setMountMode(StelMovementMgr::MountEquinoxEquatorial);</td><td> </td><td class="right">               setMountMode(StelMovementMgr::MountEquinoxEquatorial);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (tmpstr=="horizon")</td><td> </td><td class="right">               if (tmpstr=="horizon")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       setMountMode(StelMovementMgr::MountAltAzimuthal);</td><td> </td><td class="right">                       setMountMode(StelMovementMgr::MountAltAzimuthal);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 259</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 260</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int numDegrees = event-&gt;delta() / 8;</td><td> </td><td class="right">       int numDegrees = event-&gt;delta() / 8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int numSteps = numDegrees / 15;</td><td> </td><td class="right">       int numSteps = numDegrees / 15;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       zoomTo(getAimFov()-mouseZoomSpeed*numSteps*getAimFov()/60., 0.2);</td><td> </td><td class="right">       zoomTo(getAimFov()-mouseZoomSpeed*numSteps*getAimFov()/60., 0.2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       event-&gt;accept();</td><td> </td><td class="right">       event-&gt;accept();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::addTimeDragPoint(int x, int y)</td><td> </td><td class="right">void StelMovementMgr::addTimeDragPoint(int x, int y)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       DragHistoryEntry e;</td><td> </td><td class="right">       DragHistoryEntry e;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       e.runTime=StelApp::getInstance().getTotalRunTime();</td><td> </td><td class="right">       e.runTime=StelApp::getInstance().getTotalRunTime();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       e.jd=core-&gt;get<span class="delete">Navigator()-&gt;get</span>JDay();</td><td> </td><td class="rblock">       e.jd=core-&gt;getJDay();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       e.x=x;</td><td> </td><td class="right">       e.x=x;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       e.y=y;</td><td> </td><td class="right">       e.y=y;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       timeDragHistory.append(e);</td><td> </td><td class="right">       timeDragHistory.append(e);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (timeDragHistory.size()&gt;3)</td><td> </td><td class="right">       if (timeDragHistory.size()&gt;3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               timeDragHistory.removeFirst();</td><td> </td><td class="right">               timeDragHistory.removeFirst();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::handleMouseClicks(QMouseEvent* event)</td><td> </td><td class="right">void StelMovementMgr::handleMouseClicks(QMouseEvent* event)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       switch (event-&gt;button())</td><td> </td><td class="right">       switch (event-&gt;button())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 289</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 290</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case Qt::LeftButton :</td><td> </td><td class="right">               case Qt::LeftButton :</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (event-&gt;type()==QEvent::MouseButtonPress)</td><td> </td><td class="right">                       if (event-&gt;type()==QEvent::MouseButtonPress)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               isDragging = true;</td><td> </td><td class="right">                               isDragging = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               hasDragged = false;</td><td> </td><td class="right">                               hasDragged = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               previousX = event-&gt;x();</td><td> </td><td class="right">                               previousX = event-&gt;x();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               previousY = event-&gt;y();</td><td> </td><td class="right">                               previousY = event-&gt;y();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               beforeTimeDragTimeRate=core-&gt;get<span class="delete">Navigator()-
&gt;get</span>TimeRate();</td><td> </td><td class="rblock">                               beforeTimeDragTimeRate=core-&gt;getTimeRate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (dragTimeMode)</td><td> </td><td class="right">                               if (dragTimeMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       timeDragHistory.clear();</td><td> </td><td class="right">                                       timeDragHistory.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       addTimeDragPoint(event-&gt;pos().x(), e
vent-&gt;pos().y());</td><td> </td><td class="right">                                       addTimeDragPoint(event-&gt;pos().x(), e
vent-&gt;pos().y());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               event-&gt;accept();</td><td> </td><td class="right">                               event-&gt;accept();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               return;</td><td> </td><td class="right">                               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 312</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 313</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       event-&gt;accept();</td><td> </td><td class="right">                                       event-&gt;accept();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (dragTimeMode)</td><td> </td><td class="right">                                       if (dragTimeMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               if (timeDragHistory.size()&gt;=
3)</td><td> </td><td class="right">                                               if (timeDragHistory.size()&gt;=
3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               {</td><td> </td><td class="right">                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       const double deltaT 
= timeDragHistory.last().runTime-timeDragHistory.first().runTime;</td><td> </td><td class="right">                                                       const double deltaT 
= timeDragHistory.last().runTime-timeDragHistory.first().runTime;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       Vec2f d(timeDragHist
ory.last().x-timeDragHistory.first().x, timeDragHistory.last().y-timeDragHi
story.first().y);</td><td> </td><td class="right">                                                       Vec2f d(timeDragHist
ory.last().x-timeDragHistory.first().x, timeDragHistory.last().y-timeDragHi
story.first().y);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       if (d.length()/delta
T&lt;dragTriggerDistance)</td><td> </td><td class="right">                                                       if (d.length()/delta
T&lt;dragTriggerDistance)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       {</td><td> </td><td class="right">                                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                               core-&gt;<span class="delete">getNav
igator()-&gt;setTimeRate(</span>JD_SECOND);</td><td> </td><td class="rblock">                                                               core-&gt;<span class="insert">setTim
eRate(StelCore::</span>JD_SECOND);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       }</td><td> </td><td class="right">                                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       else</td><td> </td><td class="right">                                                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       {</td><td> </td><td class="right">                                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               const double
 deltaJd = timeDragHistory.last().jd-timeDragHistory.first().jd;</td><td> </td><td class="right">                                                               const double
 deltaJd = timeDragHistory.last().jd-timeDragHistory.first().jd;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               const double
 newTimeRate = deltaJd/deltaT;</td><td> </td><td class="right">                                                               const double
 newTimeRate = deltaJd/deltaT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               if (deltaT&gt;0
.00000001)</td><td> </td><td class="right">                                                               if (deltaT&gt;0
.00000001)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               {</td><td> </td><td class="right">                                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                       if (
newTimeRate&gt;=0)</td><td> </td><td class="right">                                                                       if (
newTimeRate&gt;=0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
    core-&gt;<span class="delete">getNavigator()-&gt;setTimeRate(qMax(newTimeRate, </span>JD_SECOND));</td><td> </td><td class="rblock">                                                                           
    core-&gt;<span class="insert">setTimeRate(qMax(newTimeRate, StelCore::</span>JD_SECOND));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                       else</td><td> </td><td class="right">                                                                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           
    core-&gt;<span class="delete">getNavigator()-&gt;setTimeRate(qMin(newTimeRate, -</span>JD_SECOND));</td><td> </td><td class="rblock">                                                                           
    core-&gt;<span class="insert">setTimeRate(qMin(newTimeRate, -StelCore::</span>JD_SECOND));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               }</td><td> </td><td class="right">                                                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                               else</td><td> </td><td class="right">                                                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                       core
-&gt;<span class="delete">getNavigator()-&gt;</span>setTimeRate(beforeTimeDragTimeRate);</td><td> </td><td class="rblock">                                                                       core
-&gt;setTimeRate(beforeTimeDragTimeRate);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       }</td><td> </td><td class="right">                                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               }</td><td> </td><td class="right">                                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               else</td><td> </td><td class="right">                                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                       core-&gt;<span class="delete">getNavigator()
-&gt;setTimeRate(be</span>foreTimeDragTimeRate);</td><td> </td><td class="rblock">                                                       core-&gt;<span class="insert">setTimeRate(be
</span>foreTimeDragTimeRate);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       return;</td><td> </td><td class="right">                                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // It's a normal click release</td><td> </td><td class="right">                                       // It's a normal click release</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       #ifdef Q_OS_MAC</td><td> </td><td class="right">                       #ifdef Q_OS_MAC</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // CTRL + left clic = right clic for
 1 button mouse</td><td> </td><td class="right">                                       // CTRL + left clic = right clic for
 1 button mouse</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (event-&gt;modifiers().testFlag(Qt::
ControlModifier))</td><td> </td><td class="right">                                       if (event-&gt;modifiers().testFlag(Qt::
ControlModifier))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 379</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 380</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default: break;</td><td> </td><td class="right">               default: break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return;</td><td> </td><td class="right">       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::setInitViewDirectionToCurrent()</td><td> </td><td class="right">void StelMovementMgr::setInitViewDirectionToCurrent()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       initViewPos = core-&gt;<span class="delete">getNavigator()-&gt;j2000ToAltAz(viewDirectionJ2000)
</span>;</td><td> </td><td class="rblock">       initViewPos = core-&gt;<span class="insert">j2000ToAltAz(viewDirectionJ2000, StelCore::Refra
ctionOff)</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString dirStr = QString("%1,%2,%3").arg(initViewPos[0]).arg(initVie
wPos[1]).arg(initViewPos[2]);</td><td> </td><td class="right">       QString dirStr = QString("%1,%2,%3").arg(initViewPos[0]).arg(initVie
wPos[1]).arg(initViewPos[2]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getSettings()-&gt;setValue("navigation/init_view
_pos", dirStr);</td><td> </td><td class="right">       StelApp::getInstance().getSettings()-&gt;setValue("navigation/init_view
_pos", dirStr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*************************************************************************</td><td> </td><td class="right">/*************************************************************************</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> The selected objects changed, follow it it we were already following anoth
er one</td><td> </td><td class="right"> The selected objects changed, follow it it we were already following anoth
er one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">*************************************************************************/</td><td> </td><td class="right">*************************************************************************/</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">void StelMovementMgr::selectedObjectChange<span class="delete">CallBack(StelModuleSelectActi</span>on)</td><td> </td><td class="rblock">void StelMovementMgr::selectedObjectChange<span class="insert">(StelModule::StelModuleSelectActi
</span>on)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // If an object was selected keep the earth following</td><td> </td><td class="right">       // If an object was selected keep the earth following</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (objectMgr-&gt;getWasSelected())</td><td> </td><td class="right">       if (objectMgr-&gt;getWasSelected())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (getFlagTracking())</td><td> </td><td class="right">               if (getFlagTracking())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       setFlagLockEquPos(true);</td><td> </td><td class="right">                       setFlagLockEquPos(true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagTracking(false);</td><td> </td><td class="right">               setFlagTracking(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 536</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 537</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       updateAutoZoom(deltaTime);</td><td> </td><td class="right">       updateAutoZoom(deltaTime);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::updateVisionVector(double deltaTime)</td><td> </td><td class="right">void StelMovementMgr::updateVisionVector(double deltaTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagAutoMove)</td><td> </td><td class="right">       if (flagAutoMove)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!move.targetObject.isNull())</td><td> </td><td class="right">               if (!move.targetObject.isNull())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // if zooming in, object may be moving so be sure to
 zoom to latest position</td><td> </td><td class="right">                       // if zooming in, object may be moving so be sure to
 zoom to latest position</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       move.aim = <span class="delete">move.targetObject-&gt;getJ2000EquatorialPos(
core-&gt;getNavigator()</span>);</td><td> </td><td class="rblock">                       move.aim = <span class="insert">core-&gt;altAzToJ2000(move.targetObject-&gt;get
AltAzPosAuto(core), StelCore::RefractionOff</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       move.aim.normalize();</td><td> </td><td class="right">                       move.aim.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       move.aim*=2.;</td><td> </td><td class="right">                       move.aim*=2.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               move.coef+=move.speed*deltaTime*1000;</td><td> </td><td class="right">               move.coef+=move.speed*deltaTime*1000;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (move.coef&gt;=1.)</td><td> </td><td class="right">               if (move.coef&gt;=1.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       flagAutoMove=false;</td><td> </td><td class="right">                       flagAutoMove=false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       move.coef=1.;</td><td> </td><td class="right">                       move.coef=1.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 602</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 603</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double de_now = de_aim*c + de_start*(1.-c);</td><td> </td><td class="right">               const double de_now = de_aim*c + de_start*(1.-c);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const double ra_now = ra_aim*c + ra_start*(1.-c);</td><td> </td><td class="right">               const double ra_now = ra_aim*c + ra_start*(1.-c);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d tmp;</td><td> </td><td class="right">               Vec3d tmp;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelUtils::spheToRect(ra_now, de_now, tmp);</td><td> </td><td class="right">               StelUtils::spheToRect(ra_now, de_now, tmp);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setViewDirectionJ2000(mountFrameToJ2000(tmp));</td><td> </td><td class="right">               setViewDirectionJ2000(mountFrameToJ2000(tmp));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (flagTracking &amp;&amp; objectMgr-&gt;getWasSelected()) // Equatori
al vision vector locked on selected object</td><td> </td><td class="right">               if (flagTracking &amp;&amp; objectMgr-&gt;getWasSelected()) // Equatori
al vision vector locked on selected object</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">setViewDirectionJ2000(objectMgr-&gt;getSelectedObject()</span></td><td> </td><td class="rblock">                       <span class="insert">Vec3d v = objectMgr-&gt;getSelectedObject()[0]-&gt;getAltA</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">[0]-&gt;getJ2000EquatorialPos(core-&gt;getNavigator()));</span></td><td> </td><td class="rblock"><span class="insert">zPosAuto(core);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       setViewDirectionJ2000(core-&gt;altAzToJ2000(v, StelCore</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">::RefractionOff));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (flagLockEquPos) // Equatorial vision vector lock
ed</td><td> </td><td class="right">                       if (flagLockEquPos) // Equatorial vision vector lock
ed</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               // Recalc local vision vector</td><td> </td><td class="right">                               // Recalc local vision vector</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               setViewDirectionJ2000(viewDirectionJ2000);</td><td> </td><td class="right">                               setViewDirectionJ2000(viewDirectionJ2000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 649</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 651</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if( allowManualZoom &amp;&amp; flagManualZoom )</td><td> </td><td class="right">       if( allowManualZoom &amp;&amp; flagManualZoom )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // if manual zoom mode, user can zoom in incrementally</td><td> </td><td class="right">               // if manual zoom mode, user can zoom in incrementally</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               float newfov = currentFov*0.5f;</td><td> </td><td class="right">               float newfov = currentFov*0.5f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               zoomTo(newfov, manualMoveDuration);</td><td> </td><td class="right">               zoomTo(newfov, manualMoveDuration);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               float satfov = objectMgr-&gt;getSelectedObject()[0]-&gt;getSatelli
tesFov(core<span class="delete">-&gt;getNavigator()</span>);</td><td> </td><td class="rblock">               float satfov = objectMgr-&gt;getSelectedObject()[0]-&gt;getSatelli
tesFov(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (satfov&gt;0.0 &amp;&amp; currentFov*0.9&gt;satfov)</td><td> </td><td class="right">               if (satfov&gt;0.0 &amp;&amp; currentFov*0.9&gt;satfov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       zoomTo(satfov, moveDuration);</td><td> </td><td class="right">                       zoomTo(satfov, moveDuration);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       float closefov = objectMgr-&gt;getSelectedObject()[0]-&gt;
getCloseViewFov(core<span class="delete">-&gt;getNavigator()</span>);</td><td> </td><td class="rblock">                       float closefov = objectMgr-&gt;getSelectedObject()[0]-&gt;
getCloseViewFov(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (currentFov&gt;closefov)</td><td> </td><td class="right">                       if (currentFov&gt;closefov)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               zoomTo(closefov, moveDuration);</td><td> </td><td class="right">                               zoomTo(closefov, moveDuration);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Unzoom and go to the init position</td><td> </td><td class="right">// Unzoom and go to the init position</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::autoZoomOut(float moveDuration, bool full)</td><td> </td><td class="right">void StelMovementMgr::autoZoomOut(float moveDuration, bool full)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       moveDuration /= movementsSpeedFactor;</td><td> </td><td class="right">       moveDuration /= movementsSpeedFactor;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (objectMgr-&gt;getWasSelected() &amp;&amp; !full)</td><td> </td><td class="right">       if (objectMgr-&gt;getWasSelected() &amp;&amp; !full)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // If the selected object has satellites, unzoom to satellit
es view</td><td> </td><td class="right">               // If the selected object has satellites, unzoom to satellit
es view</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // unless specified otherwise</td><td> </td><td class="right">               // unless specified otherwise</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               float satfov = objectMgr-&gt;getSelectedObject()[0]-&gt;getSatelli
tesFov(core<span class="delete">-&gt;getNavigator()</span>);</td><td> </td><td class="rblock">               float satfov = objectMgr-&gt;getSelectedObject()[0]-&gt;getSatelli
tesFov(core);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (satfov&gt;0.0 &amp;&amp; currentFov&lt;=satfov*0.9)</td><td> </td><td class="right">               if (satfov&gt;0.0 &amp;&amp; currentFov&lt;=satfov*0.9)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       zoomTo(satfov, moveDuration);</td><td> </td><td class="right">                       zoomTo(satfov, moveDuration);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // If the selected object is part of a Planet subsystem (oth
er than sun),</td><td> </td><td class="right">               // If the selected object is part of a Planet subsystem (oth
er than sun),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // unzoom to subsystem view</td><td> </td><td class="right">               // unzoom to subsystem view</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               satfov = objectMgr-&gt;getSelectedObject()[0]-&gt;getParentSatelli
tesFov((core<span class="delete">-&gt;getNavigator()</span>));</td><td> </td><td class="rblock">               satfov = objectMgr-&gt;getSelectedObject()[0]-&gt;getParentSatelli
tesFov((core));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (satfov&gt;0.0 &amp;&amp; currentFov&lt;=satfov*0.9)</td><td> </td><td class="right">               if (satfov&gt;0.0 &amp;&amp; currentFov&lt;=satfov*0.9)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       zoomTo(satfov, moveDuration);</td><td> </td><td class="right">                       zoomTo(satfov, moveDuration);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       zoomTo(initFov, moveDuration);</td><td> </td><td class="right">       zoomTo(initFov, moveDuration);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (flagAutoZoomOutResetsDirection)</td><td> </td><td class="right">       if (flagAutoZoomOutResetsDirection)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               moveToJ2000(core-&gt;<span class="delete">getNavigator()-&gt;altAzToJ2000(getInitViewin
gDirection()</span>), moveDuration, -1);</td><td> </td><td class="rblock">               moveToJ2000(core-&gt;<span class="insert">altAzToJ2000(getInitViewingDirection(), St
elCore::RefractionOff</span>), moveDuration, -1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagTracking(false);</td><td> </td><td class="right">               setFlagTracking(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setFlagLockEquPos(false);</td><td> </td><td class="right">               setFlagLockEquPos(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::setFlagTracking(bool b)</td><td> </td><td class="right">void StelMovementMgr::setFlagTracking(bool b)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!b || !objectMgr-&gt;getWasSelected())</td><td> </td><td class="right">       if (!b || !objectMgr-&gt;getWasSelected())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               flagTracking=false;</td><td> </td><td class="right">               flagTracking=false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 748</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 750</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       move.coef=0.;</td><td> </td><td class="right">       move.coef=0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       move.targetObject = target;</td><td> </td><td class="right">       move.targetObject = target;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagAutoMove = true;</td><td> </td><td class="right">       flagAutoMove = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelMovementMgr::j2000ToMountFrame(const Vec3d&amp; v) const</td><td> </td><td class="right">Vec3d StelMovementMgr::j2000ToMountFrame(const Vec3d&amp; v) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       switch (mountMode)</td><td> </td><td class="right">       switch (mountMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MountAltAzimuthal:</td><td> </td><td class="right">               case MountAltAzimuthal:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return core-&gt;<span class="delete">getNavigator()-&gt;j2000ToAltAz(v</span>);</td><td> </td><td class="rblock">                       return core-&gt;<span class="insert">j2000ToAltAz(v, StelCore::RefractionOff
</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MountEquinoxEquatorial:</td><td> </td><td class="right">               case MountEquinoxEquatorial:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return core-&gt;<span class="delete">getNavigator()-&gt;</span>j2000ToEquinoxEqu(v);</td><td> </td><td class="rblock">                       return core-&gt;j2000ToEquinoxEqu(v);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MountGalactic:</td><td> </td><td class="right">               case MountGalactic:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return core-&gt;<span class="delete">getNavigator()-&gt;</span>j2000ToGalactic(v);</td><td> </td><td class="rblock">                       return core-&gt;j2000ToGalactic(v);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(0);</td><td> </td><td class="right">       Q_ASSERT(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return Vec3d(0);</td><td> </td><td class="right">       return Vec3d(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelMovementMgr::mountFrameToJ2000(const Vec3d&amp; v) const</td><td> </td><td class="right">Vec3d StelMovementMgr::mountFrameToJ2000(const Vec3d&amp; v) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       switch (mountMode)</td><td> </td><td class="right">       switch (mountMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MountAltAzimuthal:</td><td> </td><td class="right">               case MountAltAzimuthal:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return core-&gt;<span class="delete">getNavigator()-&gt;altAzToJ2000(v</span>);</td><td> </td><td class="rblock">                       return core-&gt;<span class="insert">altAzToJ2000(v, StelCore::RefractionOff
</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MountEquinoxEquatorial:</td><td> </td><td class="right">               case MountEquinoxEquatorial:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return core-&gt;<span class="delete">getNavigator()-&gt;</span>equinoxEquToJ2000(v);</td><td> </td><td class="rblock">                       return core-&gt;equinoxEquToJ2000(v);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case MountGalactic:</td><td> </td><td class="right">               case MountGalactic:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return core-&gt;g<span class="delete">etNavigator()-&gt;g</span>alacticToJ2000(v);</td><td> </td><td class="rblock">                       return core-&gt;galacticToJ2000(v);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(0);</td><td> </td><td class="right">       Q_ASSERT(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return Vec3d(0);</td><td> </td><td class="right">       return Vec3d(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::setViewDirectionJ2000(const Vec3d&amp; v)</td><td> </td><td class="right">void StelMovementMgr::setViewDirectionJ2000(const Vec3d&amp; v)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       core-&gt;<span class="delete">getNavigator()-&gt;</span>lookAtJ2000(v, getViewUpVectorJ2000());</td><td> </td><td class="rblock">       core-&gt;lookAtJ2000(v, getViewUpVectorJ2000());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       viewDirectionJ2000 = v;</td><td> </td><td class="right">       viewDirectionJ2000 = v;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       viewDirectionMountFrame = j2000ToMountFrame(v);</td><td> </td><td class="right">       viewDirectionMountFrame = j2000ToMountFrame(v);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::panView(double deltaAz, double deltaAlt)</td><td> </td><td class="right">void StelMovementMgr::panView(double deltaAz, double deltaAlt)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double azVision, altVision;</td><td> </td><td class="right">       double azVision, altVision;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelUtils::rectToSphe(&amp;azVision,&amp;altVision,j2000ToMountFrame(viewDir
ectionJ2000));</td><td> </td><td class="right">       StelUtils::rectToSphe(&amp;azVision,&amp;altVision,j2000ToMountFrame(viewDir
ectionJ2000));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // if we are moving in the Azimuthal angle (left/right)</td><td> </td><td class="right">       // if we are moving in the Azimuthal angle (left/right)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 810</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 812</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelUtils::spheToRect(azVision, altVision, tmp);</td><td> </td><td class="right">               StelUtils::spheToRect(azVision, altVision, tmp);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setViewDirectionJ2000(mountFrameToJ2000(tmp));</td><td> </td><td class="right">               setViewDirectionJ2000(mountFrameToJ2000(tmp));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Make the first screen position correspond to the second (useful for mou
se dragging)</td><td> </td><td class="right">//! Make the first screen position correspond to the second (useful for mou
se dragging)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelMovementMgr::dragView(int x1, int y1, int x2, int y2)</td><td> </td><td class="right">void StelMovementMgr::dragView(int x1, int y1, int x2, int y2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (dragTimeMode)</td><td> </td><td class="right">       if (dragTimeMode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               core-&gt;<span class="delete">getNavigator()-&gt;</span>setTimeRate(0);</td><td> </td><td class="rblock">               core-&gt;setTimeRate(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d v1, v2;</td><td> </td><td class="right">               Vec3d v1, v2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelProjectorP prj = core-&gt;getProjection(StelCore::Fra
meEquinoxEqu);</td><td> </td><td class="right">               const StelProjectorP prj = core-&gt;getProjection(StelCore::Fra
meEquinoxEqu);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               prj-&gt;unProject(x2,y2, v2);</td><td> </td><td class="right">               prj-&gt;unProject(x2,y2, v2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               prj-&gt;unProject(x1,y1, v1);</td><td> </td><td class="right">               prj-&gt;unProject(x1,y1, v1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               v1[2]=0; v1.normalize();</td><td> </td><td class="right">               v1[2]=0; v1.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               v2[2]=0; v2.normalize();</td><td> </td><td class="right">               v2[2]=0; v2.normalize();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double angle = (v2^v1)[2];</td><td> </td><td class="right">               double angle = (v2^v1)[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               double deltaDay = <span class="delete">angle/(2.*M_PI)*core-&gt;getNavigator()-&gt;getL</span></td><td> </td><td class="rblock">               double deltaDay = <span class="insert">angle/(2.*M_PI)*core-&gt;getLocalSideralDayLe</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ocalSideralDayLength();</span></td><td> </td><td class="rblock"><span class="insert">ngth();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               core-&gt;getNavigator()-&gt;setJDay(core-&gt;getNavigator()-&gt;getJDay(</span></td><td> </td><td class="rblock"><span class="insert">               core-&gt;setJDay(core-&gt;getJDay()+deltaDay);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)+deltaDay);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               addTimeDragPoint(x2, y2);</td><td> </td><td class="right">               addTimeDragPoint(x2, y2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d tempvec1, tempvec2;</td><td> </td><td class="right">               Vec3d tempvec1, tempvec2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               const StelProjectorP prj = core-&gt;getProjection(StelCore::Fra
meJ2000);</td><td> </td><td class="right">               const StelProjectorP prj = core-&gt;getProjection(StelCore::Fra
meJ2000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               prj-&gt;unProject(x2,y2, tempvec2);</td><td> </td><td class="right">               prj-&gt;unProject(x2,y2, tempvec2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               prj-&gt;unProject(x1,y1, tempvec1);</td><td> </td><td class="right">               prj-&gt;unProject(x1,y1, tempvec1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               double az1, alt1, az2, alt2;</td><td> </td><td class="right">               double az1, alt1, az2, alt2;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelUtils::rectToSphe(&amp;az1, &amp;alt1, j2000ToMountFrame(tempvec
1));</td><td> </td><td class="right">               StelUtils::rectToSphe(&amp;az1, &amp;alt1, j2000ToMountFrame(tempvec
1));</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 28 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>31 lines changed or deleted</i></th><th><i> </i></th><th><i>35 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
