<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-57-generic #78-Ubuntu SMP Fri Dec 9 23:50:32 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelCore.cpp - StelCore.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelCore.cpp&nbsp;</th><th> </th><th>&nbsp;StelCore.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 48</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 48</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelTranslator.hpp"</td><td> </td><td class="right">#include "StelTranslator.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelActionMgr.hpp"</td><td> </td><td class="right">#include "StelActionMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelPropertyMgr.hpp"</td><td> </td><td class="right">#include "StelPropertyMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "StelFileMgr.hpp"</td><td> </td><td class="right">#include "StelFileMgr.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "EphemWrapper.hpp"</td><td> </td><td class="right">#include "EphemWrapper.hpp"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include "precession.h"</td><td> </td><td class="right">#include "precession.h"</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMetaEnum&gt;</td><td> </td><td class="right">#include &lt;QMetaEnum&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QTimeZone&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QFile&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#include &lt;QDir&gt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;iostream&gt;</td><td> </td><td class="right">#include &lt;iostream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;fstream&gt;</td><td> </td><td class="right">#include &lt;fstream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Init statics transfo matrices</td><td> </td><td class="right">// Init statics transfo matrices</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// See vsop87.doc:</td><td> </td><td class="right">// See vsop87.doc:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matJ2000ToVsop87(Mat4d::xrotation(-23.439280305555555
5556*(M_PI/180)) * Mat4d::zrotation(0.0000275*(M_PI/180)));</td><td> </td><td class="right">const Mat4d StelCore::matJ2000ToVsop87(Mat4d::xrotation(-23.439280305555555
5556*(M_PI/180)) * Mat4d::zrotation(0.0000275*(M_PI/180)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matVsop87ToJ2000(matJ2000ToVsop87.transpose());</td><td> </td><td class="right">const Mat4d StelCore::matVsop87ToJ2000(matJ2000ToVsop87.transpose());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matJ2000ToGalactic(-0.054875539726, 0.494109453312, -
0.867666135858, 0, -0.873437108010, -0.444829589425, -0.198076386122, 0, -0
.483834985808, 0.746982251810, 0.455983795705, 0, 0, 0, 0, 1);</td><td> </td><td class="right">const Mat4d StelCore::matJ2000ToGalactic(-0.054875539726, 0.494109453312, -
0.867666135858, 0, -0.873437108010, -0.444829589425, -0.198076386122, 0, -0
.483834985808, 0.746982251810, 0.455983795705, 0, 0, 0, 0, 1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const Mat4d StelCore::matGalacticToJ2000(matJ2000ToGalactic.transpose());</td><td> </td><td class="right">const Mat4d StelCore::matGalacticToJ2000(matJ2000ToGalactic.transpose());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock">const <span class="insert">Mat4d StelCore::matJ2000ToSupergalactic(0.37501548, -0.89832046, 0.22</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">const double <span class="delete">StelCore::JD_SECOND=0.000011574074074074074074;</span> // <span class="delete">1/(24*60*60</span></td><td> </td><td class="rblock"><span class="insert">887497, 0, 0.34135896, -0.09572714, -0.93504565, 0, 0.86188018, 0.42878511,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)=1/86400</span></td><td> </td><td class="rblock"><span class="insert"> 0.27075058, 0, 0, 0, 0, 1);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">const double <span class="delete">StelCore::JD_MINUTE=0.00069444444444444444444;</span>  // 1/(24*60)  </td><td> </td><td class="rblock"><span class="insert">const Mat4d StelCore::matSupergalacticToJ2000(matJ2000ToSupergalactic.trans</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> =1/1440</td><td> </td><td class="rblock"><span class="insert">pose());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">const double StelCore::JD_HOUR  <span class="delete">=0.041666666666666666666;</span>    // 1/24</td><td> </td><td class="rblock"><span class="insert">Mat4d StelCore::matJ2000ToJ1875; // gets to be initialized in constructor.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">const double StelCore::JD_DAY   <span class="delete">=1.;</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">const double StelCore::ONE_OVER_JD_SECOND = <span class="delete">24 * 60 * 60;</span>    // 86400</td><td> </td><td class="rblock"><span class="insert">const</span> double <span class="insert">StelCore::JD_SECOND = 0.000011574074074074074074;</span> // <span class="insert">1/(24*60*</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">60)=1/86400</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">const double <span class="insert">StelCore::JD_MINUTE = 0.00069444444444444444444;</span>  // 1/(24*60)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">   =1/1440</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">const double StelCore::JD_HOUR   <span class="insert">= 0.041666666666666666666;</span>    // 1/24</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">const double StelCore::JD_DAY    <span class="insert">= 1.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">const double StelCore::ONE_OVER_JD_SECOND = <span class="insert">86400;</span>             // 86400</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">const double StelCore::TZ_ERA_BEGINNING = 2395996.5;           // December </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1, 1847</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelCore::StelCore()</td><td> </td><td class="right">StelCore::StelCore()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       : skyDrawer(NULL)</td><td> </td><td class="right">       : skyDrawer(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , movementMgr(NULL)</td><td> </td><td class="right">       , movementMgr(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , geodesicGrid(NULL)</td><td> </td><td class="right">       , geodesicGrid(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , currentProjectionType(ProjectionStereographic)</td><td> </td><td class="right">       , currentProjectionType(ProjectionStereographic)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , currentDeltaTAlgorithm(EspenakMeeus)</td><td> </td><td class="right">       , currentDeltaTAlgorithm(EspenakMeeus)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , position(NULL)</td><td> </td><td class="right">       , position(NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagUseNutation(true)</td><td> </td><td class="right">       , flagUseNutation(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , flagUseTopocentricCoordinates(true)</td><td> </td><td class="right">       , flagUseTopocentricCoordinates(true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , timeSpeed(JD_SECOND)</td><td> </td><td class="right">       , timeSpeed(JD_SECOND)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , JD(0.,0.)</td><td> </td><td class="right">       , JD(0.,0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , presetSkyTime(0.)</td><td> </td><td class="right">       , presetSkyTime(0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , milliSecondsOfLastJDUpdate(0.)</td><td> </td><td class="right">       , milliSecondsOfLastJDUpdate(0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , jdOfLastJDUpdate(0.)</td><td> </td><td class="right">       , jdOfLastJDUpdate(0.)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       , flagUseDST(true)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , deltaTCustomNDot(-26.0)</td><td> </td><td class="right">       , deltaTCustomNDot(-26.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , deltaTCustomYear(1820.0)</td><td> </td><td class="right">       , deltaTCustomYear(1820.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , de430Available(false)</td><td> </td><td class="right">       , de430Available(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , de431Available(false)</td><td> </td><td class="right">       , de431Available(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , de430Active(false)</td><td> </td><td class="right">       , de430Active(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , de431Active(false)</td><td> </td><td class="right">       , de431Active(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setObjectName("StelCore");</td><td> </td><td class="right">       setObjectName("StelCore");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       registerMathMetaTypes();</td><td> </td><td class="right">       registerMathMetaTypes();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 119</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 127</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.viewportFovDiameter = conf-&gt;value("projection
/viewport_fov_diameter", qMin(viewport_width,viewport_height)).toFloat();</td><td> </td><td class="right">       currentProjectorParams.viewportFovDiameter = conf-&gt;value("projection
/viewport_fov_diameter", qMin(viewport_width,viewport_height)).toFloat();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.flipHorz = conf-&gt;value("projection/flip_horz"
,false).toBool();</td><td> </td><td class="right">       currentProjectorParams.flipHorz = conf-&gt;value("projection/flip_horz"
,false).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.flipVert = conf-&gt;value("projection/flip_vert"
,false).toBool();</td><td> </td><td class="right">       currentProjectorParams.flipVert = conf-&gt;value("projection/flip_vert"
,false).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.gravityLabels = conf-&gt;value("viewing/flag_gra
vity_labels").toBool();</td><td> </td><td class="right">       currentProjectorParams.gravityLabels = conf-&gt;value("viewing/flag_gra
vity_labels").toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.devicePixelsPerPixel = StelApp::getInstance()
.getDevicePixelsPerPixel();</td><td> </td><td class="right">       currentProjectorParams.devicePixelsPerPixel = StelApp::getInstance()
.getDevicePixelsPerPixel();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagUseNutation=conf-&gt;value("astro/flag_nutation", true).toBool();</td><td> </td><td class="right">       flagUseNutation=conf-&gt;value("astro/flag_nutation", true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       flagUseTopocentricCoordinates=conf-&gt;value("astro/flag_topocentric_co
ordinates", true).toBool();</td><td> </td><td class="right">       flagUseTopocentricCoordinates=conf-&gt;value("astro/flag_topocentric_co
ordinates", true).toBool();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">flagUseDST=conf-&gt;value("localization/flag_dst", true).toBool();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // Initialize matJ2000ToJ1875 matrix</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double jd1875, eps1875, chi1875, omega1875, psi1875;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelUtils::getJDFromDate(&amp;jd1875, 1875, 1, 0, 0, 0, 0);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       getPrecessionAnglesVondrak(jd1875, &amp;eps1875, &amp;chi1875, &amp;omega1875, &amp;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">psi1875);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       matJ2000ToJ1875= Mat4d::xrotation(84381.406*1./3600.*M_PI/180.) * Ma</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">t4d::zrotation(-psi1875) * Mat4d::xrotation(-omega1875) * Mat4d::zrotation(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">chi1875);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       matJ2000ToJ1875=matJ2000ToJ1875.transpose();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelCore::~StelCore()</td><td> </td><td class="right">StelCore::~StelCore()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete toneReproducer; toneReproducer=NULL;</td><td> </td><td class="right">       delete toneReproducer; toneReproducer=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete geodesicGrid; geodesicGrid=NULL;</td><td> </td><td class="right">       delete geodesicGrid; geodesicGrid=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete skyDrawer; skyDrawer=NULL;</td><td> </td><td class="right">       delete skyDrawer; skyDrawer=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete position; position=NULL;</td><td> </td><td class="right">       delete position; position=NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 163</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 179</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               location = locationMgr-&gt;locationForString(defaultLocationID)
;</td><td> </td><td class="right">               location = locationMgr-&gt;locationForString(defaultLocationID)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!location.isValid())</td><td> </td><td class="right">       if (!location.isValid())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "Warning: location" &lt;&lt; defaultLocationID &lt;&lt; "i
s unknown.";</td><td> </td><td class="right">               qWarning() &lt;&lt; "Warning: location" &lt;&lt; defaultLocationID &lt;&lt; "i
s unknown.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               location = locationMgr-&gt;getLastResortLocation();</td><td> </td><td class="right">               location = locationMgr-&gt;getLastResortLocation();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       position = new StelObserver(location);</td><td> </td><td class="right">       position = new StelObserver(location);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">setCurrentTimeZone(conf-&gt;value("localization/time_zone", getCurrentL</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ocation().timeZone).toString());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Delta-T stuff</td><td> </td><td class="right">       // Delta-T stuff</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Define default algorithm for time correction (Delta T)</td><td> </td><td class="right">       // Define default algorithm for time correction (Delta T)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString tmpDT = conf-&gt;value("navigation/time_correction_algorithm", 
"EspenakMeeus").toString();</td><td> </td><td class="right">       QString tmpDT = conf-&gt;value("navigation/time_correction_algorithm", 
"EspenakMeeus").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCurrentDeltaTAlgorithmKey(tmpDT);</td><td> </td><td class="right">       setCurrentDeltaTAlgorithmKey(tmpDT);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Define variables of custom equation for calculation of Delta T</td><td> </td><td class="right">       // Define variables of custom equation for calculation of Delta T</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Default: ndot = -26.0 "/cy/cy; year = 1820; DeltaT = -20 + 32*u^2
, where u = (currentYear-1820)/100</td><td> </td><td class="right">       // Default: ndot = -26.0 "/cy/cy; year = 1820; DeltaT = -20 + 32*u^2
, where u = (currentYear-1820)/100</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setDeltaTCustomYear(conf-&gt;value("custom_time_correction/year", 1820.
0).toFloat());</td><td> </td><td class="right">       setDeltaTCustomYear(conf-&gt;value("custom_time_correction/year", 1820.
0).toFloat());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setDeltaTCustomNDot(conf-&gt;value("custom_time_correction/ndot", -26.0
).toFloat());</td><td> </td><td class="right">       setDeltaTCustomNDot(conf-&gt;value("custom_time_correction/ndot", -26.0
).toFloat());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setDeltaTCustomEquationCoefficients(StelUtils::strToVec3f(conf-&gt;valu
e("custom_time_correction/coefficients", "-20,0,32").toString()));</td><td> </td><td class="right">       setDeltaTCustomEquationCoefficients(StelUtils::strToVec3f(conf-&gt;valu
e("custom_time_correction/coefficients", "-20,0,32").toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 193</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 211</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "navigation/preset_sky_time is a double - treati
ng as jday:" &lt;&lt; QString::number(presetSkyTime, 'f', 5);</td><td> </td><td class="right">               qDebug() &lt;&lt; "navigation/preset_sky_time is a double - treati
ng as jday:" &lt;&lt; QString::number(presetSkyTime, 'f', 5);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "navigation/preset_sky_time was not a double, tr
eating as string date:" &lt;&lt; presetTimeStr;</td><td> </td><td class="right">               qDebug() &lt;&lt; "navigation/preset_sky_time was not a double, tr
eating as string date:" &lt;&lt; presetTimeStr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               presetSkyTime = StelUtils::qDateTimeToJd(QDateTime::fromStri
ng(presetTimeStr));</td><td> </td><td class="right">               presetSkyTime = StelUtils::qDateTimeToJd(QDateTime::fromStri
ng(presetTimeStr));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setInitTodayTime(QTime::fromString(conf-&gt;value("navigation/today_tim
e", "22:00").toString()));</td><td> </td><td class="right">       setInitTodayTime(QTime::fromString(conf-&gt;value("navigation/today_tim
e", "22:00").toString()));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       startupTimeMode = conf-&gt;value("navigation/startup_time_mode", "actua
l").toString().toLower();</td><td> </td><td class="right">       startupTimeMode = conf-&gt;value("navigation/startup_time_mode", "actua
l").toString().toLower();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (startupTimeMode=="preset")</td><td> </td><td class="right">       if (startupTimeMode=="preset")</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               setJD(presetSkyTime - <span class="delete">StelUtils::getGMTShiftFromQT(presetSky
Time) * JD_HOUR)</span>;</td><td> </td><td class="rblock">               setJD(presetSkyTime - <span class="insert">getUTCOffset(presetSkyTime) * JD_HOUR)
</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (startupTimeMode=="today")</td><td> </td><td class="right">       else if (startupTimeMode=="today")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setTodayTime(getInitTodayTime());</td><td> </td><td class="right">               setTodayTime(getInitTodayTime());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute transform matrices between coordinates systems</td><td> </td><td class="right">       // Compute transform matrices between coordinates systems</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       updateTransformMatrices();</td><td> </td><td class="right">       updateTransformMatrices();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementMgr = new StelMovementMgr(this);</td><td> </td><td class="right">       movementMgr = new StelMovementMgr(this);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       movementMgr-&gt;init();</td><td> </td><td class="right">       movementMgr-&gt;init();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.fov = movementMgr-&gt;getInitFov();</td><td> </td><td class="right">       currentProjectorParams.fov = movementMgr-&gt;getInitFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelApp::getInstance().getModuleMgr().registerModule(movementMgr);</td><td> </td><td class="right">       StelApp::getInstance().getModuleMgr().registerModule(movementMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 227</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 245</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString timeGroup = N_("Date and Time");</td><td> </td><td class="right">       QString timeGroup = N_("Date and Time");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString movementGroup = N_("Movement and Selection");</td><td> </td><td class="right">       QString movementGroup = N_("Movement and Selection");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString displayGroup = N_("Display Options");</td><td> </td><td class="right">       QString displayGroup = N_("Display Options");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelActionMgr* actionsMgr = StelApp::getInstance().getStelActionMana
ger();</td><td> </td><td class="right">       StelActionMgr* actionsMgr = StelApp::getInstance().getStelActionMana
ger();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed", timeGroup, N_("In
crease time speed"), this, "increaseTimeSpeed()", "L");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed", timeGroup, N_("In
crease time speed"), this, "increaseTimeSpeed()", "L");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed", timeGroup, N_("De
crease time speed"), this, "decreaseTimeSpeed()", "J");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed", timeGroup, N_("De
crease time speed"), this, "decreaseTimeSpeed()", "J");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed_Less", timeGroup, N
_("Increase time speed (a little)"), this, "increaseTimeSpeedLess()", "Shif
t+L");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionIncrease_Time_Speed_Less", timeGroup, N
_("Increase time speed (a little)"), this, "increaseTimeSpeedLess()", "Shif
t+L");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed_Less", timeGroup, N
_("Decrease time speed (a little)"), this, "decreaseTimeSpeedLess()", "Shif
t+J");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionDecrease_Time_Speed_Less", timeGroup, N
_("Decrease time speed (a little)"), this, "decreaseTimeSpeedLess()", "Shif
t+J");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSet_Real_Time_Speed", timeGroup, N_("Se
t normal time rate"), this, "toggleRealTimeSpeed()", "K");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSet_Real_Time_Speed", timeGroup, N_("Se
t normal time rate"), this, "toggleRealTimeSpeed()", "K");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSet_Time_Rate_Zero", timeGroup, N_("Set
 time rate to zero"), this, "setZeroTimeSpeed()", "7");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSet_Time_Rate_Zero", timeGroup, N_("Set
 time rate to zero"), this, "setZeroTimeSpeed()", "7");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       actionsMgr-&gt;addAction("actionSet_Time_Reverse", timeGroup, N_("Set r
everse time direction"), this, "revertTimeDirection()", "0");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionReturn_To_Current_Time", timeGroup, N_(
"Set time to now"), this, "setTimeNow()", "8");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionReturn_To_Current_Time", timeGroup, N_(
"Set time to now"), this, "setTimeNow()", "8");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       actionsMgr-&gt;addAction("actionAdd_Solar_Minute", timeGroup, N_("Add 1
 solar minute"), this, "addMinute()");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Solar_Hour", timeGroup, N_("Add 1 s
olar hour"), this, "addHour()", "Ctrl+=");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Solar_Hour", timeGroup, N_("Add 1 s
olar hour"), this, "addHour()", "Ctrl+=");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Solar_Day", timeGroup, N_("Add 1 so
lar day"), this, "addDay()", "=");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Solar_Day", timeGroup, N_("Add 1 so
lar day"), this, "addDay()", "=");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Solar_Week", timeGroup, N_("Add 7 s
olar days"), this, "addWeek()", "]");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Solar_Week", timeGroup, N_("Add 7 s
olar days"), this, "addWeek()", "]");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       actionsMgr-&gt;addAction("actionSubtract_Solar_Minute", timeGroup, N_("
Subtract 1 solar minute"), this, "subtractMinute()");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Solar_Hour", timeGroup, N_("Su
btract 1 solar hour"), this, "subtractHour()", "Ctrl+-");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Solar_Hour", timeGroup, N_("Su
btract 1 solar hour"), this, "subtractHour()", "Ctrl+-");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Solar_Day", timeGroup, N_("Sub
tract 1 solar day"), this, "subtractDay()", "-");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Solar_Day", timeGroup, N_("Sub
tract 1 solar day"), this, "subtractDay()", "-");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionSubtract_Solar_Week", timeGroup, N_("Su
btract 7 solar days"), this, "subtractWeek()", "[");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionSubtract_Solar_Week", timeGroup, N_("Su
btract 7 solar days"), this, "subtractWeek()", "[");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Sidereal_Day", timeGroup, N_("Add 1
 sidereal day"), this, "addSiderealDay()", "Alt+=");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Sidereal_Day", timeGroup, N_("Add 1
 sidereal day"), this, "addSiderealDay()", "Alt+=");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Sidereal_Year", timeGroup, N_("Add 
1 sidereal year"), this, "addSiderealYear()", "Ctrl+Alt+Shift+]");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Sidereal_Year", timeGroup, N_("Add 
1 sidereal year"), this, "addSiderealYear()", "Ctrl+Alt+Shift+]");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Sidereal_Century", timeGroup, N_("A
dd 100 sidereal years"), this, "addSiderealYears()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Sidereal_Century", timeGroup, N_("A
dd 100 sidereal years"), this, "addSiderealYears()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Synodic_Month", timeGroup, N_("Add 
1 synodic month"), this, "addSynodicMonth()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Synodic_Month", timeGroup, N_("Add 
1 synodic month"), this, "addSynodicMonth()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Draconic_Month", timeGroup, N_("Add
 1 draconic month"), this, "addDraconicMonth()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Draconic_Month", timeGroup, N_("Add
 1 draconic month"), this, "addDraconicMonth()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Draconic_Year", timeGroup, N_("Add 
1 draconic year"), this, "addDraconicYear()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Draconic_Year", timeGroup, N_("Add 
1 draconic year"), this, "addDraconicYear()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       actionsMgr-&gt;addAction("actionAdd_Anomalistic_Month", timeGroup, N_("
Add 1 anomalistic month"), this, "addAnomalisticMonth()");</td><td> </td><td class="right">       actionsMgr-&gt;addAction("actionAdd_Anomalistic_Month", timeGroup, N_("
Add 1 anomalistic month"), this, "addAnomalisticMonth()");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 368</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 389</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return getProjection(getHeliocentricEclipticModelVie
wTransform(refractionMode));</td><td> </td><td class="right">                       return getProjection(getHeliocentricEclipticModelVie
wTransform(refractionMode));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case FrameObservercentricEclipticJ2000:</td><td> </td><td class="right">               case FrameObservercentricEclipticJ2000:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return getProjection(getObservercentricEclipticJ2000
ModelViewTransform(refractionMode));</td><td> </td><td class="right">                       return getProjection(getObservercentricEclipticJ2000
ModelViewTransform(refractionMode));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case FrameObservercentricEclipticOfDate:</td><td> </td><td class="right">               case FrameObservercentricEclipticOfDate:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return getProjection(getObservercentricEclipticOfDat
eModelViewTransform(refractionMode));</td><td> </td><td class="right">                       return getProjection(getObservercentricEclipticOfDat
eModelViewTransform(refractionMode));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case FrameEquinoxEqu:</td><td> </td><td class="right">               case FrameEquinoxEqu:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return getProjection(getEquinoxEquModelViewTransform
(refractionMode));</td><td> </td><td class="right">                       return getProjection(getEquinoxEquModelViewTransform
(refractionMode));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case FrameJ2000:</td><td> </td><td class="right">               case FrameJ2000:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return getProjection(getJ2000ModelViewTransform(refr
actionMode));</td><td> </td><td class="right">                       return getProjection(getJ2000ModelViewTransform(refr
actionMode));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case FrameGalactic:</td><td> </td><td class="right">               case FrameGalactic:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                        return <span class="delete">getProjection(getGalacticModelViewTransform(</span></td><td> </td><td class="rblock">                       return <span class="insert">getProjection(getGalacticModelViewTransform(r</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">refractionMode));</span></td><td> </td><td class="rblock"><span class="insert">efractionMode));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               case FrameSupergalactic:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return getProjection(getSupergalacticModelViewTransf</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">orm(refractionMode));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default:</td><td> </td><td class="right">               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qDebug() &lt;&lt; "Unknown reference frame type: " &lt;&lt; (int
)frameType &lt;&lt; ".";</td><td> </td><td class="right">                       qDebug() &lt;&lt; "Unknown reference frame type: " &lt;&lt; (int
)frameType &lt;&lt; ".";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(0);</td><td> </td><td class="right">       Q_ASSERT(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return getProjection2d();</td><td> </td><td class="right">       return getProjection2d();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelToneReproducer* StelCore::getToneReproducer()</td><td> </td><td class="right">StelToneReproducer* StelCore::getToneReproducer()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return toneReproducer;</td><td> </td><td class="right">       return toneReproducer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 502</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 525</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setCurrentProjectionType(ProjectionType type)</td><td> </td><td class="right">void StelCore::setCurrentProjectionType(ProjectionType type)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(type!=currentProjectionType)</td><td> </td><td class="right">       if(type!=currentProjectionType)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               currentProjectionType=type;</td><td> </td><td class="right">               currentProjectionType=type;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               updateMaximumFov();</td><td> </td><td class="right">               updateMaximumFov();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit currentProjectionTypeChanged(type);</td><td> </td><td class="right">               emit currentProjectionTypeChanged(type);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               emit currentProjectionTypeKeyChanged(getCurrentProjectionTyp
eKey());</td><td> </td><td class="right">               emit currentProjectionTypeKeyChanged(getCurrentProjectionTyp
eKey());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit currentProjectionNameI18nChanged(getCurrentProjectionNa
meI18n());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelCore::ProjectionType StelCore::getCurrentProjectionType() const</td><td> </td><td class="right">StelCore::ProjectionType StelCore::getCurrentProjectionType() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return currentProjectionType;</td><td> </td><td class="right">       return currentProjectionType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set the current projection type to use</td><td> </td><td class="right">//! Set the current projection type to use</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setCurrentProjectionTypeKey(QString key)</td><td> </td><td class="right">void StelCore::setCurrentProjectionTypeKey(QString key)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 529</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 553</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setCurrentProjectionType(newType);</td><td> </td><td class="right">       setCurrentProjectionType(newType);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get the current Mapping used by the Projection</td><td> </td><td class="right">//! Get the current Mapping used by the Projection</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString StelCore::getCurrentProjectionTypeKey(void) const</td><td> </td><td class="right">QString StelCore::getCurrentProjectionTypeKey(void) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return metaObject()-&gt;enumerator(metaObject()-&gt;indexOfEnumerator("Pro
jectionType")).key(currentProjectionType);</td><td> </td><td class="right">       return metaObject()-&gt;enumerator(metaObject()-&gt;indexOfEnumerator("Pro
jectionType")).key(currentProjectionType);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QString StelCore::getCurrentProjectionNameI18n() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return projectionTypeKeyToNameI18n(getCurrentProjectionTypeKey());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get the list of all the available projections</td><td> </td><td class="right">//! Get the list of all the available projections</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QStringList StelCore::getAllProjectionTypeKeys() const</td><td> </td><td class="right">QStringList StelCore::getAllProjectionTypeKeys() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("ProjectionType"));</td><td> </td><td class="right">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("ProjectionType"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QStringList l;</td><td> </td><td class="right">       QStringList l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int i=0;i&lt;en.keyCount();++i)</td><td> </td><td class="right">       for (int i=0;i&lt;en.keyCount();++i)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               l &lt;&lt; en.key(i);</td><td> </td><td class="right">               l &lt;&lt; en.key(i);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return l;</td><td> </td><td class="right">       return l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 608</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 637</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return (currentProjectorParams.viewportCenterOffset[1] * 100.0f);</td><td> </td><td class="right">       return (currentProjectorParams.viewportCenterOffset[1] * 100.0f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set vertical viewport offset. Argument will be clamped to be inside [-50
...50]</td><td> </td><td class="right">// Set vertical viewport offset. Argument will be clamped to be inside [-50
...50]</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setViewportVerticalOffset(double newOffsetPct)</td><td> </td><td class="right">void StelCore::setViewportVerticalOffset(double newOffsetPct)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.viewportCenterOffset[1]=0.01f* qMin(50., qMax
(-50., newOffsetPct));</td><td> </td><td class="right">       currentProjectorParams.viewportCenterOffset[1]=0.01f* qMin(50., qMax
(-50., newOffsetPct));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.viewportCenter.set(currentProjectorParams.vie
wportXywh[0]+(0.5f+currentProjectorParams.viewportCenterOffset.v[0])*curren
tProjectorParams.viewportXywh[2],</td><td> </td><td class="right">       currentProjectorParams.viewportCenter.set(currentProjectorParams.vie
wportXywh[0]+(0.5f+currentProjectorParams.viewportCenterOffset.v[0])*curren
tProjectorParams.viewportXywh[2],</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               currentProjectorParams.viewp
ortXywh[1]+(0.5f+currentProjectorParams.viewportCenterOffset.v[1])*currentP
rojectorParams.viewportXywh[3]);</td><td> </td><td class="right">                                               currentProjectorParams.viewp
ortXywh[1]+(0.5f+currentProjectorParams.viewportCenterOffset.v[1])*currentP
rojectorParams.viewportXywh[3]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Set both viewport offsets. Arguments will be clamped to be inside [-50..</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.50]. I (GZ) hope this will avoid some of the shaking.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setViewportOffset(double newHorizontalOffsetPct, double newV</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">erticalOffsetPct)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenterOffset[0]=0.01f* qMin(50., qMax</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">(-50., newHorizontalOffsetPct));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenterOffset[1]=0.01f* qMin(50., qMax</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">(-50., newVerticalOffsetPct));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentProjectorParams.viewportCenter.set(currentProjectorParams.vie</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">wportXywh[0]+(0.5f+currentProjectorParams.viewportCenterOffset.v[0])*curren</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tProjectorParams.viewportXywh[2],</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               currentProjectorParams.viewp</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ortXywh[1]+(0.5f+currentProjectorParams.viewportCenterOffset.v[1])*currentP</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">rojectorParams.viewportXywh[3]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setViewportStretch(float stretch)</td><td> </td><td class="right">void StelCore::setViewportStretch(float stretch)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       currentProjectorParams.widthStretch=qMax(0.001f, stretch);</td><td> </td><td class="right">       currentProjectorParams.widthStretch=qMax(0.001f, stretch);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString StelCore::getDefaultLocationID() const</td><td> </td><td class="right">QString StelCore::getDefaultLocationID() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return defaultLocationID;</td><td> </td><td class="right">       return defaultLocationID;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 712</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 750</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       r.transfo4d(matJ2000ToAltAz);</td><td> </td><td class="right">       r.transfo4d(matJ2000ToAltAz);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyDrawer-&gt;getRefraction().forward(r);</td><td> </td><td class="right">       skyDrawer-&gt;getRefraction().forward(r);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return r;</td><td> </td><td class="right">       return r;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelCore::galacticToJ2000(const Vec3d&amp; v) const</td><td> </td><td class="right">Vec3d StelCore::galacticToJ2000(const Vec3d&amp; v) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return matGalacticToJ2000*v;</td><td> </td><td class="right">       return matGalacticToJ2000*v;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Vec3d StelCore::supergalacticToJ2000(const Vec3d&amp; v) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return matSupergalacticToJ2000*v;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelCore::equinoxEquToJ2000(const Vec3d&amp; v) const</td><td> </td><td class="right">Vec3d StelCore::equinoxEquToJ2000(const Vec3d&amp; v) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return matEquinoxEquToJ2000*v;</td><td> </td><td class="right">       return matEquinoxEquToJ2000*v;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelCore::j2000ToEquinoxEqu(const Vec3d&amp; v) const</td><td> </td><td class="right">Vec3d StelCore::j2000ToEquinoxEqu(const Vec3d&amp; v) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return matJ2000ToEquinoxEqu*v;</td><td> </td><td class="right">       return matJ2000ToEquinoxEqu*v;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Vec3d StelCore::j2000ToJ1875(const Vec3d&amp; v) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return matJ2000ToJ1875*v;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelCore::j2000ToGalactic(const Vec3d&amp; v) const</td><td> </td><td class="right">Vec3d StelCore::j2000ToGalactic(const Vec3d&amp; v) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return matJ2000ToGalactic*v;</td><td> </td><td class="right">       return matJ2000ToGalactic*v;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Vec3d StelCore::j2000ToSupergalactic(const Vec3d&amp; v) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return matJ2000ToSupergalactic*v;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Transform vector from heliocentric ecliptic coordinate to altazimuthal</td><td> </td><td class="right">//! Transform vector from heliocentric ecliptic coordinate to altazimuthal</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d StelCore::heliocentricEclipticToAltAz(const Vec3d&amp; v, RefractionMode 
refMode) const</td><td> </td><td class="right">Vec3d StelCore::heliocentricEclipticToAltAz(const Vec3d&amp; v, RefractionMode 
refMode) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (refMode==RefractionOff || skyDrawer==NULL || (refMode==Refractio
nAuto &amp;&amp; skyDrawer-&gt;getFlagHasAtmosphere()==false))</td><td> </td><td class="right">       if (refMode==RefractionOff || skyDrawer==NULL || (refMode==Refractio
nAuto &amp;&amp; skyDrawer-&gt;getFlagHasAtmosphere()==false))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return matHeliocentricEclipticJ2000ToAltAz*v;</td><td> </td><td class="right">               return matHeliocentricEclipticJ2000ToAltAz*v;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d r(v);</td><td> </td><td class="right">       Vec3d r(v);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       r.transfo4d(matHeliocentricEclipticJ2000ToAltAz);</td><td> </td><td class="right">       r.transfo4d(matHeliocentricEclipticJ2000ToAltAz);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       skyDrawer-&gt;getRefraction().forward(r);</td><td> </td><td class="right">       skyDrawer-&gt;getRefraction().forward(r);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return r;</td><td> </td><td class="right">       return r;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 841</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 894</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (refMode==RefractionOff || skyDrawer==NULL || (refMode==Refractio
nAuto &amp;&amp; skyDrawer-&gt;getFlagHasAtmosphere()==false))</td><td> </td><td class="right">       if (refMode==RefractionOff || skyDrawer==NULL || (refMode==Refractio
nAuto &amp;&amp; skyDrawer-&gt;getFlagHasAtmosphere()==false))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return StelProjector::ModelViewTranformP(new StelProjector::
Mat4dTransform(matAltAzModelView*matEquinoxEquToAltAz*matJ2000ToEquinoxEqu*
matGalacticToJ2000));</td><td> </td><td class="right">               return StelProjector::ModelViewTranformP(new StelProjector::
Mat4dTransform(matAltAzModelView*matEquinoxEquToAltAz*matJ2000ToEquinoxEqu*
matGalacticToJ2000));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Refraction* refr = new Refraction(skyDrawer-&gt;getRefraction());</td><td> </td><td class="right">       Refraction* refr = new Refraction(skyDrawer-&gt;getRefraction());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The pretransform matrix will convert from input coordinates to Al
tAz needed by the refraction function.</td><td> </td><td class="right">       // The pretransform matrix will convert from input coordinates to Al
tAz needed by the refraction function.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       refr-&gt;setPreTransfoMat(matEquinoxEquToAltAz*matJ2000ToEquinoxEqu*mat
GalacticToJ2000);</td><td> </td><td class="right">       refr-&gt;setPreTransfoMat(matEquinoxEquToAltAz*matJ2000ToEquinoxEqu*mat
GalacticToJ2000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       refr-&gt;setPostTransfoMat(matAltAzModelView);</td><td> </td><td class="right">       refr-&gt;setPostTransfoMat(matAltAzModelView);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return StelProjector::ModelViewTranformP(refr);</td><td> </td><td class="right">       return StelProjector::ModelViewTranformP(refr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">//! Get the modelview matrix for observer-centric Supergalactic equatorial </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">drawing</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">StelProjector::ModelViewTranformP StelCore::getSupergalacticModelViewTransf</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">orm(RefractionMode refMode) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (refMode==RefractionOff || skyDrawer==NULL || (refMode==Refractio</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">nAuto &amp;&amp; skyDrawer-&gt;getFlagHasAtmosphere()==false))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return StelProjector::ModelViewTranformP(new StelProjector::</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">Mat4dTransform(matAltAzModelView*matEquinoxEquToAltAz*matJ2000ToEquinoxEqu*</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">matSupergalacticToJ2000));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Refraction* refr = new Refraction(skyDrawer-&gt;getRefraction());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // The pretransform matrix will convert from input coordinates to Al</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tAz needed by the refraction function.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       refr-&gt;setPreTransfoMat(matEquinoxEquToAltAz*matJ2000ToEquinoxEqu*mat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">SupergalacticToJ2000);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       refr-&gt;setPostTransfoMat(matAltAzModelView);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return StelProjector::ModelViewTranformP(refr);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// GZ: One of the most important functions, totally void of doc. :-(</td><td> </td><td class="right">// GZ: One of the most important functions, totally void of doc. :-(</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// called in update() (for every frame)</td><td> </td><td class="right">// called in update() (for every frame)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::updateTransformMatrices()</td><td> </td><td class="right">void StelCore::updateTransformMatrices()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       matAltAzToEquinoxEqu = position-&gt;getRotAltAzToEquatorial(getJD(), ge
tJDE());</td><td> </td><td class="right">       matAltAzToEquinoxEqu = position-&gt;getRotAltAzToEquatorial(getJD(), ge
tJDE());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       matEquinoxEquToAltAz = matAltAzToEquinoxEqu.transpose();</td><td> </td><td class="right">       matEquinoxEquToAltAz = matAltAzToEquinoxEqu.transpose();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // multiply static J2000 earth axis tilt (eclipticalJ2000&lt;-&gt;equatori
alJ2000)</td><td> </td><td class="right">       // multiply static J2000 earth axis tilt (eclipticalJ2000&lt;-&gt;equatori
alJ2000)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // in effect, this matrix transforms from VSOP87 ecliptical J2000 to
 planet-based equatorial coordinates.</td><td> </td><td class="right">       // in effect, this matrix transforms from VSOP87 ecliptical J2000 to
 planet-based equatorial coordinates.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // For earth, matJ2000ToEquinoxEqu is the precession matrix.</td><td> </td><td class="right">       // For earth, matJ2000ToEquinoxEqu is the precession matrix.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1013</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1078</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       timeSpeed=ts;</td><td> </td><td class="right">       timeSpeed=ts;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       resetSync();</td><td> </td><td class="right">       resetSync();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       emit timeRateChanged(timeSpeed);</td><td> </td><td class="right">       emit timeRateChanged(timeSpeed);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double StelCore::getTimeRate() const</td><td> </td><td class="right">double StelCore::getTimeRate() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return timeSpeed;</td><td> </td><td class="right">       return timeSpeed;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::revertTimeDirection(void)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       setTimeRate(-1*getTimeRate());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::moveObserverToSelected()</td><td> </td><td class="right">void StelCore::moveObserverToSelected()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelObjectMgr* objmgr = GETSTELMODULE(StelObjectMgr);</td><td> </td><td class="right">       StelObjectMgr* objmgr = GETSTELMODULE(StelObjectMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_ASSERT(objmgr);</td><td> </td><td class="right">       Q_ASSERT(objmgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (objmgr-&gt;getWasSelected())</td><td> </td><td class="right">       if (objmgr-&gt;getWasSelected())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Planet* pl = dynamic_cast&lt;Planet*&gt;(objmgr-&gt;getSelectedObject
()[0].data());</td><td> </td><td class="right">               Planet* pl = dynamic_cast&lt;Planet*&gt;(objmgr-&gt;getSelectedObject
()[0].data());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (pl)</td><td> </td><td class="right">               if (pl)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // We need to move to the selected planet. Try to ge
nerate a location from the current one</td><td> </td><td class="right">                       // We need to move to the selected planet. Try to ge
nerate a location from the current one</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelLocation loc = getCurrentLocation();</td><td> </td><td class="right">                       StelLocation loc = getCurrentLocation();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (loc.planetName != pl-&gt;getEnglishName())</td><td> </td><td class="right">                       if (loc.planetName != pl-&gt;getEnglishName())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               loc.planetName = pl-&gt;getEnglishName();</td><td> </td><td class="right">                               loc.planetName = pl-&gt;getEnglishName();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               loc.name = "-";</td><td> </td><td class="right">                               loc.name = "-";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               loc.state = "";</td><td> </td><td class="right">                               loc.state = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               moveObserverTo(loc);</td><td> </td><td class="right">                               moveObserverTo(loc);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               LandscapeMgr* landscapeMgr = GETSTELMODULE(L
andscapeMgr);</td><td> </td><td class="right">                               LandscapeMgr* landscapeMgr = GETSTELMODULE(L
andscapeMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (pl-&gt;getEnglishName()<span class="delete"> == "Solar System Ob
server"</span>)</td><td> </td><td class="rblock">                               if (pl-&gt;getEnglishName()<span class="insert">.contains("Observer"
, Qt::CaseInsensitive)</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       landscapeMgr-&gt;setFlagAtmosphere(fals
e);</td><td> </td><td class="right">                                       landscapeMgr-&gt;setFlagAtmosphere(fals
e);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       landscapeMgr-&gt;setFlagFog(false);</td><td> </td><td class="right">                                       landscapeMgr-&gt;setFlagFog(false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       landscapeMgr-&gt;setFlagLandscape(false
);</td><td> </td><td class="right">                                       landscapeMgr-&gt;setFlagLandscape(false
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       landscapeMgr-&gt;setFlagAtmosphere(pl-&gt;
hasAtmosphere());</td><td> </td><td class="right">                                       landscapeMgr-&gt;setFlagAtmosphere(pl-&gt;
hasAtmosphere());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       landscapeMgr-&gt;setFlagFog(pl-&gt;hasAtmo
sphere());</td><td> </td><td class="right">                                       landscapeMgr-&gt;setFlagFog(pl-&gt;hasAtmo
sphere());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       landscapeMgr-&gt;setFlagLandscape(true)
;</td><td> </td><td class="right">                                       landscapeMgr-&gt;setFlagLandscape(true)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1099</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1169</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               position = newObs;</td><td> </td><td class="right">               position = newObs;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               newObs-&gt;update(0);</td><td> </td><td class="right">               newObs-&gt;update(0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete position;</td><td> </td><td class="right">               delete position;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               position = new StelObserver(target);</td><td> </td><td class="right">               position = new StelObserver(target);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">float StelCore::getUTCOffset(const double JD) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       int year, month, day, hour, minute, second;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelUtils::getDateFromJulianDay(JD, &amp;year, &amp;month, &amp;day);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelUtils::getTimeFromJulianDay(JD, &amp;hour, &amp;minute, &amp;second);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // as analogous to second statement in getJDFromDate, nkerr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if ( year &lt;= 0 )</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               year = year - 1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //getTime/DateFromJulianDay returns UTC time, not local time</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QDateTime universal(QDate(year, month, day), QTime(hour, minute, sec</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ond), Qt::UTC);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (!universal.isValid())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //qWarning() &lt;&lt; "JD " &lt;&lt; QString("%1").arg(JD) &lt;&lt; " out of b</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ounds of QT help with GMT shift, using current datetime";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // Assumes the GMT shift was always the same before year -47</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">10</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               universal = QDateTime(QDate(-4710, month, day), QTime(hour, </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">minute, second), Qt::UTC);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelLocation loc = getCurrentLocation();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString tzName = getCurrentTimeZone();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QTimeZone* tz = new QTimeZone(tzName.toUtf8());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       int shiftInSeconds = 0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (tzName=="system_default" || (loc.planetName=="Earth" &amp;&amp; !tz-&gt;isV</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">alid() &amp;&amp; !QString("LMST LTST").contains(tzName)))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QDateTime local = universal.toLocalTime();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //Both timezones should be interpreted as UTC because secsTo</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">() converts both</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //times to UTC if their zones have different daylight saving</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> time rules.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               local.setTimeSpec(Qt::UTC);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               shiftInSeconds = universal.secsTo(local);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // The first adoption of a standard time was on December 1, </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">1847 in Great Britain</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (tz-&gt;isValid() &amp;&amp; loc.planetName=="Earth" &amp;&amp; JD&gt;=StelCore</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">::TZ_ERA_BEGINNING)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (getUseDST())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               shiftInSeconds = tz-&gt;offsetFromUtc(universal</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               shiftInSeconds = tz-&gt;standardTimeOffset(univ</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ersal);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       shiftInSeconds = (loc.longitude/15.f)*3600.f; // Loc</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">al Mean Solar Time</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (tzName=="LTST")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       shiftInSeconds += getSolutionEquationOfTime(JD)*60;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float shiftInHours = shiftInSeconds / 3600.0f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return shiftInHours;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QString StelCore::getCurrentTimeZone() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return currentTimeZone;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setCurrentTimeZone(const QString&amp; tz)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       currentTimeZone = tz;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">bool StelCore::getUseDST() const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return flagUseDST;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::setUseDST(const bool b)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       flagUseDST = b;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelApp::getInstance().getSettings()-&gt;setValue("localization/flag_ds</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">t", b);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">double StelCore::getSolutionEquationOfTime(const double JDE) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double tau = (JDE - 2451545.0)/365250.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double sunMeanLongitude = 280.4664567 + tau*(360007.6892779 + tau*(0</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.03032028 + tau*(1./49931. - tau*(1./15300. - tau/2000000.))));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // reduce the angle</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       sunMeanLongitude = std::fmod(sunMeanLongitude, 360.);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // force it to be the positive remainder, so that 0 &lt;= angle &lt; 360</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       sunMeanLongitude = std::fmod(sunMeanLongitude + 360., 360.);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Vec3d pos = GETSTELMODULE(StelObjectMgr)-&gt;searchByName("Sun")-&gt;getEq</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">uinoxEquatorialPos(this);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double ra, dec;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelUtils::rectToSphe(&amp;ra, &amp;dec, pos);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // covert radians to degrees and reduce the angle</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double alpha = std::fmod(ra*180./M_PI, 360.);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // force it to be the positive remainder, so that 0 &lt;= angle &lt; 360</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       alpha = std::fmod(alpha + 360., 360.);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double deltaPsi, deltaEps;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       getNutationAngles(JDE, &amp;deltaPsi, &amp;deltaEps); // these are radians!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       //double equation = 4*(sunMeanLongitude - 0.0057183 - alpha + get_nu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">tation_longitude(JDE)*cos(get_mean_ecliptical_obliquity(JDE)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double equation = 4*(sunMeanLongitude - 0.0057183 - alpha + deltaPsi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">*180./M_PI*cos(getPrecessionAngleVondrakEpsilon(JDE)));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // The equation of time is always smaller 20 minutes in absolute val</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ue</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (qAbs(equation)&gt;20)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               // If absolute value of the equation of time appears to be t</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">oo large, add 24 hours (1440 minutes) to or subtract it from our result</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (equation&gt;0.)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       equation -= 1440.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       equation += 1440.;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return equation;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set stellarium time to current real world time</td><td> </td><td class="right">//! Set stellarium time to current real world time</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setTimeNow()</td><td> </td><td class="right">void StelCore::setTimeNow()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setJD(StelUtils::getJDFromSystem());</td><td> </td><td class="right">       setJD(StelUtils::getJDFromSystem());</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// Force emit dateChanged</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       emit dateChanged();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setTodayTime(const QTime&amp; target)</td><td> </td><td class="right">void StelCore::setTodayTime(const QTime&amp; target)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QDateTime dt = QDateTime::currentDateTime();</td><td> </td><td class="right">       QDateTime dt = QDateTime::currentDateTime();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (target.isValid())</td><td> </td><td class="right">       if (target.isValid())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               dt.setTime(target);</td><td> </td><td class="right">               dt.setTime(target);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // don't forget to adjust for timezone / daylight savings.</td><td> </td><td class="right">               // don't forget to adjust for timezone / daylight savings.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               double JD = StelUtils::qDateTimeToJd(dt)-(<span class="delete">StelUtils::getGMTS
hiftFromQT(StelU</span>tils::getJDFromSystem()) * JD_HOUR);</td><td> </td><td class="rblock">               double JD = StelUtils::qDateTimeToJd(dt)-(<span class="insert">getUTCOffset(StelU
</span>tils::getJDFromSystem()) * JD_HOUR);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setJD(JD);</td><td> </td><td class="right">               setJD(JD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING - time passed to StelCore::setTodayTi
me is not valid. The system time will be used." &lt;&lt; target;</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING - time passed to StelCore::setTodayTi
me is not valid. The system time will be used." &lt;&lt; target;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               setTimeNow();</td><td> </td><td class="right">               setTimeNow();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Get whether the current stellarium time is the real world time</td><td> </td><td class="right">//! Get whether the current stellarium time is the real world time</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1151</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1334</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setInitTodayTime(const QTime&amp; time)</td><td> </td><td class="right">void StelCore::setInitTodayTime(const QTime&amp; time)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       initTodayTime=time;</td><td> </td><td class="right">       initTodayTime=time;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setPresetSkyTime(QDateTime dateTime)</td><td> </td><td class="right">void StelCore::setPresetSkyTime(QDateTime dateTime)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setPresetSkyTime(StelUtils::qDateTimeToJd(dateTime));</td><td> </td><td class="right">       setPresetSkyTime(StelUtils::qDateTimeToJd(dateTime));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::addMinute()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       addSolarDays(JD_MINUTE);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addHour()</td><td> </td><td class="right">void StelCore::addHour()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(JD_HOUR);</td><td> </td><td class="right">       addSolarDays(JD_HOUR);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addDay()</td><td> </td><td class="right">void StelCore::addDay()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(1.0);</td><td> </td><td class="right">       addSolarDays(1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1175</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1363</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addSiderealDay()</td><td> </td><td class="right">void StelCore::addSiderealDay()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSiderealDays(1.0);</td><td> </td><td class="right">       addSiderealDays(1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addSiderealYear()</td><td> </td><td class="right">void StelCore::addSiderealYear()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double days = 365.256363004;</td><td> </td><td class="right">       double days = 365.256363004;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td> </td><td class="right">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">(home-&gt;getEnglishName() != "Solar System Observer") &amp;&amp; (home-&gt;ge
</span>tSiderealPeriod()&gt;0))</td><td> </td><td class="rblock">       if (<span class="insert">!home-&gt;getEnglishName().contains("Observer", Qt::CaseInsensitive
) &amp;&amp; (home-&gt;ge</span>tSiderealPeriod()&gt;0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               days = home-&gt;getSiderealPeriod();</td><td> </td><td class="right">               days = home-&gt;getSiderealPeriod();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(days);</td><td> </td><td class="right">       addSolarDays(days);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addSiderealYears(float n)</td><td> </td><td class="right">void StelCore::addSiderealYears(float n)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double days = 365.256363004;</td><td> </td><td class="right">       double days = 365.256363004;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td> </td><td class="right">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">(home-&gt;getEnglishName() != "Solar System Observer") &amp;&amp; (home-&gt;ge
</span>tSiderealPeriod()&gt;0))</td><td> </td><td class="rblock">       if (<span class="insert">!home-&gt;getEnglishName().contains("Observer", Qt::CaseInsensitive
) &amp;&amp; (home-&gt;ge</span>tSiderealPeriod()&gt;0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               days = home-&gt;getSiderealPeriod();</td><td> </td><td class="right">               days = home-&gt;getSiderealPeriod();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(days*n);</td><td> </td><td class="right">       addSolarDays(days*n);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addSynodicMonth()</td><td> </td><td class="right">void StelCore::addSynodicMonth()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(29.530588853);</td><td> </td><td class="right">       addSolarDays(29.530588853);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l16" /><small>skipping to change at</small><em> line 1258</em></th><th> </th><th><a name="part-r16" /><small>skipping to change at</small><em> line 1446</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addGaussianYear()</td><td> </td><td class="right">void StelCore::addGaussianYear()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(365.2568983);</td><td> </td><td class="right">       addSolarDays(365.2568983);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addJulianYears(float n)</td><td> </td><td class="right">void StelCore::addJulianYears(float n)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(365.25*n);</td><td> </td><td class="right">       addSolarDays(365.25*n);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">void StelCore::subtractMinute()</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       addSolarDays(-JD_MINUTE);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractHour()</td><td> </td><td class="right">void StelCore::subtractHour()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(-JD_HOUR);</td><td> </td><td class="right">       addSolarDays(-JD_HOUR);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractDay()</td><td> </td><td class="right">void StelCore::subtractDay()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(-1.0);</td><td> </td><td class="right">       addSolarDays(-1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l17" /><small>skipping to change at</small><em> line 1282</em></th><th> </th><th><a name="part-r17" /><small>skipping to change at</small><em> line 1475</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractSiderealDay()</td><td> </td><td class="right">void StelCore::subtractSiderealDay()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSiderealDays(-1.0);</td><td> </td><td class="right">       addSiderealDays(-1.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractSiderealYear()</td><td> </td><td class="right">void StelCore::subtractSiderealYear()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double days = 365.256363004;</td><td> </td><td class="right">       double days = 365.256363004;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td> </td><td class="right">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">(home-&gt;getEnglishName() != "Solar System Observer") &amp;&amp; (home-&gt;ge
</span>tSiderealPeriod()&gt;0))</td><td> </td><td class="rblock">       if (<span class="insert">!home-&gt;getEnglishName().contains("Observer", Qt::CaseInsensitive
) &amp;&amp; (home-&gt;ge</span>tSiderealPeriod()&gt;0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               days = home-&gt;getSiderealPeriod();</td><td> </td><td class="right">               days = home-&gt;getSiderealPeriod();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(-days);</td><td> </td><td class="right">       addSolarDays(-days);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractSiderealYears(float n)</td><td> </td><td class="right">void StelCore::subtractSiderealYears(float n)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double days = 365.256363004;</td><td> </td><td class="right">       double days = 365.256363004;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td> </td><td class="right">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">(home-&gt;getEnglishName() != "Solar System Observer") &amp;&amp; (home-&gt;ge
</span>tSiderealPeriod()&gt;0))</td><td> </td><td class="rblock">       if (<span class="insert">!home-&gt;getEnglishName().contains("Observer", Qt::CaseInsensitive
) &amp;&amp; (home-&gt;ge</span>tSiderealPeriod()&gt;0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               days = home-&gt;getSiderealPeriod();</td><td> </td><td class="right">               days = home-&gt;getSiderealPeriod();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(-days*n);</td><td> </td><td class="right">       addSolarDays(-days*n);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractSynodicMonth()</td><td> </td><td class="right">void StelCore::subtractSynodicMonth()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(-29.530588853);</td><td> </td><td class="right">       addSolarDays(-29.530588853);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l18" /><small>skipping to change at</small><em> line 1368</em></th><th> </th><th><a name="part-r18" /><small>skipping to change at</small><em> line 1561</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::subtractJulianYears(float n)</td><td> </td><td class="right">void StelCore::subtractJulianYears(float n)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       addSolarDays(-365.25*n);</td><td> </td><td class="right">       addSolarDays(-365.25*n);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addSolarDays(double d)</td><td> </td><td class="right">void StelCore::addSolarDays(double d)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td> </td><td class="right">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">home-&gt;getEnglishName() != "Solar System Observer"</span>)</td><td> </td><td class="rblock">       if (<span class="insert">!home-&gt;getEnglishName().contains("Observer", Qt::CaseInsensitive
)</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               d *= home-&gt;getMeanSolarDay();</td><td> </td><td class="right">               d *= home-&gt;getMeanSolarDay();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setJD(getJD() + d);</td><td> </td><td class="right">       setJD(getJD() + d);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">if (qAbs(d)&gt;0.99) // WTF: qAbs(d)&gt;=1.0 not working here!</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit dateChanged();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::addSiderealDays(double d)</td><td> </td><td class="right">void StelCore::addSiderealDays(double d)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td> </td><td class="right">       const PlanetP&amp; home = position-&gt;getHomePlanet();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">home-&gt;getEnglishName() != "Solar System Observer"</span>)</td><td> </td><td class="rblock">       if (<span class="insert">!home-&gt;getEnglishName().contains("Observer", Qt::CaseInsensitive
)</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               d *= home-&gt;getSiderealDay();</td><td> </td><td class="right">               d *= home-&gt;getSiderealDay();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                                                           </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setJD(getJD() + d);</td><td> </td><td class="right">       setJD(getJD() + d);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Get the sidereal time shifted by the observer longitude</td><td> </td><td class="right">// Get the sidereal time shifted by the observer longitude</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double StelCore::getLocalSiderealTime() const</td><td> </td><td class="right">double StelCore::getLocalSiderealTime() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // On Earth, this requires UT deliberately with all its faults, on o
ther planets we use the more regular TT.</td><td> </td><td class="right">       // On Earth, this requires UT deliberately with all its faults, on o
ther planets we use the more regular TT.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return (position-&gt;getHomePlanet()-&gt;getSiderealTime(getJD(), getJDE()
)+position-&gt;getCurrentLocation().longitude)*M_PI/180.;</td><td> </td><td class="right">       return (position-&gt;getHomePlanet()-&gt;getSiderealTime(getJD(), getJDE()
)+position-&gt;getCurrentLocation().longitude)*M_PI/180.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l19" /><small>skipping to change at</small><em> line 1499</em></th><th> </th><th><a name="part-r19" /><small>skipping to change at</small><em> line 1696</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelObjectMgr* objmgr = GETSTELMODULE(StelObjectMgr);</td><td> </td><td class="right">               StelObjectMgr* objmgr = GETSTELMODULE(StelObjectMgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Q_ASSERT(objmgr);</td><td> </td><td class="right">               Q_ASSERT(objmgr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (objmgr-&gt;getWasSelected() &amp;&amp; objmgr-&gt;getSelectedObject()[
0].data()==position-&gt;getHomePlanet())</td><td> </td><td class="right">               if (objmgr-&gt;getWasSelected() &amp;&amp; objmgr-&gt;getSelectedObject()[
0].data()==position-&gt;getHomePlanet())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       objmgr-&gt;unSelect();</td><td> </td><td class="right">                       objmgr-&gt;unSelect();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               StelObserver* newObs = position-&gt;getNextObserver();</td><td> </td><td class="right">               StelObserver* newObs = position-&gt;getNextObserver();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete position;</td><td> </td><td class="right">               delete position;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               position = newObs;</td><td> </td><td class="right">               position = newObs;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">position-&gt;update(deltaTime);</span></td><td> </td><td class="rblock">       <span class="insert">if (position-&gt;update(deltaTime))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               emit(locationChanged(getCurrentLocation()));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Position of sun and all the satellites (ie planets)</td><td> </td><td class="right">       // Position of sun and all the satellites (ie planets)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // GZ maybe setting this static can speedup a bit?</td><td> </td><td class="right">       // GZ maybe setting this static can speedup a bit?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       static SolarSystem* solsystem = (SolarSystem*)StelApp::getInstance()
.getModuleMgr().getModule("SolarSystem");</td><td> </td><td class="right">       static SolarSystem* solsystem = (SolarSystem*)StelApp::getInstance()
.getModuleMgr().getModule("SolarSystem");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Likely the most important location where we need JDE:</td><td> </td><td class="right">       // Likely the most important location where we need JDE:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       solsystem-&gt;computePositions(getJDE(), position-&gt;getHomePlanet()-&gt;get
HeliocentricEclipticPos());</td><td> </td><td class="right">       solsystem-&gt;computePositions(getJDE(), position-&gt;getHomePlanet()-&gt;get
HeliocentricEclipticPos());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::resetSync()</td><td> </td><td class="right">void StelCore::resetSync()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l20" /><small>skipping to change at</small><em> line 1533</em></th><th> </th><th><a name="part-r20" /><small>skipping to change at</small><em> line 1731</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Vec3d&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Vec3d&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Vec3f&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Vec3f&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Vec4d&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Vec4d&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Vec4f&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Vec4f&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Vec4i&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Vec4i&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Mat4d&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Mat4d&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Mat4f&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Mat4f&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Mat3d&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Mat3d&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qRegisterMetaType&lt;Mat3f&gt;();</td><td> </td><td class="right">       qRegisterMetaType&lt;Mat3f&gt;();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    //for debugging QVariants with these types, it helps if we register the</td><td> </td><td class="rblock">       //for debugging QVariants with these types, it helps if we register </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> string converters</td><td> </td><td class="rblock">the string converters</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    QMetaType::registerConverter(&amp;Vec3d::toString);</td><td> </td><td class="rblock">       QMetaType::registerConverter(&amp;Vec3d::toString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    QMetaType::registerConverter(&amp;Vec3f::toString);</td><td> </td><td class="rblock">       QMetaType::registerConverter(&amp;Vec3f::toString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    QMetaType::registerConverter(&amp;Vec4d::toString);</td><td> </td><td class="rblock">       QMetaType::registerConverter(&amp;Vec4d::toString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    QMetaType::registerConverter(&amp;Vec4f::toString);</td><td> </td><td class="rblock">       QMetaType::registerConverter(&amp;Vec4f::toString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    QMetaType::registerConverter(&amp;Vec4i::toString);</td><td> </td><td class="rblock">       QMetaType::registerConverter(&amp;Vec4i::toString);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setStartupTimeMode(const QString&amp; s)</td><td> </td><td class="right">void StelCore::setStartupTimeMode(const QString&amp; s)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       startupTimeMode = s;</td><td> </td><td class="right">       startupTimeMode = s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// return precomputed DeltaT in seconds. Public.</td><td> </td><td class="right">// return precomputed DeltaT in seconds. Public.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double StelCore::getDeltaT() const</td><td> </td><td class="right">double StelCore::getDeltaT() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l21" /><small>skipping to change at</small><em> line 1732</em></th><th> </th><th><a name="part-r21" /><small>skipping to change at</small><em> line 1930</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ndot = getDeltaTCustomNDot(); // n.dot = custom valu
e "/cy/cy</td><td> </td><td class="right">                       ndot = getDeltaTCustomNDot(); // n.dot = custom valu
e "/cy/cy</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int year, month, day;</td><td> </td><td class="right">                       int year, month, day;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Vec3f coeff = getDeltaTCustomEquationCoefficients();</td><td> </td><td class="right">                       Vec3f coeff = getDeltaTCustomEquationCoefficients();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       StelUtils::getDateFromJulianDay(JD, &amp;year, &amp;month, &amp;
day);</td><td> </td><td class="right">                       StelUtils::getDateFromJulianDay(JD, &amp;year, &amp;month, &amp;
day);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double u = (StelUtils::getDecYear(year,month,day)-ge
tDeltaTCustomYear())/100;</td><td> </td><td class="right">                       double u = (StelUtils::getDecYear(year,month,day)-ge
tDeltaTCustomYear())/100;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       DeltaT = coeff[0] + u*(coeff[1] + u*coeff[2]);</td><td> </td><td class="right">                       DeltaT = coeff[0] + u*(coeff[1] + u*coeff[2]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!dontUseMoon)</td><td> </td><td class="right">       if (!dontUseMoon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               DeltaT += StelUtils::getMoonSecularAcceleration(JD, ndot);</td><td> </td><td class="rblock">               DeltaT += StelUtils::getMoonSecularAcceleration(JD, ndot<span class="insert">, (d
e430Active || de431Active) &amp;&amp; true</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return DeltaT;</td><td> </td><td class="right">       return DeltaT;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! Set the current algorithm for time correction to use</td><td> </td><td class="right">//! Set the current algorithm for time correction to use</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void StelCore::setCurrentDeltaTAlgorithmKey(QString key)</td><td> </td><td class="right">void StelCore::setCurrentDeltaTAlgorithmKey(QString key)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("DeltaTAlgorithm"));</td><td> </td><td class="right">       const QMetaEnum&amp; en = metaObject()-&gt;enumerator(metaObject()-&gt;indexOf
Enumerator("DeltaTAlgorithm"));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       DeltaTAlgorithm algo = (DeltaTAlgorithm)en.keyToValue(key.toLatin1()
.data());</td><td> </td><td class="right">       DeltaTAlgorithm algo = (DeltaTAlgorithm)en.keyToValue(key.toLatin1()
.data());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (algo&lt;0)</td><td> </td><td class="right">       if (algo&lt;0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l22" /><small>skipping to change at</small><em> line 2113</em></th><th> </th><th><a name="part-r22" /><small>skipping to change at</small><em> line 2311</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               de431FilePath = StelFileMgr::findFile(de431ConfigPath, StelF
ileMgr::File);</td><td> </td><td class="right">               de431FilePath = StelFileMgr::findFile(de431ConfigPath, StelF
ileMgr::File);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       de431Available=!de431FilePath.isEmpty();</td><td> </td><td class="right">       de431Available=!de431FilePath.isEmpty();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(de431Available)</td><td> </td><td class="right">       if(de431Available)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "DE431 at: " &lt;&lt; de431FilePath;</td><td> </td><td class="right">               qDebug() &lt;&lt; "DE431 at: " &lt;&lt; de431FilePath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               EphemWrapper::init_de431(de431FilePath.toStdString().c_str()
);</td><td> </td><td class="right">               EphemWrapper::init_de431(de431FilePath.toStdString().c_str()
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       setDe431Active(de431Available &amp;&amp; conf-&gt;value("astro/flag_use_de431",
 false).toBool());</td><td> </td><td class="right">       setDe431Active(de431Available &amp;&amp; conf-&gt;value("astro/flag_use_de431",
 false).toBool());</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Methods for finding constellation from J2000 position.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">typedef struct iau_constline{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float RAlow;  // low value of 1875.0 right ascension segment, HH.ddd</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">d</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float RAhigh; // high value of 1875.0 right ascension segment, HH.dd</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">dd</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float decLow; // declination 1875.0 of southern border, DD.dddd</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       QString constellation; // 3-letter code of constellation</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">} iau_constelspan;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">static QVector&lt;iau_constelspan&gt; iau_constlineVec;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">static bool iau_constlineVecInitialized=false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// File iau_constellations_spans.dat is file data.dat from ADC catalog VI/4</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">QString StelCore::getIAUConstellation(const Vec3d positionJ2000) const</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // Precess positionJ2000 to 1875.0</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Vec3d pos1875=j2000ToJ1875(positionJ2000);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float RA1875;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       float dec1875;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       StelUtils::rectToSphe(&amp;RA1875, &amp;dec1875, pos1875);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       RA1875 *= 12./M_PI; // hours</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (RA1875 &lt;0.f) RA1875+=24.f;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       dec1875 *= 180./M_PI; // degrees</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Q_ASSERT(RA1875&gt;=0.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Q_ASSERT(RA1875&lt;=24.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Q_ASSERT(dec1875&lt;=90.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Q_ASSERT(dec1875&gt;=-90.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // read file into structure.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (!iau_constlineVecInitialized)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //struct iau_constline line;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QFile file(StelFileMgr::findFile("data/constellations_spans.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">dat"));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (!file.open(QIODevice::ReadOnly | QIODevice::Text))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       qWarning() &lt;&lt; "IAU constellation line data file data</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">/constellations_spans.dat not found.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return "err";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               iau_constelspan span;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QRegExp emptyLine("^\\s*$");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               QTextStream in(&amp;file);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               while (!in.atEnd())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       // Build list of entries. The checks can certainly b</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ecome more robust. Actually the file must have 4-part lines.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QString line = in.readLine();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (line.length()==0) continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (emptyLine.exactMatch((line))) continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (line.at(0)=='#') continue; // skip comment lines</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       //QStringList list = line.split(QRegExp("\\b\\s+\\b"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       QStringList list = line.trimmed().split(QRegExp("\\s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">+"));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (list.count() != 4)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               qWarning() &lt;&lt; "IAU constellation file conste</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">llations_spans.dat has bad line:" &lt;&lt; line &lt;&lt; "with" &lt;&lt; list.count() &lt;&lt; "ele</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ments";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       //qDebug() &lt;&lt; "Creating span for decl=" &lt;&lt; list.at(2</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">) &lt;&lt; " from RA=" &lt;&lt; list.at(0) &lt;&lt; "to" &lt;&lt; list.at(1) &lt;&lt; ": " &lt;&lt; list.at(3);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       span.RAlow=atof(list.at(0).toLatin1());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       span.RAhigh=atof(list.at(1).toLatin1());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       span.decLow=atof(list.at(2).toLatin1());</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       span.constellation=list.at(3);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       iau_constlineVec.append(span);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               file.close();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               iau_constlineVecInitialized=true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // iterate through vector, find entry where declination is lower.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       int entry=0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       while (iau_constlineVec.at(entry).decLow &gt; dec1875)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               entry++;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       while (entry&lt;iau_constlineVec.size()){</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               while (iau_constlineVec.at(entry).RAhigh &lt;= RA1875)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       entry++;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               while (iau_constlineVec.at(entry).RAlow &gt;= RA1875)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       entry++;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (iau_constlineVec.at(entry).RAhigh &gt; RA1875)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       return iau_constlineVec.at(entry).constellation;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       entry++;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       qDebug() &lt;&lt; "getIAUconstellation error: Cannot determine, algorithm </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">failed.";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return "(?)";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 36 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>28 lines changed or deleted</i></th><th><i> </i></th><th><i>269 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
