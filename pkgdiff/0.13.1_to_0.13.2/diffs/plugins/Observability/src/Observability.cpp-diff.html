<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-45-generic #74-Ubuntu SMP Tue Jan 13 19:36:28 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: Observability.cpp - Observability.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;Observability.cpp&nbsp;</th><th> </th><th>&nbsp;Observability.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 195</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 195</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgS            = q_("s");</td><td> </td><td class="right">       msgS            = q_("s");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgSetsAt       = q_("Sets at %1 (in %2)");</td><td> </td><td class="right">       msgSetsAt       = q_("Sets at %1 (in %2)");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgRoseAt       = q_("Rose at %1 (%2 ago)");</td><td> </td><td class="right">       msgRoseAt       = q_("Rose at %1 (%2 ago)");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgSetAt        = q_("Set at %1 (%2 ago)");</td><td> </td><td class="right">       msgSetAt        = q_("Set at %1 (%2 ago)");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgRisesAt      = q_("Rises at %1 (in %2)");</td><td> </td><td class="right">       msgRisesAt      = q_("Rises at %1 (in %2)");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgCircumpolar  = q_("Circumpolar.");</td><td> </td><td class="right">       msgCircumpolar  = q_("Circumpolar.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgNoRise       = q_("No rise.");</td><td> </td><td class="right">       msgNoRise       = q_("No rise.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgCulminatesAt = q_("Culminates at %1 (in %2) at %3 deg.");</td><td> </td><td class="right">       msgCulminatesAt = q_("Culminates at %1 (in %2) at %3 deg.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgCulminatedAt = q_("Culminated at %1 (%2 ago) at %3 deg.");</td><td> </td><td class="right">       msgCulminatedAt = q_("Culminated at %1 (%2 ago) at %3 deg.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgSrcNotObs    = q_("Source is not observable.");</td><td> </td><td class="right">       msgSrcNotObs    = q_("Source is not observable.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       msgNoACRise     = q_("No <span class="delete">acronychal nor c</span>osmical rise/set.");</td><td> </td><td class="rblock">       msgNoACRise     = q_("No <span class="insert">Acronychal nor C</span>osmical rise/set.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgGreatElong   = q_("Greatest elongation: %1 (at %2 deg.)");</td><td> </td><td class="right">       msgGreatElong   = q_("Greatest elongation: %1 (at %2 deg.)");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgLargSSep     = q_("Largest Sun separation: %1 (at %2 deg.)");</td><td> </td><td class="right">       msgLargSSep     = q_("Largest Sun separation: %1 (at %2 deg.)");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgNone         = q_("None");</td><td> </td><td class="right">       msgNone         = q_("None");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TRANSLATORS: The space at the end is significant - another senten
ce may follow.</td><td> </td><td class="right">       // TRANSLATORS: The space at the end is significant - another senten
ce may follow.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       msgAcroRise     = <span class="delete">q_("Acronychal</span> rise/set: %1/%2. ");</td><td> </td><td class="rblock">       msgAcroRise     = <span class="insert">q_("Acronycal</span> rise/set: %1/%2. <span class="insert">");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       msgHeliRise     = q_("Heliacal rise/set: %1/%2. ");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       msgNoHeliRise   = q_("No Heliacal rise/set.</span> ");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TRANSLATORS: The space at the end is significant - another senten
ce may follow.</td><td> </td><td class="right">       // TRANSLATORS: The space at the end is significant - another senten
ce may follow.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       msgNoAcroRise   = q_("No <span class="delete">acronych</span>al rise/set. ");</td><td> </td><td class="rblock">       msgNoAcroRise   = q_("No <span class="insert">Acronyc</span>al rise/set. ");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgCosmRise     = q_("Cosmical rise/set: %1/%2.");</td><td> </td><td class="right">       msgCosmRise     = q_("Cosmical rise/set: %1/%2.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       msgNoCosmRise   = q_("No <span class="delete">c</span>osmical rise/set.");</td><td> </td><td class="rblock">       msgNoCosmRise   = q_("No <span class="insert">C</span>osmical rise/set.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgWholeYear    = q_("Observable during the whole year.");</td><td> </td><td class="right">       msgWholeYear    = q_("Observable during the whole year.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgNotObs       = q_("Not observable at dark night.");</td><td> </td><td class="right">       msgNotObs       = q_("Not observable at dark night.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgAboveHoriz   = q_("Nights above horizon: %1");</td><td> </td><td class="right">       msgAboveHoriz   = q_("Nights above horizon: %1");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgToday        = q_("TODAY:");</td><td> </td><td class="right">       msgToday        = q_("TODAY:");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgThisYear     = q_("THIS YEAR:");</td><td> </td><td class="right">       msgThisYear     = q_("THIS YEAR:");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // TRANSLATORS: The space at the end is significant - another senten
ce may follow.</td><td> </td><td class="right">       // TRANSLATORS: The space at the end is significant - another senten
ce may follow.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgPrevFullMoon = q_("Previous Full Moon: %1 %2 at %3:%4. ");</td><td> </td><td class="right">       msgPrevFullMoon = q_("Previous Full Moon: %1 %2 at %3:%4. ");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       msgNextFullMoon = q_("Next Full Moon: %1 %2 at %3:%4. ");</td><td> </td><td class="right">       msgNextFullMoon = q_("Next Full Moon: %1 %2 at %3:%4. ");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 338</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 340</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Add refraction, if necessary:</td><td> </td><td class="right">// Add refraction, if necessary:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d TempRefr;</td><td> </td><td class="right">       Vec3d TempRefr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TempRefr[0] = std::cos(horizonAltitude);</td><td> </td><td class="right">       TempRefr[0] = std::cos(horizonAltitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TempRefr[1] = 0.0;</td><td> </td><td class="right">       TempRefr[1] = 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TempRefr[2] = std::sin(horizonAltitude);</td><td> </td><td class="right">       TempRefr[2] = std::sin(horizonAltitude);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Vec3d CorrRefr = core-&gt;altAzToEquinoxEqu(TempRefr,StelCore::Refracti
onAuto);</td><td> </td><td class="right">       Vec3d CorrRefr = core-&gt;altAzToEquinoxEqu(TempRefr,StelCore::Refracti
onAuto);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TempRefr = core-&gt;equinoxEquToAltAz(CorrRefr,StelCore::RefractionOff)
;</td><td> </td><td class="right">       TempRefr = core-&gt;equinoxEquToAltAz(CorrRefr,StelCore::RefractionOff)
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double RefracAlt = std::asin(TempRefr[2]);</td><td> </td><td class="right">       double RefracAlt = std::asin(TempRefr[2]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // If the diference is larger than 1 arcminute...</td><td> </td><td class="right">       // If the diference is larger than 1 arcminute...</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">std::a</span>bs(refractedHorizonAlt-RefracAlt)&gt;2.91e-4)</td><td> </td><td class="rblock">       if (<span class="insert">qA</span>bs(refractedHorizonAlt-RefracAlt)&gt;2.91e-4)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //... configuration for refraction changed notably.</td><td> </td><td class="right">               //... configuration for refraction changed notably.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               refractedHorizonAlt = RefracAlt;</td><td> </td><td class="right">               refractedHorizonAlt = RefracAlt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               configChanged = true;</td><td> </td><td class="right">               configChanged = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               souChanged = true;</td><td> </td><td class="right">               souChanged = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// If we have changed latitude (or year), we update the vector of Sun's hou
r</td><td> </td><td class="right">// If we have changed latitude (or year), we update the vector of Sun's hou
r</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// angles at twilight, and re-compute Sun/Moon ephemeris (if selected):</td><td> </td><td class="right">// angles at twilight, and re-compute Sun/Moon ephemeris (if selected):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (locChanged || yearChanged || configChanged)</td><td> </td><td class="right">       if (locChanged || yearChanged || configChanged)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 482</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 484</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Today's ephemeris (rise, set, and transit times)</td><td> </td><td class="right">               // Today's ephemeris (rise, set, and transit times)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!isStar)</td><td> </td><td class="right">               if (!isStar)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       int type = (isSun) ? 1:0;</td><td> </td><td class="right">                       int type = (isSun) ? 1:0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       type += (isMoon) ? 2:0;</td><td> </td><td class="right">                       type += (isMoon) ? 2:0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       type += (!isSun &amp;&amp; !isMoon) ? 3:0;</td><td> </td><td class="right">                       type += (!isSun &amp;&amp; !isMoon) ? 3:0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Returns false if the calculation fails...</td><td> </td><td class="right">                       // Returns false if the calculation fails...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       solvedMoon = calculateSolarSystemEvents(core, type);</td><td> </td><td class="right">                       solvedMoon = calculateSolarSystemEvents(core, type);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       currH = <span class="delete">std::a</span>bs(24.*(MoonCulm-myJD)/TFrac);</td><td> </td><td class="rblock">                       currH = <span class="insert">qA</span>bs(24.*(MoonCulm-myJD)/TFrac);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       transit = MoonCulm-myJD&lt;0.0;</td><td> </td><td class="right">                       transit = MoonCulm-myJD&lt;0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (solvedMoon)</td><td> </td><td class="right">                       if (solvedMoon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {  // If failed, Set and Rise will be dummy.</td><td> </td><td class="right">                       {  // If failed, Set and Rise will be dummy.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               settingTime = <span class="delete">std::abs(24.*(MoonSet-myJD)/TF</span></td><td> </td><td class="rblock">                               settingTime = <span class="insert">qAbs(24.*(MoonSet-myJD)/TFrac)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rac);</span></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               risingTime = <span class="delete">std::abs(24.*(MoonRise-myJD)/TF</span></td><td> </td><td class="rblock">                               risingTime = <span class="insert">qAbs(24.*(MoonRise-myJD)/TFrac)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rac);</span></td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else if (horizH&gt;0.0)</td><td> </td><td class="right">               else if (horizH&gt;0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               { // The source is not circumpolar and can be seen from this
 latitude.</td><td> </td><td class="right">               { // The source is not circumpolar and can be seen from this
 latitude.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if ( LocPos[1]&gt;0.0 ) // The source is at the eastern
 side...</td><td> </td><td class="right">                       if ( LocPos[1]&gt;0.0 ) // The source is at the eastern
 side...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if ( currH&gt;horizH ) // ... and below the hor
izon.</td><td> </td><td class="right">                               if ( currH&gt;horizH ) // ... and below the hor
izon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       settingTime = 24.-currH-horizH;</td><td> </td><td class="right">                                       settingTime = 24.-currH-horizH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 578</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 580</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else // The source is either circumpolar or never rises:</td><td> </td><td class="right">               else // The source is either circumpolar or never rises:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       (alti&gt;refractedHorizonAlt)? RS1 = msgCircumpolar: RS
1 = msgNoRise;</td><td> </td><td class="right">                       (alti&gt;refractedHorizonAlt)? RS1 = msgCircumpolar: RS
1 = msgNoRise;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       RS2 = "";</td><td> </td><td class="right">                       RS2 = "";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //      Culmination:</td><td> </td><td class="right">               //      Culmination:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (isStar)</td><td> </td><td class="right">               if (isStar)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       culmAlt = <span class="delete">std::abs(mylat-selDec); // 90.-altitude at
 tra</span>nsit.</td><td> </td><td class="rblock">                       culmAlt = <span class="insert">qAbs(mylat-selDec); // 90.-altitude at tra
</span>nsit.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       transit = LocPos[1]&lt;0.0;</td><td> </td><td class="right">                       transit = LocPos[1]&lt;0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (culmAlt &lt; (halfpi - refractedHorizonAlt)) // Source can 
be observed.</td><td> </td><td class="right">               if (culmAlt &lt; (halfpi - refractedHorizonAlt)) // Source can 
be observed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double altiAtCulmi = Rad2Deg*(halfpi-culmAlt-refract
edHorizonAlt);</td><td> </td><td class="right">                       double altiAtCulmi = Rad2Deg*(halfpi-culmAlt-refract
edHorizonAlt);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       double2hms(TFrac*currH,dc,mc,sc);</td><td> </td><td class="right">                       double2hms(TFrac*currH,dc,mc,sc);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //String with the time span for culmination:</td><td> </td><td class="right">                       //String with the time span for culmination:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Cul = (dc==0)?"":QString("%1%2 ").arg(dc).arg(msgH);</td><td> </td><td class="right">                       Cul = (dc==0)?"":QString("%1%2 ").arg(dc).arg(msgH);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 653</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 655</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       lineBestNight.clear();</td><td> </td><td class="right">                       lineBestNight.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       lineObservableRange.clear();</td><td> </td><td class="right">                       lineObservableRange.clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Check if the target cannot be seen.</td><td> </td><td class="right">                       // Check if the target cannot be seen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (culmAlt &gt;= (halfpi - refractedHorizonAlt))</td><td> </td><td class="right">                       if (culmAlt &gt;= (halfpi - refractedHorizonAlt))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //ObsRange = q_("Source is not observable.")
;</td><td> </td><td class="right">                               //ObsRange = q_("Source is not observable.")
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //AcroCos = q_("No Acronychal nor Cosmical r
ise/set.");</td><td> </td><td class="right">                               //AcroCos = q_("No Acronychal nor Cosmical r
ise/set.");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               lineObservableRange = msgSrcNotObs;</td><td> </td><td class="right">                               lineObservableRange = msgSrcNotObs;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               lineAcroCos = msgNoACRise;</td><td> </td><td class="right">                               lineAcroCos = msgNoACRise;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               lineHeli = msgNoHeliRise;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       { // Source can be seen.</td><td> </td><td class="right">                       { // Source can be seen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////</td><td> </td><td class="right">///////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - Part 1. Determine the best observing night (i.e., opposition to the Su
n):</td><td> </td><td class="right">// - Part 1. Determine the best observing night (i.e., opposition to the Su
n):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (show_Best_Night)</td><td> </td><td class="right">                               if (show_Best_Night)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int selday = 0;</td><td> </td><td class="right">                                       int selday = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       double deltaPhs = -1.0; // Initial d
ummy value</td><td> </td><td class="right">                                       double deltaPhs = -1.0; // Initial d
ummy value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 694</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 697</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       lineBestNight = lineBestNight</td><td> </td><td class="right">                                       lineBestNight = lineBestNight</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       .arg(formatAsDate(se
lday))</td><td> </td><td class="right">                                                       .arg(formatAsDate(se
lday))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       .arg(deltaPhs*Rad2De
g, 0, 'f', 1);</td><td> </td><td class="right">                                                       .arg(deltaPhs*Rad2De
g, 0, 'f', 1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////</td><td> </td><td class="right">///////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - Part 2. Determine Acronychal and Cosmical rise and set:</td><td> </td><td class="right">// - Part 2. Determine Acronychal and Cosmical rise and set:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (show_AcroCos)</td><td> </td><td class="right">                               if (show_AcroCos)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       int acroRise, acroSet, cosRise, cosS</td><td> </td><td class="rblock">                                       int acroRise, acroSet, cosRise, cosS</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">et;</span></td><td> </td><td class="rblock"><span class="insert">et, heliRise, heliSet;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int result = calculateAcroCos(acroRi
se, acroSet,</td><td> </td><td class="right">                                       int result = calculateAcroCos(acroRi
se, acroSet,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                                     cosRis
e, cosSet);</td><td> </td><td class="right">                                                                     cosRis
e, cosSet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       <span class="insert">int resultHeli = calculateHeli(0,hel</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">iRise,heliSet);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       QString acroRiseStr, acroSetStr;</td><td> </td><td class="right">                                       QString acroRiseStr, acroSetStr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       QString cosRiseStr, cosSetStr;</td><td> </td><td class="right">                                       QString cosRiseStr, cosSetStr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       QString heliRiseStr, heliSetStr;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       // TODO: Possible error? Day 0 is 1 
Jan.</td><td> </td><td class="right">                                       // TODO: Possible error? Day 0 is 1 
Jan.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       acroRiseStr = (acroRise&gt;0)?formatAsD
ate(acroRise):msgNone;</td><td> </td><td class="right">                                       acroRiseStr = (acroRise&gt;0)?formatAsD
ate(acroRise):msgNone;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       acroSetStr = (acroSet&gt;0)?formatAsDat
e(acroSet):msgNone;</td><td> </td><td class="right">                                       acroSetStr = (acroSet&gt;0)?formatAsDat
e(acroSet):msgNone;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       cosRiseStr = (cosRise&gt;0)?formatAsDat
e(cosRise):msgNone;</td><td> </td><td class="right">                                       cosRiseStr = (cosRise&gt;0)?formatAsDat
e(cosRise):msgNone;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       cosSetStr = (cosSet&gt;0)?formatAsDate(
cosSet):msgNone;</td><td> </td><td class="right">                                       cosSetStr = (cosSet&gt;0)?formatAsDate(
cosSet):msgNone;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       <span class="insert">heliRiseStr = (heliRise&gt;0)?formatAsD</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ate(heliRise):msgNone;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       heliSetStr = (heliSet&gt;0)?formatAsDat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e(heliSet):msgNone;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (result==3 || result==1)</td><td> </td><td class="right">                                       if (result==3 || result==1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               lineAcroCos =  msgAcroRise</td><td> </td><td class="right">                                               lineAcroCos =  msgAcroRise</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                              .arg(acroRise
Str)</td><td> </td><td class="right">                                                              .arg(acroRise
Str)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                              .arg(acroSetS
tr);</td><td> </td><td class="right">                                                              .arg(acroSetS
tr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       else</td><td> </td><td class="right">                                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               lineAcroCos =  msgNoAcroRise
;</td><td> </td><td class="right">                                               lineAcroCos =  msgNoAcroRise
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if (result==3 || result==2)</td><td> </td><td class="right">                                       if (result==3 || result==2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               lineAcroCos += msgCosmRise</td><td> </td><td class="right">                                               lineAcroCos += msgCosmRise</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                              .arg(cosRiseS
tr)</td><td> </td><td class="right">                                                              .arg(cosRiseS
tr)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                              .arg(cosSetSt
r);</td><td> </td><td class="right">                                                              .arg(cosSetSt
r);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       else</td><td> </td><td class="right">                                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               lineAcroCos += msgNoCosmRise
;</td><td> </td><td class="right">                                               lineAcroCos += msgNoCosmRise
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       <span class="insert">if (resultHeli==1)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               lineHeli = msgHeliRise.arg(h</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">eliRiseStr).arg(heliSetStr);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       else</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               lineHeli = msgNoHeliRise;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////</td><td> </td><td class="right">////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// - Part 3. Determine range of good nights</td><td> </td><td class="right">// - Part 3. Determine range of good nights</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// (i.e., above horizon before/after twilight):</td><td> </td><td class="right">// (i.e., above horizon before/after twilight):</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (show_Good_Nights)</td><td> </td><td class="right">                               if (show_Good_Nights)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int selday = 0;</td><td> </td><td class="right">                                       int selday = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       int selday2 = 0;</td><td> </td><td class="right">                                       int selday2 = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       bool bestBegun = false; // Are we in
side a good time range?</td><td> </td><td class="right">                                       bool bestBegun = false; // Are we in
side a good time range?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       bool atLeastOne = false;</td><td> </td><td class="right">                                       bool atLeastOne = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       QString dateRange;</td><td> </td><td class="right">                                       QString dateRange;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       bool poleNight, twiGood;</td><td> </td><td class="right">                                       bool poleNight, twiGood;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       for (int i=0; i&lt;nDays; i++)</td><td> </td><td class="right">                                       for (int i=0; i&lt;nDays; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               poleNight = sunSidT[0][i]&lt;0.</td><td> </td><td class="rblock">                                               poleNight = sunSidT[0][i]&lt;0.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">0 &amp;&amp; <span class="delete">std::abs(sunDec[i]-mylat)&gt;=halfpi;</span> // Is it night during 24h?</td><td> </td><td class="rblock">0 &amp;&amp; <span class="insert">qAbs(sunDec[i]-mylat)&gt;=halfpi;</span> // Is it night during 24h?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               twiGood = (poleNight &amp;&amp; <span class="delete">std:</span></td><td> </td><td class="rblock">                                               twiGood = (poleNight &amp;&amp; <span class="insert">qAbs</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">:abs(objectDec[i]-mylat)&lt;halfpi)?true:CheckRise(i);</span></td><td> </td><td class="rblock"><span class="insert">(objectDec[i]-mylat)&lt;halfpi)?true:CheckRise(i);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               if (twiGood &amp;&amp; bestBegun == 
false)</td><td> </td><td class="right">                                               if (twiGood &amp;&amp; bestBegun == 
false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               {</td><td> </td><td class="right">                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       selday = i;</td><td> </td><td class="right">                                                       selday = i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       bestBegun = true;</td><td> </td><td class="right">                                                       bestBegun = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                       atLeastOne = true;</td><td> </td><td class="right">                                                       atLeastOne = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               };</td><td> </td><td class="right">                                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               if (!twiGood &amp;&amp; bestBegun ==
 true)</td><td> </td><td class="right">                                               if (!twiGood &amp;&amp; bestBegun ==
 true)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               {</td><td> </td><td class="right">                                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 827</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 842</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show_Good_Nights)</td><td> </td><td class="right">               if (show_Good_Nights)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yLine -= lineSpacing;</td><td> </td><td class="right">                       yLine -= lineSpacing;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xLine + fontSize, yLine, lineObserv
ableRange);</td><td> </td><td class="right">                       painter.drawText(xLine + fontSize, yLine, lineObserv
ableRange);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (show_AcroCos)</td><td> </td><td class="right">               if (show_AcroCos)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       yLine -= lineSpacing;</td><td> </td><td class="right">                       yLine -= lineSpacing;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       painter.drawText(xLine + fontSize, yLine, lineAcroCo
s);</td><td> </td><td class="right">                       painter.drawText(xLine + fontSize, yLine, lineAcroCo
s);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                       <span class="insert">yLine -= lineSpacing;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       painter.drawText(xLine + fontSize, yLine, lineHeli);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// END OF MAIN CODE</td><td> </td><td class="right">// END OF MAIN CODE</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////</td><td> </td><td class="right">///////////////////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//////////////////////////////</td><td> </td><td class="right">//////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// AUXILIARY FUNCTIONS</td><td> </td><td class="right">// AUXILIARY FUNCTIONS</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Returns the hour angle for a given altitude:</td><td> </td><td class="right">// Returns the hour angle for a given altitude:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Observability::calculateHourAngle(double latitude,</td><td> </td><td class="right">double Observability::calculateHourAngle(double latitude,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                         double elevation,</td><td> </td><td class="right">                                         double elevation,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                         double declination)</td><td> </td><td class="right">                                         double declination)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double denom = std::cos(latitude)*std::cos(declination);</td><td> </td><td class="right">       double denom = std::cos(latitude)*std::cos(declination);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double numer = (std::sin(elevation)-std::sin(latitude)*std::sin(decl
ination));</td><td> </td><td class="right">       double numer = (std::sin(elevation)-std::sin(latitude)*std::sin(decl
ination));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if ( <span class="delete">std::abs(numer) &gt; std::a</span>bs(denom) )</td><td> </td><td class="rblock">       if ( <span class="insert">qAbs(numer) &gt; qA</span>bs(denom) )</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return -0.5/86400.; // Source doesn't reach that altitude.</td><td> </td><td class="right">               return -0.5/86400.; // Source doesn't reach that altitude.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return Rad2Hr * std::acos(numer/denom);</td><td> </td><td class="right">               return Rad2Hr * std::acos(numer/denom);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 882</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 899</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return result;</td><td> </td><td class="right">       return result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Converts a float time/angle span (in hours/degrees) in the (integer) for
mat hh/dd,mm,ss:</td><td> </td><td class="right">// Converts a float time/angle span (in hours/degrees) in the (integer) for
mat hh/dd,mm,ss:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void Observability::double2hms(double hfloat, int &amp;h1, int &amp;h2, int &amp;h3)</td><td> </td><td class="right">void Observability::double2hms(double hfloat, int &amp;h1, int &amp;h2, int &amp;h3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double f1,f2,f3;</td><td> </td><td class="right">       double f1,f2,f3;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       hfloat = <span class="delete">std::a</span>bs(hfloat);</td><td> </td><td class="rblock">       hfloat = <span class="insert">qA</span>bs(hfloat);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double ffrac = std::modf(hfloat,&amp;f1);</td><td> </td><td class="right">       double ffrac = std::modf(hfloat,&amp;f1);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double ffrac2 = std::modf(60.*ffrac,&amp;f2);</td><td> </td><td class="right">       double ffrac2 = std::modf(60.*ffrac,&amp;f2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ffrac2 = std::modf(3600.*(ffrac-f2/60.),&amp;f3);</td><td> </td><td class="right">       ffrac2 = std::modf(3600.*(ffrac-f2/60.),&amp;f3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       h1 = (int)f1 ; h2 = (int)<span class="delete">std::abs(f2+0.0*ffrac2) ; h3 = (int)std::ab
</span>s(f3);</td><td> </td><td class="rblock">       h1 = (int)f1 ; h2 = (int)<span class="insert">qAbs(f2+0.0*ffrac2) ; h3 = (int)qAb</span>s(f3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Adds/subtracts 24hr to ensure a RA between 0 and 24hr:</td><td> </td><td class="right">// Adds/subtracts 24hr to ensure a RA between 0 and 24hr:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">double Observability::toUnsignedRA(double RA)</td><td> </td><td class="right">double Observability::toUnsignedRA(double RA)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double tempRA,tempmod;</td><td> </td><td class="right">       double tempRA,tempmod;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">//FIXME: tempmod is unused variable; need fix</span></td><td> </td><td class="rblock">       if (RA&lt;0.0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (RA&lt;0.0) <span class="delete">{tempmod</span> = std::modf(-RA/24.,&amp;tempRA); RA += <span class="delete">24.*(tempRA</span></td><td> </td><td class="rblock">       <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">+1.0)+0.0*tempmod;};</span></td><td> </td><td class="rblock"><span class="insert">               tempmod</span> = std::modf(-RA/24.,&amp;tempRA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               RA += <span class="insert">24.*(tempRA+1.0)+0.0*tempmod;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       };</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double auxRA = 24.*std::modf(RA/24.,&amp;tempRA);</td><td> </td><td class="right">       double auxRA = 24.*std::modf(RA/24.,&amp;tempRA);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       auxRA += (auxRA&lt;0.0)?24.0:((auxRA&gt;24.0)?-24.0:0.0);</td><td> </td><td class="right">       auxRA += (auxRA&lt;0.0)?24.0:((auxRA&gt;24.0)?-24.0:0.0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return auxRA;</td><td> </td><td class="right">       return auxRA;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">////////////////////////////////////</td><td> </td><td class="right">////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">QString Observability::formatAsDate(int dayNumber)</td><td> </td><td class="right">QString Observability::formatAsDate(int dayNumber)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int day, month, year;</td><td> </td><td class="right">       int day, month, year;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelUtils::getDateFromJulianDay(yearJD[dayNumber], &amp;year, &amp;month, &amp;d
ay);</td><td> </td><td class="right">       StelUtils::getDateFromJulianDay(yearJD[dayNumber], &amp;year, &amp;month, &amp;d
ay);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 1059</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 1079</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int nBin = 1000;</td><td> </td><td class="right">       int nBin = 1000;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double auxSid1 = sunSidT[0][day];</td><td> </td><td class="right">       double auxSid1 = sunSidT[0][day];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       auxSid1 += (sunSidT[0][day] &lt; sunSidT[1][day]) ? 24.0 : 0.0;</td><td> </td><td class="right">       auxSid1 += (sunSidT[0][day] &lt; sunSidT[1][day]) ? 24.0 : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double deltaT = (auxSid1-sunSidT[1][day]) / ((double)nBin);</td><td> </td><td class="right">       double deltaT = (auxSid1-sunSidT[1][day]) / ((double)nBin);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double hour;</td><td> </td><td class="right">       double hour;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for (int j=0; j&lt;nBin; j++)</td><td> </td><td class="right">       for (int j=0; j&lt;nBin; j++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               hour = toUnsignedRA(sunSidT[1][day]+deltaT*(double)j - objec
tRA[day]);</td><td> </td><td class="right">               hour = toUnsignedRA(sunSidT[1][day]+deltaT*(double)j - objec
tRA[day]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               hour -= (hour&gt;12.) ? 24.0 : 0.0;</td><td> </td><td class="right">               hour -= (hour&gt;12.) ? 24.0 : 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (<span class="delete">std::abs(hour)&lt;objectH0[day] || (objectH0[day] &lt; 0.0 &amp;&amp; 
alti</span>&gt;0.0))</td><td> </td><td class="rblock">               if (<span class="insert">qAbs(hour)&lt;objectH0[day] || (objectH0[day] &lt; 0.0 &amp;&amp; alti
</span>&gt;0.0))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return true;</td><td> </td><td class="right">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////</td><td> </td><td class="right">///////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////</td><td> </td><td class="right">///////////////////////////////////////////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Finds the dates of Acronichal (Rise, Set) and Cosmical (Rise2, Set2) dat
es.</td><td> </td><td class="right">// Finds the dates of Acronichal (Rise, Set) and Cosmical (Rise2, Set2) dat
es.</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">int Observability::calculateHeli(int imethod, int &amp;heliRise, int &amp;heliSet)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Q_UNUSED(imethod)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       heliRise = -1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       heliSet = -1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double bestDiffHeliRise = 12.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double bestDiffHeliSet = 12.0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       double hourDiffHeliRise, hourDiffHeliSet;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       bool success = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       for (int i=0; i&lt;366; i++)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               if (objectH0[i]&gt;0.0 &amp;&amp; sunSidT[0][i]&gt;0.0 &amp;&amp; sunSidT[1][i]&gt;0.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       success = true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       hourDiffHeliRise = toUnsignedRA(objectRA[i] - object</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">H0[i]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //      hourDiffCosRise = hourDiffAcroRise-sunSidT[0][i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       hourDiffHeliRise -= sunSidT[0][i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       hourDiffHeliSet = toUnsignedRA(objectRA[i] + objectH</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">0[i]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               //      hourCosDiffSet = hourDiffAcroSet - sunSidT[1][i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       hourDiffHeliSet -= sunSidT[1][i];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       // Heliacal rise/set:</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (qAbs(hourDiffHeliRise) &lt; bestDiffHeliRise)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               bestDiffHeliRise = qAbs(hourDiffHeliRise);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               heliRise = i;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       };</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       if (qAbs(hourDiffHeliSet) &lt; bestDiffHeliSet)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               bestDiffHeliSet = qAbs(hourDiffHeliSet);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                               heliSet = i;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       };</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               };</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       };</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       heliRise *= (bestDiffHeliRise &gt; 0.083)?-1:1; // Check that differenc</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">e is lower than 5 minutes.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       heliSet *= (bestDiffHeliSet &gt; 0.083)?-1:1; // Check that difference </span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">is lower than 5 minutes.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       int result = (heliRise&gt;0 || heliSet&gt;0) ? 1 : 0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       return (success) ? result : 0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">};</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">///////////////////////////////////////////</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">// Finds the dates of Acronichal (Rise, Set) and Cosmical (Rise2, Set2) dat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">es.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int Observability::calculateAcroCos(int &amp;acroRise, int &amp;acroSet,</td><td> </td><td class="right">int Observability::calculateAcroCos(int &amp;acroRise, int &amp;acroSet,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                    int &amp;cosRise, int &amp;cosSet)</td><td> </td><td class="right">                                    int &amp;cosRise, int &amp;cosSet)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       acroRise = -1;</td><td> </td><td class="right">       acroRise = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       acroSet = -1;</td><td> </td><td class="right">       acroSet = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       cosRise = -1;</td><td> </td><td class="right">       cosRise = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       cosSet = -1;</td><td> </td><td class="right">       cosSet = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double bestDiffAcroRise = 12.0;</td><td> </td><td class="right">       double bestDiffAcroRise = 12.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double bestDiffAcroSet = 12.0;</td><td> </td><td class="right">       double bestDiffAcroSet = 12.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1099</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1169</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       success = true;</td><td> </td><td class="right">                       success = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hourDiffAcroRise = toUnsignedRA(objectRA[i] - object
H0[i]);</td><td> </td><td class="right">                       hourDiffAcroRise = toUnsignedRA(objectRA[i] - object
H0[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hourDiffCosRise = hourDiffAcroRise-sunSidT[3][i];</td><td> </td><td class="right">                       hourDiffCosRise = hourDiffAcroRise-sunSidT[3][i];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hourDiffAcroRise -= sunSidT[2][i];</td><td> </td><td class="right">                       hourDiffAcroRise -= sunSidT[2][i];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hourDiffAcroSet = toUnsignedRA(objectRA[i] + objectH
0[i]);</td><td> </td><td class="right">                       hourDiffAcroSet = toUnsignedRA(objectRA[i] + objectH
0[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hourCosDiffSet = hourDiffAcroSet - sunSidT[2][i];</td><td> </td><td class="right">                       hourCosDiffSet = hourDiffAcroSet - sunSidT[2][i];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       hourDiffAcroSet -= sunSidT[3][i];</td><td> </td><td class="right">                       hourDiffAcroSet -= sunSidT[3][i];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Acronychal rise/set:</td><td> </td><td class="right">                       // Acronychal rise/set:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (<span class="delete">std::a</span>bs(hourDiffAcroRise) &lt; bestDiffAcroRise)</td><td> </td><td class="rblock">                       if (<span class="insert">qA</span>bs(hourDiffAcroRise) &lt; bestDiffAcroRise)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               bestDiffAcroRise = <span class="delete">std::abs(hourDiffAcroRise
</span>);</td><td> </td><td class="rblock">                               bestDiffAcroRise = <span class="insert">qAbs(hourDiffAcroRise</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               acroRise = i;</td><td> </td><td class="right">                               acroRise = i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (<span class="delete">std::a</span>bs(hourDiffAcroSet) &lt; bestDiffAcroSet)</td><td> </td><td class="rblock">                       if (<span class="insert">qA</span>bs(hourDiffAcroSet) &lt; bestDiffAcroSet)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               bestDiffAcroSet = <span class="delete">std::a</span>bs(hourDiffAcroSet);</td><td> </td><td class="rblock">                               bestDiffAcroSet = <span class="insert">qA</span>bs(hourDiffAcroSet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               acroSet = i;</td><td> </td><td class="right">                               acroSet = i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Cosmical Rise/Set:</td><td> </td><td class="right">                       // Cosmical Rise/Set:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (<span class="delete">std::a</span>bs(hourDiffCosRise) &lt; bestDiffCosRise)</td><td> </td><td class="rblock">                       if (<span class="insert">qA</span>bs(hourDiffCosRise) &lt; bestDiffCosRise)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               bestDiffCosRise = <span class="delete">std::a</span>bs(hourDiffCosRise);</td><td> </td><td class="rblock">                               bestDiffCosRise = <span class="insert">qA</span>bs(hourDiffCosRise);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               cosRise = i;</td><td> </td><td class="right">                               cosRise = i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (<span class="delete">std::a</span>bs(hourCosDiffSet) &lt; bestDiffCosSet)</td><td> </td><td class="rblock">                       if (<span class="insert">qA</span>bs(hourCosDiffSet) &lt; bestDiffCosSet)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               bestDiffCosSet = <span class="delete">std::a</span>bs(hourCosDiffSet);</td><td> </td><td class="rblock">                               bestDiffCosSet = <span class="insert">qA</span>bs(hourCosDiffSet);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               cosSet = i;</td><td> </td><td class="right">                               cosSet = i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       };</td><td> </td><td class="right">       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       acroRise *= (bestDiffAcroRise &gt; 0.083)?-1:1; // Check that differenc
e is lower than 5 minutes.</td><td> </td><td class="right">       acroRise *= (bestDiffAcroRise &gt; 0.083)?-1:1; // Check that differenc
e is lower than 5 minutes.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       acroSet *= (bestDiffAcroSet &gt; 0.083)?-1:1; // Check that difference 
is lower than 5 minutes.</td><td> </td><td class="right">       acroSet *= (bestDiffAcroSet &gt; 0.083)?-1:1; // Check that difference 
is lower than 5 minutes.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       cosRise *= (bestDiffCosRise &gt; 0.083)?-1:1; // Check that difference 
is lower than 5 minutes.</td><td> </td><td class="right">       cosRise *= (bestDiffCosRise &gt; 0.083)?-1:1; // Check that difference 
is lower than 5 minutes.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       cosSet *= (bestDiffCosSet &gt; 0.083)?-1:1; // Check that difference is
 lower than 5 minutes.</td><td> </td><td class="right">       cosSet *= (bestDiffCosSet &gt; 0.083)?-1:1; // Check that difference is
 lower than 5 minutes.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int result = (acroRise&gt;0 || acroSet&gt;0) ? 1 : 0;</td><td> </td><td class="right">       int result = (acroRise&gt;0 || acroSet&gt;0) ? 1 : 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1280</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1350</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int NUM_ITER = 100;</td><td> </td><td class="right">       const int NUM_ITER = 100;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int i;</td><td> </td><td class="right">       int i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       double hHoriz, ra, dec, raSun, decSun, tempH, tempJd, tempEphH, curS
idT, eclLon;</td><td> </td><td class="right">       double hHoriz, ra, dec, raSun, decSun, tempH, tempJd, tempEphH, curS
idT, eclLon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Vec3d Observer;</td><td> </td><td class="right">       //Vec3d Observer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       hHoriz = calculateHourAngle(mylat, refractedHorizonAlt, selDec);</td><td> </td><td class="right">       hHoriz = calculateHourAngle(mylat, refractedHorizonAlt, selDec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool raises = hHoriz &gt; 0.0;</td><td> </td><td class="right">       bool raises = hHoriz &gt; 0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Only recompute ephemeris from second to second (at least)</td><td> </td><td class="right">// Only recompute ephemeris from second to second (at least)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// or if the source has changed (i.e., Sun &lt;-&gt; Moon). This saves resources:</td><td> </td><td class="right">// or if the source has changed (i.e., Sun &lt;-&gt; Moon). This saves resources:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (<span class="delete">std::abs(myJD-lastJDMoon)&gt;JDsec || lastType!=bodyType || souChan
</span>ged)</td><td> </td><td class="rblock">       if (<span class="insert">qAbs(myJD-lastJDMoon)&gt;JDsec || lastType!=bodyType || souChan</span>ged)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//             qDebug() &lt;&lt; q_("%1  %2   %3   %4").arg(Kind).arg(LastObject)
.arg(myJD,0,'f',5).arg(lastJDMoon,0,'f',5);</td><td> </td><td class="right">//             qDebug() &lt;&lt; q_("%1  %2   %3   %4").arg(Kind).arg(LastObject)
.arg(myJD,0,'f',5).arg(lastJDMoon,0,'f',5);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               lastType = bodyType;</td><td> </td><td class="right">               lastType = bodyType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myEarth-&gt;computePosition(myJD);</td><td> </td><td class="right">               myEarth-&gt;computePosition(myJD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               myEarth-&gt;computeTransMatrix(myJD);</td><td> </td><td class="right">               myEarth-&gt;computeTransMatrix(myJD);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               Vec3d earthPos = myEarth-&gt;getHeliocentricEclipticPos();</td><td> </td><td class="right">               Vec3d earthPos = myEarth-&gt;getHeliocentricEclipticPos();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1368</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1438</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr = toUnsignedRA(SidT-ra);</td><td> </td><td class="right">                               Hcurr = toUnsignedRA(SidT-ra);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr -= (hasRisen)?0.0:24.;</td><td> </td><td class="right">                               Hcurr -= (hasRisen)?0.0:24.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr -= (Hcurr&gt;12.)?24.0:0.0;</td><td> </td><td class="right">                               Hcurr -= (Hcurr&gt;12.)?24.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // H at horizon for mod. coordinates:</td><td> </td><td class="right">       // H at horizon for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               hHoriz = calculateHourAngle(mylat,refractedH
orizonAlt,dec);</td><td> </td><td class="right">                               hHoriz = calculateHourAngle(mylat,refractedH
orizonAlt,dec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute eph. times for mod. coordinates:</td><td> </td><td class="right">       // Compute eph. times for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               tempH = (-hHoriz-Hcurr)*TFrac;</td><td> </td><td class="right">                               tempH = (-hHoriz-Hcurr)*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (hasRisen==false) tempH += (tempH&lt;0.0)?24
.0:0.0;</td><td> </td><td class="right">                               if (hasRisen==false) tempH += (tempH&lt;0.0)?24
.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Check convergence:</td><td> </td><td class="right">                       // Check convergence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (<span class="delete">std::a</span>bs(tempH-tempEphH)&lt;JDsec) break;</td><td> </td><td class="rblock">                               if (<span class="insert">qA</span>bs(tempH-tempEphH)&lt;JDsec) break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       // Update rise-time estimate:</td><td> </td><td class="right">                       // Update rise-time estimate:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               tempEphH = tempH;</td><td> </td><td class="right">                               tempEphH = tempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               MoonRise = myJD + (tempEphH/24.);</td><td> </td><td class="right">                               MoonRise = myJD + (tempEphH/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Set time:</td><td> </td><td class="right">// Set time:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       tempEphH = MoonSet;</td><td> </td><td class="right">                       tempEphH = MoonSet;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonSet = myJD + (MoonSet/24.);</td><td> </td><td class="right">                       MoonSet = myJD + (MoonSet/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       for (i=0; i&lt;NUM_ITER; i++)</td><td> </td><td class="right">                       for (i=0; i&lt;NUM_ITER; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1403</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1473</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr = toUnsignedRA(SidT-ra);</td><td> </td><td class="right">                               Hcurr = toUnsignedRA(SidT-ra);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr -= (hasRisen)?24.:0.;</td><td> </td><td class="right">                               Hcurr -= (hasRisen)?24.:0.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Hcurr += (Hcurr&lt;-12.)?24.0:0.0;</td><td> </td><td class="right">                               Hcurr += (Hcurr&lt;-12.)?24.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // H at horizon for mod. coordinates:</td><td> </td><td class="right">       // H at horizon for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               hHoriz = calculateHourAngle(mylat, refracted
HorizonAlt, dec);</td><td> </td><td class="right">                               hHoriz = calculateHourAngle(mylat, refracted
HorizonAlt, dec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute eph. times for mod. coordinates:</td><td> </td><td class="right">       // Compute eph. times for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               tempH = (hHoriz-Hcurr)*TFrac;</td><td> </td><td class="right">                               tempH = (hHoriz-Hcurr)*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (!hasRisen)</td><td> </td><td class="right">                               if (!hasRisen)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       tempH -= (tempH&gt;0.0)?24.0:0.0;</td><td> </td><td class="right">                                       tempH -= (tempH&gt;0.0)?24.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Check convergence:</td><td> </td><td class="right">               // Check convergence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (<span class="delete">std::a</span>bs(tempH-tempEphH)&lt;JDsec)</td><td> </td><td class="rblock">                               if (<span class="insert">qA</span>bs(tempH-tempEphH)&lt;JDsec)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       break;</td><td> </td><td class="right">                                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // Update set-time estimate:</td><td> </td><td class="right">               // Update set-time estimate:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               tempEphH = tempH;</td><td> </td><td class="right">                               tempEphH = tempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               MoonSet = myJD + (tempEphH/24.);</td><td> </td><td class="right">                               MoonSet = myJD + (tempEphH/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       };</td><td> </td><td class="right">                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else // Comes from if(raises)</td><td> </td><td class="right">               else // Comes from if(raises)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonSet = -1.0;</td><td> </td><td class="right">                       MoonSet = -1.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonRise = -1.0;</td><td> </td><td class="right">                       MoonRise = -1.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1443</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1513</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (bodyType==1) {ra = raSun; dec = decSun;};</td><td> </td><td class="right">                       if (bodyType==1) {ra = raSun; dec = decSun;};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Current hour angle at mod. coordinates:</td><td> </td><td class="right">       // Current hour angle at mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Hcurr = toUnsignedRA(SidT-ra);</td><td> </td><td class="right">                       Hcurr = toUnsignedRA(SidT-ra);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Hcurr += (LocPos[1]&lt;0.0)?24.0:-24.0;</td><td> </td><td class="right">                       Hcurr += (LocPos[1]&lt;0.0)?24.0:-24.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       Hcurr -= (Hcurr&gt;12.)?24.0:0.0;</td><td> </td><td class="right">                       Hcurr -= (Hcurr&gt;12.)?24.0:0.0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Compute eph. times for mod. coordinates:</td><td> </td><td class="right">       // Compute eph. times for mod. coordinates:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       tempH = -Hcurr*TFrac;</td><td> </td><td class="right">                       tempH = -Hcurr*TFrac;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Check convergence:</td><td> </td><td class="right">       // Check convergence:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (<span class="delete">std::a</span>bs(tempH-tempEphH)&lt;JDsec) break;</td><td> </td><td class="rblock">                       if (<span class="insert">qA</span>bs(tempH-tempEphH)&lt;JDsec) break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       tempEphH = tempH;</td><td> </td><td class="right">                       tempEphH = tempH;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       MoonCulm = myJD + (tempEphH/24.);</td><td> </td><td class="right">                       MoonCulm = myJD + (tempEphH/24.);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       culmAlt = <span class="delete">std::abs(mylat-dec); // 90 - altitude at t
rans</span>it.</td><td> </td><td class="rblock">                       culmAlt = <span class="insert">qAbs(mylat-dec); // 90 - altitude at trans
</span>it.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               };</td><td> </td><td class="right">               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//             qDebug() &lt;&lt; q_("%1").arg(MoonCulm,0,'f',5);</td><td> </td><td class="right">//             qDebug() &lt;&lt; q_("%1").arg(MoonCulm,0,'f',5);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       lastJDMoon = myJD;</td><td> </td><td class="right">       lastJDMoon = myJD;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }; // Comes from if (<span class="delete">std::abs(myJD-lastJDMoon)&gt;JDsec || LastObject!=
Kind</span>)</td><td> </td><td class="rblock">       }; // Comes from if (<span class="insert">qAbs(myJD-lastJDMoon)&gt;JDsec || LastObject!=Kind
</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Find out the days of Full Moon:</td><td> </td><td class="right">// Find out the days of Full Moon:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (bodyType==2 &amp;&amp; show_FullMoon) // || show_SuperMoon))</td><td> </td><td class="right">       if (bodyType==2 &amp;&amp; show_FullMoon) // || show_SuperMoon))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Only estimate date of Full Moon if we have changed Lunar month:</td><td> </td><td class="right">       // Only estimate date of Full Moon if we have changed Lunar month:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (myJD &gt; nextFullMoon || myJD &lt; prevFullMoon)</td><td> </td><td class="right">               if (myJD &gt; nextFullMoon || myJD &lt; prevFullMoon)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Estimate the nearest (in time) Full Moon:</td><td> </td><td class="right">       // Estimate the nearest (in time) Full Moon:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1510</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1580</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               Sec2 = Phase1;</td><td> </td><td class="right">                                               Sec2 = Phase1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               Temp2 = eclLon;</td><td> </td><td class="right">                                               Temp2 = eclLon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       } else {</td><td> </td><td class="right">                                       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               Sec1 = Phase1;</td><td> </td><td class="right">                                               Sec1 = Phase1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               Temp1 = eclLon;</td><td> </td><td class="right">                                               Temp1 = eclLon;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       };</td><td> </td><td class="right">                                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //      qDebug() &lt;&lt; QString("%1 %2 %3 %4 ").
arg(Sec1).arg(Sec2).arg(Temp1).arg(Temp2);</td><td> </td><td class="right">                               //      qDebug() &lt;&lt; QString("%1 %2 %3 %4 ").
arg(Sec1).arg(Sec2).arg(Temp1).arg(Temp2);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       if (<span class="delete">std::abs(Sec2-Sec1) &lt; 10.*dT)  /
/ 1 </span>minute accuracy; convergence.</td><td> </td><td class="rblock">                                       if (<span class="insert">qAbs(Sec2-Sec1) &lt; 10.*dT)  // 1 
</span>minute accuracy; convergence.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               TempFullMoon = (Sec1+Sec2)/2
.;</td><td> </td><td class="right">                                               TempFullMoon = (Sec1+Sec2)/2
.;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //              qDebug() &lt;&lt; QString("%1%2 ")
.arg(TempFullMoon);</td><td> </td><td class="right">                               //              qDebug() &lt;&lt; QString("%1%2 ")
.arg(TempFullMoon);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               break;</td><td> </td><td class="right">                                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       };</td><td> </td><td class="right">                                       };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               };</td><td> </td><td class="right">                               };</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if (TempFullMoon &gt; myJD)</td><td> </td><td class="right">                               if (TempFullMoon &gt; myJD)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 37 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>39 lines changed or deleted</i></th><th><i> </i></th><th><i>118 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
