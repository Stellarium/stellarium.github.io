<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-93-generic #116-Ubuntu SMP Fri Aug 11 21:17:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: TelescopeControl.cpp - TelescopeControl.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;TelescopeControl.cpp&nbsp;</th><th> </th><th>&nbsp;TelescopeControl.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 64</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 64</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QFileInfo&gt;</td><td> </td><td class="right">#include &lt;QFileInfo&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QMapIterator&gt;</td><td> </td><td class="right">#include &lt;QMapIterator&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSettings&gt;</td><td> </td><td class="right">#include &lt;QSettings&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QString&gt;</td><td> </td><td class="right">#include &lt;QString&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QStringList&gt;</td><td> </td><td class="right">#include &lt;QStringList&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDir&gt;</td><td> </td><td class="right">#include &lt;QDir&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QSignalMapper&gt;</td><td> </td><td class="right">#include &lt;QSignalMapper&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QDebug&gt;</td><td> </td><td class="right">#include &lt;QDebug&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">#define DEFAULT_RTS2_REFRESH    500000</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//</td><td> </td><td class="right">//</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelModule* TelescopeControlStelPluginInterface::getStelModule() const</td><td> </td><td class="right">StelModule* TelescopeControlStelPluginInterface::getStelModule() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return new TelescopeControl();</td><td> </td><td class="right">       return new TelescopeControl();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">StelPluginInfo TelescopeControlStelPluginInterface::getPluginInfo() const</td><td> </td><td class="right">StelPluginInfo TelescopeControlStelPluginInterface::getPluginInfo() const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Allow to load the resources when used as a static plugin</td><td> </td><td class="right">       // Allow to load the resources when used as a static plugin</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Q_INIT_RESOURCE(TelescopeControl);</td><td> </td><td class="right">       Q_INIT_RESOURCE(TelescopeControl);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelPluginInfo info;</td><td> </td><td class="right">       StelPluginInfo info;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.id = "TelescopeControl";</td><td> </td><td class="right">       info.id = "TelescopeControl";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.displayedName = N_("Telescope Control");</td><td> </td><td class="right">       info.displayedName = N_("Telescope Control");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.authors = "Bogdan Marinov, Johannes Gajdosik";</td><td> </td><td class="right">       info.authors = "Bogdan Marinov, Johannes Gajdosik";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.contact = "http://stellarium.org";</td><td> </td><td class="right">       info.contact = "http://stellarium.org";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       info.description = N_("This plug-in allows Stellarium to send \"slew
\" commands to a telescope on a computerized mount (a \"GoTo telescope\")."
);</td><td> </td><td class="right">       info.description = N_("This plug-in allows Stellarium to send \"slew
\" commands to a telescope on a computerized mount (a \"GoTo telescope\")."
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       info.version = <span class="delete">TELESCOPE_CONTROL_VERSION;</span></td><td> </td><td class="rblock">       info.version = <span class="insert">TELESCOPE_CONTROL_PLUGIN_VERSION;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       info.license = TELESCOPE_CONTROL_PLUGIN_LICENSE;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return info;</td><td> </td><td class="right">       return info;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">///////////////////////////////////////////////////////////////////////////
/////</td><td> </td><td class="right">///////////////////////////////////////////////////////////////////////////
/////</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">// Constructor and destructor</td><td> </td><td class="right">// Constructor and destructor</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">TelescopeControl::TelescopeControl()</td><td> </td><td class="right">TelescopeControl::TelescopeControl()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       : toolbarButton(Q_NULLPTR)</td><td> </td><td class="right">       : toolbarButton(Q_NULLPTR)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , useTelescopeServerLogs(false)</td><td> </td><td class="right">       , useTelescopeServerLogs(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , useServerExecutables(false)</td><td> </td><td class="right">       , useServerExecutables(false)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       , telescopeDialog(Q_NULLPTR)</td><td> </td><td class="right">       , telescopeDialog(Q_NULLPTR)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 624</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 627</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile telescopesJsonFile(telescopesJsonPath);</td><td> </td><td class="right">       QFile telescopesJsonFile(telescopesJsonPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!telescopesJsonFile.open(QFile::WriteOnly|QFile::Text))</td><td> </td><td class="right">       if(!telescopesJsonFile.open(QFile::WriteOnly|QFile::Text))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "[TelescopeControl] Telescopes can not be save
d. A file can not be open for writing:" &lt;&lt; QDir::toNativeSeparators(telesco
pesJsonPath);</td><td> </td><td class="right">               qWarning() &lt;&lt; "[TelescopeControl] Telescopes can not be save
d. A file can not be open for writing:" &lt;&lt; QDir::toNativeSeparators(telesco
pesJsonPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Add the version:</td><td> </td><td class="right">       //Add the version:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       telescopeDescriptions.insert("version", QString(TELESCOPE_CONTROL_<span class="delete">VE
</span>RSION));</td><td> </td><td class="rblock">       telescopeDescriptions.insert("version", QString(TELESCOPE_CONTROL_<span class="insert">PL
UGIN_VE</span>RSION));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Convert the tree to JSON</td><td> </td><td class="right">       //Convert the tree to JSON</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       StelJsonParser::write(telescopeDescriptions, &amp;telescopesJsonFile);</td><td> </td><td class="right">       StelJsonParser::write(telescopeDescriptions, &amp;telescopesJsonFile);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopesJsonFile.flush();//Is this necessary?</td><td> </td><td class="right">       telescopesJsonFile.flush();//Is this necessary?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopesJsonFile.close();</td><td> </td><td class="right">       telescopesJsonFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeControl::loadTelescopes()</td><td> </td><td class="right">void TelescopeControl::loadTelescopes()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVariantMap result;</td><td> </td><td class="right">       QVariantMap result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 673</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 676</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //File contains any telescopes?</td><td> </td><td class="right">       //File contains any telescopes?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(map.isEmpty())</td><td> </td><td class="right">       if(map.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeDescriptions = result;</td><td> </td><td class="right">               telescopeDescriptions = result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString version = map.value("version", "0.0.0").toString();</td><td> </td><td class="right">       QString version = map.value("version", "0.0.0").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(StelUtils::compareVersions(version, QString(TELESCOPE_CONTROL_<span class="delete">VER
</span>SION))!=0)</td><td> </td><td class="rblock">       if(StelUtils::compareVersions(version, QString(TELESCOPE_CONTROL_<span class="insert">PLU
GIN_VER</span>SION))!=0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString newName = telescopesJsonPath + ".backup." + QDateTim
e::currentDateTime().toString("yyyy-MM-dd-hh-mm-ss");</td><td> </td><td class="right">               QString newName = telescopesJsonPath + ".backup." + QDateTim
e::currentDateTime().toString("yyyy-MM-dd-hh-mm-ss");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(telescopesJsonFile.rename(newName))</td><td> </td><td class="right">               if(telescopesJsonFile.rename(newName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "[TelescopeControl] The existing versi
on of telescopes.json is obsolete. Backing it up as" &lt;&lt; QDir::toNativeSepar
ators(newName);</td><td> </td><td class="right">                       qWarning() &lt;&lt; "[TelescopeControl] The existing versi
on of telescopes.json is obsolete. Backing it up as" &lt;&lt; QDir::toNativeSepar
ators(newName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "[TelescopeControl] A blank telescopes
.json file will have to be created.";</td><td> </td><td class="right">                       qWarning() &lt;&lt; "[TelescopeControl] A blank telescopes
.json file will have to be created.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       telescopeDescriptions = result;</td><td> </td><td class="right">                       telescopeDescriptions = result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return;</td><td> </td><td class="right">                       return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 751</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 754</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString hostName("localhost");</td><td> </td><td class="right">               QString hostName("localhost");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int portTCP = 0;</td><td> </td><td class="right">               int portTCP = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               int delay = 0;</td><td> </td><td class="right">               int delay = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString deviceModelName;</td><td> </td><td class="right">               QString deviceModelName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString portSerial;</td><td> </td><td class="right">               QString portSerial;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString rts2Url("localhost");</td><td> </td><td class="right">               QString rts2Url("localhost");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString rts2Username("");</td><td> </td><td class="right">               QString rts2Username("");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString rts2Password("");</td><td> </td><td class="right">               QString rts2Password("");</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               int rts2Refresh = DEFAULT_RTS2_REFRESH;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (connectionType == ConnectionInternal)</td><td> </td><td class="right">               if (connectionType == ConnectionInternal)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Serial port and device model</td><td> </td><td class="right">                       //Serial port and device model</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       deviceModelName = telescope.value("device_model").to
String();</td><td> </td><td class="right">                       deviceModelName = telescope.value("device_model").to
String();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       portSerial = telescope.value("serial_port").toString
();</td><td> </td><td class="right">                       portSerial = telescope.value("serial_port").toString
();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if(deviceModelName.isEmpty())</td><td> </td><td class="right">                       if(deviceModelName.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qDebug() &lt;&lt; "[TelescopeControl] Unable to lo
ad telescope: No device model specified at slot" &lt;&lt; key;</td><td> </td><td class="right">                               qDebug() &lt;&lt; "[TelescopeControl] Unable to lo
ad telescope: No device model specified at slot" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 806</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 810</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Validation: Host name</td><td> </td><td class="right">                       //Validation: Host name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rts2Url = telescope.value("url").toString();</td><td> </td><td class="right">                       rts2Url = telescope.value("url").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if(rts2Url.isEmpty())</td><td> </td><td class="right">                       if(rts2Url.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               qDebug() &lt;&lt; "[TelescopeControl] loadTelescop
es(): No URL at slot" &lt;&lt; key;</td><td> </td><td class="right">                               qDebug() &lt;&lt; "[TelescopeControl] loadTelescop
es(): No URL at slot" &lt;&lt; key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               map.remove(key);</td><td> </td><td class="right">                               map.remove(key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               continue;</td><td> </td><td class="right">                               continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rts2Username = telescope.value("username").toString(
);</td><td> </td><td class="right">                       rts2Username = telescope.value("username").toString(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       rts2Password = telescope.value("password").toString(
);</td><td> </td><td class="right">                       rts2Password = telescope.value("password").toString(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                       rts2Refresh = telescope.value("refresh", DEFAULT_RTS
2_REFRESH).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (connectionType != ConnectionVirtual)</td><td> </td><td class="right">               if (connectionType != ConnectionVirtual)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (connectionType != ConnectionRTS2)</td><td> </td><td class="right">                       if (connectionType != ConnectionRTS2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //Validation: TCP port</td><td> </td><td class="right">                               //Validation: TCP port</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               portTCP = telescope.value("tcp_port").toInt(
);</td><td> </td><td class="right">                               portTCP = telescope.value("tcp_port").toInt(
);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(!telescope.contains("tcp_port") || !isVal
idPort(portTCP))</td><td> </td><td class="right">                               if(!telescope.contains("tcp_port") || !isVal
idPort(portTCP))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 901</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 906</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               qDebug() &lt;&lt; "[TelescopeContr
ol] Unable to create a telescope client at slot" &lt;&lt; slot;</td><td> </td><td class="right">                                               qDebug() &lt;&lt; "[TelescopeContr
ol] Unable to create a telescope client at slot" &lt;&lt; slot;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //Unnecessary due to if-else
 construction;</td><td> </td><td class="right">                                               //Unnecessary due to if-else
 construction;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //also, causes bug #608533</td><td> </td><td class="right">                                               //also, causes bug #608533</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //continue;</td><td> </td><td class="right">                                               //continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else</td><td> </td><td class="right">                       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if(!startClientAtSlot(slot, connectionType, 
name, equinox, hostName, portTCP, delay, internalCircles, deviceModelName, 
portSerial, rts2Url, rts2Username, rts2Password))</td><td> </td><td class="rblock">                               if(!startClientAtSlot(slot, connectionType, 
name, equinox, hostName, portTCP, delay, internalCircles, deviceModelName, 
portSerial, rts2Url, rts2Username, rts2Password<span class="insert">, rts2Refresh</span>))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "[TelescopeControl] Unab
le to create a telescope client at slot" &lt;&lt; slot;</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "[TelescopeControl] Unab
le to create a telescope client at slot" &lt;&lt; slot;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //Unnecessary due to if-else constru
ction;</td><td> </td><td class="right">                                       //Unnecessary due to if-else constru
ction;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //also, causes bug #608533</td><td> </td><td class="right">                                       //also, causes bug #608533</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //continue;</td><td> </td><td class="right">                                       //continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //If this line is reached, the telescope at this slot has be
en loaded successfully</td><td> </td><td class="right">               //If this line is reached, the telescope at this slot has be
en loaded successfully</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 925</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 930</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(telescopesCount &gt; 0)</td><td> </td><td class="right">       if(telescopesCount &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               result = map;</td><td> </td><td class="right">               result = map;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "[TelescopeControl] Loaded successfully" &lt;&lt; tele
scopesCount</td><td> </td><td class="right">               qDebug() &lt;&lt; "[TelescopeControl] Loaded successfully" &lt;&lt; tele
scopesCount</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                        &lt;&lt; "telescopes.";</td><td> </td><td class="right">                        &lt;&lt; "telescopes.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeDescriptions = result;</td><td> </td><td class="right">       telescopeDescriptions = result;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::addTelescopeAtSlot(int slot, ConnectionType connecti
onType, QString name, QString equinox, QString host, int portTCP, int delay
, bool connectAtStartup, QList&lt;double&gt; circles, QString deviceModelName, QS
tring portSerial, QString rts2Url, QString rts2Username, QString rts2Passwo
rd)</td><td> </td><td class="rblock">bool TelescopeControl::addTelescopeAtSlot(int slot, ConnectionType connecti
onType, QString name, QString equinox, QString host, int portTCP, int delay
, bool connectAtStartup, QList&lt;double&gt; circles, QString deviceModelName, QS
tring portSerial, QString rts2Url, QString rts2Username, QString rts2Passwo
rd<span class="insert">, int rts2Refresh</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slot) || name.isEmpty() || equinox.isEmpty() |
| connectionType &lt;= ConnectionNA || connectionType &gt;= ConnectionCount)</td><td> </td><td class="right">       if(!isValidSlotNumber(slot) || name.isEmpty() || equinox.isEmpty() |
| connectionType &lt;= ConnectionNA || connectionType &gt;= ConnectionCount)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Create a new map node and fill it with parameters</td><td> </td><td class="right">       //Create a new map node and fill it with parameters</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVariantMap telescope;</td><td> </td><td class="right">       QVariantMap telescope;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescope.insert("name", name);</td><td> </td><td class="right">       telescope.insert("name", name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescope.insert("connection", connectionTypeNames.value(connectionT
ype));</td><td> </td><td class="right">       telescope.insert("connection", connectionTypeNames.value(connectionT
ype));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescope.insert("equinox", equinox);//TODO: Validation!</td><td> </td><td class="right">       telescope.insert("equinox", equinox);//TODO: Validation!</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l8" /><small>skipping to change at</small><em> line 952</em></th><th> </th><th><a name="part-r8" /><small>skipping to change at</small><em> line 957</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("host_name", host);</td><td> </td><td class="right">               telescope.insert("host_name", host);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(connectionType == ConnectionRTS2)</td><td> </td><td class="right">       if(connectionType == ConnectionRTS2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (rts2Url.isEmpty())</td><td> </td><td class="right">               if (rts2Url.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("url", rts2Url);</td><td> </td><td class="right">               telescope.insert("url", rts2Url);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("username", rts2Username);</td><td> </td><td class="right">               telescope.insert("username", rts2Username);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("password", rts2Password);</td><td> </td><td class="right">               telescope.insert("password", rts2Password);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               telescope.insert("refresh", rts2Refresh);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(connectionType == ConnectionInternal)</td><td> </td><td class="right">       if(connectionType == ConnectionInternal)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!deviceModels.contains(deviceModelName))</td><td> </td><td class="right">               if (!deviceModels.contains(deviceModelName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("device_model", deviceModelName);</td><td> </td><td class="right">               telescope.insert("device_model", deviceModelName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (portSerial.isEmpty())</td><td> </td><td class="right">               if (portSerial.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return false;</td><td> </td><td class="right">                       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l9" /><small>skipping to change at</small><em> line 994</em></th><th> </th><th><a name="part-r9" /><small>skipping to change at</small><em> line 1000</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               for(int i = 0; i &lt; circles.size(); i++)</td><td> </td><td class="right">               for(int i = 0; i &lt; circles.size(); i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       circleList.append(circles[i]);</td><td> </td><td class="right">                       circleList.append(circles[i]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescope.insert("circles", circleList);</td><td> </td><td class="right">               telescope.insert("circles", circleList);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeDescriptions.insert(QString::number(slot), telescope);</td><td> </td><td class="right">       telescopeDescriptions.insert(QString::number(slot), telescope);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::getTelescopeAtSlot(int slot, ConnectionType&amp; connect
ionType, QString&amp; name, QString&amp; equinox, QString&amp; host, int&amp; portTCP, int&amp;
 delay, bool&amp; connectAtStartup, QList&lt;double&gt;&amp; circles, QString&amp; deviceMode
lName, QString&amp; portSerial, QString&amp; rts2Url, QString&amp; rts2Username, QStrin
g&amp; rts2Password)</td><td> </td><td class="rblock">bool TelescopeControl::getTelescopeAtSlot(int slot, ConnectionType&amp; connect
ionType, QString&amp; name, QString&amp; equinox, QString&amp; host, int&amp; portTCP, int&amp;
 delay, bool&amp; connectAtStartup, QList&lt;double&gt;&amp; circles, QString&amp; deviceMode
lName, QString&amp; portSerial, QString&amp; rts2Url, QString&amp; rts2Username, QStrin
g&amp; rts2Password<span class="insert">, int&amp; rts2Refresh</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slot))</td><td> </td><td class="right">       if(!isValidSlotNumber(slot))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Read the node at that slot</td><td> </td><td class="right">       //Read the node at that slot</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QVariantMap telescope = telescopeDescriptions.value(QString::number(
slot)).toMap();</td><td> </td><td class="right">       QVariantMap telescope = telescopeDescriptions.value(QString::number(
slot)).toMap();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(telescope.isEmpty())</td><td> </td><td class="right">       if(telescope.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               telescopeDescriptions.remove(QString::number(slot));</td><td> </td><td class="right">               telescopeDescriptions.remove(QString::number(slot));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l10" /><small>skipping to change at</small><em> line 1035</em></th><th> </th><th><a name="part-r10" /><small>skipping to change at</small><em> line 1041</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(connectionType == ConnectionInternal)</td><td> </td><td class="right">       if(connectionType == ConnectionInternal)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               deviceModelName = telescope.value("device_model").toString()
;</td><td> </td><td class="right">               deviceModelName = telescope.value("device_model").toString()
;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               portSerial = telescope.value("serial_port").toString();</td><td> </td><td class="right">               portSerial = telescope.value("serial_port").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(connectionType == ConnectionRTS2)</td><td> </td><td class="right">       if(connectionType == ConnectionRTS2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rts2Url = telescope.value("url").toString();</td><td> </td><td class="right">               rts2Url = telescope.value("url").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rts2Username = telescope.value("username").toString();</td><td> </td><td class="right">               rts2Username = telescope.value("username").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               rts2Password = telescope.value("password").toString();</td><td> </td><td class="right">               rts2Password = telescope.value("password").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               rts2Refresh = telescope.value("refresh", DEFAULT_RTS2_REFRES
H).toInt();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::removeTelescopeAtSlot(int slot)</td><td> </td><td class="right">bool TelescopeControl::removeTelescopeAtSlot(int slot)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slot))</td><td> </td><td class="right">       if(!isValidSlotNumber(slot))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l11" /><small>skipping to change at</small><em> line 1069</em></th><th> </th><th><a name="part-r11" /><small>skipping to change at</small><em> line 1076</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       ConnectionType connectionType;</td><td> </td><td class="right">       ConnectionType connectionType;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int portTCP;</td><td> </td><td class="right">       int portTCP;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int delay;</td><td> </td><td class="right">       int delay;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool connectAtStartup;</td><td> </td><td class="right">       bool connectAtStartup;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QList&lt;double&gt; circles;</td><td> </td><td class="right">       QList&lt;double&gt; circles;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString deviceModelName;</td><td> </td><td class="right">       QString deviceModelName;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString portSerial;</td><td> </td><td class="right">       QString portSerial;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString rts2Url;</td><td> </td><td class="right">       QString rts2Url;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString rts2Username;</td><td> </td><td class="right">       QString rts2Username;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QString rts2Password;</td><td> </td><td class="right">       QString rts2Password;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if(!getTelescopeAtSlot(slot, connectionType, name, equinox, host, po</td><td> </td><td class="rblock">       <span class="insert">int rts2Refresh;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">rtTCP, delay, connectAtStartup, circles, deviceModelName, portSerial, rts2U</td><td> </td><td class="rblock">       if(!getTelescopeAtSlot(slot, connectionType, name, equinox, host, po</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">rl, rts2Username, <span class="delete">rts2Password))</span></td><td> </td><td class="rblock">rtTCP, delay, connectAtStartup, circles, deviceModelName, portSerial, rts2U</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">rl, rts2Username, <span class="insert">rts2Password, rts2Refresh))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Add debug</td><td> </td><td class="right">               //TODO: Add debug</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(connectionType == ConnectionInternal &amp;&amp; !deviceModelName.isEmpty(
))</td><td> </td><td class="right">       if(connectionType == ConnectionInternal &amp;&amp; !deviceModelName.isEmpty(
))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(deviceModels[deviceModelName].useExecutable)</td><td> </td><td class="right">               if(deviceModels[deviceModelName].useExecutable)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (startClientAtSlot(slot, connectionType, name, eq
uinox, host, portTCP, delay, circles))</td><td> </td><td class="right">                       if (startClientAtSlot(slot, connectionType, name, eq
uinox, host, portTCP, delay, circles))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l12" /><small>skipping to change at</small><em> line 1105</em></th><th> </th><th><a name="part-r12" /><small>skipping to change at</small><em> line 1113</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       logAtSlot(slot);</td><td> </td><td class="right">                       logAtSlot(slot);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (startClientAtSlot(slot, connectionType, name, eq
uinox, QString(), 0, delay, circles, deviceModelName, portSerial))</td><td> </td><td class="right">                       if (startClientAtSlot(slot, connectionType, name, eq
uinox, QString(), 0, delay, circles, deviceModelName, portSerial))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               emit clientConnected(slot, name);</td><td> </td><td class="right">                               emit clientConnected(slot, name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               return true;</td><td> </td><td class="right">                               return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (startClientAtSlot(slot, connectionType, name, equinox, h
ost, portTCP, delay, circles, deviceModelName, portSerial, rts2Url, rts2Use
rname, rts2Password))</td><td> </td><td class="rblock">               if (startClientAtSlot(slot, connectionType, name, equinox, h
ost, portTCP, delay, circles, deviceModelName, portSerial, rts2Url, rts2Use
rname, rts2Password<span class="insert">, rts2Refresh</span>))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       emit clientConnected(slot, name);</td><td> </td><td class="right">                       emit clientConnected(slot, name);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       return true;</td><td> </td><td class="right">                       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return false;</td><td> </td><td class="right">       return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeControl::stopTelescopeAtSlot(int slot)</td><td> </td><td class="right">bool TelescopeControl::stopTelescopeAtSlot(int slot)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l13" /><small>skipping to change at</small><em> line 1241</em></th><th> </th><th><a name="part-r13" /><small>skipping to change at</small><em> line 1249</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess[slotNumber]-&gt;terminate();</td><td> </td><td class="right">       telescopeServerProcess[slotNumber]-&gt;terminate();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif //Q_OS_WIN</td><td> </td><td class="right">#endif //Q_OS_WIN</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess[slotNumber]-&gt;waitForFinished();</td><td> </td><td class="right">       telescopeServerProcess[slotNumber]-&gt;waitForFinished();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       delete telescopeServerProcess[slotNumber];</td><td> </td><td class="right">       delete telescopeServerProcess[slotNumber];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       telescopeServerProcess.remove(slotNumber);</td><td> </td><td class="right">       telescopeServerProcess.remove(slotNumber);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return true;</td><td> </td><td class="right">       return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">bool TelescopeControl::startClientAtSlot(int slotNumber, ConnectionType con
nectionType, QString name, QString equinox, QString host, int portTCP, int 
delay, QList&lt;double&gt; circles, QString deviceModelName, QString portSerial, 
QString rts2Url, QString rts2Username, QString rts2Password)</td><td> </td><td class="rblock">bool TelescopeControl::startClientAtSlot(int slotNumber, ConnectionType con
nectionType, QString name, QString equinox, QString host, int portTCP, int 
delay, QList&lt;double&gt; circles, QString deviceModelName, QString portSerial, 
QString rts2Url, QString rts2Username, QString rts2Password<span class="insert">, int rts2Refres
h</span>)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Validation</td><td> </td><td class="right">       //Validation</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!isValidSlotNumber(slotNumber))</td><td> </td><td class="right">       if(!isValidSlotNumber(slotNumber))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return false;</td><td> </td><td class="right">               return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Check if it's not already running</td><td> </td><td class="right">       //Check if it's not already running</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //Should it return, or should it remove the old one and proceed?</td><td> </td><td class="right">       //Should it return, or should it remove the old one and proceed?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(telescopeClients.contains(slotNumber))</td><td> </td><td class="right">       if(telescopeClients.contains(slotNumber))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Add debug. Update logic?</td><td> </td><td class="right">               //TODO: Add debug. Update logic?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l14" /><small>skipping to change at</small><em> line 1274</em></th><th> </th><th><a name="part-r14" /><small>skipping to change at</small><em> line 1282</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               initString = QString("%1:%2:%3:%4:%5").arg(n
ame, deviceModels[deviceModelName].server, equinox, portSerial, QString::nu
mber(delay));</td><td> </td><td class="right">                               initString = QString("%1:%2:%3:%4:%5").arg(n
ame, deviceModels[deviceModelName].server, equinox, portSerial, QString::nu
mber(delay));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ConnectionLocal:</td><td> </td><td class="right">               case ConnectionLocal:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (isValidPort(portTCP))</td><td> </td><td class="right">                       if (isValidPort(portTCP))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               initString = QString("%1:TCP:%2:%3:%4:%5").a
rg(name, equinox, "localhost", QString::number(portTCP), QString::number(de
lay));</td><td> </td><td class="right">                               initString = QString("%1:TCP:%2:%3:%4:%5").a
rg(name, equinox, "localhost", QString::number(portTCP), QString::number(de
lay));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ConnectionRTS2:</td><td> </td><td class="right">               case ConnectionRTS2:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (!rts2Url.isEmpty())</td><td> </td><td class="right">                       if (!rts2Url.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               initString = QString("%1:RTS2:%2:<span class="delete">http://%3:%
4@%5").arg(name, equinox, rts2Username, rt</span>s2Password, rts2Url);</td><td> </td><td class="rblock">                               initString = QString("%1:RTS2:%2:<span class="insert">%3:http://%
4:%5@%6").arg(name, equinox, QString::number(rts2Refresh), rts2Username, rt
</span>s2Password, rts2Url);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       break;</td><td> </td><td class="right">                       break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               case ConnectionRemote:</td><td> </td><td class="right">               case ConnectionRemote:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               default:</td><td> </td><td class="right">               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if (isValidPort(portTCP) &amp;&amp; !host.isEmpty())</td><td> </td><td class="right">                       if (isValidPort(portTCP) &amp;&amp; !host.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               initString = QString("%1:TCP:%2:%3:%4:%5").a
rg(name, equinox, host, QString::number(portTCP), QString::number(delay));</td><td> </td><td class="right">                               initString = QString("%1:TCP:%2:%3:%4:%5").a
rg(name, equinox, host, QString::number(portTCP), QString::number(delay));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       qDebug() &lt;&lt; "connectionType:" &lt;&lt; connectionType &lt;&lt; " initString:" &lt;&lt;
 initString;</td><td> </td><td class="right">       qDebug() &lt;&lt; "connectionType:" &lt;&lt; connectionType &lt;&lt; " initString:" &lt;&lt;
 initString;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l15" /><small>skipping to change at</small><em> line 1356</em></th><th> </th><th><a name="part-r15" /><small>skipping to change at</small><em> line 1364</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       qWarning() &lt;&lt; "[TelescopeControl] Can't open for rea
ding " &lt;&lt; QDir::toNativeSeparators(deviceModelsJsonPath);</td><td> </td><td class="right">                       qWarning() &lt;&lt; "[TelescopeControl] Can't open for rea
ding " &lt;&lt; QDir::toNativeSeparators(deviceModelsJsonPath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       useDefaultList = true;</td><td> </td><td class="right">                       useDefaultList = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               else</td><td> </td><td class="right">               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       //Check the version and move the old file if necessa
ry</td><td> </td><td class="right">                       //Check the version and move the old file if necessa
ry</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QVariantMap deviceModelsJsonMap;</td><td> </td><td class="right">                       QVariantMap deviceModelsJsonMap;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       deviceModelsJsonMap = StelJsonParser::parse(&amp;deviceM
odelsJsonFile).toMap();</td><td> </td><td class="right">                       deviceModelsJsonMap = StelJsonParser::parse(&amp;deviceM
odelsJsonFile).toMap();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       QString version = deviceModelsJsonMap.value("version
", "0.0.0").toString();</td><td> </td><td class="right">                       QString version = deviceModelsJsonMap.value("version
", "0.0.0").toString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if(StelUtils::compareVersions(version, QString(TELES
COPE_CONTROL_VERSION))!=0)</td><td> </td><td class="rblock">                       if(StelUtils::compareVersions(version, QString(TELES
COPE_CONTROL_<span class="insert">PLUGIN_</span>VERSION))!=0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               deviceModelsJsonFile.close();</td><td> </td><td class="right">                               deviceModelsJsonFile.close();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString newName = deviceModelsJsonPath + ".b
ackup." + QDateTime::currentDateTime().toString("yyyy-MM-dd-hh-mm-ss");</td><td> </td><td class="right">                               QString newName = deviceModelsJsonPath + ".b
ackup." + QDateTime::currentDateTime().toString("yyyy-MM-dd-hh-mm-ss");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(deviceModelsJsonFile.rename(newName))</td><td> </td><td class="right">                               if(deviceModelsJsonFile.rename(newName))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qWarning() &lt;&lt; "[TelescopeControl] Th
e existing version of device_models.json is obsolete. Backing it up as " &lt;&lt;
 QDir::toNativeSeparators(newName);</td><td> </td><td class="right">                                       qWarning() &lt;&lt; "[TelescopeControl] Th
e existing version of device_models.json is obsolete. Backing it up as " &lt;&lt;
 QDir::toNativeSeparators(newName);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       if(!restoreDeviceModelsListTo(device
ModelsJsonPath))</td><td> </td><td class="right">                                       if(!restoreDeviceModelsListTo(device
ModelsJsonPath))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       {</td><td> </td><td class="right">                                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               useDefaultList = true;</td><td> </td><td class="right">                                               useDefaultList = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       }</td><td> </td><td class="right">                                       }</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 16 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>13 lines changed or deleted</i></th><th><i> </i></th><th><i>21 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
