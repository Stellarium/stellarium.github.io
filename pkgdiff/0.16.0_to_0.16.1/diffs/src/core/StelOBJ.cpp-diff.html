<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.home 4.4.0-93-generic #116-Ubuntu SMP Fri Aug 11 21:17:51 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: StelOBJ.cpp - StelOBJ.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;StelOBJ.cpp&nbsp;</th><th> </th><th>&nbsp;StelOBJ.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 431</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 431</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QFile file(filename);</td><td> </td><td class="right">       QFile file(filename);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(!file.open(QIODevice::ReadOnly))</td><td> </td><td class="right">       if(!file.open(QIODevice::ReadOnly))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qCWarning(stelOBJ)&lt;&lt;"Could not open MTL file"&lt;&lt;filename&lt;&lt;fil
e.errorString();</td><td> </td><td class="right">               qCWarning(stelOBJ)&lt;&lt;"Could not open MTL file"&lt;&lt;filename&lt;&lt;fil
e.errorString();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return list;</td><td> </td><td class="right">               return list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QTextStream stream(&amp;file);</td><td> </td><td class="right">       QTextStream stream(&amp;file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       Material* curMaterial = Q_NULLPTR;</td><td> </td><td class="right">       Material* curMaterial = Q_NULLPTR;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       int lineNr = 0;</td><td> </td><td class="right">       int lineNr = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">// some exporters give d and Tr, and some give contradicting interpr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">etations. Track a warning with these.</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       bool dHasBeenGiven = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       bool trHasBeenGiven = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       while(!stream.atEnd())</td><td> </td><td class="right">       while(!stream.atEnd())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ++lineNr;</td><td> </td><td class="right">               ++lineNr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               bool ok = true;</td><td> </td><td class="right">               bool ok = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //make sure only spaces are the separator</td><td> </td><td class="right">               //make sure only spaces are the separator</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QString line = stream.readLine().simplified();</td><td> </td><td class="right">               QString line = stream.readLine().simplified();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //split line by space</td><td> </td><td class="right">               //split line by space</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               QVector&lt;QStringRef&gt; splits = line.splitRef(' ',QString::Skip
EmptyParts);</td><td> </td><td class="right">               QVector&lt;QStringRef&gt; splits = line.splitRef(' ',QString::Skip
EmptyParts);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(!splits.isEmpty())</td><td> </td><td class="right">               if(!splits.isEmpty())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 458</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 461</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       if(CMD_CMP("newmtl")) //define new material</td><td> </td><td class="right">                       if(CMD_CMP("newmtl")) //define new material</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //use rest of line to support spaces in file
 name</td><td> </td><td class="right">                               //use rest of line to support spaces in file
 name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               QString name = getRestOfString(QStringLitera
l("newmtl"),line);</td><td> </td><td class="right">                               QString name = getRestOfString(QStringLitera
l("newmtl"),line);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ok = !name.isEmpty();</td><td> </td><td class="right">                               ok = !name.isEmpty();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(ok)</td><td> </td><td class="right">                               if(ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //add a new material with the specif
ied name</td><td> </td><td class="right">                                       //add a new material with the specif
ied name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       curMaterial = &amp;INC_LIST(list);</td><td> </td><td class="right">                                       curMaterial = &amp;INC_LIST(list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       curMaterial-&gt;name = name;</td><td> </td><td class="right">                                       curMaterial-&gt;name = name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                       <span class="insert">dHasBeenGiven = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       trHasBeenGiven = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               else</td><td> </td><td class="right">                               else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qCCritical(stelOBJ)&lt;&lt;"Invalid newmtl
 statement"&lt;&lt;line;</td><td> </td><td class="right">                                       qCCritical(stelOBJ)&lt;&lt;"Invalid newmtl
 statement"&lt;&lt;line;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("Ka")) //define ambient color</td><td> </td><td class="right">                       else if(CMD_CMP("Ka")) //define ambient color</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               CHECK_MTL();</td><td> </td><td class="right">                               CHECK_MTL();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(ok)</td><td> </td><td class="right">                               if(ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 501</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 506</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(ok)</td><td> </td><td class="right">                               if(ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       ok = StelOBJ::parseFloat(splits,curM
aterial-&gt;Ns);</td><td> </td><td class="right">                                       ok = StelOBJ::parseFloat(splits,curM
aterial-&gt;Ns);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("d"))</td><td> </td><td class="right">                       else if(CMD_CMP("d"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               CHECK_MTL();</td><td> </td><td class="right">                               CHECK_MTL();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(ok)</td><td> </td><td class="right">                               if(ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       ok = StelOBJ::parseFloat(splits,curM
aterial-&gt;d);</td><td> </td><td class="right">                                       ok = StelOBJ::parseFloat(splits,curM
aterial-&gt;d);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //clamp d to [0,1]</td><td> </td><td class="right">                                       //clamp d to [0,1]</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       curMaterial-&gt;d = <span class="delete">std::max(0.0f, std:</span></td><td> </td><td class="rblock">                                       curMaterial-&gt;d = <span class="insert">qBound(0.0f, curMat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">:min(curMaterial-&gt;d,1.0f));</span></td><td> </td><td class="rblock"><span class="insert">erial-&gt;d, 1.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       if (trHasBeenGiven)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               qWarning(stelOBJ) &lt;&lt; "Materi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">al" &lt;&lt; curMaterial-&gt;name &lt;&lt; "warning: Tr and d both given. The latter wins,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> d=" &lt;&lt; curMaterial-&gt;d;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       dHasBeenGiven=true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("Tr"))</td><td> </td><td class="right">                       else if(CMD_CMP("Tr"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               CHECK_MTL();</td><td> </td><td class="right">                               CHECK_MTL();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(ok)</td><td> </td><td class="right">                               if(ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //Tr should be the inverse of d, in 
theory</td><td> </td><td class="right">                                       //Tr should be the inverse of d, in 
theory</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //not all exporters seem to follow t
his rule...</td><td> </td><td class="right">                                       //not all exporters seem to follow t
his rule...</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       ok = StelOBJ::parseFloat(splits,curM
aterial-&gt;d);</td><td> </td><td class="right">                                       ok = StelOBJ::parseFloat(splits,curM
aterial-&gt;d);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //clamp d to [0,1]</td><td> </td><td class="right">                                       //clamp d to [0,1]</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       curMaterial-&gt;d = 1.0f - <span class="delete">std::max(0.0</span></td><td> </td><td class="rblock">                                       curMaterial-&gt;d = 1.0f - <span class="insert">qBound(0.0f,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">f, std::min(curMaterial-&gt;d,1.0f));</span></td><td> </td><td class="rblock"><span class="insert"> curMaterial-&gt;d, 1.0f);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       if (dHasBeenGiven)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               qWarning(stelOBJ) &lt;&lt; "Materi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">al" &lt;&lt; curMaterial-&gt;name &lt;&lt; "warning: d and Tr both given. The latter wins,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> Tr=" &lt;&lt; 1.0f-curMaterial-&gt;d;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       trHasBeenGiven=true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("map_Ka")) //define ambient map</td><td> </td><td class="right">                       else if(CMD_CMP("map_Ka")) //define ambient map</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               CHECK_MTL();</td><td> </td><td class="right">                               CHECK_MTL();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(ok)</td><td> </td><td class="right">                               if(ok)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       //use rest of line to support spaces
 in file name</td><td> </td><td class="right">                                       //use rest of line to support spaces
 in file name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       curMaterial-&gt;map_Ka = getRestOfStrin
g(QStringLiteral("map_Ka"),line);</td><td> </td><td class="right">                                       curMaterial-&gt;map_Ka = getRestOfStrin
g(QStringLiteral("map_Ka"),line);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       ok = !curMaterial-&gt;map_Ka.isEmpty();</td><td> </td><td class="right">                                       ok = !curMaterial-&gt;map_Ka.isEmpty();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 700</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 715</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       clear();</td><td> </td><td class="right">       clear();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QDir baseDir(basePath);</td><td> </td><td class="right">       QDir baseDir(basePath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QElapsedTimer timer;</td><td> </td><td class="right">       QElapsedTimer timer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       timer.start();</td><td> </td><td class="right">       timer.start();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       QTextStream stream(&amp;device);</td><td> </td><td class="right">       QTextStream stream(&amp;device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       bool smoothGroupWarned = false;</td><td> </td><td class="right">       bool smoothGroupWarned = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       <span class="insert">bool vertexWWarned = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       bool textureWWarned = false;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //contains the parsed vertex positions</td><td> </td><td class="right">       //contains the parsed vertex positions</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       V3Vec posList;</td><td> </td><td class="right">       V3Vec posList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //contains the parsed normals</td><td> </td><td class="right">       //contains the parsed normals</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       V3Vec normalList;</td><td> </td><td class="right">       V3Vec normalList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //contains the parsed texture coords</td><td> </td><td class="right">       //contains the parsed texture coords</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       V2Vec texList;</td><td> </td><td class="right">       V2Vec texList;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       VertexCache vertCache;</td><td> </td><td class="right">       VertexCache vertCache;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       CurrentParserState state = CurrentParserState();</td><td> </td><td class="right">       CurrentParserState state = CurrentParserState();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 744</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 761</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("v"))</td><td> </td><td class="right">                       else if(CMD_CMP("v"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //we have to handle the vertex order</td><td> </td><td class="right">                               //we have to handle the vertex order</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3f&amp; target = INC_LIST(posList);</td><td> </td><td class="right">                               Vec3f&amp; target = INC_LIST(posList);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ok = parseVec3(splits,target);</td><td> </td><td class="right">                               ok = parseVec3(splits,target);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //check the optional w coord if we have a ve
c4, must be 1</td><td> </td><td class="right">                               //check the optional w coord if we have a ve
c4, must be 1</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(splits.size()&gt;4)</td><td> </td><td class="right">                               if(splits.size()&gt;4)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       float w;</td><td> </td><td class="right">                                       float w;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       parseFloat(splits,w,4);</td><td> </td><td class="right">                                       parseFloat(splits,w,4);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">if(!qFuzzyCompare(w,1.0f))</span></td><td> </td><td class="rblock">                                       <span class="insert">if((!qFuzzyCompare(w,1.0f)) &amp;&amp; (!ver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               qWarning(stelOBJ)&lt;&lt;"Vertex w</td><td> </td><td class="rblock"><span class="insert">texWWarned))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> coordinates different from 1.0 are not supported, changed to 1.0, on <span class="delete">line"</span></td><td> </td><td class="rblock"><span class="insert">                                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">&lt;&lt;lineNr;</span></td><td> </td><td class="rblock">                                               qWarning(stelOBJ)&lt;&lt;"Vertex w</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"> coordinates different from 1.0 are not supported, changed to 1.0, <span class="insert">starting</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"> on <span class="insert">line"&lt;&lt;lineNr;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               vertexWWarned=true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               switch(vertexOrder)</td><td> </td><td class="right">                               switch(vertexOrder)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       case XYZ:</td><td> </td><td class="right">                                       case XYZ:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               //no change</td><td> </td><td class="right">                                               //no change</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               break;</td><td> </td><td class="right">                                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       case XZY:</td><td> </td><td class="right">                                       case XZY:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               target.set(target[0],-target
[2],target[1]);</td><td> </td><td class="right">                                               target.set(target[0],-target
[2],target[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               break;</td><td> </td><td class="right">                                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       case YXZ:</td><td> </td><td class="right">                                       case YXZ:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 781</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 801</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("vt"))</td><td> </td><td class="right">                       else if(CMD_CMP("vt"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ok = parseVec2(splits,INC_LIST(texList));</td><td> </td><td class="right">                               ok = parseVec2(splits,INC_LIST(texList));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //check the optional w coord if we have a ve
c3, must be 0</td><td> </td><td class="right">                               //check the optional w coord if we have a ve
c3, must be 0</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               if(splits.size()&gt;3)</td><td> </td><td class="right">                               if(splits.size()&gt;3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       float w;</td><td> </td><td class="right">                                       float w;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       parseFloat(splits,w,3);</td><td> </td><td class="right">                                       parseFloat(splits,w,3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">if(!qFuzzyIsNull(w))</span></td><td> </td><td class="rblock">                                       <span class="insert">if( (!qFuzzyIsNull(w)) &amp;&amp; (!textureW</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                               qWarning(stelOBJ)&lt;&lt;"Texture </td><td> </td><td class="rblock"><span class="insert">Warned))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">w coordinates are not supported, on line"&lt;&lt;lineNr;</td><td> </td><td class="rblock"><span class="insert">                                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                               qWarning(stelOBJ)&lt;&lt;"Texture </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">w coordinates are not supported, <span class="insert">starting</span> on line"&lt;&lt;lineNr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                               <span class="insert">textureWWarned=true;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       else if(CMD_CMP("vn"))</td><td> </td><td class="right">                       else if(CMD_CMP("vn"))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       {</td><td> </td><td class="right">                       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               //we have to handle the vertex order</td><td> </td><td class="right">                               //we have to handle the vertex order</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               Vec3f&amp; target = INC_LIST(normalList);</td><td> </td><td class="right">                               Vec3f&amp; target = INC_LIST(normalList);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               ok = parseVec3(splits,target);</td><td> </td><td class="right">                               ok = parseVec3(splits,target);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               switch(vertexOrder)</td><td> </td><td class="right">                               switch(vertexOrder)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               {</td><td> </td><td class="right">                               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       case XYZ:</td><td> </td><td class="right">                                       case XYZ:</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 7 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>11 lines changed or deleted</i></th><th><i> </i></th><th><i>41 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
