<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux fomalhaut.local 3.13.0-38-generic #65-Ubuntu SMP Thu Oct 9 11:36:50 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.0.1 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.1 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: TelescopeClient.cpp - TelescopeClient.cpp</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;TelescopeClient.cpp&nbsp;</th><th> </th><th>&nbsp;TelescopeClient.cpp&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 51</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 51</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#include &lt;QTextStream&gt;</td><td> </td><td class="right">#include &lt;QTextStream&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#ifdef Q_OS_WIN32</td><td> </td><td class="right">#ifdef Q_OS_WIN32</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;windows.h&gt; // GetSystemTimeAsFileTime()</td><td> </td><td class="right">       #include &lt;windows.h&gt; // GetSystemTimeAsFileTime()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       #include &lt;sys/time.h&gt;</td><td> </td><td class="right">       #include &lt;sys/time.h&gt;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">TelescopeClient *TelescopeClient::create(const QString &amp;url)</td><td> </td><td class="right">TelescopeClient *TelescopeClient::create(const QString &amp;url)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       // example url: My_first_telescope:TCP:localhost:10000:500000</td><td> </td><td class="rblock">       // example url: My_first_telescope:TCP:<span class="insert">J2000:</span>localhost:10000:500000</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // split to:</td><td> </td><td class="right">       // split to:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // name    = My_first_telescope</td><td> </td><td class="right">       // name    = My_first_telescope</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // type    = TCP</td><td> </td><td class="right">       // type    = TCP</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       // equinox = J2000</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // params  = localhost:10000:500000</td><td> </td><td class="right">       // params  = localhost:10000:500000</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //</td><td> </td><td class="right">       //</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // The params part is optional.  We will use QRegExp to validate</td><td> </td><td class="right">       // The params part is optional.  We will use QRegExp to validate</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // the url and extact the components.</td><td> </td><td class="right">       // the url and extact the components.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // note, in a reg exp, [^:] matches any chararacter except ':'</td><td> </td><td class="right">       // note, in a reg exp, [^:] matches any chararacter except ':'</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QRegExp <span class="delete">recRx("^([^:]*):([^:]*)(:(.*))?$");</span></td><td> </td><td class="rblock">       QRegExp <span class="insert">urlSchema("^([^:]*):([^:]*):([^:]*)(?::(.*))?$");</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       QString name, type, params;</td><td> </td><td class="rblock">       QString name, type, <span class="insert">equinox,</span> params;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(recRx.exactMatch(url))</span></td><td> </td><td class="rblock">       if <span class="insert">(urlSchema.exactMatch(url))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               // trimmed removes whitespace on either end of a QString</td><td> </td><td class="right">               // trimmed removes whitespace on either end of a QString</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               name = <span class="delete">recRx.capturedTexts().at(1).trimmed();</span></td><td> </td><td class="rblock">               name = <span class="insert">urlSchema.capturedTexts().at(1).trimmed();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               type = <span class="delete">recRx.capturedTexts().at(2).trimmed();</span></td><td> </td><td class="rblock">               type = <span class="insert">urlSchema.capturedTexts().at(2).trimmed();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               params = <span class="delete">recRx.capturedTexts().at(4).trimmed();</span></td><td> </td><td class="rblock"><span class="insert">               equinox = urlSchema.capturedTexts().at(3).trimmed();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               params = <span class="insert">urlSchema.capturedTexts().at(4).trimmed();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING - telescope definition" &lt;&lt; url &lt;&lt; "no
t recognised";</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING - telescope definition" &lt;&lt; url &lt;&lt; "no
t recognised";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return NULL;</td><td> </td><td class="right">               return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       qDebug() &lt;&lt; "Creating telescope" &lt;&lt; url &lt;&lt; "; <span class="delete">name/type/params:"</span> &lt;&lt; </td><td> </td><td class="rblock">       <span class="insert">Equinox eq = EquinoxJ2000;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">name &lt;&lt; type &lt;&lt; params;</td><td> </td><td class="rblock"><span class="insert">       if (equinox == "JNow")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               eq = EquinoxJNow;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">       qDebug() &lt;&lt; "Creating telescope" &lt;&lt; url &lt;&lt; "; <span class="insert">name/type/equinox/para</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">ms:"</span> &lt;&lt; name &lt;&lt; type <span class="insert">&lt;&lt; ((eq == EquinoxJNow) ? "JNow" : "J2000")</span> &lt;&lt; params;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       TelescopeClient * newTelescope = 0;</td><td> </td><td class="right">       TelescopeClient * newTelescope = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       //if (type == "Dummy")</td><td> </td><td class="right">       //if (type == "Dummy")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (type == "TelescopeServerDummy")</td><td> </td><td class="right">       if (type == "TelescopeServerDummy")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               newTelescope = new TelescopeClientDummy(name, params);</td><td> </td><td class="right">               newTelescope = new TelescopeClientDummy(name, params);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (type == "TCP")</td><td> </td><td class="right">       else if (type == "TCP")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               newTelescope = new TelescopeTCP(name, params);</td><td> </td><td class="rblock">               newTelescope = new TelescopeTCP(name, params<span class="insert">, eq</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (type == "TelescopeServerLx200") //BM: One of the rare occas
ions of painless extension</td><td> </td><td class="right">       else if (type == "TelescopeServerLx200") //BM: One of the rare occas
ions of painless extension</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               newTelescope= new TelescopeClientDirectLx200(name, params);</td><td> </td><td class="rblock">               newTelescope= new TelescopeClientDirectLx200(name, params<span class="insert">, e
q</span>);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else if (type == "TelescopeServerNexStar")</td><td> </td><td class="right">       else if (type == "TelescopeServerNexStar")</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               newTelescope= new TelescopeClientDirectNexStar(name, params<span class="delete">)
</span>;</td><td> </td><td class="rblock">               newTelescope= new TelescopeClientDirectNexStar(name, params<span class="insert">,
 eq)</span>;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       else</td><td> </td><td class="right">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "WARNING - unknown telescope type" &lt;&lt; type &lt;&lt; 
"- not creating a telescope object for url" &lt;&lt; url;</td><td> </td><td class="right">               qWarning() &lt;&lt; "WARNING - unknown telescope type" &lt;&lt; type &lt;&lt; 
"- not creating a telescope object for url" &lt;&lt; url;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (newTelescope &amp;&amp; !newTelescope-&gt;isInitialized())</td><td> </td><td class="right">       if (newTelescope &amp;&amp; !newTelescope-&gt;isInitialized())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qDebug() &lt;&lt; "TelescopeClient::create(): Unable to create a t
elescope client.";</td><td> </td><td class="right">               qDebug() &lt;&lt; "TelescopeClient::create(): Unable to create a t
elescope client.";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               delete newTelescope;</td><td> </td><td class="right">               delete newTelescope;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 151</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 157</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       FILETIME file_time;</td><td> </td><td class="right">       FILETIME file_time;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       GetSystemTimeAsFileTime(&amp;file_time);</td><td> </td><td class="right">       GetSystemTimeAsFileTime(&amp;file_time);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return (*((__int64*)(&amp;file_time))/10) - 86400000000LL*134774;</td><td> </td><td class="right">       return (*((__int64*)(&amp;file_time))/10) - 86400000000LL*134774;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#else</td><td> </td><td class="right">#else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       struct timeval tv;</td><td> </td><td class="right">       struct timeval tv;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       gettimeofday(&amp;tv,0);</td><td> </td><td class="right">       gettimeofday(&amp;tv,0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       return tv.tv_sec * 1000000LL + tv.tv_usec;</td><td> </td><td class="right">       return tv.tv_sec * 1000000LL + tv.tv_usec;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">#endif</td><td> </td><td class="right">#endif</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">TelescopeTCP::TelescopeTCP(const QString &amp;name, const QString <span class="delete">&amp;params)</span> :</td><td> </td><td class="rblock">TelescopeTCP::TelescopeTCP(const QString &amp;name, const QString <span class="insert">&amp;params, Equi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           TelescopeClient(name),</td><td> </td><td class="rblock"><span class="insert">nox eq)</span> :</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           tcpSocket(new QTcpSocket()),</td><td> </td><td class="rblock">               TelescopeClient(name),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                           <span class="delete">end_position(positions+(sizeof(positions)/sizeof</span></td><td> </td><td class="rblock">               tcpSocket(new QTcpSocket()),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(positions[0])))</span></td><td> </td><td class="rblock">               <span class="insert">equinox(eq)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       hangup();</td><td> </td><td class="right">       hangup();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // Example params:</td><td> </td><td class="right">       // Example params:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // localhost:10000:500000</td><td> </td><td class="right">       // localhost:10000:500000</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // split into:</td><td> </td><td class="right">       // split into:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // host       = localhost</td><td> </td><td class="right">       // host       = localhost</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // port       = 10000 (int)</td><td> </td><td class="right">       // port       = 10000 (int)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       // time_delay = 500000 (int)</td><td> </td><td class="right">       // time_delay = 500000 (int)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 222</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 228</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(address.isNull())</td><td> </td><td class="right">       if(address.isNull())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               qWarning() &lt;&lt; "ERROR creating TelescopeTCP: cannot find IPv4
 address. Addresses found at " &lt;&lt; host &lt;&lt; ":" &lt;&lt; info.addresses();</td><td> </td><td class="right">               qWarning() &lt;&lt; "ERROR creating TelescopeTCP: cannot find IPv4
 address. Addresses found at " &lt;&lt; host &lt;&lt; ":" &lt;&lt; info.addresses();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               return;</td><td> </td><td class="right">               return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       end_of_timeout = -0x8000000000000000LL;</td><td> </td><td class="right">       end_of_timeout = -0x8000000000000000LL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">resetPositions</span>();</td><td> </td><td class="rblock">       <span class="insert">interpolatedPosition.reset</span>();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       connect(tcpSocket, SIGNAL(error(QAbstractSocket::SocketError)), this
, SLOT(socketFailed(QAbstractSocket::SocketError)));</td><td> </td><td class="right">       connect(tcpSocket, SIGNAL(error(QAbstractSocket::SocketError)), this
, SLOT(socketFailed(QAbstractSocket::SocketError)));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeTCP::hangup(void)</td><td> </td><td class="right">void TelescopeTCP::hangup(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (tcpSocket-&gt;isValid())</td><td> </td><td class="right">       if (tcpSocket-&gt;isValid())</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               tcpSocket-&gt;abort();// Or maybe tcpSocket-&gt;close()?</td><td> </td><td class="right">               tcpSocket-&gt;abort();// Or maybe tcpSocket-&gt;close()?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       readBufferEnd = readBuffer;</td><td> </td><td class="right">       readBufferEnd = readBuffer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       writeBufferEnd = writeBuffer;</td><td> </td><td class="right">       writeBufferEnd = writeBuffer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       wait_for_connection_establishment = false;</td><td> </td><td class="right">       wait_for_connection_establishment = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">resetPositions();</span></td><td> </td><td class="rblock">       <span class="insert">interpolatedPosition.reset();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">//! resets/initializes the array of positions kept for position interpolati</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">on</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">void TelescopeTCP::resetPositions()</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       for (position_pointer = positions; position_pointer &lt; end_position; </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">position_pointer++)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               position_pointer-&gt;server_micros = 0x7FFFFFFFFFFFFFFFLL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               position_pointer-&gt;client_micros = 0x7FFFFFFFFFFFFFFFLL;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               position_pointer-&gt;pos[0] = 0.0;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               position_pointer-&gt;pos[1] = 0.0;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               position_pointer-&gt;pos[2] = 0.0;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               position_pointer-&gt;status = 0;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       position_pointer = positions;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! queues a GOTO command with the specified position to the write buffer.</td><td> </td><td class="right">//! queues a GOTO command with the specified position to the write buffer.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! For the data format of the command see the</td><td> </td><td class="right">//! For the data format of the command see the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! "Stellarium telescope control protocol" text file</td><td> </td><td class="right">//! "Stellarium telescope control protocol" text file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeTCP::telescopeGoto(const Vec3d &amp;j2000Pos)</td><td> </td><td class="right">void TelescopeTCP::telescopeGoto(const Vec3d &amp;j2000Pos)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(isConnected())</span></td><td> </td><td class="rblock">       if <span class="insert">(!isConnected())</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">               return;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       Vec3d position = j2000Pos;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">       if (equinox == EquinoxJNow)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (writeBufferEnd - writeBuffer + 20 &lt; <span class="delete">(int)sizeof(writeBuf</span></td><td> </td><td class="rblock">               <span class="insert">const StelNavigator* navigator = StelApp::getInstance().getC</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">fer))</span></td><td> </td><td class="rblock"><span class="insert">ore()-&gt;getNavigator();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               {</td><td> </td><td class="rblock"><span class="insert">               position = navigator-&gt;j2000ToEquinoxEqu(j2000Pos);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const double ra_signed = <span class="delete">atan2(j2000Pos[1], j2000Pos</span></td><td> </td><td class="rblock"><span class="insert">       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">[0]);</span></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       //Workaround for the discrepancy in precision <span class="delete">betwee</span></td><td> </td><td class="rblock">       if (writeBufferEnd - writeBuffer + 20 &lt; <span class="insert">(int)sizeof(writeBuffer))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">n Windows/Linux/PPC</span> Macs and Intel Macs:</td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const double ra = (ra_signed &gt;= 0) ? ra_signed : <span class="delete">(ra</span></td><td> </td><td class="rblock">               const double ra_signed = <span class="insert">atan2(position[1], position[0]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">_signed</span> + 2.0 * M_PI);</td><td> </td><td class="rblock">               //Workaround for the discrepancy in precision <span class="insert">between Window</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const double dec = <span class="delete">atan2(j2000Pos[2], sqrt(j2000Pos[</span></td><td> </td><td class="rblock"><span class="insert">s/Linux/PPC</span> Macs and Intel Macs:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">0]*j2000Pos[0]+j2000Pos[1]*j2000Pos[1]));</span></td><td> </td><td class="rblock">               const double ra = (ra_signed &gt;= 0) ? ra_signed : <span class="insert">(ra_signed</span> </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       unsigned int ra_int = (unsigned int)floor(0.5 + <span class="delete">ra*(</span></td><td> </td><td class="rblock">+ 2.0 * M_PI);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">((unsigned</span> int)0x80000000)/M_PI));</td><td> </td><td class="rblock">               const double dec = <span class="insert">atan2(position[2], sqrt(position[0]*posit</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       int dec_int = (int)floor(0.5 + dec*(((unsigned <span class="delete">int)0</span></td><td> </td><td class="rblock"><span class="insert">ion[0]+position[1]*position[1]));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">x80000000)/M_PI));</span></td><td> </td><td class="rblock">               unsigned int ra_int = (unsigned int)floor(0.5 + <span class="insert">ra*(((unsign</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // length of packet:</td><td> </td><td class="rblock"><span class="insert">ed</span> int)0x80000000)/M_PI));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = 20;</td><td> </td><td class="rblock">               int dec_int = (int)floor(0.5 + dec*(((unsigned <span class="insert">int)0x8000000</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = 0;</td><td> </td><td class="rblock"><span class="insert">0)/M_PI));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // type of packet:</td><td> </td><td class="rblock">               // length of packet:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = 0;</td><td> </td><td class="rblock">               *writeBufferEnd++ = 20;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = 0;</td><td> </td><td class="rblock">               *writeBufferEnd++ = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // client_micros:</td><td> </td><td class="rblock">               // type of packet:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       qint64 now = getNow();</td><td> </td><td class="rblock">               *writeBufferEnd++ = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               *writeBufferEnd++ = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               // client_micros:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               qint64 now = getNow();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       now&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = now;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // ra:</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = ra_int;</td><td> </td><td class="rblock">               now&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       ra_int&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = ra_int;</td><td> </td><td class="rblock">               // ra:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       ra_int&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = ra_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = ra_int;</td><td> </td><td class="rblock">               ra_int&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       ra_int&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = ra_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = ra_int;</td><td> </td><td class="rblock">               ra_int&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       // dec:</td><td> </td><td class="rblock">               *writeBufferEnd++ = ra_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = dec_int;</td><td> </td><td class="rblock">               ra_int&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       dec_int&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = ra_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = dec_int;</td><td> </td><td class="rblock">               // dec:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       dec_int&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = dec_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = dec_int;</td><td> </td><td class="rblock">               dec_int&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       dec_int&gt;&gt;=8;</td><td> </td><td class="rblock">               *writeBufferEnd++ = dec_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       *writeBufferEnd++ = dec_int;</td><td> </td><td class="rblock">               dec_int&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">               *writeBufferEnd++ = dec_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               else</td><td> </td><td class="rblock">               dec_int&gt;&gt;=8;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               {</td><td> </td><td class="rblock">               *writeBufferEnd++ = dec_int;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       qDebug() &lt;&lt; "TelescopeTCP(" &lt;&lt; name &lt;&lt; <span class="delete">")::telescope</span></td><td> </td><td class="rblock">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">Goto: "&lt;&lt;</span> "communication is too slow, I will ignore this command";</td><td> </td><td class="rblock">       else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">}</span></td><td> </td><td class="rblock">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">               qDebug() &lt;&lt; "TelescopeTCP(" &lt;&lt; name &lt;&lt; <span class="insert">")::telescopeGoto: "&lt;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">&lt;</span> "communication is too slow, I will ignore this command";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void TelescopeTCP::performWriting(void)</td><td> </td><td class="right">void TelescopeTCP::performWriting(void)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int to_write = writeBufferEnd - writeBuffer;</td><td> </td><td class="right">       const int to_write = writeBufferEnd - writeBuffer;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const int rc = tcpSocket-&gt;write(writeBuffer, to_write);</td><td> </td><td class="right">       const int rc = tcpSocket-&gt;write(writeBuffer, to_write);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (rc &lt; 0)</td><td> </td><td class="right">       if (rc &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               //TODO: Better error message. See the Qt documentation.</td><td> </td><td class="right">               //TODO: Better error message. See the Qt documentation.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 420</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 418</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               (int)(((unsigned int)(unsign
ed char)(p[16])) |</td><td> </td><td class="right">                                               (int)(((unsigned int)(unsign
ed char)(p[16])) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    (((unsigned int)(unsign
ed char)(p[17])) &lt;&lt;  8) |</td><td> </td><td class="right">                                                    (((unsigned int)(unsign
ed char)(p[17])) &lt;&lt;  8) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    (((unsigned int)(unsign
ed char)(p[18])) &lt;&lt; 16) |</td><td> </td><td class="right">                                                    (((unsigned int)(unsign
ed char)(p[18])) &lt;&lt; 16) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    (((unsigned int)(unsign
ed char)(p[19])) &lt;&lt; 24));</td><td> </td><td class="right">                                                    (((unsigned int)(unsign
ed char)(p[19])) &lt;&lt; 24));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const int status =</td><td> </td><td class="right">                                       const int status =</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                               (int)(((unsigned int)(unsign
ed char)(p[20])) |</td><td> </td><td class="right">                                               (int)(((unsigned int)(unsign
ed char)(p[20])) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    (((unsigned int)(unsign
ed char)(p[21])) &lt;&lt;  8) |</td><td> </td><td class="right">                                                    (((unsigned int)(unsign
ed char)(p[21])) &lt;&lt;  8) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    (((unsigned int)(unsign
ed char)(p[22])) &lt;&lt; 16) |</td><td> </td><td class="right">                                                    (((unsigned int)(unsign
ed char)(p[22])) &lt;&lt; 16) |</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                                    (((unsigned int)(unsign
ed char)(p[23])) &lt;&lt; 24));</td><td> </td><td class="right">                                                    (((unsigned int)(unsign
ed char)(p[23])) &lt;&lt; 24));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">// remember the time and received po</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">sition so that later we</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       // will know where the telescope is </span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">pointing to:</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       position_pointer++;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       if (position_pointer &gt;= end_position</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                               position_pointer = positions</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       position_pointer-&gt;server_micros = se</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">rver_micros;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       position_pointer-&gt;client_micros = ge</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">tNow();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double ra  =  ra_int * (M_PI/(
unsigned int)0x80000000);</td><td> </td><td class="right">                                       const double ra  =  ra_int * (M_PI/(
unsigned int)0x80000000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double dec = dec_int * (M_PI/(
unsigned int)0x80000000);</td><td> </td><td class="right">                                       const double dec = dec_int * (M_PI/(
unsigned int)0x80000000);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       const double cdec = cos(dec);</td><td> </td><td class="right">                                       const double cdec = cos(dec);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       <span class="delete">position_pointer-&gt;pos[0]</span> = <span class="delete">cos(ra)*c</span></td><td> </td><td class="rblock">                                       <span class="insert">Vec3d position(cos(ra)*cdec, sin(ra)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dec;</span></td><td> </td><td class="rblock"><span class="insert">*cdec, sin(dec));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       position_pointer-&gt;pos[1]</span> = <span class="delete">sin(ra)*c</span></td><td> </td><td class="rblock"><span class="insert">                                       Vec3d j2000Position</span> = <span class="insert">position;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dec;</span></td><td> </td><td class="rblock"><span class="insert">                                       if (equinox == EquinoxJNow)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       position_pointer-&gt;pos[2]</span> = <span class="delete">sin(dec);</span></td><td> </td><td class="rblock"><span class="insert">                                       {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                       position_pointer-&gt;status = status;</span></td><td> </td><td class="rblock"><span class="insert">                                               const StelNavigator* navigat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">or</span> = <span class="insert">StelApp::getInstance().getCore()-&gt;getNavigator();</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                               j2000Position</span> = <span class="insert">navigator-&gt;e</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">quinoxEquToJ2000(position);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                                       interpolatedPosition.add(j2000Positi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">on, getNow(), server_micros, status);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               }</td><td> </td><td class="right">                               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               default:</td><td> </td><td class="right">                               default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                                       qDebug() &lt;&lt; "TelescopeTCP(" &lt;&lt; name 
&lt;&lt; ")::performReading: " &lt;&lt; "ignoring unknown packet, type: " &lt;&lt; type;</td><td> </td><td class="right">                                       qDebug() &lt;&lt; "TelescopeTCP(" &lt;&lt; name 
&lt;&lt; ")::performReading: " &lt;&lt; "ignoring unknown packet, type: " &lt;&lt; type;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               break;</td><td> </td><td class="right">                               break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       }</td><td> </td><td class="right">                       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       p += size;</td><td> </td><td class="right">                       p += size;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (p &gt;= readBufferEnd)</td><td> </td><td class="right">               if (p &gt;= readBufferEnd)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 460</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 455</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       memmove(readBuffer, p, readBufferEnd - p);</td><td> </td><td class="right">                       memmove(readBuffer, p, readBufferEnd - p);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       readBufferEnd -= (p - readBuffer);</td><td> </td><td class="right">                       readBufferEnd -= (p - readBuffer);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! estimates where the telescope is by interpolation in the stored</td><td> </td><td class="right">//! estimates where the telescope is by interpolation in the stored</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! telescope positions:</td><td> </td><td class="right">//! telescope positions:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">Vec3d TelescopeTCP::getJ2000EquatorialPos(const StelNavigator*) const</td><td> </td><td class="right">Vec3d TelescopeTCP::getJ2000EquatorialPos(const StelNavigator*) const</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">if (position_pointer-&gt;client_micros == 0x7FFFFFFFFFFFFFFFLL)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               return Vec3d(0,0,0);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       const qint64 now = getNow() - time_delay;</td><td> </td><td class="right">       const qint64 now = getNow() - time_delay;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">const Position *p = position_pointer;</span></td><td> </td><td class="rblock">       return <span class="insert">interpolatedPosition.get(now);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       do</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               const Position *pp = p;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               if (pp == positions) pp = end_position;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               pp--;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               if (pp-&gt;client_micros == 0x7FFFFFFFFFFFFFFFLL) break;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               if (pp-&gt;client_micros &lt;= now &amp;&amp; now &lt;= p-&gt;client_micros)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       if (pp-&gt;client_micros != p-&gt;client_micros)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               Vec3d rval = p-&gt;pos * (now - pp-&gt;client_micr</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">os) + pp-&gt;pos * (p-&gt;client_micros - now);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               double f = rval.lengthSquared();</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               if (f &gt; 0.0)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               {</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       return <span class="delete">(1.0/sqrt(f))*rval;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       break;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               p = pp;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       while (p != position_pointer);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return p-&gt;pos;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//! checks if the socket is connected, tries to connect if it is not</td><td> </td><td class="right">//! checks if the socket is connected, tries to connect if it is not</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">//@return true if the socket is connected</td><td> </td><td class="right">//@return true if the socket is connected</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool TelescopeTCP::prepareCommunication()</td><td> </td><td class="right">bool TelescopeTCP::prepareCommunication()</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if(tcpSocket-&gt;state() == QAbstractSocket::ConnectedState)</td><td> </td><td class="right">       if(tcpSocket-&gt;state() == QAbstractSocket::ConnectedState)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       {</td><td> </td><td class="right">       {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if(wait_for_connection_establishment)</td><td> </td><td class="right">               if(wait_for_connection_establishment)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               {</td><td> </td><td class="right">               {</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 17 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>145 lines changed or deleted</i></th><th><i> </i></th><th><i>105 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
