<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: core/StelNavigator.hpp Source File</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="scripting.html">Scripting</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.5 -->
<h1>core/StelNavigator.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Stellarium</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright (C) 2002 Fabien Chereau</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00007"></a>00007 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00008"></a>00008 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"> *</span>
<a name="l00015"></a>00015 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef _STELNAVIGATOR_HPP_</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define _STELNAVIGATOR_HPP_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "VecMath.hpp"</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include "StelLocation.hpp"</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;QObject&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;QString&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;QTime&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;QDateTime&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">// Conversion in standar Julian time format</span>
<a name="l00032"></a>00032 <span class="preprocessor">#define JD_SECOND 0.000011574074074074074074</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define JD_MINUTE 0.00069444444444444444444</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define JD_HOUR   0.041666666666666666666</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define JD_DAY    1.</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="classStelObserver.html" title="Should be renamed as PlanetBasedObserver and derive from a more generical StelObserver...">StelObserver</a>;
<a name="l00038"></a>00038 <span class="keyword">class </span><a class="code" href="classStelObject.html" title="The base abstract class for sky objects used in Stellarium like Stars, Planets, Constellations...">StelObject</a>;
<a name="l00039"></a>00039 
<a name="l00046"></a><a class="code" href="classStelNavigator.html">00046</a> <span class="keyword">class </span><a class="code" href="classStelNavigator.html" title="Manages a navigation context.">StelNavigator</a> : <span class="keyword">public</span> QObject
<a name="l00047"></a>00047 {
<a name="l00048"></a>00048     Q_OBJECT
<a name="l00049"></a>00049     Q_PROPERTY(<span class="keywordtype">double</span> timeRate READ <a class="code" href="classStelNavigator.html#af4e1bba5df094d31615ea0bcee950ee" title="Get time speed in JDay/sec.">getTimeRate</a> WRITE <a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>)
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">public</span>:
<a name="l00052"></a>00052     <span class="comment">// Create and initialise to default a navigation context</span>
<a name="l00053"></a>00053     <a class="code" href="classStelNavigator.html" title="Manages a navigation context.">StelNavigator</a>();
<a name="l00054"></a>00054     ~<a class="code" href="classStelNavigator.html" title="Manages a navigation context.">StelNavigator</a>();
<a name="l00055"></a>00055 
<a name="l00056"></a>00056     <span class="keywordtype">void</span> init();
<a name="l00057"></a>00057 
<a name="l00058"></a>00058     <span class="keywordtype">void</span> updateTime(<span class="keywordtype">double</span> deltaTime);
<a name="l00059"></a>00059     <span class="keywordtype">void</span> updateTransformMatrices(<span class="keywordtype">void</span>);
<a name="l00060"></a>00060 
<a name="l00062"></a>00062     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#320e65beb19de5447ccc9f8d3324d37d" title="Get vision direction.">lookAtJ2000</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; pos, <span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; up);
<a name="l00063"></a>00063 
<a name="l00065"></a>00065     <span class="keyword">const</span> <a class="code" href="classStelLocation.html" title="Store the informations for a location on a planet.">StelLocation</a>&amp; <a class="code" href="classStelNavigator.html#b1a8b29a84881593e6111d4b1e76f905" title="Get the informations on the current location.">getCurrentLocation</a>() <span class="keyword">const</span>;
<a name="l00066"></a>00066 
<a name="l00072"></a>00072     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7be565509751d718522dc1301e5e8ab0" title="Smoothly move the observer to the given location.">moveObserverTo</a>(<span class="keyword">const</span> <a class="code" href="classStelLocation.html" title="Store the informations for a location on a planet.">StelLocation</a>&amp; target, <span class="keywordtype">double</span> duration=1., <span class="keywordtype">double</span> durationIfPlanetChange=1.);
<a name="l00073"></a>00073 
<a name="l00076"></a>00076     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#f3d566de17b40cee76994706c6e0b830" title="Get the sideral time shifted by the observer longitude.">getLocalSideralTime</a>() <span class="keyword">const</span>;
<a name="l00077"></a>00077 
<a name="l00079"></a>00079     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#f4e3629ad532cdf53b41d0e8f52b0d12" title="Get the duration of a sideral day for the current observer in day.">getLocalSideralDayLength</a>() <span class="keyword">const</span>;
<a name="l00080"></a>00080 
<a name="l00082"></a>00082     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#c26aa394a97c05c81468478e28bbbb19" title="Return the observer heliocentric ecliptic position.">getObserverHeliocentricEclipticPos</a>() <span class="keyword">const</span>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     <a class="code" href="classVector3.html">Vec3d</a> altAzToEquinoxEqu(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzToEquinoxEqu*v;}
<a name="l00086"></a>00086     <a class="code" href="classVector3.html">Vec3d</a> equinoxEquToAltAz(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matEquinoxEquToAltAz*v;}
<a name="l00087"></a>00087     <a class="code" href="classVector3.html">Vec3d</a> equinoxEquToJ2000(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matEquinoxEquToJ2000*v;}
<a name="l00088"></a>00088     <a class="code" href="classVector3.html">Vec3d</a> altAzToJ2000(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matEquinoxEquToJ2000*matAltAzToEquinoxEqu*v;}
<a name="l00089"></a>00089     <a class="code" href="classVector3.html">Vec3d</a> galacticToJ2000(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classStelNavigator.html#ea996321426f7d5677eb878713ef7711" title="Rotation matrix from J2000 to Galactic reference frame, using FITS convention.">matGalacticToJ2000</a>*v;}
<a name="l00090"></a>00090     <a class="code" href="classVector3.html">Vec3d</a> j2000ToEquinoxEqu(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matJ2000ToEquinoxEqu*v;}
<a name="l00091"></a>00091     <a class="code" href="classVector3.html">Vec3d</a> j2000ToAltAz(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matJ2000ToAltAz*v;}
<a name="l00092"></a>00092     <a class="code" href="classVector3.html">Vec3d</a> j2000ToGalactic(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classStelNavigator.html#bd0d43484273923d2c3d4072a2cde20a" title="Rotation matrix from J2000 to Galactic reference frame, using FITS convention.">matJ2000ToGalactic</a>*v;}
<a name="l00094"></a><a class="code" href="classStelNavigator.html#f609e2d12e83562f6223fe16227806e3">00094</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#f609e2d12e83562f6223fe16227806e3" title="Transform vector from heliocentric ecliptic coordinate to altazimuthal.">heliocentricEclipticToAltAz</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matHeliocentricEclipticToAltAz*v;}
<a name="l00096"></a><a class="code" href="classStelNavigator.html#24b3c131b2b9469803103abbfce68507">00096</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#24b3c131b2b9469803103abbfce68507" title="Transform from heliocentric coordinate to equatorial at current equinox (for the...">heliocentricEclipticToEquinoxEqu</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matHeliocentricEclipticToEquinoxEqu*v;}
<a name="l00099"></a><a class="code" href="classStelNavigator.html#cae63beae857baba95b6180d46f3b3d3">00099</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#cae63beae857baba95b6180d46f3b3d3" title="Transform vector from heliocentric coordinate to false equatorial : equatorial coordinate...">heliocentricEclipticToEarthPosEquinoxEqu</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzToEquinoxEqu*matHeliocentricEclipticToAltAz*v;}
<a name="l00100"></a>00100 
<a name="l00102"></a><a class="code" href="classStelNavigator.html#5e1ef8cb866c0301e5fbbfd48c9e8267">00102</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#5e1ef8cb866c0301e5fbbfd48c9e8267" title="Get the modelview matrix for heliocentric ecliptic (Vsop87) drawing.">getHeliocentricEclipticModelViewMat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matHeliocentricEclipticToAltAz;}
<a name="l00104"></a><a class="code" href="classStelNavigator.html#a49d6f6f5c0543246c35ac3601c4d5f7">00104</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#a49d6f6f5c0543246c35ac3601c4d5f7" title="Get the modelview matrix for observer-centric ecliptic (Vsop87) drawing.">getObservercentricEclipticModelViewMat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matJ2000ToAltAz*<a class="code" href="classStelNavigator.html#3fb0f0d448d73a1c4429ddffdc36bafd" title="Rotation matrix from ecliptic (Vsop87) to equatorial J2000.">matVsop87ToJ2000</a>;}
<a name="l00106"></a><a class="code" href="classStelNavigator.html#60257393ec47710a707e340924bdf18f">00106</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#60257393ec47710a707e340924bdf18f" title="Get the modelview matrix for observer-centric equatorial at equinox drawing.">getEquinoxEquModelViewMat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matEquinoxEquToAltAz;}
<a name="l00108"></a><a class="code" href="classStelNavigator.html#435b7a3b05c3e4c06403f8dedb348d06">00108</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a>&amp; <a class="code" href="classStelNavigator.html#435b7a3b05c3e4c06403f8dedb348d06" title="Get the modelview matrix for observer-centric altazimuthal drawing.">getAltAzModelViewMat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView;}
<a name="l00110"></a><a class="code" href="classStelNavigator.html#7e55d83b10716d8ed41f0d29f118da54">00110</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#7e55d83b10716d8ed41f0d29f118da54" title="Get the modelview matrix for observer-centric J2000 equatorial drawing.">getJ2000ModelViewMat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matEquinoxEquToAltAz*matJ2000ToEquinoxEqu;}
<a name="l00112"></a><a class="code" href="classStelNavigator.html#10d1db3f1322dc6d22ea6f6ab31e5288">00112</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#10d1db3f1322dc6d22ea6f6ab31e5288" title="Get the modelview matrix for observer-centric Galactic equatorial drawing.">getGalacticModelViewMat</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classStelNavigator.html#7e55d83b10716d8ed41f0d29f118da54" title="Get the modelview matrix for observer-centric J2000 equatorial drawing.">getJ2000ModelViewMat</a>()*<a class="code" href="classStelNavigator.html#ea996321426f7d5677eb878713ef7711" title="Rotation matrix from J2000 to Galactic reference frame, using FITS convention.">matGalacticToJ2000</a>;}
<a name="l00113"></a>00113 
<a name="l00115"></a><a class="code" href="classStelNavigator.html#08d3282ca8ad23d4a010f79724ca6b13">00115</a>     QString <a class="code" href="classStelNavigator.html#08d3282ca8ad23d4a010f79724ca6b13" title="Return the startup mode, can be preset|Preset or anything else.">getStartupTimeMode</a>() {<span class="keywordflow">return</span> startupTimeMode;}
<a name="l00116"></a>00116     <span class="keywordtype">void</span> setStartupTimeMode(<span class="keyword">const</span> QString&amp; s);
<a name="l00117"></a>00117 
<a name="l00119"></a><a class="code" href="classStelNavigator.html#a9fee423880593e776c7579616849139">00119</a>     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#a9fee423880593e776c7579616849139" title="Rotation matrix from equatorial J2000 to ecliptic (Vsop87).">matJ2000ToVsop87</a>;
<a name="l00121"></a><a class="code" href="classStelNavigator.html#3fb0f0d448d73a1c4429ddffdc36bafd">00121</a>     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#3fb0f0d448d73a1c4429ddffdc36bafd" title="Rotation matrix from ecliptic (Vsop87) to equatorial J2000.">matVsop87ToJ2000</a>;
<a name="l00123"></a><a class="code" href="classStelNavigator.html#bd0d43484273923d2c3d4072a2cde20a">00123</a>     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#bd0d43484273923d2c3d4072a2cde20a" title="Rotation matrix from J2000 to Galactic reference frame, using FITS convention.">matJ2000ToGalactic</a>;
<a name="l00125"></a><a class="code" href="classStelNavigator.html#ea996321426f7d5677eb878713ef7711">00125</a>     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> <a class="code" href="classStelNavigator.html#ea996321426f7d5677eb878713ef7711" title="Rotation matrix from J2000 to Galactic reference frame, using FITS convention.">matGalacticToJ2000</a>;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="keyword">public</span> slots:
<a name="l00129"></a><a class="code" href="classStelNavigator.html#79ad4821ef045bb2080b38abb4bd0a4f">00129</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#79ad4821ef045bb2080b38abb4bd0a4f" title="Set the current date in Julian Day.">setJDay</a>(<span class="keywordtype">double</span> JD) {JDay=JD;}
<a name="l00131"></a><a class="code" href="classStelNavigator.html#690b0e219e82670eb206d8afa15bc164">00131</a>     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#690b0e219e82670eb206d8afa15bc164" title="Get the current date in Julian Day.">getJDay</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> JDay;}
<a name="l00132"></a>00132 
<a name="l00134"></a><a class="code" href="classStelNavigator.html#b03b1d792e9e6a117eb38d832be40a74">00134</a>     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#b03b1d792e9e6a117eb38d832be40a74" title="Return the preset sky time in JD.">getPresetSkyTime</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> presetSkyTime;}
<a name="l00136"></a><a class="code" href="classStelNavigator.html#c337491dda46cc804eeea74643c0d6af">00136</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#c337491dda46cc804eeea74643c0d6af" title="Set the preset sky time from a JD.">setPresetSkyTime</a>(<span class="keywordtype">double</span> d) {presetSkyTime=d;}
<a name="l00137"></a>00137 
<a name="l00139"></a><a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149">00139</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>(<span class="keywordtype">double</span> ts) {timeSpeed=ts; emit <a class="code" href="classStelNavigator.html#a1a53abf703ad19ec06d4184ae47734d" title="This signal is emitted when the time rate has changed.">timeRateChanged</a>(timeSpeed);}
<a name="l00141"></a><a class="code" href="classStelNavigator.html#af4e1bba5df094d31615ea0bcee950ee">00141</a>     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#af4e1bba5df094d31615ea0bcee950ee" title="Get time speed in JDay/sec.">getTimeRate</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> timeSpeed;}
<a name="l00142"></a>00142 
<a name="l00144"></a>00144     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#4b2a101cc4bbe8794c4c82766ff90b7d" title="Increase the time speed.">increaseTimeSpeed</a>();
<a name="l00146"></a>00146     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#23975c049321496f93f44591150bad93" title="Decrease the time speed.">decreaseTimeSpeed</a>();
<a name="l00148"></a>00148     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#cfb5b7337694e80eb4214c23df35c157" title="Increase the time speed, but not as much as with increaseTimeSpeed().">increaseTimeSpeedLess</a>();
<a name="l00150"></a>00150     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#bc3181eaa9e57f2ed109c7f872f70d38" title="Decrease the time speed but not as much as with decreaseTimeSpeed().">decreaseTimeSpeedLess</a>();
<a name="l00151"></a>00151 
<a name="l00153"></a><a class="code" href="classStelNavigator.html#3e65670b0d93853ad963642f4aa17d2c">00153</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#3e65670b0d93853ad963642f4aa17d2c" title="Set time speed to 0, i.e. freeze the passage of simulation time.">setZeroTimeSpeed</a>() {<a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>(0);}
<a name="l00155"></a><a class="code" href="classStelNavigator.html#d4d4729c67323a6517f1d22eea7874a7">00155</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d4d4729c67323a6517f1d22eea7874a7" title="Set real time speed, i.e. 1 sec/sec.">setRealTimeSpeed</a>() {<a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>(JD_SECOND);}
<a name="l00157"></a><a class="code" href="classStelNavigator.html#d2dc69452d7fb354d87a9aca29145221">00157</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d2dc69452d7fb354d87a9aca29145221" title="Set real time speed or pause simulation if we are already in realtime speed.">toggleRealTimeSpeed</a>() {(!<a class="code" href="classStelNavigator.html#434ea0ef0ae4d7f80fa33d6b5311569c" title="Get whether it is real time speed, i.e. 1 sec/sec.">getRealTimeSpeed</a>()) ? <a class="code" href="classStelNavigator.html#d4d4729c67323a6517f1d22eea7874a7" title="Set real time speed, i.e. 1 sec/sec.">setRealTimeSpeed</a>() : <a class="code" href="classStelNavigator.html#3e65670b0d93853ad963642f4aa17d2c" title="Set time speed to 0, i.e. freeze the passage of simulation time.">setZeroTimeSpeed</a>();}
<a name="l00159"></a><a class="code" href="classStelNavigator.html#434ea0ef0ae4d7f80fa33d6b5311569c">00159</a>     <span class="keywordtype">bool</span> <a class="code" href="classStelNavigator.html#434ea0ef0ae4d7f80fa33d6b5311569c" title="Get whether it is real time speed, i.e. 1 sec/sec.">getRealTimeSpeed</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (fabs(timeSpeed-JD_SECOND)&lt;0.0000001);}
<a name="l00160"></a>00160 
<a name="l00162"></a>00162     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#870ecd4173947ca7dfcff953b077ce55" title="Set stellarium time to current real world time.">setTimeNow</a>();
<a name="l00164"></a>00164     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7faf44889873e36cbfe36d1ceff21071" title="Set the time to some value, leaving the day the same.">setTodayTime</a>(<span class="keyword">const</span> QTime&amp; target);
<a name="l00166"></a>00166     <span class="keywordtype">bool</span> <a class="code" href="classStelNavigator.html#d24f40823ffca69b3d053eafed9c7e1f" title="Get whether the current stellarium time is the real world time.">getIsTimeNow</a>() <span class="keyword">const</span>;
<a name="l00167"></a>00167 
<a name="l00169"></a><a class="code" href="classStelNavigator.html#fb4f17c48016575a5755547bc0998602">00169</a>     QTime <a class="code" href="classStelNavigator.html#fb4f17c48016575a5755547bc0998602" title="get the initial &amp;quot;today time&amp;quot; from the config file">getInitTodayTime</a>(<span class="keywordtype">void</span>) {<span class="keywordflow">return</span> initTodayTime;}
<a name="l00171"></a><a class="code" href="classStelNavigator.html#1e337ff065c2dada74a4332d0fe5eb99">00171</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#1e337ff065c2dada74a4332d0fe5eb99" title="set the initial &amp;quot;today time&amp;quot; from the config file">setInitTodayTime</a>(<span class="keyword">const</span> QTime&amp; t) {initTodayTime=t;}
<a name="l00173"></a>00173     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#c337491dda46cc804eeea74643c0d6af" title="Set the preset sky time from a JD.">setPresetSkyTime</a>(QDateTime dt);
<a name="l00174"></a>00174 
<a name="l00176"></a><a class="code" href="classStelNavigator.html#bbe44791cf02b8f38f5df8603c52fdb4">00176</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#bbe44791cf02b8f38f5df8603c52fdb4" title="Add one [Earth, solar] hour to the current simulation time.">addHour</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(0.04166666666666666667);}
<a name="l00178"></a><a class="code" href="classStelNavigator.html#d195e13eadf8cd706e0d05f3eb1bfdd9">00178</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d195e13eadf8cd706e0d05f3eb1bfdd9" title="Add one [Earth, solar] day to the current simulation time.">addDay</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(1.0);}
<a name="l00180"></a><a class="code" href="classStelNavigator.html#2b7fc996a1faaeeabd8996e97d52205e">00180</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#2b7fc996a1faaeeabd8996e97d52205e" title="Add one [Earth, solar] week to the current simulation time.">addWeek</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(7.0);}
<a name="l00181"></a>00181 
<a name="l00184"></a><a class="code" href="classStelNavigator.html#029792e6c9267486d3753d8a7ca1b4cc">00184</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#029792e6c9267486d3753d8a7ca1b4cc" title="Add one sidereal day to the simulation time.">addSiderealDay</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(1.0);}
<a name="l00187"></a><a class="code" href="classStelNavigator.html#9474b9310bdc791213ea9c75b806e1e4">00187</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#9474b9310bdc791213ea9c75b806e1e4" title="Add one sidereal week to the simulation time.">addSiderealWeek</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(7.0);}
<a name="l00188"></a>00188 
<a name="l00190"></a><a class="code" href="classStelNavigator.html#997867487612d08a9cbabf17e442da34">00190</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#997867487612d08a9cbabf17e442da34" title="Subtract one [Earth, solar] hour to the current simulation time.">subtractHour</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(-0.04166666666666666667);}
<a name="l00192"></a><a class="code" href="classStelNavigator.html#9c94b3567f456eee8744f22d8da21833">00192</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#9c94b3567f456eee8744f22d8da21833" title="Subtract one [Earth, solar] day to the current simulation time.">subtractDay</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(-1.0);}
<a name="l00194"></a><a class="code" href="classStelNavigator.html#7a5000c494a0682a6cd5aff6e4527ac6">00194</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7a5000c494a0682a6cd5aff6e4527ac6" title="Subtract one [Earth, solar] week to the current simulation time.">subtractWeek</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(-7.0);}
<a name="l00195"></a>00195 
<a name="l00198"></a><a class="code" href="classStelNavigator.html#4045ae6cef6c5c40a25b081425164715">00198</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#4045ae6cef6c5c40a25b081425164715" title="Subtract one sidereal week to the simulation time.">subtractSiderealDay</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(-1.0);}
<a name="l00201"></a><a class="code" href="classStelNavigator.html#78fcf4ecc7acc0737581ec9c3e76ebc3">00201</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#78fcf4ecc7acc0737581ec9c3e76ebc3" title="Subtract one sidereal week to the simulation time.">subtractSiderealWeek</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(-7.0);}
<a name="l00202"></a>00202 
<a name="l00205"></a>00205     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(<span class="keywordtype">double</span> d);
<a name="l00209"></a>00209     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(<span class="keywordtype">double</span> d);
<a name="l00210"></a>00210 
<a name="l00213"></a>00213     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d447edc80e3ec79ebb1f3493725530c8" title="Move the observer to the selected object.">moveObserverToSelected</a>();
<a name="l00214"></a>00214 
<a name="l00216"></a><a class="code" href="classStelNavigator.html#aa88a1411004c31d0fff5d318fb2688a">00216</a>     QString <a class="code" href="classStelNavigator.html#aa88a1411004c31d0fff5d318fb2688a" title="Get the location used by default at startup.">getDefaultLocationID</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> defaultLocationID;}
<a name="l00218"></a>00218     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#9e90726e1cc671a03957eb2abb96f955" title="Set the location to use by default at startup.">setDefaultLocationID</a>(<span class="keyword">const</span> QString&amp; <span class="keywordtype">id</span>);
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 signals:
<a name="l00222"></a>00222     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#40b2a676d1bf8c27cd85b3c753cd2231" title="This signal is emitted when the observer location has changed.">locationChanged</a>(<a class="code" href="classStelLocation.html" title="Store the informations for a location on a planet.">StelLocation</a>);
<a name="l00224"></a>00224     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#a1a53abf703ad19ec06d4184ae47734d" title="This signal is emitted when the time rate has changed.">timeRateChanged</a>(<span class="keywordtype">double</span> rate);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 <span class="keyword">private</span>:
<a name="l00227"></a>00227     <span class="comment">// Matrices used for every coordinate transfo</span>
<a name="l00228"></a>00228     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matHeliocentricEclipticToAltAz;   <span class="comment">// Transform from heliocentric ecliptic (Vsop87) to observer-centric altazimuthal coordinate</span>
<a name="l00229"></a>00229     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matAltAzToHeliocentricEcliptic;   <span class="comment">// Transform from observer-centric altazimuthal coordinate to heliocentric ecliptic (Vsop87)</span>
<a name="l00230"></a>00230     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matAltAzToEquinoxEqu;             <span class="comment">// Transform from observer-centric altazimuthal coordinate to Earth Equatorial</span>
<a name="l00231"></a>00231     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matEquinoxEquToAltAz;             <span class="comment">// Transform from observer-centric altazimuthal coordinate to Earth Equatorial</span>
<a name="l00232"></a>00232     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matHeliocentricEclipticToEquinoxEqu;<span class="comment">// Transform from heliocentric ecliptic (Vsop87) to earth equatorial coordinate</span>
<a name="l00233"></a>00233     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matEquinoxEquToJ2000;
<a name="l00234"></a>00234     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matJ2000ToEquinoxEqu;
<a name="l00235"></a>00235     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matJ2000ToAltAz;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     <a class="code" href="classMatrix4.html" title="A templatized column-major 4x4 matrix compatible with openGL.">Mat4d</a> matAltAzModelView;                    <span class="comment">// Modelview matrix for observer-centric altazimuthal drawing</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="comment">// Time variable</span>
<a name="l00240"></a>00240     <span class="keywordtype">double</span> timeSpeed;        <span class="comment">// Positive : forward, Negative : Backward, 1 = 1sec/sec</span>
<a name="l00241"></a>00241     <span class="keywordtype">double</span> JDay;              <span class="comment">// Curent time in Julian day</span>
<a name="l00242"></a>00242 
<a name="l00243"></a>00243     <span class="keywordtype">double</span> presetSkyTime;
<a name="l00244"></a>00244     QTime initTodayTime;
<a name="l00245"></a>00245     QString startupTimeMode;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247     <span class="comment">// The ID of the default startup location</span>
<a name="l00248"></a>00248     QString defaultLocationID;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="comment">// Position variables</span>
<a name="l00251"></a>00251     <a class="code" href="classStelObserver.html" title="Should be renamed as PlanetBasedObserver and derive from a more generical StelObserver...">StelObserver</a>* position;
<a name="l00252"></a>00252 };
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="preprocessor">#endif // _STELNAVIGATOR_HPP_</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Jun 2 13:11:13 2010 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
