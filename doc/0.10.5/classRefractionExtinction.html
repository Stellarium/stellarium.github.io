<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: RefractionExtinction Class Reference</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="scripting.html">Scripting</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.5 -->
<div class="contents">
<h1>RefractionExtinction Class Reference</h1><!-- doxytag: class="RefractionExtinction" -->This class performs refraction and extinction computations, following literature from atmospheric optics and astronomy.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="RefractionExtinction_8hpp-source.html">RefractionExtinction.hpp</a>&gt;</code>
<p>

<p>
<a href="classRefractionExtinction-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRefractionExtinction.html#5aaaf32c552edcb0a7f6cd58a2bd6b4d">forward</a> (<a class="el" href="classVector3.html">Vec3d</a> *altAzPos, float *mag, int size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRefractionExtinction.html#aa958a773611ebc6ac84646e816ef9b6">backward</a> (<a class="el" href="classVector3.html">Vec3d</a> *altAzPos, float *mag, int size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRefractionExtinction.html#e7fdb05add9fe4001dfb58dbbb5936e5">setPressure</a> (float p_mbar)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRefractionExtinction.html#0ad345e92f7be93a59b284f29c7a0b1f">setTemperature</a> (float t_C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRefractionExtinction.html#0c09ec90bb39dff50d4f6f7fb2f3a1cb">setExtinctionCoefficient</a> (float k)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRefractionExtinction.html#cdf4a586a5db1d55c3ccea27e38cca87">airmass</a> (float cosZ, bool apparent_z=true)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class performs refraction and extinction computations, following literature from atmospheric optics and astronomy. 
<p>
Airmass computations are limited to meaningful altitudes, and refraction solutions can only be aproximate, given the turbulent, unpredictable real atmosphere. The solution provided here will [hopefully!] result in a visible "zone of avoidance" near the horizon down to altitude -2, and will show stars in their full brightness at their geometrical positions below -2 degrees. Of course, plotting stars below the horizon could be coupled to setting of horizon foreground, it's another usability issue. Typical horizons do not go down below -1, so -2 should leave a fair amount of room. Note that forward/backward are no absolute reverse operations! All the computations should be in effect (1) only if atmosphere effects are true (2) only for celestial objects, never for landscape coordinates (3) only for terrestrial locations, not on Moon/Mars/Saturn etc <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="5aaaf32c552edcb0a7f6cd58a2bd6b4d"></a><!-- doxytag: member="RefractionExtinction::forward" ref="5aaaf32c552edcb0a7f6cd58a2bd6b4d" args="(Vec3d *altAzPos, float *mag, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RefractionExtinction::forward           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVector3.html">Vec3d</a> *&nbsp;</td>
          <td class="paramname"> <em>altAzPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&nbsp;</td>
          <td class="paramname"> <em>mag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute refraction and extinction effects for arrays of size. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>position vectors and magnitudes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>altAzPos</em>&nbsp;</td><td>are the normalized (true) star position vectors, and their z components sin(true_altitude). Note that forward/backward are no absolute reverse operations! </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="aa958a773611ebc6ac84646e816ef9b6"></a><!-- doxytag: member="RefractionExtinction::backward" ref="aa958a773611ebc6ac84646e816ef9b6" args="(Vec3d *altAzPos, float *mag, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RefractionExtinction::backward           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVector3.html">Vec3d</a> *&nbsp;</td>
          <td class="paramname"> <em>altAzPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&nbsp;</td>
          <td class="paramname"> <em>mag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compute refraction and extinction effects for arrays of size. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>position vectors and magnitudes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>altAzPos</em>&nbsp;</td><td>are the normalized (apparent) star position vectors, and their z components sin(apparent_altitude). Note that forward/backward are no absolute reverse operations! </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="e7fdb05add9fe4001dfb58dbbb5936e5"></a><!-- doxytag: member="RefractionExtinction::setPressure" ref="e7fdb05add9fe4001dfb58dbbb5936e5" args="(float p_mbar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RefractionExtinction::setPressure           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>p_mbar</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set surface air pressure (mbars), influences refraction computation. 
<p>

</div>
</div><p>
<a class="anchor" name="0ad345e92f7be93a59b284f29c7a0b1f"></a><!-- doxytag: member="RefractionExtinction::setTemperature" ref="0ad345e92f7be93a59b284f29c7a0b1f" args="(float t_C)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RefractionExtinction::setTemperature           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>t_C</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set surface air temperature (degrees Celsius), influences refraction computation. 
<p>

</div>
</div><p>
<a class="anchor" name="0c09ec90bb39dff50d4f6f7fb2f3a1cb"></a><!-- doxytag: member="RefractionExtinction::setExtinctionCoefficient" ref="0c09ec90bb39dff50d4f6f7fb2f3a1cb" args="(float k)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RefractionExtinction::setExtinctionCoefficient           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>k</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set visual extinction coefficient (mag/airmass), influences extinction computation. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>k=</em>&nbsp;</td><td>0.1 for highest mountains, 0.2 for very good lowland locations, 0.35 for typical lowland, 0.5 in humid climates. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="cdf4a586a5db1d55c3ccea27e38cca87"></a><!-- doxytag: member="RefractionExtinction::airmass" ref="cdf4a586a5db1d55c3ccea27e38cca87" args="(float cosZ, bool apparent_z=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float RefractionExtinction::airmass           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>cosZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>apparent_z</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
airmass computation for 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cosZ</em>&nbsp;</td><td>= cosine of zenith angle z (=sin(altitude)!). The default (</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>apparent_z</em>&nbsp;</td><td>= true) is computing airmass from observed altitude, following Rozenberg (1966) [X(90)~40]. if (</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>apparent_z</em>&nbsp;</td><td>= false), we have geometrical altitude and compute airmass from that, following Young: Air mass and refraction. Applied Optics 33(6), pp.1108-1110, 1994. [X(90)~32]. A problem ist that refraction depends on air pressure and temperature, but Young's formula assumes T=15C, p=1013.25mbar. So, it seems better to compute refraction first, and then use the Rozenberg formula here. Rozenberg is infinite at Z=92.17 deg, Young at Z=93.6 deg, so this function has NO EFFECT BELOW -2 DEGREES! </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Jun 2 13:11:13 2010 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
