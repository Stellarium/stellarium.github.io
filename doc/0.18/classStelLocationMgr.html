<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Stellarium: StelLocationMgr Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extrastyle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="stellarium-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Stellarium
   &#160;<span id="projectnumber">0.18.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="codingStyle.html"><span>Coding&#160;Style</span></a></li>
      <li><a href="scripting.html"><span>Scripting</span></a></li>
      <li><a href="plugins.html"><span>Plugins</span></a></li>
      <li><a href="fileStructure.html"><span>File&#160;Structure</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">StelLocationMgr Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manage the list of available location.  
 <a href="classStelLocationMgr.html#details">More...</a></p>

<p><code>#include &lt;StelLocationMgr.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:ae64bc36eb87d664eff8bd2f55466f699"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae64bc36eb87d664eff8bd2f55466f699"></a>
const <a class="el" href="classStelLocation.html">StelLocation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ae64bc36eb87d664eff8bd2f55466f699">locationForString</a> (const QString &amp;s) const </td></tr>
<tr class="memdesc:ae64bc36eb87d664eff8bd2f55466f699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the <a class="el" href="classStelLocation.html" title="Store the informations for a location on a planet. ">StelLocation</a> for a given string Can match location name, or coordinates. <br /></td></tr>
<tr class="separator:ae64bc36eb87d664eff8bd2f55466f699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8477611f37c92240fd464b22864e088"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8477611f37c92240fd464b22864e088"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ae8477611f37c92240fd464b22864e088">locationFromIP</a> ()</td></tr>
<tr class="memdesc:ae8477611f37c92240fd464b22864e088"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find location via online lookup of IP address. <br /></td></tr>
<tr class="separator:ae8477611f37c92240fd464b22864e088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f898acb881265f9b17097ad01fa17f4"><td class="memItemLeft" align="right" valign="top">static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a8f898acb881265f9b17097ad01fa17f4">sanitizeTimezoneStringForLocationDB</a> (QString tzString)</td></tr>
<tr class="memdesc:a8f898acb881265f9b17097ad01fa17f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check timezone string and return either the same or one that we use in the Stellarium location database.  <a href="#a8f898acb881265f9b17097ad01fa17f4">More...</a><br /></td></tr>
<tr class="separator:a8f898acb881265f9b17097ad01fa17f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c5f60ab2b1a0e5997e548ff622a14b"><td class="memItemLeft" align="right" valign="top">static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a01c5f60ab2b1a0e5997e548ff622a14b">sanitizeTimezoneStringFromLocationDB</a> (QString dbString)</td></tr>
<tr class="memdesc:a01c5f60ab2b1a0e5997e548ff622a14b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to translate a timezone name from those used in Stellarium's location database to a name which is known to Qt at runtime as result of QTimeZone::availableTimeZoneIds().  <a href="#a01c5f60ab2b1a0e5997e548ff622a14b">More...</a><br /></td></tr>
<tr class="separator:a01c5f60ab2b1a0e5997e548ff622a14b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:ac93b3ba3a16b75bb3deafdc165fba7e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ac93b3ba3a16b75bb3deafdc165fba7e8">locationListChanged</a> ()</td></tr>
<tr class="memdesc:ac93b3ba3a16b75bb3deafdc165fba7e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can be used to detect changes to the full location list i.e.  <a href="#ac93b3ba3a16b75bb3deafdc165fba7e8">More...</a><br /></td></tr>
<tr class="separator:ac93b3ba3a16b75bb3deafdc165fba7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aabf5e3d9dd25f6738d664887d0b34c13"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabf5e3d9dd25f6738d664887d0b34c13"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#aabf5e3d9dd25f6738d664887d0b34c13">StelLocationMgr</a> ()</td></tr>
<tr class="memdesc:aabf5e3d9dd25f6738d664887d0b34c13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor which loads the list of locations from the base and user location files. <br /></td></tr>
<tr class="separator:aabf5e3d9dd25f6738d664887d0b34c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b643f69bb814041fe986719d2a3b2a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3b643f69bb814041fe986719d2a3b2a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ab3b643f69bb814041fe986719d2a3b2a">StelLocationMgr</a> (const LocationList &amp;locations)</td></tr>
<tr class="memdesc:ab3b643f69bb814041fe986719d2a3b2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classStelLocationMgr.html" title="Manage the list of available location. ">StelLocationMgr</a> which uses the locations given instead of loading them from the files. <br /></td></tr>
<tr class="separator:ab3b643f69bb814041fe986719d2a3b2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d10fe2789796ff10dfc9c76cef07efe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7d10fe2789796ff10dfc9c76cef07efe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a7d10fe2789796ff10dfc9c76cef07efe">setLocations</a> (const LocationList &amp;locations)</td></tr>
<tr class="memdesc:a7d10fe2789796ff10dfc9c76cef07efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces the loaded location list. <br /></td></tr>
<tr class="separator:a7d10fe2789796ff10dfc9c76cef07efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c9dda284df2483350e8924e9f151d3d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c9dda284df2483350e8924e9f151d3d"></a>
LocationList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a4c9dda284df2483350e8924e9f151d3d">getAll</a> () const </td></tr>
<tr class="memdesc:a4c9dda284df2483350e8924e9f151d3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the list of all loaded locations. <br /></td></tr>
<tr class="separator:a4c9dda284df2483350e8924e9f151d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad68ed11484f6a9700eebfff20384e544"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad68ed11484f6a9700eebfff20384e544"></a>
LocationMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ad68ed11484f6a9700eebfff20384e544">getAllMap</a> () const </td></tr>
<tr class="memdesc:ad68ed11484f6a9700eebfff20384e544"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a map of all loaded locations. The key is the location ID, suitable for a list view. <br /></td></tr>
<tr class="separator:ad68ed11484f6a9700eebfff20384e544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fbdcc9c0d7f5dd93140aac98517e378"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5fbdcc9c0d7f5dd93140aac98517e378"></a>
const <a class="el" href="classStelLocation.html">StelLocation</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a5fbdcc9c0d7f5dd93140aac98517e378">locationFromCLI</a> () const </td></tr>
<tr class="memdesc:a5fbdcc9c0d7f5dd93140aac98517e378"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the <a class="el" href="classStelLocation.html" title="Store the informations for a location on a planet. ">StelLocation</a> from a CLI. <br /></td></tr>
<tr class="separator:a5fbdcc9c0d7f5dd93140aac98517e378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae197f1f2bdc2b02292f0e0776c313dd0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae197f1f2bdc2b02292f0e0776c313dd0"></a>
const <a class="el" href="classStelLocation.html">StelLocation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ae197f1f2bdc2b02292f0e0776c313dd0">getLastResortLocation</a> () const </td></tr>
<tr class="memdesc:ae197f1f2bdc2b02292f0e0776c313dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a valid location when no valid one was found. <br /></td></tr>
<tr class="separator:ae197f1f2bdc2b02292f0e0776c313dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c94ae49d616138527541673f06c4d1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a15c94ae49d616138527541673f06c4d1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a15c94ae49d616138527541673f06c4d1">canSaveUserLocation</a> (const <a class="el" href="classStelLocation.html">StelLocation</a> &amp;loc) const </td></tr>
<tr class="memdesc:a15c94ae49d616138527541673f06c4d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get whether a location can be permanently added to the list of user locations The main constraint is that the small string must be unique. <br /></td></tr>
<tr class="separator:a15c94ae49d616138527541673f06c4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af31a15e98814c27c9f13a265c5e490f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af31a15e98814c27c9f13a265c5e490f6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#af31a15e98814c27c9f13a265c5e490f6">saveUserLocation</a> (const <a class="el" href="classStelLocation.html">StelLocation</a> &amp;loc)</td></tr>
<tr class="memdesc:af31a15e98814c27c9f13a265c5e490f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add permanently a location to the list of user locations It is later identified by its small string. <br /></td></tr>
<tr class="separator:af31a15e98814c27c9f13a265c5e490f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53de040caa58fc7fd6054b559afafb3d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a53de040caa58fc7fd6054b559afafb3d">canDeleteUserLocation</a> (const QString &amp;id) const </td></tr>
<tr class="memdesc:a53de040caa58fc7fd6054b559afafb3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get whether a location can be deleted from the list of user locations If the location comes from the base read only list, it cannot be deleted.  <a href="#a53de040caa58fc7fd6054b559afafb3d">More...</a><br /></td></tr>
<tr class="separator:a53de040caa58fc7fd6054b559afafb3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2e5fdef7bcbff70ebec06d988b14348"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ad2e5fdef7bcbff70ebec06d988b14348">deleteUserLocation</a> (const QString &amp;id)</td></tr>
<tr class="memdesc:ad2e5fdef7bcbff70ebec06d988b14348"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete permanently the given location from the list of user locations If the location comes from the base read only list, it cannot be deleted and false is returned.  <a href="#ad2e5fdef7bcbff70ebec06d988b14348">More...</a><br /></td></tr>
<tr class="separator:ad2e5fdef7bcbff70ebec06d988b14348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac246896fb8b22cfd0a76233801b135f9"><td class="memItemLeft" align="right" valign="top">LocationMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#ac246896fb8b22cfd0a76233801b135f9">pickLocationsNearby</a> (const QString planetName, const float longitude, const float latitude, const float radiusDegrees)</td></tr>
<tr class="memdesc:ac246896fb8b22cfd0a76233801b135f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find list of locations within.  <a href="#ac246896fb8b22cfd0a76233801b135f9">More...</a><br /></td></tr>
<tr class="separator:ac246896fb8b22cfd0a76233801b135f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d6b11f0656977ba17bff07318a8df4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a19d6b11f0656977ba17bff07318a8df4"></a>
LocationMap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelLocationMgr.html#a19d6b11f0656977ba17bff07318a8df4">pickLocationsInCountry</a> (const QString country)</td></tr>
<tr class="memdesc:a19d6b11f0656977ba17bff07318a8df4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find list of locations in a particular country only. <br /></td></tr>
<tr class="separator:a19d6b11f0656977ba17bff07318a8df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a53de040caa58fc7fd6054b559afafb3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool StelLocationMgr::canDeleteUserLocation </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the location ID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad2e5fdef7bcbff70ebec06d988b14348"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool StelLocationMgr::deleteUserLocation </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>the location ID </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac93b3ba3a16b75bb3deafdc165fba7e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void StelLocationMgr::locationListChanged </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>when the user added or removed locations </p>

</div>
</div>
<a class="anchor" id="ac246896fb8b22cfd0a76233801b135f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LocationMap StelLocationMgr::pickLocationsNearby </td>
          <td>(</td>
          <td class="paramtype">const QString&#160;</td>
          <td class="paramname"><em>planetName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>longitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>latitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>radiusDegrees</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">radiusDegrees</td><td>of selected (usually screen-clicked) coordinates. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8f898acb881265f9b17097ad01fa17f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static QString StelLocationMgr::sanitizeTimezoneStringForLocationDB </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>tzString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If timezone name starts with "UTC", always return unchanged. This is required to store timezone names exactly as we know them, and not mix ours and corrent-IANA spelling flavour. </p>

</div>
</div>
<a class="anchor" id="a01c5f60ab2b1a0e5997e548ff622a14b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static QString StelLocationMgr::sanitizeTimezoneStringFromLocationDB </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>dbString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>That list may be updated by OS anytime and is known to differ between OSes. Some spellings may be different, or in some cases some names get simply translated to "UTC+HH:MM" style. The empty string gets translated to "UTC". </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 25 2018 15:38:04 for Stellarium by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
