<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Stellarium: Scripting Engine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="stellarium-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Stellarium 0.12.4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="codingStyle.html"><span>Coding&#160;Style</span></a></li>
      <li><a href="scripting.html"><span>Scripting</span></a></li>
      <li><a href="plugins.html"><span>Plugins</span></a></li>
      <li><a href="renderer.html"><span>Renderer</span></a></li>
      <li><a href="fileStructure.html"><span>File&#160;Structure</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Scripting Engine </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#intro_scripts">Introduction</a></li>
<li class="level1"><a href="#stratoscript">StratoScript</a></li>
<li class="level1"><a href="#scripting_api">Scripting API</a></li>
<li class="level1"><a href="#script_console">Script Console</a></li>
<li class="level1"><a href="#example_scripts">Examples</a><ul><li class="level2"><a href="#minimal_script">Minimal Script</a></li>
<li class="level2"><a href="#using_module">Using a StelModule</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro_scripts"></a>
Introduction</h1>
<p>Since version 0.10.1, Stellarium includes a scripting feature based on the <a href="http://qt-project.org/doc/qt-4.8/qtscript.html">Qt Scripting Engine</a>. This makes it possible to write small programs within Stellarium to produce presentations, set up custom configurations, and to automate repetitive tasks. Prior to version 0.10.0, Stellarium used a different scripting engine called <a class="el" href="scripting.html#stratoscript">StratoScript</a>.</p>
<p>The core scripting language is <a href="http://en.wikipedia.org/wiki/ECMAScript">ECMAScript</a>, giving users access to all basic ECMAScript language features such as flow control, variables string manipulation and so on. Interaction with Stellarium-specific features is done via a collection of objects which represent components of Stellarium itself. See <a class="el" href="scripting.html#scripting_api">Scripting API</a> for more details.</p>
<h1><a class="anchor" id="stratoscript"></a>
StratoScript</h1>
<p>Prior to version 0.10.0, Stellarium had a simple scripting engine, known as <em>StratoScript</em>. Using <em>StratoScript</em> it was possible to record and play back sequences of Stellarium commands, load and display custom images, and play sounds. In this way it was possible to make planetarium presentations - a feature used quite widely in the small planetarium community.</p>
<p>However <em>StratoScript</em> lacked many features of a real programming language - there were no variables, no flow control and no way to introspect the state of Stellarium.</p>
<p>The replacement scripting engine implemented in the 0.10.x series addresses these shortcomings, at the expense of a little complexity and a new language syntax.</p>
<p>A compatibility mode which converts <em>StratoScript</em> into new scripting engine on the fly is in progress.</p>
<p>Note: StratoScript compatibility is a build-time option. To enable this feature, Stellarium must be built using the ENABLE_STRATOSCRIPT_COMPAT=1 option to cmake.</p>
<h1><a class="anchor" id="scripting_api"></a>
Scripting API</h1>
<p>Interation with Stellarium-specific functionality is done by calling the <b>public slots</b> of instances of a group of Stellarium's core classes.</p>
<ul>
<li>The public slots in the class <a class="el" href="classStelMainScriptAPI.html" title="Provide script API for Stellarium global functions.">StelMainScriptAPI</a> are available via an object named <b>core</b>. For example, to access StelMainScriptAPI::wait() from a script, use the scripting command: <div class="fragment"><div class="line">core.wait(...);</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>The public slots for each of the following classes are available in the scripting engine via an object with the same name as the corresponding class:<ul>
<li><a class="el" href="classConstellationMgr.html" title="Display and manage the constellations.">ConstellationMgr</a></li>
<li><a class="el" href="classGridLinesMgr.html" title="The GridLinesMgr controls the drawing of the Azimuthal and Equatorial Grids, as well as the great cir...">GridLinesMgr</a></li>
<li><a class="el" href="classLabelMgr.html" title="Allows for creation of custom labels on objects or coordinates.">LabelMgr</a></li>
<li><a class="el" href="classLandscapeMgr.html" title="Manages all the rendering at the level of the observer&#39;s surroundings.">LandscapeMgr</a></li>
<li><a class="el" href="classMeteorMgr.html" title="Simulates a meteor shower.">MeteorMgr</a></li>
<li><a class="el" href="classNebulaMgr.html" title="Manage a collection of nebulae.">NebulaMgr</a></li>
<li><a class="el" href="classScreenImageMgr.html" title="Module for managing images for scripting.">ScreenImageMgr</a></li>
<li><a class="el" href="classSolarSystem.html" title="This StelObjectModule derivative is used to model SolarSystem bodies.">SolarSystem</a></li>
<li><a class="el" href="classStarMgr.html" title="Stores the star catalogue data.">StarMgr</a></li>
<li><a class="el" href="classStelAudioMgr.html">StelAudioMgr</a></li>
<li><a class="el" href="classStelMovementMgr.html" title="Manages the head movements and zoom operations.">StelMovementMgr</a></li>
<li><a class="el" href="classStelSkyDrawer.html" title="Provide a set of methods used to draw sky objects taking into account eyes adaptation, zoom level, instrument model and artificially set magnitude limits.">StelSkyDrawer</a></li>
<li><a class="el" href="classStelSkyLayerMgr.html" title="Manage the sky background images, including DSS and deep sky objects images.">StelSkyLayerMgr</a></li>
</ul>
For example, to access <a class="el" href="classLandscapeMgr.html#a9692b777a833b81d7fb4e9f4e59b03e2" title="Set flag for displaying Atmosphere.">LandscapeMgr::setFlagAtmosphere()</a>, use the scripting command: <div class="fragment"><div class="line"><a class="code" href="classLandscapeMgr.html" title="Manages all the rendering at the level of the observer&#39;s surroundings.">LandscapeMgr</a>.<a class="code" href="classLandscapeMgr.html#a9692b777a833b81d7fb4e9f4e59b03e2" title="Set flag for displaying Atmosphere.">setFlagAtmosphere</a>(<span class="keyword">true</span>);</div>
</div><!-- fragment --> Note: All of these except for <a class="el" href="classStelSkyDrawer.html" title="Provide a set of methods used to draw sky objects taking into account eyes adaptation, zoom level, instrument model and artificially set magnitude limits.">StelSkyDrawer</a> are <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> classes.</li>
</ul>
<h1><a class="anchor" id="script_console"></a>
Script Console</h1>
<p>It is possible to open, edit run and save scripts using the script console window. To toggle the script console, press F12. The script console also provides an output window in which script debugging output is visible.</p>
<p>Note: The Script Console is a build-time option. It has been enabled by default since version 0.10.5. To enable or disable this feature, use the ENABLE_SCRIPT_CONSOLE=1 or =0 option to cmake.</p>
<h1><a class="anchor" id="example_scripts"></a>
Examples</h1>
<p>The best source of examples is the <b>scripts</b> sub-directory of the main Stellarium source tree. This directory contains a sub-directory called <b>tests</b> which are not installed with Stellarium, but are nontheless useful sources of example code for various scripting features. (The directory can be <a href="http://bazaar.launchpad.net/~stellarium/stellarium/trunk/files/head:/scripts/">browsed online</a>. Script files end in <code>.ssc</code> and <code>.inc</code>. Download links are to the right.)</p>
<h2><a class="anchor" id="minimal_script"></a>
Minimal Script</h2>
<p>This script prints "Hello Universe" in the <a class="el" href="scripting.html#script_console">Script Console</a> output window.</p>
<div class="fragment"><div class="line">core.debug(<span class="stringliteral">&quot;Hello Universe&quot;</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="using_module"></a>
Using a StelModule</h2>
<p>This script uses the <a class="el" href="classLabelMgr.html" title="Allows for creation of custom labels on objects or coordinates.">LabelMgr</a> module to display "Hello Universe" in white on the screen for 3 seconds.</p>
<div class="fragment"><div class="line"><a class="code" href="classLabelMgr.html" title="Allows for creation of custom labels on objects or coordinates.">LabelMgr</a>.<a class="code" href="classLabelMgr.html#a6673b1234e53699a7094c68b626d3be9" title="Create a label at fixed screen coordinates.">labelScreen</a>(<span class="stringliteral">&quot;Hello Universe&quot;</span>, 200, 200, <span class="keyword">true</span>, 20, <span class="stringliteral">&quot;#ff0000&quot;</span>);</div>
<div class="line">core.wait(3);</div>
<div class="line"><a class="code" href="classLabelMgr.html" title="Allows for creation of custom labels on objects or coordinates.">LabelMgr</a>.<a class="code" href="classLabelMgr.html#a82add88d689bcb1d491cd61017082014" title="Delete all labels.">deleteAllLabels</a>();</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 25 2013 22:30:31 for Stellarium by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
