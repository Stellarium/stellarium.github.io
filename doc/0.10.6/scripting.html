<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: Scripting Engine</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="scripting.html">Scripting</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.7.1 -->
<div class="header">
  <div class="headertitle">
<h1>Scripting Engine </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="intro_scripts"></a>
Introduction</h2>
<p>Since version 0.10.1, Stellarium includes a scripting feature based on the <a href="http://doc.trolltech.com/4.6/qtscript.html">QT Scripting Engine</a>. This makes it possible to write small programs within Stellarium to produce presentations, set up custom configurations, and to automate repetitive tasks. Prior to version 0.10.0, Stellarium used a different scripting engine called StratoScript.</p>
<p>The core scripting language is <a href="http://en.wikipedia.org/wiki/ECMAScript">ECMAScript</a>, giving users access to all basic ECMAScript language features such as flow control, variables string manipulation and so on. Interaction with Stellarium-specific features is done via a collection of objects which represent components of Stellarium itself. See <a class="el" href="scripting.html#scripting_api">Scripting API</a> for more details.</p>
<h2><a class="anchor" id="scratoscript"></a>
Stratoscript</h2>
<p>Prior to version 0.10.0, Stellarium had a simple scripting engine, known as <em>StratoScript</em>. Using StratoScript it was possible to record and play back sequences of Stellarium commands, load and display custom images, and play sounds. In this way it was possible to make planetarium presentations - a feature used quite widely in the small planetarium community.</p>
<p>However StratoScript lacked many features of a real programming language - there were no variables, no flow control and no way to introspect the state of Stellarium.</p>
<p>The replacement scripting engine implemented in the 0.10.x series addresses these shortcomings, at the expense of a little complexity and a new language syntax.</p>
<p>A compatibility mode which converts StratoScript into new scripting engine on the fly is in progress.</p>
<p>Note: StratoScript compatibility is a build-time option. To enable this feature, Stellarium must be built using the ENABLE_STRATOSCRIPT_COMPAT=1 option to cmake.</p>
<h2><a class="anchor" id="scripting_api"></a>
Scripting API</h2>
<p>Interation with Stellarium-specific functionality is done by calling the <b>public slots</b> of instances of a group of Stellarium's core classes.</p>
<ul>
<li>The public slots in the class <a class="el" href="classStelMainScriptAPI.html" title="Provide script API for Stellarium global functions.">StelMainScriptAPI</a> are available via an object named <b>core</b>. For example, to access StelMainScriptAPI::wait() from a script, use the scripting command: core.wait(...);</li>
</ul>
<ul>
<li>The public slots for each <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> are available in the scripting engine via an object with the same name as the corresponding <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a>. For example, to access <a class="el" href="classLandscapeMgr.html#af59925aec15809a5a8ccaaad5de622c8" title="Set flag for displaying Atmosphere.">LandscapeMgr::setFlagAtmosphere()</a>, use the scripting command: <a class="el" href="classLandscapeMgr.html#af59925aec15809a5a8ccaaad5de622c8" title="Set flag for displaying Atmosphere.">LandscapeMgr.setFlagAtmosphere</a>(...);</li>
</ul>
<ul>
<li>Additional core classes have self-named objects available from the scripting engine:<ul>
<li><a class="el" href="classStelSkyDrawer.html" title="Provide a set of methods used to draw sky objects taking into account eyes adaptation, zoom level and instrument model.">StelSkyDrawer</a></li>
<li><a class="el" href="classStelSkyLayerMgr.html" title="Manage the sky background images, including DSS and deep sky objects images.">StelSkyLayerMgr</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="script_console"></a>
Script Console</h2>
<p>Note: The Script Console has been enabled by default since version 0.10.5. It is a build-time option. To enable or disable this feature, use the ENABLE_SCRIPT_CONSOLE=1 or =0 option to cmake.</p>
<p>It is possible to open, edit run and save scripts using the script console window. To toggle the script console, press F12. The script console also provides an output window in which script debugging output is visible.</p>
<h2><a class="anchor" id="example_scripts"></a>
Examples</h2>
<p>The best source of examples is the <b>scripts</b> sub-directory of the main Stellarium source tree. This directory contains a sub-directory called tests which are not installed with Stellarium, but are nontheless useful sources of example code for various scripting features.</p>
<h3><a class="anchor" id="minimal_script"></a>
Minimal Script</h3>
<p>This script prints "Hello Universe" in the <a class="el" href="scripting.html#script_console">Script Console</a> output window.</p>
<pre>core.debug("Hello Universe");</pre><h3><a class="anchor" id="using_module"></a>
Using a StelModule</h3>
<p>This script uses the <a class="el" href="classLabelMgr.html" title="Allows for creation of custom labels on objects or coordinates.">LabelMgr</a> module to display "Hello Universe" the screen for 3 seconds.</p>
<pre><a class="el" href="classLabelMgr.html#a6673b1234e53699a7094c68b626d3be9" title="Create a label at fixed screen coordinates.">LabelMgr.labelScreen</a>("Hello Universe", 200, 200, true, 20, "#ff0000");
core.wait(3);
<a class="el" href="classLabelMgr.html#a82add88d689bcb1d491cd61017082014" title="Delete all labels.">LabelMgr.deleteAllLabels()</a>;</pre> </div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Dec 5 2010 20:29:57 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
