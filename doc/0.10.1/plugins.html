<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: Plugins</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.5 -->
<div class="contents">
<h1><a class="anchor" name="plugins">Plugins </a></h1><h2><a class="anchor" name="introduction">
Introduction</a></h2>
Plugins are extensions to Stellarium which are dynamically loaded into to the program at runtime.<p>
Plugins are potentially more powerful than scripts, but are more difficult to write and maintain. Unlike scripts, Plugins must be compiled for a specific platform, and will typically only be compatible with a particular version of Stellarium. We hope that the plugin system will allow third party developers to write extensions to Stellarium which might not otherwise be included in the core program, and that the system will allow for prototyping of new features before inclusion into the core.<p>
Stellarium plugins are created from C++ code compiled separately as a dynamic library ( <code>.so</code> on linux, <code>.dll</code> in windows or <code>.dylib</code> on MacOSX). A plugin should contain a main class deriving from the <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> class as well as an instance of the <a class="el" href="classStelPluginInterface.html" title="Define the interface to implement when creating a plugin.">StelPluginInterface</a> which allows stellarium to dynamically load it. At startup, the <a class="el" href="classStelModuleMgr.html" title="Manage a collection of StelModules including both core and plugin modules.">StelModuleMgr</a> will load the library (provided that the <code></code>.dll is put at the proper place in the stellarium file tree), and an instance of the <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> it contains will be instanciated and added to the list of other "normal" StelModules.<p>
<em>Plugin developers - please note that while plugins are linked at runtime, classes used in plugins must inherit code from the core which is published under the GUN GPL. If you distribute a binary plugin, you must do so under the terms of the GNU GPL license. No sneaky closed-source shenanigans now.</em><h2><a class="anchor" name="examplePlugins">
Example Plugins</a></h2>
There are a few plugins which are written by and maintained by the Stellarium developer team.<p>
<ul>
<li>
<a href="http://stellarium.svn.sourceforge.net/viewvc/stellarium/trunk/extmodules/HelloStelModule/">HelloStelModule plugin</a>: minimal plugin, intended as an example. </li>
<li>
<a href="http://stellarium.svn.sourceforge.net/viewvc/stellarium/trunk/extmodules/AngleMeasure/">AngleMeasure plugin</a>: simple plugin, intended as a guide to new developers. </li>
<li>
<a href="http://stellarium.svn.sourceforge.net/viewvc/stellarium/trunk/extmodules/CompassMarks/">CompassMarks plugin</a>: simple plugin, intended as a guide to new developers. </li>
<li>
<a href="http://stellarium.svn.sourceforge.net/viewvc/stellarium/trunk/extmodules/VirGO/">VirGO plugin</a>: fully featured extension to Stellarium sponsored by ESO. VirGO is used by professional astronomers to display and analyse data from the ESO archive. Follow <a href="http://archive.eso.org/cms/virgo/">this link</a> for more info. </li>
</ul>
<h2><a class="anchor" name="buildingPlugins">
Building Plugins</a></h2>
The following instructions can be used to build the Angle Measure plugin and the Compass Marks plugin.<p>
<ul>
<li>
First, you will need to download the Stellarium source code from SVN, according to the instructions in the Stellarium build pages (see <a href="http://www.stellarium.org/wiki/index.php/Compilation_on_Linux">this page</a> for *nix systems, and <a href="http://www.stellarium.org/wiki/index.php/Windows_Build_Instructions">this page</a> for Windows builds). For the rest of this discussion, I will assume you downloaded the source code in the directory <code>/home/me/builds/stellarium</code>. If you put the source code somewhere else, you will need to modify the following instructions accordingly.<p>
</li>
<li>
After downloading the stellarium source such that it is in <code>/home/me/builds/stellarium</code>, change into the <code>/home/me/builds</code> directory and fetch the <code>extmodules</code> files from SVN. On Linux, you can use these commands to accomplish this: <div class="fragment"><pre class="fragment">
cd /home/me/builds
svn co https://stellarium.svn.sourceforge.net/svnroot/stellarium/trunk/extmodules
</pre></div><p>
</li>
<li>
Build the main Stellarium program according to the instructions for your platform. Please note that you must build with the <code>Release</code> settings, not the <code>Debug</code> settings. You can do this by adding a step after doing <code>cmake</code>. On Windows, use the <code>cmakegui</code> tool, or on *nix use the <code>ccmake</code> tool (or just edit the <code>CMakeCache.txt</code> file) to set the value of <code>CMAKE_BUILD_TYPE</code> to <code>Release</code>. Then continue with the <code>make</code> stage.<p>
</li>
<li>
Set an environment variable called <code>STELROOT</code> which contains the path to the Stellarium source code. <div class="fragment"><pre class="fragment">
export STELROOT=/home/me/builds/stellarium
</pre></div><p>
</li>
<li>
Change into the directory containing the plugin you want to build, then create a build directory. On *nix systems this should be called <code>builds/unix</code>, on Windows it should be called <code>builds/msys</code>. Once made, change into it. e.g. on Linux: <div class="fragment"><pre class="fragment">
cd /home/me/builds/plugins/AngleMeasure
mkdir -p builds/unix
cd builds/unix
</pre></div><p>
</li>
<li>
The rest of the build procedure should be simple <ul>
<li>
On *nix systems: <div class="fragment"><pre class="fragment">
 cmake ../..
 make
 make install
</pre></div>  </li>
<li>
On Windows: <div class="fragment"><pre class="fragment">
 cmake -G "MSYS Makefiles" ../..
 make
</pre></div> </li>
</ul>
</li>
</ul>
<p>
To install the plugin on Linux systems, simple add a <code>make install</code> command after the <code>make</code>. This will copy the necessary files to <code> $HOME/.stellarium/modules/AngleMeasure</code>.<p>
To install a plugin on Windows or OSX, you should locate the [[User Data Directory]], and then create a sub-directory called <code>modules</code> in it. Inside this, create a subdirectory named for the plugin, e.g. <code>AngleMeasure</code>. Into this directory, you should copy the following files: <ul>
<li>
<code>module.ini</code> file from the plugin source directory. </li>
<li>
<code>lib&lt;plugin-name&gt;</code>.so or <code>lib&lt;plugin-name&gt;</code>.dll from the <code>src</code> sub-directory of the <code>builds/unix</code> or <code>builds/msys</code> directory in the plugin source directory. </li>
<li>
Any other files which are needed for the plugin (there are no others for the example plugins at time of writing). </li>
</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 2 17:23:47 2009 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
