<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: core/StelNavigator.hpp Source File</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.5 -->
<h1>core/StelNavigator.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Stellarium</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright (C) 2002 Fabien Chereau</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment"> * modify it under the terms of the GNU General Public License</span>
<a name="l00007"></a>00007 <span class="comment"> * as published by the Free Software Foundation; either version 2</span>
<a name="l00008"></a>00008 <span class="comment"> * of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"> *</span>
<a name="l00015"></a>00015 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef _STELNAVIGATOR_HPP_</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define _STELNAVIGATOR_HPP_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "VecMath.hpp"</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#include "fixx11h.h"</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;QObject&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;QString&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;QTime&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;QDateTime&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">// Conversion in standar Julian time format</span>
<a name="l00032"></a>00032 <span class="preprocessor">#define JD_SECOND 0.000011574074074074074074</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define JD_MINUTE 0.00069444444444444444444</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define JD_HOUR   0.041666666666666666666</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define JD_DAY    1.</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span>
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="classStelObserver.html" title="Should be renamed as PlanetBasedObserver and derive from a more generical StelObserver...">StelObserver</a>;
<a name="l00038"></a>00038 <span class="keyword">class </span><a class="code" href="classStelObject.html" title="The base abstract class for sky objects used in Stellarium like Stars, Planets, Constellations...">StelObject</a>;
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="classStelLoadingBar.html" title="This class is used to display loading bar.">StelLoadingBar</a>;
<a name="l00040"></a>00040 <span class="keyword">class </span>Planet;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classStelLocation.html" title="Store the informations for a location on a planet.">StelLocation</a>;
<a name="l00042"></a>00042 
<a name="l00049"></a><a class="code" href="classStelNavigator.html">00049</a> <span class="keyword">class </span><a class="code" href="classStelNavigator.html" title="Manages a navigation context.">StelNavigator</a> : <span class="keyword">public</span> QObject
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051     Q_OBJECT
<a name="l00052"></a>00052     
<a name="l00053"></a>00053 <span class="keyword">public</span>:
<a name="l00054"></a>00054 
<a name="l00055"></a>00055     <span class="keyword">enum</span> ViewingModeType
<a name="l00056"></a>00056     {
<a name="l00057"></a>00057         ViewHorizon,
<a name="l00058"></a>00058         ViewEquator
<a name="l00059"></a>00059     };
<a name="l00060"></a>00060     
<a name="l00062"></a><a class="code" href="classStelNavigator.html#69780c6313f95bc27927783fee692ba1">00062</a>     <span class="keyword">enum</span> <a class="code" href="classStelNavigator.html#69780c6313f95bc27927783fee692ba1" title="Possible mount modes.">MountMode</a> { MountAltAzimuthal, MountEquatorial };
<a name="l00063"></a>00063     
<a name="l00064"></a>00064     <span class="comment">// Create and initialise to default a navigation context</span>
<a name="l00065"></a>00065     <a class="code" href="classStelNavigator.html" title="Manages a navigation context.">StelNavigator</a>();
<a name="l00066"></a>00066     ~<a class="code" href="classStelNavigator.html" title="Manages a navigation context.">StelNavigator</a>();
<a name="l00067"></a>00067 
<a name="l00068"></a>00068     <span class="keywordtype">void</span> init();
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="keywordtype">void</span> updateTime(<span class="keywordtype">double</span> deltaTime);
<a name="l00071"></a>00071     <span class="keywordtype">void</span> updateTransformMatrices(<span class="keywordtype">void</span>);
<a name="l00072"></a>00072     
<a name="l00074"></a><a class="code" href="classStelNavigator.html#219da531c95a30cebd48f391b1d3d8f0">00074</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#219da531c95a30cebd48f391b1d3d8f0" title="Set current mount type.">setMountMode</a>(<a class="code" href="classStelNavigator.html#69780c6313f95bc27927783fee692ba1" title="Possible mount modes.">MountMode</a> m) {setViewingMode((m==MountAltAzimuthal) ? StelNavigator::ViewHorizon : StelNavigator::ViewEquator);}
<a name="l00076"></a><a class="code" href="classStelNavigator.html#39770456f9bc0f743320cb8b01e1922c">00076</a>     <a class="code" href="classStelNavigator.html#69780c6313f95bc27927783fee692ba1" title="Possible mount modes.">MountMode</a> <a class="code" href="classStelNavigator.html#39770456f9bc0f743320cb8b01e1922c" title="Get current mount type.">getMountMode</a>(<span class="keywordtype">void</span>) {<span class="keywordflow">return</span> ((getViewingMode()==StelNavigator::ViewHorizon) ? MountAltAzimuthal : MountEquatorial);}
<a name="l00077"></a>00077 
<a name="l00079"></a><a class="code" href="classStelNavigator.html#3dbb581623f22e14494a3d8df4ce199e">00079</a>     <span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; <a class="code" href="classStelNavigator.html#3dbb581623f22e14494a3d8df4ce199e" title="Get vision direction.">getEquinoxEquVisionDirection</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> earthEquVisionDirection;}
<a name="l00080"></a>00080     <span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; getJ2000EquVisionDirection(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> J2000EquVisionDirection;}
<a name="l00081"></a>00081     <span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; getAltAzVisionDirection(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> altAzVisionDirection;}
<a name="l00082"></a>00082     <span class="keywordtype">void</span> setAltAzVisionDirection(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; _pos);
<a name="l00083"></a>00083     <span class="keywordtype">void</span> setEquinoxEquVisionDirection(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; _pos);
<a name="l00084"></a>00084     <span class="keywordtype">void</span> setJ2000EquVisionDirection(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; _pos);
<a name="l00085"></a>00085     
<a name="l00087"></a>00087     <span class="keyword">const</span> <a class="code" href="classStelLocation.html" title="Store the informations for a location on a planet.">StelLocation</a>&amp; <a class="code" href="classStelNavigator.html#b1a8b29a84881593e6111d4b1e76f905" title="Get the informations on the current location.">getCurrentLocation</a>() <span class="keyword">const</span>;
<a name="l00088"></a>00088     
<a name="l00094"></a>00094     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7be565509751d718522dc1301e5e8ab0" title="Smoothly move the observer to the given location.">moveObserverTo</a>(<span class="keyword">const</span> <a class="code" href="classStelLocation.html" title="Store the informations for a location on a planet.">StelLocation</a>&amp; target, <span class="keywordtype">double</span> duration=1., <span class="keywordtype">double</span> durationIfPlanetChange=1.);
<a name="l00095"></a>00095     
<a name="l00098"></a>00098     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#f3d566de17b40cee76994706c6e0b830" title="Get the sideral time shifted by the observer longitude.">getLocalSideralTime</a>() <span class="keyword">const</span>;
<a name="l00099"></a>00099     
<a name="l00100"></a>00100     <span class="keyword">const</span> Planet *getHomePlanet(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00101"></a>00101 
<a name="l00103"></a>00103     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#c5f271324843af03200ebcc09f45e90f" title="Return the observer heliocentric ecliptic position.">getObserverHeliocentricEclipticPos</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00104"></a>00104 
<a name="l00106"></a><a class="code" href="classStelNavigator.html#3f6ce89447a3e1342bac71639dea9441">00106</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#3f6ce89447a3e1342bac71639dea9441" title="Transform vector from altazimuthal coordinate to equatorial.">altAzToEquinoxEqu</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matAltAzToEquinoxEqu*v; }
<a name="l00107"></a>00107 
<a name="l00109"></a><a class="code" href="classStelNavigator.html#567e931ae224fa6f58fa1688ca8673fa">00109</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#567e931ae224fa6f58fa1688ca8673fa" title="Transform vector from equatorial coordinate to altazimuthal.">equinoxEquToAltAz</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matEquinoxEquToAltAz*v; }
<a name="l00110"></a>00110     <a class="code" href="classVector3.html">Vec3d</a> equinoxEquToJ2000(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matEquinoxEquToJ2000*v; }
<a name="l00111"></a>00111     <a class="code" href="classVector3.html">Vec3d</a> j2000ToEquinoxEqu(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matJ2000ToEquinoxEqu*v; }
<a name="l00112"></a>00112     <a class="code" href="classVector3.html">Vec3d</a> j2000ToAltAz(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matJ2000ToAltAz*v; }
<a name="l00113"></a>00113     
<a name="l00115"></a><a class="code" href="classStelNavigator.html#f609e2d12e83562f6223fe16227806e3">00115</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#f609e2d12e83562f6223fe16227806e3" title="Transform vector from heliocentric ecliptic coordinate to altazimuthal.">heliocentricEclipticToAltAz</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matHeliocentricEclipticToAltAz*v; }
<a name="l00116"></a>00116 
<a name="l00118"></a><a class="code" href="classStelNavigator.html#24b3c131b2b9469803103abbfce68507">00118</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#24b3c131b2b9469803103abbfce68507" title="Transform from heliocentric coordinate to equatorial at current equinox (for the...">heliocentricEclipticToEquinoxEqu</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matHeliocentricEclipticToEquinoxEqu*v; }
<a name="l00119"></a>00119 
<a name="l00122"></a><a class="code" href="classStelNavigator.html#cae63beae857baba95b6180d46f3b3d3">00122</a>     <a class="code" href="classVector3.html">Vec3d</a> <a class="code" href="classStelNavigator.html#cae63beae857baba95b6180d46f3b3d3" title="Transform vector from heliocentric coordinate to false equatorial : equatorial coordinate...">heliocentricEclipticToEarthPosEquinoxEqu</a>(<span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; v)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> matAltAzToEquinoxEqu*matHeliocentricEclipticToAltAz*v; }
<a name="l00123"></a>00123 
<a name="l00125"></a><a class="code" href="classStelNavigator.html#7fb079a8d0133920db626a5de6adcf1d">00125</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a> <a class="code" href="classStelNavigator.html#7fb079a8d0133920db626a5de6adcf1d" title="Get the modelview matrix for heliocentric ecliptic (Vsop87) drawing.">getHeliocentricEclipticModelViewMat</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matHeliocentricEclipticToAltAz;}
<a name="l00127"></a><a class="code" href="classStelNavigator.html#bed6d7fc1aac31143fea6444c47f6354">00127</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a> <a class="code" href="classStelNavigator.html#bed6d7fc1aac31143fea6444c47f6354" title="Get the modelview matrix for observer-centric ecliptic (Vsop87) drawing.">getObservercentricEclipticModelViewMat</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matJ2000ToAltAz*<a class="code" href="classStelNavigator.html#3fb0f0d448d73a1c4429ddffdc36bafd" title="Rotation matrix from ecliptic (Vsop87) to equatorial J2000.">matVsop87ToJ2000</a>;}
<a name="l00129"></a><a class="code" href="classStelNavigator.html#cac0a8064a2339238d66c8c0db4cb21b">00129</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a> <a class="code" href="classStelNavigator.html#cac0a8064a2339238d66c8c0db4cb21b" title="Get the modelview matrix for observer-centric equatorial at equinox drawing.">getEquinoxEquModelViewMat</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matEquinoxEquToAltAz;}
<a name="l00131"></a><a class="code" href="classStelNavigator.html#e6655af5e7f32ee964fb2477d7217119">00131</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a>&amp; <a class="code" href="classStelNavigator.html#e6655af5e7f32ee964fb2477d7217119" title="Get the modelview matrix for observer-centric altazimuthal drawing.">getAltAzModelViewMat</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView;}
<a name="l00133"></a><a class="code" href="classStelNavigator.html#a2c10f77639dce4e93cec20e79e3791c">00133</a>     <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a> <a class="code" href="classStelNavigator.html#a2c10f77639dce4e93cec20e79e3791c" title="Get the modelview matrix for observer-centric J2000 equatorial drawing.">getJ2000ModelViewMat</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> matAltAzModelView*matEquinoxEquToAltAz*matJ2000ToEquinoxEqu;}
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordtype">void</span> setViewingMode(ViewingModeType viewMode);
<a name="l00136"></a>00136     ViewingModeType getViewingMode(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> viewingMode;}
<a name="l00137"></a>00137 
<a name="l00139"></a><a class="code" href="classStelNavigator.html#e9ee4f3c17c2883245d1e7c86d7c512f">00139</a>     <span class="keyword">const</span> <a class="code" href="classVector3.html">Vec3d</a>&amp; <a class="code" href="classStelNavigator.html#e9ee4f3c17c2883245d1e7c86d7c512f" title="Return the inital viewing direction in altazimuthal coordinates.">getInitViewingDirection</a>() {<span class="keywordflow">return</span> initViewPos;}
<a name="l00140"></a>00140     
<a name="l00142"></a><a class="code" href="classStelNavigator.html#b03b1d792e9e6a117eb38d832be40a74">00142</a>     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#b03b1d792e9e6a117eb38d832be40a74" title="Return the preset sky time in JD.">getPresetSkyTime</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> presetSkyTime;}
<a name="l00144"></a><a class="code" href="classStelNavigator.html#c337491dda46cc804eeea74643c0d6af">00144</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#c337491dda46cc804eeea74643c0d6af" title="Set the preset sky time from a JD.">setPresetSkyTime</a>(<span class="keywordtype">double</span> d) {presetSkyTime=d;}
<a name="l00145"></a>00145     
<a name="l00147"></a><a class="code" href="classStelNavigator.html#08d3282ca8ad23d4a010f79724ca6b13">00147</a>     QString <a class="code" href="classStelNavigator.html#08d3282ca8ad23d4a010f79724ca6b13" title="Return the startup mode, can be preset|Preset or anything else.">getStartupTimeMode</a>() {<span class="keywordflow">return</span> startupTimeMode;}
<a name="l00148"></a>00148     <span class="keywordtype">void</span> setStartupTimeMode(<span class="keyword">const</span> QString&amp; s);
<a name="l00149"></a>00149     
<a name="l00151"></a><a class="code" href="classStelNavigator.html#a9fee423880593e776c7579616849139">00151</a>     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a> <a class="code" href="classStelNavigator.html#a9fee423880593e776c7579616849139" title="Rotation matrix from equatorial J2000 to ecliptic (Vsop87).">matJ2000ToVsop87</a>;
<a name="l00153"></a><a class="code" href="classStelNavigator.html#3fb0f0d448d73a1c4429ddffdc36bafd">00153</a>     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classMatrix4.html">Mat4d</a> <a class="code" href="classStelNavigator.html#3fb0f0d448d73a1c4429ddffdc36bafd" title="Rotation matrix from ecliptic (Vsop87) to equatorial J2000.">matVsop87ToJ2000</a>;
<a name="l00154"></a>00154     
<a name="l00155"></a>00155 <span class="keyword">public</span> slots:
<a name="l00157"></a><a class="code" href="classStelNavigator.html#6f8a291242f9118dfd109df6bd099cfa">00157</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#6f8a291242f9118dfd109df6bd099cfa" title="Toggle current mount mode between equatorial and altazimuthal.">toggleMountMode</a>() {<span class="keywordflow">if</span> (<a class="code" href="classStelNavigator.html#39770456f9bc0f743320cb8b01e1922c" title="Get current mount type.">getMountMode</a>()==MountAltAzimuthal) <a class="code" href="classStelNavigator.html#219da531c95a30cebd48f391b1d3d8f0" title="Set current mount type.">setMountMode</a>(MountEquatorial); <span class="keywordflow">else</span> <a class="code" href="classStelNavigator.html#219da531c95a30cebd48f391b1d3d8f0" title="Set current mount type.">setMountMode</a>(MountAltAzimuthal);}
<a name="l00159"></a><a class="code" href="classStelNavigator.html#d2dcb016c9cbb51452f304e982fdd110">00159</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d2dcb016c9cbb51452f304e982fdd110" title="Define whether we should use equatorial mount or altazimuthal.">setEquatorialMount</a>(<span class="keywordtype">bool</span> b) {<a class="code" href="classStelNavigator.html#219da531c95a30cebd48f391b1d3d8f0" title="Set current mount type.">setMountMode</a>(b ? MountEquatorial : MountAltAzimuthal);}
<a name="l00160"></a>00160     
<a name="l00162"></a><a class="code" href="classStelNavigator.html#79ad4821ef045bb2080b38abb4bd0a4f">00162</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#79ad4821ef045bb2080b38abb4bd0a4f" title="Set the current date in Julian Day.">setJDay</a>(<span class="keywordtype">double</span> JD) {JDay=JD;}
<a name="l00164"></a><a class="code" href="classStelNavigator.html#690b0e219e82670eb206d8afa15bc164">00164</a>     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#690b0e219e82670eb206d8afa15bc164" title="Get the current date in Julian Day.">getJDay</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> JDay;}
<a name="l00165"></a>00165     
<a name="l00167"></a><a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149">00167</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>(<span class="keywordtype">double</span> ts) {timeSpeed=ts;}
<a name="l00169"></a><a class="code" href="classStelNavigator.html#af4e1bba5df094d31615ea0bcee950ee">00169</a>     <span class="keywordtype">double</span> <a class="code" href="classStelNavigator.html#af4e1bba5df094d31615ea0bcee950ee" title="Get time speed in JDay/sec.">getTimeRate</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> timeSpeed;}
<a name="l00170"></a>00170     
<a name="l00172"></a>00172     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#4b2a101cc4bbe8794c4c82766ff90b7d" title="Increase the time speed.">increaseTimeSpeed</a>();
<a name="l00174"></a>00174     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#23975c049321496f93f44591150bad93" title="Decrease the time speed.">decreaseTimeSpeed</a>();
<a name="l00175"></a>00175     
<a name="l00177"></a><a class="code" href="classStelNavigator.html#3e65670b0d93853ad963642f4aa17d2c">00177</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#3e65670b0d93853ad963642f4aa17d2c" title="Set time speed to 0, i.e. freeze the passage of simulation time.">setZeroTimeSpeed</a>() {<a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>(0);}
<a name="l00179"></a><a class="code" href="classStelNavigator.html#d4d4729c67323a6517f1d22eea7874a7">00179</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d4d4729c67323a6517f1d22eea7874a7" title="Set real time speed, i.e. 1 sec/sec.">setRealTimeSpeed</a>() {<a class="code" href="classStelNavigator.html#60bbbb07983e22927caaed9a9d3f8149" title="Set time speed in JDay/sec.">setTimeRate</a>(JD_SECOND);}
<a name="l00181"></a><a class="code" href="classStelNavigator.html#434ea0ef0ae4d7f80fa33d6b5311569c">00181</a>     <span class="keywordtype">bool</span> <a class="code" href="classStelNavigator.html#434ea0ef0ae4d7f80fa33d6b5311569c" title="Get whether it is real time speed, i.e. 1 sec/sec.">getRealTimeSpeed</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> (fabs(timeSpeed-JD_SECOND)&lt;0.0000001);}
<a name="l00182"></a>00182     
<a name="l00184"></a>00184     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#870ecd4173947ca7dfcff953b077ce55" title="Set stellarium time to current real world time.">setTimeNow</a>();
<a name="l00186"></a>00186     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7faf44889873e36cbfe36d1ceff21071" title="Set the time to some value, leaving the day the same.">setTodayTime</a>(<span class="keyword">const</span> QTime&amp; target);
<a name="l00188"></a>00188     <span class="keywordtype">bool</span> <a class="code" href="classStelNavigator.html#d24f40823ffca69b3d053eafed9c7e1f" title="Get wether the current stellarium time is the real world time.">getIsTimeNow</a>() <span class="keyword">const</span>;
<a name="l00189"></a>00189 
<a name="l00191"></a><a class="code" href="classStelNavigator.html#fb4f17c48016575a5755547bc0998602">00191</a>     QTime <a class="code" href="classStelNavigator.html#fb4f17c48016575a5755547bc0998602" title="get the initial &amp;quot;today time&amp;quot; from the config file">getInitTodayTime</a>(<span class="keywordtype">void</span>) {<span class="keywordflow">return</span> initTodayTime;}
<a name="l00193"></a><a class="code" href="classStelNavigator.html#1e337ff065c2dada74a4332d0fe5eb99">00193</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#1e337ff065c2dada74a4332d0fe5eb99" title="set the initial &amp;quot;today time&amp;quot; from the config file">setInitTodayTime</a>(<span class="keyword">const</span> QTime&amp; t) {initTodayTime=t;}
<a name="l00195"></a>00195     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#c337491dda46cc804eeea74643c0d6af" title="Set the preset sky time from a JD.">setPresetSkyTime</a>(QDateTime dt);
<a name="l00196"></a>00196 
<a name="l00198"></a><a class="code" href="classStelNavigator.html#bbe44791cf02b8f38f5df8603c52fdb4">00198</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#bbe44791cf02b8f38f5df8603c52fdb4" title="Add one [Earth, solar] hour to the current simulation time.">addHour</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(0.04166666666666666667);}
<a name="l00200"></a><a class="code" href="classStelNavigator.html#d195e13eadf8cd706e0d05f3eb1bfdd9">00200</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#d195e13eadf8cd706e0d05f3eb1bfdd9" title="Add one [Earth, solar] day to the current simulation time.">addDay</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(1.0);}
<a name="l00202"></a><a class="code" href="classStelNavigator.html#2b7fc996a1faaeeabd8996e97d52205e">00202</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#2b7fc996a1faaeeabd8996e97d52205e" title="Add one [Earth, solar] week to the current simulation time.">addWeek</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(7.0);}
<a name="l00203"></a>00203 
<a name="l00206"></a><a class="code" href="classStelNavigator.html#029792e6c9267486d3753d8a7ca1b4cc">00206</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#029792e6c9267486d3753d8a7ca1b4cc" title="Add one sidereal day to the simulation time.">addSiderealDay</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(1.0);}
<a name="l00209"></a><a class="code" href="classStelNavigator.html#9474b9310bdc791213ea9c75b806e1e4">00209</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#9474b9310bdc791213ea9c75b806e1e4" title="Add one sidereal week to the simulation time.">addSiderealWeek</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(7.0);}
<a name="l00210"></a>00210 
<a name="l00212"></a><a class="code" href="classStelNavigator.html#997867487612d08a9cbabf17e442da34">00212</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#997867487612d08a9cbabf17e442da34" title="Subtract one [Earth, solar] hour to the current simulation time.">subtractHour</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(-0.04166666666666666667);}
<a name="l00214"></a><a class="code" href="classStelNavigator.html#9c94b3567f456eee8744f22d8da21833">00214</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#9c94b3567f456eee8744f22d8da21833" title="Subtract one [Earth, solar] day to the current simulation time.">subtractDay</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(-1.0);}
<a name="l00216"></a><a class="code" href="classStelNavigator.html#7a5000c494a0682a6cd5aff6e4527ac6">00216</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7a5000c494a0682a6cd5aff6e4527ac6" title="Subtract one [Earth, solar] week to the current simulation time.">subtractWeek</a>() {<a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(-7.0);}
<a name="l00217"></a>00217 
<a name="l00220"></a><a class="code" href="classStelNavigator.html#4045ae6cef6c5c40a25b081425164715">00220</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#4045ae6cef6c5c40a25b081425164715" title="Subtract one sidereal week to the simulation time.">subtractSiderealDay</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(-1.0);}
<a name="l00223"></a><a class="code" href="classStelNavigator.html#78fcf4ecc7acc0737581ec9c3e76ebc3">00223</a>     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#78fcf4ecc7acc0737581ec9c3e76ebc3" title="Subtract one sidereal week to the simulation time.">subtractSiderealWeek</a>() {<a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(-7.0);}
<a name="l00224"></a>00224 
<a name="l00227"></a>00227     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#7fbc8b26890d553980af6edfaecf67e7" title="Add a number of Earth Solar days to the current simulation time.">addSolarDays</a>(<span class="keywordtype">double</span> d);
<a name="l00231"></a>00231     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#f069b8312c5f3f04cb3158821e370438" title="Add a number of sidereal days to the current simulation time, based on the observer...">addSiderealDays</a>(<span class="keywordtype">double</span> d);
<a name="l00232"></a>00232     
<a name="l00235"></a>00235     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#254eb8c9071169a2820b069f44c0ba31" title="Move the observer to the selected object.">moveObserverToSelected</a>(<span class="keywordtype">void</span>);
<a name="l00236"></a>00236     
<a name="l00238"></a><a class="code" href="classStelNavigator.html#aa88a1411004c31d0fff5d318fb2688a">00238</a>     QString <a class="code" href="classStelNavigator.html#aa88a1411004c31d0fff5d318fb2688a" title="Get the location used by default at startup.">getDefaultLocationID</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> defaultLocationID;}
<a name="l00240"></a>00240     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#9e90726e1cc671a03957eb2abb96f955" title="Set the location to use by default at startup.">setDefaultLocationID</a>(<span class="keyword">const</span> QString&amp; <span class="keywordtype">id</span>);
<a name="l00241"></a>00241     
<a name="l00244"></a>00244     <span class="keywordtype">void</span> <a class="code" href="classStelNavigator.html#ac16064335e0061f5ee65d7a7f3db299" title="Sets the initial direction of view to the current altitude and azimuth.">setInitViewDirectionToCurrent</a>(<span class="keywordtype">void</span>);
<a name="l00245"></a>00245     
<a name="l00246"></a>00246 <span class="keyword">private</span>:
<a name="l00248"></a>00248     <span class="keywordtype">void</span> updateModelViewMat(<span class="keywordtype">void</span>);
<a name="l00249"></a>00249     
<a name="l00250"></a>00250     <span class="comment">// Matrices used for every coordinate transfo</span>
<a name="l00251"></a>00251     <a class="code" href="classMatrix4.html">Mat4d</a> matHeliocentricEclipticToAltAz;   <span class="comment">// Transform from heliocentric ecliptic (Vsop87) to observer-centric altazimuthal coordinate</span>
<a name="l00252"></a>00252     <a class="code" href="classMatrix4.html">Mat4d</a> matAltAzToHeliocentricEcliptic;   <span class="comment">// Transform from observer-centric altazimuthal coordinate to heliocentric ecliptic (Vsop87)</span>
<a name="l00253"></a>00253     <a class="code" href="classMatrix4.html">Mat4d</a> matAltAzToEquinoxEqu;             <span class="comment">// Transform from observer-centric altazimuthal coordinate to Earth Equatorial</span>
<a name="l00254"></a>00254     <a class="code" href="classMatrix4.html">Mat4d</a> matEquinoxEquToAltAz;             <span class="comment">// Transform from observer-centric altazimuthal coordinate to Earth Equatorial</span>
<a name="l00255"></a>00255     <a class="code" href="classMatrix4.html">Mat4d</a> matHeliocentricEclipticToEquinoxEqu;<span class="comment">// Transform from heliocentric ecliptic (Vsop87) to earth equatorial coordinate</span>
<a name="l00256"></a>00256     <a class="code" href="classMatrix4.html">Mat4d</a> matEquinoxEquToJ2000;
<a name="l00257"></a>00257     <a class="code" href="classMatrix4.html">Mat4d</a> matJ2000ToEquinoxEqu;
<a name="l00258"></a>00258     <a class="code" href="classMatrix4.html">Mat4d</a> matJ2000ToAltAz;
<a name="l00259"></a>00259     
<a name="l00260"></a>00260     <a class="code" href="classMatrix4.html">Mat4d</a> matAltAzModelView;                    <span class="comment">// Modelview matrix for observer-centric altazimuthal drawing</span>
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="comment">// Vision variables</span>
<a name="l00263"></a>00263     <span class="comment">// Viewing direction in altazimuthal and equatorial coordinates</span>
<a name="l00264"></a>00264     <a class="code" href="classVector3.html">Vec3d</a> altAzVisionDirection, earthEquVisionDirection, J2000EquVisionDirection;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="comment">// Time variable</span>
<a name="l00267"></a>00267     <span class="keywordtype">double</span> timeSpeed;        <span class="comment">// Positive : forward, Negative : Backward, 1 = 1sec/sec</span>
<a name="l00268"></a>00268     <span class="keywordtype">double</span> JDay;              <span class="comment">// Curent time in Julian day</span>
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     <span class="keywordtype">double</span> presetSkyTime;
<a name="l00271"></a>00271     QTime initTodayTime;
<a name="l00272"></a>00272     QString startupTimeMode;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     <span class="comment">// The ID of the default startup location</span>
<a name="l00275"></a>00275     QString defaultLocationID;
<a name="l00276"></a>00276             
<a name="l00277"></a>00277     <span class="comment">// Position variables</span>
<a name="l00278"></a>00278     <a class="code" href="classStelObserver.html" title="Should be renamed as PlanetBasedObserver and derive from a more generical StelObserver...">StelObserver</a>* position;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <a class="code" href="classVector3.html">Vec3d</a> initViewPos;        <span class="comment">// Default viewing direction</span>
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <span class="comment">// defines if view corrects for horizon, or uses equatorial coordinates</span>
<a name="l00283"></a>00283     ViewingModeType viewingMode;
<a name="l00284"></a>00284 };
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="preprocessor">#endif // _STELNAVIGATOR_HPP_</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 2 17:23:47 2009 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
