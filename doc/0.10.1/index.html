<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: Stellarium Developers Documentation</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.5 -->
<div class="contents">
<h1>Stellarium Developers Documentation</h1>
<p>
<h3 align="center">0.10.1 </h3><h2><a class="anchor" name="intro_sec">
Introduction</a></h2>
This documentation concerns the inner workings of Stellarium. This documentation is targetted at developers of scripts, plugins and the core program.<h2><a class="anchor" name="architecture_sec">
Program Architecture</a></h2>
The code of Stellarium is split into several main blocks: <ul>
<li>
the main loop and main widget classes <a class="el" href="classStelMainWindow.html" title="Reimplement a QMainWindow for Stellarium.">StelMainWindow</a>, <a class="el" href="classStelMainGraphicsView.html" title="Reimplement a QGraphicsView for Stellarium.">StelMainGraphicsView</a> and <a class="el" href="classStelAppGraphicsScene.html" title="A special QGraphicsScene for use in Stellarium.">StelAppGraphicsScene</a>. Those classes have a single instance which is created at startup by the the main() function. They perform various tasks such as the creation of the main program window and openGL context, the creation of the stellarium core, the creation of the GUI. After initialization, they manage user's input event propagation and event loop. There are heavily based on Qt features. </li>
<li>
the core which provides a number of generic services and features to the other components. The main class is the <a class="el" href="classStelApp.html" title="Singleton main Stellarium application class.">StelApp</a> singleton class which is used everywhere in the code to access other elements. It is the <a class="el" href="classStelApp.html" title="Singleton main Stellarium application class.">StelApp</a> instance which creates all the main core services and modules at initialization. Example services are OpenGL textures management with the <a class="el" href="classStelTextureMgr.html" title="Manage textures loading and manipulation.">StelTextureMgr</a>, font management with the <a class="el" href="classStelFontMgr.html" title="Manage fonts for Stellarium.">StelFontMgr</a>, sky images management (images which have a fixed position in the sky) with the <a class="el" href="classStelSkyImageMgr.html" title="Manage the sky background images, including DSS and deep sky objects images.">StelSkyImageMgr</a> etc.. Two especially important manager classes (the ones with the "Mgr" suffix) are the <a class="el" href="classStelModuleMgr.html" title="Manage a collection of StelModules including both core and plugin modules.">StelModuleMgr</a> and <a class="el" href="classStelCore.html" title="Main class for Stellarium core processing.">StelCore</a> classes: the first one manages the collection of <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> instances which are registered in the program (see next point for more info on what a <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> is). The second one provides performance critical features for rendering various elements using openGL, or for computing coordinate transformation and other mathematical services. </li>
<li>
a collection of <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> instances which display the main elements of the program such as planets and stars. Each <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> should be registered to the <a class="el" href="classStelModuleMgr.html" title="Manage a collection of StelModules including both core and plugin modules.">StelModuleMgr</a>. Because many components of Stellarium derive from the <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> class, it is possible for the main loop to treat them generically by calling their standard methods such <a class="el" href="classStelModule.html#029f960090bf001e4e9eff0d95c4f706" title="Update the module with respect to the time.">StelModule::update()</a> and <a class="el" href="classStelModule.html#822643e3217746275cc48a8061c1a383" title="Execute all the drawing functions for this module.">StelModule::draw()</a> at each program iteration. It also allows other program components to access them by name. <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> can also be loaded dynamically by Stellarium, which is the standard way of creating <a class="el" href="plugins.html">Plugins</a>. </li>
<li>
the Graphical User Interface (<a class="el" href="classStelGui.html" title="Main class for the GUI based on QGraphicView.">StelGui</a>). It is based on styled Qt widgets which are rendered directly in the openGL window. Users actions trigger signals which are connected to core and StelModules slots. </li>
<li>
the script engine (<a class="el" href="classStelScriptMgr.html" title="Manage scripting in Stellarium.">StelScriptMgr</a>) allows scripts to calls slots from the core and StelModules slots. </li>
</ul>
<div align="center">
<img src="stellarium-architecture.png" alt="stellarium-architecture.png">
</div>
<h2><a class="anchor" name="intro_scripts">
Scripting API</a></h2>
Stellarium uses the <a href="http://doc.trolltech.com/4.3/qtscript.html">QT Scripting Engine</a>. The basic scripting language is <a href="http://en.wikipedia.org/wiki/ECMAScript">ECMAScript</a>, which is related to Javascript.<p>
Authors of Stellarium scripts may use application specific functions from the following places:<p>
<ul>
<li>The public slots in the class <a class="el" href="classStelMainScriptAPI.html" title="Provide script API for Stellarium global functions.">StelMainScriptAPI</a>. These are available in the scripting engine via the object named "core". For example, to access <a class="el" href="classStelMainScriptAPI.html#dd982ce88fd7aec6f61935cf7da12336" title="Pauses the script for t seconds.">StelMainScriptAPI::wait()</a> from a script, the author would use the scripting command: core.wait(...);</li></ul>
<p>
<ul>
<li>The public slots for each <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a> are available in the scripting engine via an object with the same name as the corresponding <a class="el" href="classStelModule.html" title="This is the common base class for all the main components of stellarium.">StelModule</a>. For example, to access <a class="el" href="classLandscapeMgr.html#f59925aec15809a5a8ccaaad5de622c8" title="Set flag for displaying Atmosphere.">LandscapeMgr::setFlagAtmosphere()</a>, a script author would use the scripting command: <a class="el" href="classLandscapeMgr.html#f59925aec15809a5a8ccaaad5de622c8" title="Set flag for displaying Atmosphere.">LandscapeMgr.setFlagAtmosphere</a>(...);</li></ul>
<p>
<div align="center">
<img src="stellarium-logo.png" alt="stellarium-logo.png">
</div>
 </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Feb 2 17:23:47 2009 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
