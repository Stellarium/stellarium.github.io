<?xml version="1.0" encoding="utf-8"?>
<html>
    <head>
      <title>Stellarium: StelDownloadMgr Class Reference</title>
      <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
    </HEAD>
    <BODY BGCOLOR="#FFFFFF">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://www.stellarium.org"><img src="stellarium-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td>
<td class="postheader" valign="center">
 <a href="index.html">Home</a>&nbsp;&middot;
 <a href="namespaces.html">All&nbsp;Namespaces</a>&nbsp;&middot;
 <a href="classes.html">All&nbsp;Classes</a>&nbsp;&middot;
 <a href="functions.html">Functions</a>&nbsp;&middot;
 <a href="codingStyle.html">Coding Style</a>&nbsp;&middot;
 <a href="plugins.html">Plugins</a>&nbsp;&middot;
 <a href="fileStructure.html">File Structure</a>
</td>
<td align="right" valign="top" width="230"></td>
</tr>
</table>
<!-- Generated by Doxygen 1.5.5 -->
<div class="contents">
<h1>StelDownloadMgr Class Reference</h1><!-- doxytag: class="StelDownloadMgr" -->Used to download files from the Internet.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="StelDownloadMgr_8hpp-source.html">StelDownloadMgr.hpp</a>&gt;</code>
<p>

<p>
<a href="classStelDownloadMgr-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Signals</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#0ac9e506da0d0b972643bf271efde7ac">finished</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#c6e73954aaa6727815ed7153ed7a3c89">error</a> (QNetworkReply::NetworkError code, QString errorString)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#6430d9ab2be99b81cca90bc2dccf9e84">verifying</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#9d36528f8bd55db2e8f66e1c5555f16a">badChecksum</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#369c068fff26bf35252f834f671e8185">get</a> (const QString &amp;url, const QString &amp;filePath, quint16 csum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d68da00664f3542ea4f1382479d6b990"></a><!-- doxytag: member="StelDownloadMgr::get" ref="d68da00664f3542ea4f1382479d6b990" args="(const QString &amp;url, const QString &amp;filePath)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>get</b> (const QString &amp;url, const QString &amp;filePath)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#11e04c0b5d15aa71bb6ac47bc80a90f7">abort</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#60e3bec7496cb44b56dc7b5b39298440">url</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#05e84a55a122c4b29af3e80db31e4509">errorString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">QString&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#997d968a9a496017136fe17661c2d772">name</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#87498bb28d421732d368f229836e02c7">blockQuit</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#efaf9212f9fb828f36a750eccdcf2083">setBlockQuit</a> (bool b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#d81ca8a1735dd02da824f90f2508557a">setBarVisible</a> (bool b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#2cd47dc8d4ffaed2a7d1ee00b0f56c71">setBarFormat</a> (const QString &amp;format)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStelDownloadMgr.html#1567c74cce8a17455258e054dc761fca">isDownloading</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Used to download files from the Internet. 
<p>
QNetworkReply is used internally, although StelDownloadMgr's signal behavior is different (particularly in error handling). Settings are remembered between downloads. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="369c068fff26bf35252f834f671e8185"></a><!-- doxytag: member="StelDownloadMgr::get" ref="369c068fff26bf35252f834f671e8185" args="(const QString &amp;url, const QString &amp;filePath, quint16 csum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::get           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">quint16&nbsp;</td>
          <td class="paramname"> <em>csum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fetch a remote URL into a local file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>url</em>&nbsp;</td><td>the URL of the remote file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filePath</em>&nbsp;</td><td>the path of the local file name which is to be created. If a file already exists at filePath, it will be overwritten. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>csum</em>&nbsp;</td><td>(optional) the expected checksum of the downloaded file, as returned by <code>qChecksum(const char* data, uint len)</code>. If not provided, the downloaded file will not be verified. </td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><code>qChecksum(const char* data, uint len)</code> at <a href="http://doc.trolltech.com/4.4/qbytearray.html#qChecksum">http://doc.trolltech.com/4.4/qbytearray.html#qChecksum</a> <br>
 <a class="el" href="classStelDownloadMgr.html#0ac9e506da0d0b972643bf271efde7ac" title="Emitted when the file is completely downloaded and successfully verified (this differs...">finished()</a> <br>
 <a class="el" href="classStelDownloadMgr.html#c6e73954aaa6727815ed7153ed7a3c89" title="Emitted whenever the internal QNetworkReply object emits an error, except that QNetworkReply::Operat...">error(QNetworkReply::NetworkError, QString)</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="11e04c0b5d15aa71bb6ac47bc80a90f7"></a><!-- doxytag: member="StelDownloadMgr::abort" ref="11e04c0b5d15aa71bb6ac47bc80a90f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::abort           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Abort the download and remove the partially downloaded file. 
<p>

</div>
</div><p>
<a class="anchor" name="60e3bec7496cb44b56dc7b5b39298440"></a><!-- doxytag: member="StelDownloadMgr::url" ref="60e3bec7496cb44b56dc7b5b39298440" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString StelDownloadMgr::url           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the URL of the remote file. 
<p>

</div>
</div><p>
<a class="anchor" name="05e84a55a122c4b29af3e80db31e4509"></a><!-- doxytag: member="StelDownloadMgr::errorString" ref="05e84a55a122c4b29af3e80db31e4509" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString StelDownloadMgr::errorString           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a description of the last error that occurred. 
<p>

</div>
</div><p>
<a class="anchor" name="997d968a9a496017136fe17661c2d772"></a><!-- doxytag: member="StelDownloadMgr::name" ref="997d968a9a496017136fe17661c2d772" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString StelDownloadMgr::name           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the local file name. 
<p>

</div>
</div><p>
<a class="anchor" name="87498bb28d421732d368f229836e02c7"></a><!-- doxytag: member="StelDownloadMgr::blockQuit" ref="87498bb28d421732d368f229836e02c7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool StelDownloadMgr::blockQuit           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Whether or not to pop up a warning box if the user tries to quit. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><code>true</code> if a download is in progress <em>and</em> <code>setBlockQuit(true)</code> was called. Otherwise, returns <code>false</code>. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classStelDownloadMgr.html#efaf9212f9fb828f36a750eccdcf2083" title="If set to true and the user tries to quit Stellarium while downloading, a warning...">setBlockQuit(bool)</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="efaf9212f9fb828f36a750eccdcf2083"></a><!-- doxytag: member="StelDownloadMgr::setBlockQuit" ref="efaf9212f9fb828f36a750eccdcf2083" args="(bool b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::setBlockQuit           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>b</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If set to <code>true</code> and the user tries to quit Stellarium while downloading, a warning box will pop up. 
<p>
Default is <code>false</code>. <dl class="note" compact><dt><b>Note:</b></dt><dd>Calling <code>setBlockQuit(true)</code> does not guarantee that <a class="el" href="classStelDownloadMgr.html#87498bb28d421732d368f229836e02c7" title="Whether or not to pop up a warning box if the user tries to quit.">blockQuit()</a> will always return <code>true</code>. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classStelDownloadMgr.html#87498bb28d421732d368f229836e02c7" title="Whether or not to pop up a warning box if the user tries to quit.">blockQuit()</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="d81ca8a1735dd02da824f90f2508557a"></a><!-- doxytag: member="StelDownloadMgr::setBarVisible" ref="d81ca8a1735dd02da824f90f2508557a" args="(bool b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::setBarVisible           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>b</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If set to <code>true</code>, a progress bar will appear in the lower right-hand corner of the screen. 
<p>
Default is <code>true</code>. 
</div>
</div><p>
<a class="anchor" name="2cd47dc8d4ffaed2a7d1ee00b0f56c71"></a><!-- doxytag: member="StelDownloadMgr::setBarFormat" ref="2cd47dc8d4ffaed2a7d1ee00b0f56c71" args="(const QString &amp;format)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::setBarFormat           </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>format</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the text format of the progress bar. 
<p>
Default is <code>"%p%"</code>. <dl class="see" compact><dt><b>See also:</b></dt><dd><code>QProgressBar::setFormat(const QString&amp; format)</code> at <a href="http://doc.trolltech.com/4.4/qprogressbar.html#format-prop">http://doc.trolltech.com/4.4/qprogressbar.html#format-prop</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="1567c74cce8a17455258e054dc761fca"></a><!-- doxytag: member="StelDownloadMgr::isDownloading" ref="1567c74cce8a17455258e054dc761fca" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool StelDownloadMgr::isDownloading           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find out if the download is still in progress. 
<p>

</div>
</div><p>
<a class="anchor" name="0ac9e506da0d0b972643bf271efde7ac"></a><!-- doxytag: member="StelDownloadMgr::finished" ref="0ac9e506da0d0b972643bf271efde7ac" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::finished           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Emitted when the file is completely downloaded and successfully verified (this differs from <code>QNetworkReply</code>). 
<p>
Do not try to open the destination file before this signal is emitted. <dl class="note" compact><dt><b>Note:</b></dt><dd>"Completely downloaded" depends on whatever the remote server reports the file size as. If <code>QNetworkReply</code> emits its <code>finished</code>() signal and we have no info about the total file size, it is assumed to be complete. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c6e73954aaa6727815ed7153ed7a3c89"></a><!-- doxytag: member="StelDownloadMgr::error" ref="c6e73954aaa6727815ed7153ed7a3c89" args="(QNetworkReply::NetworkError code, QString errorString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::error           </td>
          <td>(</td>
          <td class="paramtype">QNetworkReply::NetworkError&nbsp;</td>
          <td class="paramname"> <em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&nbsp;</td>
          <td class="paramname"> <em>errorString</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Emitted whenever the internal <code>QNetworkReply</code> object emits an error, except that <code>QNetworkReply::OperationCanceledError</code> is ignored. 
<p>
The partially downloaded file is removed before emitting this signal. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>code</em>&nbsp;</td><td>the error code from <code>QNetworkReply::error()</code> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>errorString</em>&nbsp;</td><td>the error string from <code>QIODevice::errorString()</code> </td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><code>QNetworkReply::NetworkError</code> at <a href="http://doc.trolltech.com/4.4/qnetworkreply.html#NetworkError-enum">http://doc.trolltech.com/4.4/qnetworkreply.html#NetworkError-enum</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="6430d9ab2be99b81cca90bc2dccf9e84"></a><!-- doxytag: member="StelDownloadMgr::verifying" ref="6430d9ab2be99b81cca90bc2dccf9e84" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::verifying           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Emitted when verifying a checksum. 
<p>

</div>
</div><p>
<a class="anchor" name="9d36528f8bd55db2e8f66e1c5555f16a"></a><!-- doxytag: member="StelDownloadMgr::badChecksum" ref="9d36528f8bd55db2e8f66e1c5555f16a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StelDownloadMgr::badChecksum           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Emitted if the provided checksum and downloaded file checksum do not match. 
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Mar 9 16:16:16 2009 for Stellarium by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
